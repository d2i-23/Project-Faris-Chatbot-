{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/cleyc/OneDrive/Documents/RR/RRWebsiteRenewed/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/cleyc/OneDrive/Documents/RR/RRWebsiteRenewed/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/cleyc/OneDrive/Documents/RR/RRWebsiteRenewed/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/cleyc/OneDrive/Documents/RR/RRWebsiteRenewed/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../css/Chat.css';import{useState,useEffect}from'react';import DOMPurify from'dompurify';import Animation from'./Animation';// Initialization code for Live2DCubismFramework\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(){//const [message, addMessage] = useState([])\n//let messageList = [];\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),chatHTML=_useState2[0],update=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),assistantHTML=_useState4[0],update2=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],addKey=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),active=_useState8[0],isActive=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),realMessage=_useState10[0],needResponse=_useState10[1];var setMessage=function setMessage(event){event.preventDefault();var date=new Date();var dictionary={'date':\"\".concat(date.getMonth(),\"/\").concat(date.getDate()),'time':\"\".concat(date.getHours(),\":\").concat(date.getMinutes()<10?'0':'').concat(date.getMinutes()),'year':\"\".concat(date.getFullYear()),'role':'User','message':DOMPurify.sanitize(message)};update([].concat(_toConsumableArray(chatHTML),[dictionary]));addKey('');document.getElementById('messageBox').value='';needResponse(true);//console.log(chatHTML);\n};var addKeyStroke=function addKeyStroke(event){isActive(true);setTimeout(function(){isActive(false);},500);// Adjust the delay duration as needed\naddKey(event.target.value);var messageBox=document.getElementById('messageBox');messageBox.addEventListener('input',function(){this.style.height='auto';// Reset the height to auto\nvar height=this.scrollHeight;if(height<75){this.style.height=height+'px';}else{this.style.height='75px';}});};var postData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,_message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(chatHTML.length!==0)){_context.next=8;break;}_context.next=3;return fetch('/returnResponse',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(chatHTML[chatHTML.length-1])});case 3:response=_context.sent;_context.next=6;return response.json();case 6:_message=_context.sent;update2([].concat(_toConsumableArray(assistantHTML),[_message]));case 8:;case 9:case\"end\":return _context.stop();}},_callee);}));return function postData(){return _ref.apply(this,arguments);};}();useEffect(function(){if(realMessage){postData();needResponse(false);}},[chatHTML]);useEffect(function(){},[assistantHTML]);return/*#__PURE__*/_jsxs(\"div\",{class:\"overallContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"chatBox\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:setMessage,onChange:addKeyStroke,children:[/*#__PURE__*/_jsx(\"button\",{id:\"chatEnter\",type:\"submit\",children:\">>>\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{class:active?'active':'',type:\"text\",id:\"messageBox\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"chatBorderTop\",children:/*#__PURE__*/_jsx(\"div\",{id:\"chat\",children:chatHTML.map(function(items,index){return/*#__PURE__*/_jsxs(\"div\",{class:\"chatDialogue\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"timeStampInclude\",children:[chatHTML[index]['date'],\" | \",chatHTML[index]['time'],/*#__PURE__*/_jsx(\"div\",{class:\"chatLogUser\",children:/*#__PURE__*/_jsx(\"h3\",{children:chatHTML[index]['message']})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"chatDialogue reply\",children:/*#__PURE__*/_jsx(\"div\",{class:\"chatLogAssistant\",children:/*#__PURE__*/_jsx(\"h3\",{children:assistantHTML[index]!==undefined?assistantHTML[index]['message']:/*#__PURE__*/_jsxs(\"div\",{class:\"dotContainer\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"dot1\"}),/*#__PURE__*/_jsx(\"div\",{id:\"dot2\"}),/*#__PURE__*/_jsx(\"div\",{id:\"dot3\"})]})})})})]});})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{class:active?'active':'',children:\"Live Chat\"})]}),/*#__PURE__*/_jsx(Animation,{data:assistantHTML.length!==0?assistantHTML[assistantHTML.length-1]:\"\"})]});}// /<!--<Animation data = {(assistantHTML.length !== 0) ? assistantHTML[assistantHTML.length - 1] : \"\"}/>--?\nexport default Chat;","map":{"version":3,"names":["useState","useEffect","DOMPurify","Animation","jsx","_jsx","jsxs","_jsxs","Chat","_useState","_useState2","_slicedToArray","chatHTML","update","_useState3","_useState4","assistantHTML","update2","_useState5","_useState6","message","addKey","_useState7","_useState8","active","isActive","_useState9","_useState10","realMessage","needResponse","setMessage","event","preventDefault","date","Date","dictionary","concat","getMonth","getDate","getHours","getMinutes","getFullYear","sanitize","_toConsumableArray","document","getElementById","value","addKeyStroke","setTimeout","target","messageBox","addEventListener","style","height","scrollHeight","postData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","_message","wrap","_callee$","_context","prev","next","length","fetch","method","headers","body","JSON","stringify","sent","json","stop","apply","arguments","class","children","onSubmit","onChange","id","type","map","items","index","undefined","data"],"sources":["C:/Users/cleyc/OneDrive/Documents/RR/RRWebsiteRenewed/my-app/src/js/Chat.js"],"sourcesContent":["import '../css/Chat.css';\nimport {useState, useEffect} from 'react';\nimport DOMPurify from 'dompurify';\nimport Animation from './Animation';\n\n\n// Initialization code for Live2DCubismFramework\n\nfunction Chat(){\n  //const [message, addMessage] = useState([])\n\n  //let messageList = [];\n  const[chatHTML, update] = useState([]);\n  const[assistantHTML, update2] = useState([]);\n  const [message, addKey] = useState('');\n  const [active, isActive] = useState(false);\n  const [realMessage, needResponse] = useState(false)\n \n  const setMessage = (event) => {\n    event.preventDefault();\n    const date = new Date();\n\n    var dictionary = {'date': `${date.getMonth()}/${date.getDate()}`, \n                      'time': `${date.getHours()}:${date.getMinutes() < 10 ? '0' : ''}${date.getMinutes()}`, \n                      'year': `${date.getFullYear()}`,\n                      'role': 'User',\n                      'message': DOMPurify.sanitize(message)};\n\n\n    update([...chatHTML, dictionary])\n    \n    addKey('');\n    document.getElementById('messageBox').value = '';\n\n    needResponse(true);\n    //console.log(chatHTML);\n\n  }\n\n  const addKeyStroke = (event) => {\n\n    isActive(true);\n    setTimeout(() => {isActive(false);}, 500); // Adjust the delay duration as needed\n    addKey(event.target.value);\n    const messageBox = document.getElementById('messageBox');\n    messageBox.addEventListener('input', function() {\n      this.style.height = 'auto'; // Reset the height to auto\n      var height = this.scrollHeight;\n\n      if (height < 75){\n        this.style.height = height + 'px'\n      }\n      else{\n        this.style.height = '75px'\n      }\n    })\n\n  }\n\n  const postData = async () => {\n    if (chatHTML.length !== 0){\n      const response = await fetch('/returnResponse', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(chatHTML[chatHTML.length - 1]),\n      }\n      );\n\n      const message = await response.json();\n\n      update2([...assistantHTML, message])\n  };\n  } \n\n  useEffect(() => {\n    if (realMessage){\n      postData();\n      needResponse(false);\n    } }, [chatHTML]);\n\n  useEffect(() => {}, [assistantHTML])\n\n  return (\n\n    <div class = \"overallContainer\"> \n      \n      <div class = 'chatBox'>\n          <br></br>\n          <form onSubmit = {setMessage} onChange = {addKeyStroke}>\n            <button id = 'chatEnter' type = 'submit'>>>></button>\n            <br/>\n            <textarea class = {active ? 'active' : ''} type = \"text\" id = 'messageBox'></textarea>\n\n          </form>\n          <div id = 'chatBorderTop'>\n          <div id = 'chat'>  \n            {chatHTML.map((items, index) => (\n            <div class = \"chatDialogue\">\n              <div class = \"timeStampInclude\">{chatHTML[index]['date']} | {chatHTML[index]['time']}\n               <div class = \"chatLogUser\"><h3>{chatHTML[index]['message']}</h3></div>\n              </div>\n              <div class = \"chatDialogue reply\">\n                <div class = \"chatLogAssistant\"><h3>{assistantHTML[index] !== undefined  ? assistantHTML[index]['message'] : \n                (<div class = \"dotContainer\">\n                  <div id = \"dot1\"></div>\n                  <div id = \"dot2\"></div>\n                  <div id = \"dot3\"></div>\n                </div>)\n                \n                }</h3></div>\n              </div>\n            </div> ))}\n          </div>\n          \n          </div>\n          <br></br>\n          <h2 class = {active ? 'active' : ''} >Live Chat</h2>\n        </div>\n        \n\n        <Animation data = {(assistantHTML.length !== 0) ? assistantHTML[assistantHTML.length - 1] : \"\"}/>\n    </div>\n\n  )\n}\n// /<!--<Animation data = {(assistantHTML.length !== 0) ? assistantHTML[assistantHTML.length - 1] : \"\"}/>--?\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}