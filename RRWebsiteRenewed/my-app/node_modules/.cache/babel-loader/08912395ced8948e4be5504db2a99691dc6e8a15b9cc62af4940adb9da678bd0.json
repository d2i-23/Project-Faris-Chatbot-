{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cleyc\\\\OneDrive\\\\Documents\\\\RR\\\\RRWebsiteRenewed\\\\my-app\\\\src\\\\js\\\\ChatMessage.js\",\n  _s = $RefreshSig$();\nimport '../css/Chat.css';\nimport { useState, useEffect, useRef } from 'react';\nimport PopUp from './Popup';\nimport DOMPurify from 'dompurify';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { dark } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction codeBlockOutput(child) {\n  const determineLanguage = code => {\n    let thirdBackTick = code.search('```') + 2;\n    let firstEnter = code.search('\\n');\n    let language = code.substring(thirdBackTick + 1, firstEnter);\n    return language;\n  };\n  const searchCodeList = text => {\n    let currentText = text;\n    let locations = [];\n    let index = currentText.search('```');\n    let coordinates = [];\n    while (index != -1) {\n      if (coordinates.length == 0) {\n        coordinates.push(index + (text.length - currentText.length));\n      } else {\n        coordinates.push(index + (text.length - currentText.length));\n        locations.push([coordinates[0], coordinates[1]]);\n        coordinates = [];\n      }\n      currentText = currentText.substring(index + 2, currentText.length);\n      index = currentText.search('```');\n    }\n    let codeBlocks = [];\n    let previousEnd = 0;\n    if (locations.length == 0) {\n      return [text];\n    } else {\n      for (let i = 0; i < locations.length; i++) {\n        let codeString = text.substring(locations[i][0], locations[i][1] + 3);\n        codeBlocks.push(text.substring(previousEnd, locations[i][0]));\n        codeBlocks.push([determineLanguage(codeString), codeString.substring(codeString.search('\\n') + 1, codeString.length - 3)]);\n        previousEnd = locations[i][1] + 1;\n      }\n      return codeBlocks;\n    }\n  };\n  return searchCodeList(child);\n}\nfunction ChatMessage(props) {\n  _s();\n  const [On, Switch] = useState(false);\n  const className = props.user ? 'chatLogUser' : 'chatLogAssistant';\n  let requiersReadMore = false;\n  useEffect(() => {\n    console.log(On);\n  }, [On]);\n  const processLength = child => {\n    if (child.length > 200) {\n      requiersReadMore = true;\n      return child.substring(0, 200);\n    }\n    return child;\n  };\n  const processEnter = child => {\n    child = DOMPurify.sanitize(child);\n    console.log(child);\n    return /*#__PURE__*/_jsxDEV(\"h3\", {\n      dangerouslySetInnerHTML: {\n        __html: child.replace(/\\n/g, '<br />')\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 16\n    }, this);\n  };\n  let displayedText = processLength(props.realChild);\n  let boxText = !props.user ? codeBlockOutput(props.realChild) : props.realChild;\n  console.log(boxText);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: className,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      onClick: () => {\n        Switch(true);\n      },\n      children: processEnter(displayedText + (requiersReadMore ? '...' : ''))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(PopUp, {\n      trigger: On,\n      setTrigger: Switch,\n      Color: props.user ? '#eb8042' : '#c85de3',\n      children: On ? boxText.map((items, index) => typeof boxText[index] == \"string\" ? /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\" \", processEnter(boxText[index]), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 48\n      }, this) : /*#__PURE__*/_jsxDEV(SyntaxHighlighter, {\n        style: dark,\n        language: boxText[index][0],\n        children: boxText[index][1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 92\n      }, this)) : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatMessage, \"N6kzZhYSadVkFWNqfmYKGBwEHig=\");\n_c = ChatMessage;\nexport default ChatMessage;\nvar _c;\n$RefreshReg$(_c, \"ChatMessage\");","map":{"version":3,"names":["useState","useEffect","useRef","PopUp","DOMPurify","SyntaxHighlighter","dark","jsxDEV","_jsxDEV","codeBlockOutput","child","determineLanguage","code","thirdBackTick","search","firstEnter","language","substring","searchCodeList","text","currentText","locations","index","coordinates","length","push","codeBlocks","previousEnd","i","codeString","ChatMessage","props","_s","On","Switch","className","user","requiersReadMore","console","log","processLength","processEnter","sanitize","dangerouslySetInnerHTML","__html","replace","fileName","_jsxFileName","lineNumber","columnNumber","displayedText","realChild","boxText","class","children","onClick","trigger","setTrigger","Color","map","items","style","_c","$RefreshReg$"],"sources":["C:/Users/cleyc/OneDrive/Documents/RR/RRWebsiteRenewed/my-app/src/js/ChatMessage.js"],"sourcesContent":["import '../css/Chat.css'\r\nimport {useState, useEffect, useRef} from 'react';\r\nimport PopUp from './Popup';\r\nimport DOMPurify from 'dompurify';\r\nimport SyntaxHighlighter from 'react-syntax-highlighter';\r\nimport { dark } from 'react-syntax-highlighter/dist/esm/styles/hljs';\r\n\r\n\r\nfunction codeBlockOutput(child){\r\n\r\n\r\n    const determineLanguage = (code) => {\r\n        let thirdBackTick = code.search('```') + 2\r\n        let firstEnter = code.search('\\n')\r\n\r\n        let language = code.substring(thirdBackTick + 1, firstEnter)\r\n\r\n        return language\r\n    }\r\n\r\n    const searchCodeList = (text) => {\r\n        let currentText = text \r\n        let locations = []\r\n        let index = currentText.search('```')\r\n        let coordinates = []\r\n\r\n\r\n        while (index != -1){\r\n            if (coordinates.length == 0){\r\n                coordinates.push(index + (text.length - currentText.length))\r\n            }\r\n\r\n            else{\r\n                \r\n                coordinates.push(index + (text.length - currentText.length))\r\n                locations.push([coordinates[0], coordinates[1]])\r\n\r\n                coordinates = []\r\n            }\r\n\r\n            currentText = currentText.substring(index + 2, currentText.length)\r\n            index = currentText.search('```')\r\n        }\r\n        \r\n\r\n        let codeBlocks = []\r\n        let previousEnd = 0\r\n\r\n        if (locations.length == 0){\r\n            return [text]\r\n        }\r\n\r\n        else{\r\n            for (let i = 0; i < locations.length; i++){\r\n                let codeString = text.substring(locations[i][0], locations[i][1] + 3)\r\n                codeBlocks.push(text.substring(previousEnd, locations[i][0]))\r\n                codeBlocks.push([determineLanguage(codeString), codeString.substring(codeString.search('\\n') + 1, codeString.length - 3)])\r\n                previousEnd = locations[i][1] + 1\r\n            }\r\n\r\n            return codeBlocks\r\n        }\r\n    }\r\n\r\n\r\n    return searchCodeList(child)\r\n}\r\n                                       \r\n\r\nfunction ChatMessage(props){\r\n\r\n   \r\n\r\n    const [On, Switch] = useState(false)\r\n\r\n    const className = props.user ? 'chatLogUser': 'chatLogAssistant'\r\n    let requiersReadMore = false\r\n\r\n    useEffect(() => {console.log(On)}, [On])\r\n\r\n\r\n    const processLength = (child) => {\r\n        if (child.length > 200){\r\n            requiersReadMore = true\r\n            return child.substring(0, 200) \r\n        }\r\n\r\n        return child\r\n    } \r\n\r\n    const processEnter = (child) => {\r\n        child = DOMPurify.sanitize(child)\r\n        console.log(child)\r\n        return <h3 dangerouslySetInnerHTML={{__html: child.replace(/\\n/g, '<br />')}}></h3>\r\n    }\r\n\r\n    let displayedText = processLength(props.realChild)\r\n    let boxText = !props.user ? codeBlockOutput(props.realChild) : props.realChild\r\n    \r\n    console.log(boxText)\r\n\r\n    return (\r\n    <div class = {className} >\r\n        <h3 onClick={() => {Switch(true)}}>{processEnter(displayedText + (requiersReadMore ? '...' : ''))}</h3>\r\n        <PopUp trigger = {On} setTrigger = {Switch}     Color = {props.user ? '#eb8042': '#c85de3'}> \r\n        {On ? boxText.map((items, index) => (\r\n        \r\n           typeof boxText[index] == \"string\" ? <h3> {processEnter(boxText[index])} </h3> : <SyntaxHighlighter style = {dark} language = {boxText[index][0]}>{boxText[index][1]}</SyntaxHighlighter>\r\n\r\n        )) : ''} \r\n        </PopUp>\r\n    \r\n    </div>)\r\n}\r\n\r\n\r\nexport default ChatMessage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}