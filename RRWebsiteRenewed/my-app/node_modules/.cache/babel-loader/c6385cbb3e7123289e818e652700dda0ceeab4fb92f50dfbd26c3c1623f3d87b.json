{"ast":null,"code":"/******/(function () {\n  // webpackBootstrap\n  /******/\n  \"use strict\";\n\n  /******/\n  var __webpack_modules__ = {\n    /***/\"../../../Framework/src/cubismdefaultparameterid.ts\":\n    /*!**********************************************************!*\\\n      !*** ../../../Framework/src/cubismdefaultparameterid.ts ***!\n      \\**********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismDefaultParameterId = void 0;\n      exports.CubismDefaultParameterId = Object.freeze({\n        HitAreaPrefix: 'HitArea',\n        HitAreaHead: 'Head',\n        HitAreaBody: 'Body',\n        PartsIdCore: 'Parts01Core',\n        PartsArmPrefix: 'Parts01Arm_',\n        PartsArmLPrefix: 'Parts01ArmL_',\n        PartsArmRPrefix: 'Parts01ArmR_',\n        ParamAngleX: 'ParamAngleX',\n        ParamAngleY: 'ParamAngleY',\n        ParamAngleZ: 'ParamAngleZ',\n        ParamEyeLOpen: 'ParamEyeLOpen',\n        ParamEyeLSmile: 'ParamEyeLSmile',\n        ParamEyeROpen: 'ParamEyeROpen',\n        ParamEyeRSmile: 'ParamEyeRSmile',\n        ParamEyeBallX: 'ParamEyeBallX',\n        ParamEyeBallY: 'ParamEyeBallY',\n        ParamEyeBallForm: 'ParamEyeBallForm',\n        ParamBrowLY: 'ParamBrowLY',\n        ParamBrowRY: 'ParamBrowRY',\n        ParamBrowLX: 'ParamBrowLX',\n        ParamBrowRX: 'ParamBrowRX',\n        ParamBrowLAngle: 'ParamBrowLAngle',\n        ParamBrowRAngle: 'ParamBrowRAngle',\n        ParamBrowLForm: 'ParamBrowLForm',\n        ParamBrowRForm: 'ParamBrowRForm',\n        ParamMouthForm: 'ParamMouthForm',\n        ParamMouthOpenY: 'ParamMouthOpenY',\n        ParamCheek: 'ParamCheek',\n        ParamBodyAngleX: 'ParamBodyAngleX',\n        ParamBodyAngleY: 'ParamBodyAngleY',\n        ParamBodyAngleZ: 'ParamBodyAngleZ',\n        ParamBreath: 'ParamBreath',\n        ParamArmLA: 'ParamArmLA',\n        ParamArmRA: 'ParamArmRA',\n        ParamArmLB: 'ParamArmLB',\n        ParamArmRB: 'ParamArmRB',\n        ParamHandL: 'ParamHandL',\n        ParamHandR: 'ParamHandR',\n        ParamHairFront: 'ParamHairFront',\n        ParamHairSide: 'ParamHairSide',\n        ParamHairBack: 'ParamHairBack',\n        ParamHairFluffy: 'ParamHairFluffy',\n        ParamShoulderY: 'ParamShoulderY',\n        ParamBustX: 'ParamBustX',\n        ParamBustY: 'ParamBustY',\n        ParamBaseX: 'ParamBaseX',\n        ParamBaseY: 'ParamBaseY',\n        ParamNONE: 'NONE:'\n      });\n      var $ = __importStar(__webpack_require__( /*! ./cubismdefaultparameterid */\"../../../Framework/src/cubismdefaultparameterid.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.HitAreaBody = $.CubismDefaultParameterId.HitAreaBody;\n        Live2DCubismFramework.HitAreaHead = $.CubismDefaultParameterId.HitAreaHead;\n        Live2DCubismFramework.HitAreaPrefix = $.CubismDefaultParameterId.HitAreaPrefix;\n        Live2DCubismFramework.ParamAngleX = $.CubismDefaultParameterId.ParamAngleX;\n        Live2DCubismFramework.ParamAngleY = $.CubismDefaultParameterId.ParamAngleY;\n        Live2DCubismFramework.ParamAngleZ = $.CubismDefaultParameterId.ParamAngleZ;\n        Live2DCubismFramework.ParamArmLA = $.CubismDefaultParameterId.ParamArmLA;\n        Live2DCubismFramework.ParamArmLB = $.CubismDefaultParameterId.ParamArmLB;\n        Live2DCubismFramework.ParamArmRA = $.CubismDefaultParameterId.ParamArmRA;\n        Live2DCubismFramework.ParamArmRB = $.CubismDefaultParameterId.ParamArmRB;\n        Live2DCubismFramework.ParamBaseX = $.CubismDefaultParameterId.ParamBaseX;\n        Live2DCubismFramework.ParamBaseY = $.CubismDefaultParameterId.ParamBaseY;\n        Live2DCubismFramework.ParamBodyAngleX = $.CubismDefaultParameterId.ParamBodyAngleX;\n        Live2DCubismFramework.ParamBodyAngleY = $.CubismDefaultParameterId.ParamBodyAngleY;\n        Live2DCubismFramework.ParamBodyAngleZ = $.CubismDefaultParameterId.ParamBodyAngleZ;\n        Live2DCubismFramework.ParamBreath = $.CubismDefaultParameterId.ParamBreath;\n        Live2DCubismFramework.ParamBrowLAngle = $.CubismDefaultParameterId.ParamBrowLAngle;\n        Live2DCubismFramework.ParamBrowLForm = $.CubismDefaultParameterId.ParamBrowLForm;\n        Live2DCubismFramework.ParamBrowLX = $.CubismDefaultParameterId.ParamBrowLX;\n        Live2DCubismFramework.ParamBrowLY = $.CubismDefaultParameterId.ParamBrowLY;\n        Live2DCubismFramework.ParamBrowRAngle = $.CubismDefaultParameterId.ParamBrowRAngle;\n        Live2DCubismFramework.ParamBrowRForm = $.CubismDefaultParameterId.ParamBrowRForm;\n        Live2DCubismFramework.ParamBrowRX = $.CubismDefaultParameterId.ParamBrowRX;\n        Live2DCubismFramework.ParamBrowRY = $.CubismDefaultParameterId.ParamBrowRY;\n        Live2DCubismFramework.ParamBustX = $.CubismDefaultParameterId.ParamBustX;\n        Live2DCubismFramework.ParamBustY = $.CubismDefaultParameterId.ParamBustY;\n        Live2DCubismFramework.ParamCheek = $.CubismDefaultParameterId.ParamCheek;\n        Live2DCubismFramework.ParamEyeBallForm = $.CubismDefaultParameterId.ParamEyeBallForm;\n        Live2DCubismFramework.ParamEyeBallX = $.CubismDefaultParameterId.ParamEyeBallX;\n        Live2DCubismFramework.ParamEyeBallY = $.CubismDefaultParameterId.ParamEyeBallY;\n        Live2DCubismFramework.ParamEyeLOpen = $.CubismDefaultParameterId.ParamEyeLOpen;\n        Live2DCubismFramework.ParamEyeLSmile = $.CubismDefaultParameterId.ParamEyeLSmile;\n        Live2DCubismFramework.ParamEyeROpen = $.CubismDefaultParameterId.ParamEyeROpen;\n        Live2DCubismFramework.ParamEyeRSmile = $.CubismDefaultParameterId.ParamEyeRSmile;\n        Live2DCubismFramework.ParamHairBack = $.CubismDefaultParameterId.ParamHairBack;\n        Live2DCubismFramework.ParamHairFluffy = $.CubismDefaultParameterId.ParamHairFluffy;\n        Live2DCubismFramework.ParamHairFront = $.CubismDefaultParameterId.ParamHairFront;\n        Live2DCubismFramework.ParamHairSide = $.CubismDefaultParameterId.ParamHairSide;\n        Live2DCubismFramework.ParamHandL = $.CubismDefaultParameterId.ParamHandL;\n        Live2DCubismFramework.ParamHandR = $.CubismDefaultParameterId.ParamHandR;\n        Live2DCubismFramework.ParamMouthForm = $.CubismDefaultParameterId.ParamMouthForm;\n        Live2DCubismFramework.ParamMouthOpenY = $.CubismDefaultParameterId.ParamMouthOpenY;\n        Live2DCubismFramework.ParamNONE = $.CubismDefaultParameterId.ParamNONE;\n        Live2DCubismFramework.ParamShoulderY = $.CubismDefaultParameterId.ParamShoulderY;\n        Live2DCubismFramework.PartsArmLPrefix = $.CubismDefaultParameterId.PartsArmLPrefix;\n        Live2DCubismFramework.PartsArmPrefix = $.CubismDefaultParameterId.PartsArmPrefix;\n        Live2DCubismFramework.PartsArmRPrefix = $.CubismDefaultParameterId.PartsArmRPrefix;\n        Live2DCubismFramework.PartsIdCore = $.CubismDefaultParameterId.PartsIdCore;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/cubismframeworkconfig.ts\":\n    /*!*******************************************************!*\\\n      !*** ../../../Framework/src/cubismframeworkconfig.ts ***!\n      \\*******************************************************/\n    /***/\n    function (__unused_webpack_module, exports) {\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CSM_LOG_LEVEL = exports.CSM_LOG_LEVEL_OFF = exports.CSM_LOG_LEVEL_ERROR = exports.CSM_LOG_LEVEL_WARNING = exports.CSM_LOG_LEVEL_INFO = exports.CSM_LOG_LEVEL_DEBUG = exports.CSM_LOG_LEVEL_VERBOSE = void 0;\n      exports.CSM_LOG_LEVEL_VERBOSE = 0;\n      exports.CSM_LOG_LEVEL_DEBUG = 1;\n      exports.CSM_LOG_LEVEL_INFO = 2;\n      exports.CSM_LOG_LEVEL_WARNING = 3;\n      exports.CSM_LOG_LEVEL_ERROR = 4;\n      exports.CSM_LOG_LEVEL_OFF = 5;\n      exports.CSM_LOG_LEVEL = exports.CSM_LOG_LEVEL_VERBOSE;\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/cubismmodelsettingjson.ts\":\n    /*!********************************************************!*\\\n      !*** ../../../Framework/src/cubismmodelsettingjson.ts ***!\n      \\********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismModelSettingJson = void 0;\n      var icubismmodelsetting_1 = __webpack_require__( /*! ./icubismmodelsetting */\"../../../Framework/src/icubismmodelsetting.ts\");\n      var live2dcubismframework_1 = __webpack_require__( /*! ./live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var csmvector_1 = __webpack_require__( /*! ./type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismjson_1 = __webpack_require__( /*! ./utils/cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      var Version = 'Version';\n      var FileReferences = 'FileReferences';\n      var Groups = 'Groups';\n      var Layout = 'Layout';\n      var HitAreas = 'HitAreas';\n      var Moc = 'Moc';\n      var Textures = 'Textures';\n      var Physics = 'Physics';\n      var Pose = 'Pose';\n      var Expressions = 'Expressions';\n      var Motions = 'Motions';\n      var UserData = 'UserData';\n      var Name = 'Name';\n      var FilePath = 'File';\n      var Id = 'Id';\n      var Ids = 'Ids';\n      var Target = 'Target';\n      var Idle = 'Idle';\n      var TapBody = 'TapBody';\n      var PinchIn = 'PinchIn';\n      var PinchOut = 'PinchOut';\n      var Shake = 'Shake';\n      var FlickHead = 'FlickHead';\n      var Parameter = 'Parameter';\n      var SoundPath = 'Sound';\n      var FadeInTime = 'FadeInTime';\n      var FadeOutTime = 'FadeOutTime';\n      var CenterX = 'CenterX';\n      var CenterY = 'CenterY';\n      var X = 'X';\n      var Y = 'Y';\n      var Width = 'Width';\n      var Height = 'Height';\n      var LipSync = 'LipSync';\n      var EyeBlink = 'EyeBlink';\n      var InitParameter = 'init_param';\n      var InitPartsVisible = 'init_parts_visible';\n      var Val = 'val';\n      var FrequestNode;\n      (function (FrequestNode) {\n        FrequestNode[FrequestNode[\"FrequestNode_Groups\"] = 0] = \"FrequestNode_Groups\";\n        FrequestNode[FrequestNode[\"FrequestNode_Moc\"] = 1] = \"FrequestNode_Moc\";\n        FrequestNode[FrequestNode[\"FrequestNode_Motions\"] = 2] = \"FrequestNode_Motions\";\n        FrequestNode[FrequestNode[\"FrequestNode_Expressions\"] = 3] = \"FrequestNode_Expressions\";\n        FrequestNode[FrequestNode[\"FrequestNode_Textures\"] = 4] = \"FrequestNode_Textures\";\n        FrequestNode[FrequestNode[\"FrequestNode_Physics\"] = 5] = \"FrequestNode_Physics\";\n        FrequestNode[FrequestNode[\"FrequestNode_Pose\"] = 6] = \"FrequestNode_Pose\";\n        FrequestNode[FrequestNode[\"FrequestNode_HitAreas\"] = 7] = \"FrequestNode_HitAreas\";\n      })(FrequestNode || (FrequestNode = {}));\n      var CubismModelSettingJson = function (_super) {\n        __extends(CubismModelSettingJson, _super);\n        function CubismModelSettingJson(buffer, size) {\n          var _this = _super.call(this) || this;\n          _this._json = cubismjson_1.CubismJson.create(buffer, size);\n          if (_this._json) {\n            _this._jsonValue = new csmvector_1.csmVector();\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(Groups));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(FileReferences).getValueByString(Moc));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(FileReferences).getValueByString(Motions));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(FileReferences).getValueByString(Expressions));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(FileReferences).getValueByString(Textures));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(FileReferences).getValueByString(Physics));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(FileReferences).getValueByString(Pose));\n            _this._jsonValue.pushBack(_this._json.getRoot().getValueByString(HitAreas));\n          }\n          return _this;\n        }\n        CubismModelSettingJson.prototype.release = function () {\n          cubismjson_1.CubismJson.delete(this._json);\n          this._jsonValue = null;\n        };\n        CubismModelSettingJson.prototype.GetJson = function () {\n          return this._json;\n        };\n        CubismModelSettingJson.prototype.getModelFileName = function () {\n          if (!this.isExistModelFile()) {\n            return '';\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Moc).getRawString();\n        };\n        CubismModelSettingJson.prototype.getTextureCount = function () {\n          if (!this.isExistTextureFiles()) {\n            return 0;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Textures).getSize();\n        };\n        CubismModelSettingJson.prototype.getTextureDirectory = function () {\n          var texturePath = this._jsonValue.at(FrequestNode.FrequestNode_Textures).getValueByIndex(0).getRawString();\n          var pathArray = texturePath.split('/');\n          var arrayLength = pathArray.length - 1;\n          var textureDirectoryStr = '';\n          for (var i = 0; i < arrayLength; i++) {\n            textureDirectoryStr += pathArray[i];\n            if (i < arrayLength - 1) {\n              textureDirectoryStr += '/';\n            }\n          }\n          return textureDirectoryStr;\n        };\n        CubismModelSettingJson.prototype.getTextureFileName = function (index) {\n          return this._jsonValue.at(FrequestNode.FrequestNode_Textures).getValueByIndex(index).getRawString();\n        };\n        CubismModelSettingJson.prototype.getHitAreasCount = function () {\n          if (!this.isExistHitAreas()) {\n            return 0;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getSize();\n        };\n        CubismModelSettingJson.prototype.getHitAreaId = function (index) {\n          return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getValueByIndex(index).getValueByString(Id).getRawString());\n        };\n        CubismModelSettingJson.prototype.getHitAreaName = function (index) {\n          return this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getValueByIndex(index).getValueByString(Name).getRawString();\n        };\n        CubismModelSettingJson.prototype.getPhysicsFileName = function () {\n          if (!this.isExistPhysicsFile()) {\n            return '';\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Physics).getRawString();\n        };\n        CubismModelSettingJson.prototype.getPoseFileName = function () {\n          if (!this.isExistPoseFile()) {\n            return '';\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Pose).getRawString();\n        };\n        CubismModelSettingJson.prototype.getExpressionCount = function () {\n          if (!this.isExistExpressionFile()) {\n            return 0;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getSize();\n        };\n        CubismModelSettingJson.prototype.getExpressionName = function (index) {\n          return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getValueByIndex(index).getValueByString(Name).getRawString();\n        };\n        CubismModelSettingJson.prototype.getExpressionFileName = function (index) {\n          return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getValueByIndex(index).getValueByString(FilePath).getRawString();\n        };\n        CubismModelSettingJson.prototype.getMotionGroupCount = function () {\n          if (!this.isExistMotionGroups()) {\n            return 0;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Motions).getKeys().getSize();\n        };\n        CubismModelSettingJson.prototype.getMotionGroupName = function (index) {\n          if (!this.isExistMotionGroups()) {\n            return null;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Motions).getKeys().at(index);\n        };\n        CubismModelSettingJson.prototype.getMotionCount = function (groupName) {\n          if (!this.isExistMotionGroupName(groupName)) {\n            return 0;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getSize();\n        };\n        CubismModelSettingJson.prototype.getMotionFileName = function (groupName, index) {\n          if (!this.isExistMotionGroupName(groupName)) {\n            return '';\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getValueByIndex(index).getValueByString(FilePath).getRawString();\n        };\n        CubismModelSettingJson.prototype.getMotionSoundFileName = function (groupName, index) {\n          if (!this.isExistMotionSoundFile(groupName, index)) {\n            return '';\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getValueByIndex(index).getValueByString(SoundPath).getRawString();\n        };\n        CubismModelSettingJson.prototype.getMotionFadeInTimeValue = function (groupName, index) {\n          if (!this.isExistMotionFadeIn(groupName, index)) {\n            return -1.0;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getValueByIndex(index).getValueByString(FadeInTime).toFloat();\n        };\n        CubismModelSettingJson.prototype.getMotionFadeOutTimeValue = function (groupName, index) {\n          if (!this.isExistMotionFadeOut(groupName, index)) {\n            return -1.0;\n          }\n          return this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getValueByIndex(index).getValueByString(FadeOutTime).toFloat();\n        };\n        CubismModelSettingJson.prototype.getUserDataFile = function () {\n          if (!this.isExistUserDataFile()) {\n            return '';\n          }\n          return this._json.getRoot().getValueByString(FileReferences).getValueByString(UserData).getRawString();\n        };\n        CubismModelSettingJson.prototype.getLayoutMap = function (outLayoutMap) {\n          var map = this._json.getRoot().getValueByString(Layout).getMap();\n          if (map == null) {\n            return false;\n          }\n          var ret = false;\n          for (var ite = map.begin(); ite.notEqual(map.end()); ite.preIncrement()) {\n            outLayoutMap.setValue(ite.ptr().first, ite.ptr().second.toFloat());\n            ret = true;\n          }\n          return ret;\n        };\n        CubismModelSettingJson.prototype.getEyeBlinkParameterCount = function () {\n          if (!this.isExistEyeBlinkParameters()) {\n            return 0;\n          }\n          var num = 0;\n          for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n              continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == EyeBlink) {\n              num = refI.getValueByString(Ids).getVector().getSize();\n              break;\n            }\n          }\n          return num;\n        };\n        CubismModelSettingJson.prototype.getEyeBlinkParameterId = function (index) {\n          if (!this.isExistEyeBlinkParameters()) {\n            return null;\n          }\n          for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n              continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == EyeBlink) {\n              return live2dcubismframework_1.CubismFramework.getIdManager().getId(refI.getValueByString(Ids).getValueByIndex(index).getRawString());\n            }\n          }\n          return null;\n        };\n        CubismModelSettingJson.prototype.getLipSyncParameterCount = function () {\n          if (!this.isExistLipSyncParameters()) {\n            return 0;\n          }\n          var num = 0;\n          for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n              continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == LipSync) {\n              num = refI.getValueByString(Ids).getVector().getSize();\n              break;\n            }\n          }\n          return num;\n        };\n        CubismModelSettingJson.prototype.getLipSyncParameterId = function (index) {\n          if (!this.isExistLipSyncParameters()) {\n            return null;\n          }\n          for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); i++) {\n            var refI = this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(i);\n            if (refI.isNull() || refI.isError()) {\n              continue;\n            }\n            if (refI.getValueByString(Name).getRawString() == LipSync) {\n              return live2dcubismframework_1.CubismFramework.getIdManager().getId(refI.getValueByString(Ids).getValueByIndex(index).getRawString());\n            }\n          }\n          return null;\n        };\n        CubismModelSettingJson.prototype.isExistModelFile = function () {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Moc);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistTextureFiles = function () {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Textures);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistHitAreas = function () {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_HitAreas);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistPhysicsFile = function () {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Physics);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistPoseFile = function () {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Pose);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistExpressionFile = function () {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Expressions);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistMotionGroups = function () {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Motions);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistMotionGroupName = function (groupName) {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistMotionSoundFile = function (groupName, index) {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getValueByIndex(index).getValueByString(SoundPath);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistMotionFadeIn = function (groupName, index) {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getValueByIndex(index).getValueByString(FadeInTime);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistMotionFadeOut = function (groupName, index) {\n          var node = this._jsonValue.at(FrequestNode.FrequestNode_Motions).getValueByString(groupName).getValueByIndex(index).getValueByString(FadeOutTime);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistUserDataFile = function () {\n          var node = this._json.getRoot().getValueByString(FileReferences).getValueByString(UserData);\n          return !node.isNull() && !node.isError();\n        };\n        CubismModelSettingJson.prototype.isExistEyeBlinkParameters = function () {\n          if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() || this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()) {\n            return false;\n          }\n          for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); ++i) {\n            if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(i).getValueByString(Name).getRawString() == EyeBlink) {\n              return true;\n            }\n          }\n          return false;\n        };\n        CubismModelSettingJson.prototype.isExistLipSyncParameters = function () {\n          if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() || this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()) {\n            return false;\n          }\n          for (var i = 0; i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize(); ++i) {\n            if (this._jsonValue.at(FrequestNode.FrequestNode_Groups).getValueByIndex(i).getValueByString(Name).getRawString() == LipSync) {\n              return true;\n            }\n          }\n          return false;\n        };\n        return CubismModelSettingJson;\n      }(icubismmodelsetting_1.ICubismModelSetting);\n      exports.CubismModelSettingJson = CubismModelSettingJson;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmodelsettingjson */\"../../../Framework/src/cubismmodelsettingjson.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismModelSettingJson = $.CubismModelSettingJson;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/effect/cubismbreath.ts\":\n    /*!*****************************************************!*\\\n      !*** ../../../Framework/src/effect/cubismbreath.ts ***!\n      \\*****************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.BreathParameterData = exports.CubismBreath = void 0;\n      var CubismBreath = function () {\n        function CubismBreath() {\n          this._currentTime = 0.0;\n        }\n        CubismBreath.create = function () {\n          return new CubismBreath();\n        };\n        CubismBreath.delete = function (instance) {\n          if (instance != null) {\n            instance = null;\n          }\n        };\n        CubismBreath.prototype.setParameters = function (breathParameters) {\n          this._breathParameters = breathParameters;\n        };\n        CubismBreath.prototype.getParameters = function () {\n          return this._breathParameters;\n        };\n        CubismBreath.prototype.updateParameters = function (model, deltaTimeSeconds) {\n          this._currentTime += deltaTimeSeconds;\n          var t = this._currentTime * 2.0 * 3.14159;\n          for (var i = 0; i < this._breathParameters.getSize(); ++i) {\n            var data = this._breathParameters.at(i);\n            model.addParameterValueById(data.parameterId, data.offset + data.peak * Math.sin(t / data.cycle), data.weight);\n          }\n        };\n        return CubismBreath;\n      }();\n      exports.CubismBreath = CubismBreath;\n      var BreathParameterData = function () {\n        function BreathParameterData(parameterId, offset, peak, cycle, weight) {\n          this.parameterId = parameterId == undefined ? null : parameterId;\n          this.offset = offset == undefined ? 0.0 : offset;\n          this.peak = peak == undefined ? 0.0 : peak;\n          this.cycle = cycle == undefined ? 0.0 : cycle;\n          this.weight = weight == undefined ? 0.0 : weight;\n        }\n        return BreathParameterData;\n      }();\n      exports.BreathParameterData = BreathParameterData;\n      var $ = __importStar(__webpack_require__( /*! ./cubismbreath */\"../../../Framework/src/effect/cubismbreath.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.BreathParameterData = $.BreathParameterData;\n        Live2DCubismFramework.CubismBreath = $.CubismBreath;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/effect/cubismeyeblink.ts\":\n    /*!*******************************************************!*\\\n      !*** ../../../Framework/src/effect/cubismeyeblink.ts ***!\n      \\*******************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.EyeState = exports.CubismEyeBlink = void 0;\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var CubismEyeBlink = exports.CubismEyeBlink = function () {\n        function CubismEyeBlink(modelSetting) {\n          this._blinkingState = EyeState.EyeState_First;\n          this._nextBlinkingTime = 0.0;\n          this._stateStartTimeSeconds = 0.0;\n          this._blinkingIntervalSeconds = 4.0;\n          this._closingSeconds = 0.1;\n          this._closedSeconds = 0.05;\n          this._openingSeconds = 0.15;\n          this._userTimeSeconds = 0.0;\n          this._parameterIds = new csmvector_1.csmVector();\n          if (modelSetting == null) {\n            return;\n          }\n          for (var i = 0; i < modelSetting.getEyeBlinkParameterCount(); ++i) {\n            this._parameterIds.pushBack(modelSetting.getEyeBlinkParameterId(i));\n          }\n        }\n        CubismEyeBlink.create = function (modelSetting) {\n          if (modelSetting === void 0) {\n            modelSetting = null;\n          }\n          return new CubismEyeBlink(modelSetting);\n        };\n        CubismEyeBlink.delete = function (eyeBlink) {\n          if (eyeBlink != null) {\n            eyeBlink = null;\n          }\n        };\n        CubismEyeBlink.prototype.setBlinkingInterval = function (blinkingInterval) {\n          this._blinkingIntervalSeconds = blinkingInterval;\n        };\n        CubismEyeBlink.prototype.setBlinkingSetting = function (closing, closed, opening) {\n          this._closingSeconds = closing;\n          this._closedSeconds = closed;\n          this._openingSeconds = opening;\n        };\n        CubismEyeBlink.prototype.setParameterIds = function (parameterIds) {\n          this._parameterIds = parameterIds;\n        };\n        CubismEyeBlink.prototype.getParameterIds = function () {\n          return this._parameterIds;\n        };\n        CubismEyeBlink.prototype.updateParameters = function (model, deltaTimeSeconds) {\n          this._userTimeSeconds += deltaTimeSeconds;\n          var parameterValue;\n          var t = 0.0;\n          switch (this._blinkingState) {\n            case EyeState.EyeState_Closing:\n              t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closingSeconds;\n              if (t >= 1.0) {\n                t = 1.0;\n                this._blinkingState = EyeState.EyeState_Closed;\n                this._stateStartTimeSeconds = this._userTimeSeconds;\n              }\n              parameterValue = 1.0 - t;\n              break;\n            case EyeState.EyeState_Closed:\n              t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closedSeconds;\n              if (t >= 1.0) {\n                this._blinkingState = EyeState.EyeState_Opening;\n                this._stateStartTimeSeconds = this._userTimeSeconds;\n              }\n              parameterValue = 0.0;\n              break;\n            case EyeState.EyeState_Opening:\n              t = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._openingSeconds;\n              if (t >= 1.0) {\n                t = 1.0;\n                this._blinkingState = EyeState.EyeState_Interval;\n                this._nextBlinkingTime = this.determinNextBlinkingTiming();\n              }\n              parameterValue = t;\n              break;\n            case EyeState.EyeState_Interval:\n              if (this._nextBlinkingTime < this._userTimeSeconds) {\n                this._blinkingState = EyeState.EyeState_Closing;\n                this._stateStartTimeSeconds = this._userTimeSeconds;\n              }\n              parameterValue = 1.0;\n              break;\n            case EyeState.EyeState_First:\n            default:\n              this._blinkingState = EyeState.EyeState_Interval;\n              this._nextBlinkingTime = this.determinNextBlinkingTiming();\n              parameterValue = 1.0;\n              break;\n          }\n          if (!CubismEyeBlink.CloseIfZero) {\n            parameterValue = -parameterValue;\n          }\n          for (var i = 0; i < this._parameterIds.getSize(); ++i) {\n            model.setParameterValueById(this._parameterIds.at(i), parameterValue);\n          }\n        };\n        CubismEyeBlink.prototype.determinNextBlinkingTiming = function () {\n          var r = Math.random();\n          return this._userTimeSeconds + r * (2.0 * this._blinkingIntervalSeconds - 1.0);\n        };\n        CubismEyeBlink.CloseIfZero = true;\n        return CubismEyeBlink;\n      }();\n      var EyeState;\n      (function (EyeState) {\n        EyeState[EyeState[\"EyeState_First\"] = 0] = \"EyeState_First\";\n        EyeState[EyeState[\"EyeState_Interval\"] = 1] = \"EyeState_Interval\";\n        EyeState[EyeState[\"EyeState_Closing\"] = 2] = \"EyeState_Closing\";\n        EyeState[EyeState[\"EyeState_Closed\"] = 3] = \"EyeState_Closed\";\n        EyeState[EyeState[\"EyeState_Opening\"] = 4] = \"EyeState_Opening\";\n      })(EyeState = exports.EyeState || (exports.EyeState = {}));\n      var $ = __importStar(__webpack_require__( /*! ./cubismeyeblink */\"../../../Framework/src/effect/cubismeyeblink.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismEyeBlink = $.CubismEyeBlink;\n        Live2DCubismFramework.EyeState = $.EyeState;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/effect/cubismpose.ts\":\n    /*!***************************************************!*\\\n      !*** ../../../Framework/src/effect/cubismpose.ts ***!\n      \\***************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.PartData = exports.CubismPose = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismjson_1 = __webpack_require__( /*! ../utils/cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      var Epsilon = 0.001;\n      var DefaultFadeInSeconds = 0.5;\n      var FadeIn = 'FadeInTime';\n      var Link = 'Link';\n      var Groups = 'Groups';\n      var Id = 'Id';\n      var CubismPose = function () {\n        function CubismPose() {\n          this._fadeTimeSeconds = DefaultFadeInSeconds;\n          this._lastModel = null;\n          this._partGroups = new csmvector_1.csmVector();\n          this._partGroupCounts = new csmvector_1.csmVector();\n        }\n        CubismPose.create = function (pose3json, size) {\n          var ret = new CubismPose();\n          var json = cubismjson_1.CubismJson.create(pose3json, size);\n          var root = json.getRoot();\n          if (!root.getValueByString(FadeIn).isNull()) {\n            ret._fadeTimeSeconds = root.getValueByString(FadeIn).toFloat(DefaultFadeInSeconds);\n            if (ret._fadeTimeSeconds <= 0.0) {\n              ret._fadeTimeSeconds = DefaultFadeInSeconds;\n            }\n          }\n          var poseListInfo = root.getValueByString(Groups);\n          var poseCount = poseListInfo.getSize();\n          for (var poseIndex = 0; poseIndex < poseCount; ++poseIndex) {\n            var idListInfo = poseListInfo.getValueByIndex(poseIndex);\n            var idCount = idListInfo.getSize();\n            var groupCount = 0;\n            for (var groupIndex = 0; groupIndex < idCount; ++groupIndex) {\n              var partInfo = idListInfo.getValueByIndex(groupIndex);\n              var partData = new PartData();\n              var parameterId = live2dcubismframework_1.CubismFramework.getIdManager().getId(partInfo.getValueByString(Id).getRawString());\n              partData.partId = parameterId;\n              if (!partInfo.getValueByString(Link).isNull()) {\n                var linkListInfo = partInfo.getValueByString(Link);\n                var linkCount = linkListInfo.getSize();\n                for (var linkIndex = 0; linkIndex < linkCount; ++linkIndex) {\n                  var linkPart = new PartData();\n                  var linkId = live2dcubismframework_1.CubismFramework.getIdManager().getId(linkListInfo.getValueByIndex(linkIndex).getString());\n                  linkPart.partId = linkId;\n                  partData.link.pushBack(linkPart);\n                }\n              }\n              ret._partGroups.pushBack(partData.clone());\n              ++groupCount;\n            }\n            ret._partGroupCounts.pushBack(groupCount);\n          }\n          cubismjson_1.CubismJson.delete(json);\n          return ret;\n        };\n        CubismPose.delete = function (pose) {\n          if (pose != null) {\n            pose = null;\n          }\n        };\n        CubismPose.prototype.updateParameters = function (model, deltaTimeSeconds) {\n          if (model != this._lastModel) {\n            this.reset(model);\n          }\n          this._lastModel = model;\n          if (deltaTimeSeconds < 0.0) {\n            deltaTimeSeconds = 0.0;\n          }\n          var beginIndex = 0;\n          for (var i = 0; i < this._partGroupCounts.getSize(); i++) {\n            var partGroupCount = this._partGroupCounts.at(i);\n            this.doFade(model, deltaTimeSeconds, beginIndex, partGroupCount);\n            beginIndex += partGroupCount;\n          }\n          this.copyPartOpacities(model);\n        };\n        CubismPose.prototype.reset = function (model) {\n          var beginIndex = 0;\n          for (var i = 0; i < this._partGroupCounts.getSize(); ++i) {\n            var groupCount = this._partGroupCounts.at(i);\n            for (var j = beginIndex; j < beginIndex + groupCount; ++j) {\n              this._partGroups.at(j).initialize(model);\n              var partsIndex = this._partGroups.at(j).partIndex;\n              var paramIndex = this._partGroups.at(j).parameterIndex;\n              if (partsIndex < 0) {\n                continue;\n              }\n              model.setPartOpacityByIndex(partsIndex, j == beginIndex ? 1.0 : 0.0);\n              model.setParameterValueByIndex(paramIndex, j == beginIndex ? 1.0 : 0.0);\n              for (var k = 0; k < this._partGroups.at(j).link.getSize(); ++k) {\n                this._partGroups.at(j).link.at(k).initialize(model);\n              }\n            }\n            beginIndex += groupCount;\n          }\n        };\n        CubismPose.prototype.copyPartOpacities = function (model) {\n          for (var groupIndex = 0; groupIndex < this._partGroups.getSize(); ++groupIndex) {\n            var partData = this._partGroups.at(groupIndex);\n            if (partData.link.getSize() == 0) {\n              continue;\n            }\n            var partIndex = this._partGroups.at(groupIndex).partIndex;\n            var opacity = model.getPartOpacityByIndex(partIndex);\n            for (var linkIndex = 0; linkIndex < partData.link.getSize(); ++linkIndex) {\n              var linkPart = partData.link.at(linkIndex);\n              var linkPartIndex = linkPart.partIndex;\n              if (linkPartIndex < 0) {\n                continue;\n              }\n              model.setPartOpacityByIndex(linkPartIndex, opacity);\n            }\n          }\n        };\n        CubismPose.prototype.doFade = function (model, deltaTimeSeconds, beginIndex, partGroupCount) {\n          var visiblePartIndex = -1;\n          var newOpacity = 1.0;\n          var phi = 0.5;\n          var backOpacityThreshold = 0.15;\n          for (var i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n            var partIndex = this._partGroups.at(i).partIndex;\n            var paramIndex = this._partGroups.at(i).parameterIndex;\n            if (model.getParameterValueByIndex(paramIndex) > Epsilon) {\n              if (visiblePartIndex >= 0) {\n                break;\n              }\n              visiblePartIndex = i;\n              newOpacity = model.getPartOpacityByIndex(partIndex);\n              newOpacity += deltaTimeSeconds / this._fadeTimeSeconds;\n              if (newOpacity > 1.0) {\n                newOpacity = 1.0;\n              }\n            }\n          }\n          if (visiblePartIndex < 0) {\n            visiblePartIndex = 0;\n            newOpacity = 1.0;\n          }\n          for (var i = beginIndex; i < beginIndex + partGroupCount; ++i) {\n            var partsIndex = this._partGroups.at(i).partIndex;\n            if (visiblePartIndex == i) {\n              model.setPartOpacityByIndex(partsIndex, newOpacity);\n            } else {\n              var opacity = model.getPartOpacityByIndex(partsIndex);\n              var a1 = void 0;\n              if (newOpacity < phi) {\n                a1 = newOpacity * (phi - 1) / phi + 1.0;\n              } else {\n                a1 = (1 - newOpacity) * phi / (1.0 - phi);\n              }\n              var backOpacity = (1.0 - a1) * (1.0 - newOpacity);\n              if (backOpacity > backOpacityThreshold) {\n                a1 = 1.0 - backOpacityThreshold / (1.0 - newOpacity);\n              }\n              if (opacity > a1) {\n                opacity = a1;\n              }\n              model.setPartOpacityByIndex(partsIndex, opacity);\n            }\n          }\n        };\n        return CubismPose;\n      }();\n      exports.CubismPose = CubismPose;\n      var PartData = function () {\n        function PartData(v) {\n          this.parameterIndex = 0;\n          this.partIndex = 0;\n          this.link = new csmvector_1.csmVector();\n          if (v != undefined) {\n            this.partId = v.partId;\n            for (var ite = v.link.begin(); ite.notEqual(v.link.end()); ite.preIncrement()) {\n              this.link.pushBack(ite.ptr().clone());\n            }\n          }\n        }\n        PartData.prototype.assignment = function (v) {\n          this.partId = v.partId;\n          for (var ite = v.link.begin(); ite.notEqual(v.link.end()); ite.preIncrement()) {\n            this.link.pushBack(ite.ptr().clone());\n          }\n          return this;\n        };\n        PartData.prototype.initialize = function (model) {\n          this.parameterIndex = model.getParameterIndex(this.partId);\n          this.partIndex = model.getPartIndex(this.partId);\n          model.setParameterValueByIndex(this.parameterIndex, 1);\n        };\n        PartData.prototype.clone = function () {\n          var clonePartData = new PartData();\n          clonePartData.partId = this.partId;\n          clonePartData.parameterIndex = this.parameterIndex;\n          clonePartData.partIndex = this.partIndex;\n          clonePartData.link = new csmvector_1.csmVector();\n          for (var ite = this.link.begin(); ite.notEqual(this.link.end()); ite.increment()) {\n            clonePartData.link.pushBack(ite.ptr().clone());\n          }\n          return clonePartData;\n        };\n        return PartData;\n      }();\n      exports.PartData = PartData;\n      var $ = __importStar(__webpack_require__( /*! ./cubismpose */\"../../../Framework/src/effect/cubismpose.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismPose = $.CubismPose;\n        Live2DCubismFramework.PartData = $.PartData;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/icubismmodelsetting.ts\":\n    /*!*****************************************************!*\\\n      !*** ../../../Framework/src/icubismmodelsetting.ts ***!\n      \\*****************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.ICubismModelSetting = void 0;\n      var ICubismModelSetting = function () {\n        function ICubismModelSetting() {}\n        return ICubismModelSetting;\n      }();\n      exports.ICubismModelSetting = ICubismModelSetting;\n      var $ = __importStar(__webpack_require__( /*! ./icubismmodelsetting */\"../../../Framework/src/icubismmodelsetting.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.ICubismModelSetting = $.ICubismModelSetting;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/id/cubismid.ts\":\n    /*!*********************************************!*\\\n      !*** ../../../Framework/src/id/cubismid.ts ***!\n      \\*********************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismId = void 0;\n      var csmstring_1 = __webpack_require__( /*! ../type/csmstring */\"../../../Framework/src/type/csmstring.ts\");\n      var CubismId = function () {\n        function CubismId(id) {\n          if (typeof id === 'string') {\n            this._id = new csmstring_1.csmString(id);\n            return;\n          }\n          this._id = id;\n        }\n        CubismId.prototype.getString = function () {\n          return this._id;\n        };\n        CubismId.prototype.isEqual = function (c) {\n          if (typeof c === 'string') {\n            return this._id.isEqual(c);\n          } else if (c instanceof csmstring_1.csmString) {\n            return this._id.isEqual(c.s);\n          } else if (c instanceof CubismId) {\n            return this._id.isEqual(c._id.s);\n          }\n          return false;\n        };\n        CubismId.prototype.isNotEqual = function (c) {\n          if (typeof c == 'string') {\n            return !this._id.isEqual(c);\n          } else if (c instanceof csmstring_1.csmString) {\n            return !this._id.isEqual(c.s);\n          } else if (c instanceof CubismId) {\n            return !this._id.isEqual(c._id.s);\n          }\n          return false;\n        };\n        return CubismId;\n      }();\n      exports.CubismId = CubismId;\n      var $ = __importStar(__webpack_require__( /*! ./cubismid */\"../../../Framework/src/id/cubismid.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismId = $.CubismId;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/id/cubismidmanager.ts\":\n    /*!****************************************************!*\\\n      !*** ../../../Framework/src/id/cubismidmanager.ts ***!\n      \\****************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismIdManager = void 0;\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismid_1 = __webpack_require__( /*! ./cubismid */\"../../../Framework/src/id/cubismid.ts\");\n      var CubismIdManager = function () {\n        function CubismIdManager() {\n          this._ids = new csmvector_1.csmVector();\n        }\n        CubismIdManager.prototype.release = function () {\n          for (var i = 0; i < this._ids.getSize(); ++i) {\n            this._ids.set(i, void 0);\n          }\n          this._ids = null;\n        };\n        CubismIdManager.prototype.registerIds = function (ids) {\n          for (var i = 0; i < ids.length; i++) {\n            this.registerId(ids[i]);\n          }\n        };\n        CubismIdManager.prototype.registerId = function (id) {\n          var result = null;\n          if ('string' == typeof id) {\n            if ((result = this.findId(id)) != null) {\n              return result;\n            }\n            result = new cubismid_1.CubismId(id);\n            this._ids.pushBack(result);\n          } else {\n            return this.registerId(id.s);\n          }\n          return result;\n        };\n        CubismIdManager.prototype.getId = function (id) {\n          return this.registerId(id);\n        };\n        CubismIdManager.prototype.isExist = function (id) {\n          if ('string' == typeof id) {\n            return this.findId(id) != null;\n          }\n          return this.isExist(id.s);\n        };\n        CubismIdManager.prototype.findId = function (id) {\n          for (var i = 0; i < this._ids.getSize(); ++i) {\n            if (this._ids.at(i).getString().isEqual(id)) {\n              return this._ids.at(i);\n            }\n          }\n          return null;\n        };\n        return CubismIdManager;\n      }();\n      exports.CubismIdManager = CubismIdManager;\n      var $ = __importStar(__webpack_require__( /*! ./cubismidmanager */\"../../../Framework/src/id/cubismidmanager.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismIdManager = $.CubismIdManager;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/live2dcubismframework.ts\":\n    /*!*******************************************************!*\\\n      !*** ../../../Framework/src/live2dcubismframework.ts ***!\n      \\*******************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.LogLevel = exports.Option = exports.CubismFramework = exports.csmDelete = exports.Constant = exports.strtod = void 0;\n      var cubismidmanager_1 = __webpack_require__( /*! ./id/cubismidmanager */\"../../../Framework/src/id/cubismidmanager.ts\");\n      var cubismrenderer_1 = __webpack_require__( /*! ./rendering/cubismrenderer */\"../../../Framework/src/rendering/cubismrenderer.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! ./utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var cubismjson_1 = __webpack_require__( /*! ./utils/cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      function strtod(s, endPtr) {\n        var index = 0;\n        for (var i = 1;; i++) {\n          var testC = s.slice(i - 1, i);\n          if (testC == 'e' || testC == '-' || testC == 'E') {\n            continue;\n          }\n          var test = s.substring(0, i);\n          var number = Number(test);\n          if (isNaN(number)) {\n            break;\n          }\n          index = i;\n        }\n        var d = parseFloat(s);\n        if (isNaN(d)) {\n          d = NaN;\n        }\n        endPtr[0] = s.slice(index);\n        return d;\n      }\n      exports.strtod = strtod;\n      var s_isStarted = false;\n      var s_isInitialized = false;\n      var s_option = null;\n      var s_cubismIdManager = null;\n      exports.Constant = Object.freeze({\n        vertexOffset: 0,\n        vertexStep: 2\n      });\n      function csmDelete(address) {\n        if (!address) {\n          return;\n        }\n        address = void 0;\n      }\n      exports.csmDelete = csmDelete;\n      var CubismFramework = function () {\n        function CubismFramework() {}\n        CubismFramework.startUp = function (option) {\n          if (option === void 0) {\n            option = null;\n          }\n          if (s_isStarted) {\n            (0, cubismdebug_1.CubismLogInfo)('CubismFramework.startUp() is already done.');\n            return s_isStarted;\n          }\n          s_option = option;\n          if (s_option != null) {\n            Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction);\n          }\n          s_isStarted = true;\n          if (s_isStarted) {\n            var version = Live2DCubismCore.Version.csmGetVersion();\n            var major = (version & 0xff000000) >> 24;\n            var minor = (version & 0x00ff0000) >> 16;\n            var patch = version & 0x0000ffff;\n            var versionNumber = version;\n            (0, cubismdebug_1.CubismLogInfo)(\"Live2D Cubism Core version: {0}.{1}.{2} ({3})\", ('00' + major).slice(-2), ('00' + minor).slice(-2), ('0000' + patch).slice(-4), versionNumber);\n          }\n          (0, cubismdebug_1.CubismLogInfo)('CubismFramework.startUp() is complete.');\n          return s_isStarted;\n        };\n        CubismFramework.cleanUp = function () {\n          s_isStarted = false;\n          s_isInitialized = false;\n          s_option = null;\n          s_cubismIdManager = null;\n        };\n        CubismFramework.initialize = function (memorySize) {\n          if (memorySize === void 0) {\n            memorySize = 0;\n          }\n          (0, cubismdebug_1.CSM_ASSERT)(s_isStarted);\n          if (!s_isStarted) {\n            (0, cubismdebug_1.CubismLogWarning)('CubismFramework is not started.');\n            return;\n          }\n          if (s_isInitialized) {\n            (0, cubismdebug_1.CubismLogWarning)('CubismFramework.initialize() skipped, already initialized.');\n            return;\n          }\n          cubismjson_1.Value.staticInitializeNotForClientCall();\n          s_cubismIdManager = new cubismidmanager_1.CubismIdManager();\n          Live2DCubismCore.Memory.initializeAmountOfMemory(memorySize);\n          s_isInitialized = true;\n          (0, cubismdebug_1.CubismLogInfo)('CubismFramework.initialize() is complete.');\n        };\n        CubismFramework.dispose = function () {\n          (0, cubismdebug_1.CSM_ASSERT)(s_isStarted);\n          if (!s_isStarted) {\n            (0, cubismdebug_1.CubismLogWarning)('CubismFramework is not started.');\n            return;\n          }\n          if (!s_isInitialized) {\n            (0, cubismdebug_1.CubismLogWarning)('CubismFramework.dispose() skipped, not initialized.');\n            return;\n          }\n          cubismjson_1.Value.staticReleaseNotForClientCall();\n          s_cubismIdManager.release();\n          s_cubismIdManager = null;\n          cubismrenderer_1.CubismRenderer.staticRelease();\n          s_isInitialized = false;\n          (0, cubismdebug_1.CubismLogInfo)('CubismFramework.dispose() is complete.');\n        };\n        CubismFramework.isStarted = function () {\n          return s_isStarted;\n        };\n        CubismFramework.isInitialized = function () {\n          return s_isInitialized;\n        };\n        CubismFramework.coreLogFunction = function (message) {\n          if (!Live2DCubismCore.Logging.csmGetLogFunction()) {\n            return;\n          }\n          Live2DCubismCore.Logging.csmGetLogFunction()(message);\n        };\n        CubismFramework.getLoggingLevel = function () {\n          if (s_option != null) {\n            return s_option.loggingLevel;\n          }\n          return LogLevel.LogLevel_Off;\n        };\n        CubismFramework.getIdManager = function () {\n          return s_cubismIdManager;\n        };\n        return CubismFramework;\n      }();\n      exports.CubismFramework = CubismFramework;\n      var Option = function () {\n        function Option() {}\n        return Option;\n      }();\n      exports.Option = Option;\n      var LogLevel;\n      (function (LogLevel) {\n        LogLevel[LogLevel[\"LogLevel_Verbose\"] = 0] = \"LogLevel_Verbose\";\n        LogLevel[LogLevel[\"LogLevel_Debug\"] = 1] = \"LogLevel_Debug\";\n        LogLevel[LogLevel[\"LogLevel_Info\"] = 2] = \"LogLevel_Info\";\n        LogLevel[LogLevel[\"LogLevel_Warning\"] = 3] = \"LogLevel_Warning\";\n        LogLevel[LogLevel[\"LogLevel_Error\"] = 4] = \"LogLevel_Error\";\n        LogLevel[LogLevel[\"LogLevel_Off\"] = 5] = \"LogLevel_Off\";\n      })(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n      var $ = __importStar(__webpack_require__( /*! ./live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.Constant = $.Constant;\n        Live2DCubismFramework.csmDelete = $.csmDelete;\n        Live2DCubismFramework.CubismFramework = $.CubismFramework;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/math/cubismmath.ts\":\n    /*!*************************************************!*\\\n      !*** ../../../Framework/src/math/cubismmath.ts ***!\n      \\*************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismMath = void 0;\n      var cubismvector2_1 = __webpack_require__( /*! ./cubismvector2 */\"../../../Framework/src/math/cubismvector2.ts\");\n      var CubismMath = exports.CubismMath = function () {\n        function CubismMath() {}\n        CubismMath.range = function (value, min, max) {\n          if (value < min) {\n            value = min;\n          } else if (value > max) {\n            value = max;\n          }\n          return value;\n        };\n        CubismMath.sin = function (x) {\n          return Math.sin(x);\n        };\n        CubismMath.cos = function (x) {\n          return Math.cos(x);\n        };\n        CubismMath.abs = function (x) {\n          return Math.abs(x);\n        };\n        CubismMath.sqrt = function (x) {\n          return Math.sqrt(x);\n        };\n        CubismMath.cbrt = function (x) {\n          if (x === 0) {\n            return x;\n          }\n          var cx = x;\n          var isNegativeNumber = cx < 0;\n          if (isNegativeNumber) {\n            cx = -cx;\n          }\n          var ret;\n          if (cx === Infinity) {\n            ret = Infinity;\n          } else {\n            ret = Math.exp(Math.log(cx) / 3);\n            ret = (cx / (ret * ret) + 2 * ret) / 3;\n          }\n          return isNegativeNumber ? -ret : ret;\n        };\n        CubismMath.getEasingSine = function (value) {\n          if (value < 0.0) {\n            return 0.0;\n          } else if (value > 1.0) {\n            return 1.0;\n          }\n          return 0.5 - 0.5 * this.cos(value * Math.PI);\n        };\n        CubismMath.max = function (left, right) {\n          return left > right ? left : right;\n        };\n        CubismMath.min = function (left, right) {\n          return left > right ? right : left;\n        };\n        CubismMath.degreesToRadian = function (degrees) {\n          return degrees / 180.0 * Math.PI;\n        };\n        CubismMath.radianToDegrees = function (radian) {\n          return radian * 180.0 / Math.PI;\n        };\n        CubismMath.directionToRadian = function (from, to) {\n          var q1 = Math.atan2(to.y, to.x);\n          var q2 = Math.atan2(from.y, from.x);\n          var ret = q1 - q2;\n          while (ret < -Math.PI) {\n            ret += Math.PI * 2.0;\n          }\n          while (ret > Math.PI) {\n            ret -= Math.PI * 2.0;\n          }\n          return ret;\n        };\n        CubismMath.directionToDegrees = function (from, to) {\n          var radian = this.directionToRadian(from, to);\n          var degree = this.radianToDegrees(radian);\n          if (to.x - from.x > 0.0) {\n            degree = -degree;\n          }\n          return degree;\n        };\n        CubismMath.radianToDirection = function (totalAngle) {\n          var ret = new cubismvector2_1.CubismVector2();\n          ret.x = this.sin(totalAngle);\n          ret.y = this.cos(totalAngle);\n          return ret;\n        };\n        CubismMath.quadraticEquation = function (a, b, c) {\n          if (this.abs(a) < CubismMath.Epsilon) {\n            if (this.abs(b) < CubismMath.Epsilon) {\n              return -c;\n            }\n            return -c / b;\n          }\n          return -(b + this.sqrt(b * b - 4.0 * a * c)) / (2.0 * a);\n        };\n        CubismMath.cardanoAlgorithmForBezier = function (a, b, c, d) {\n          if (this.sqrt(a) < CubismMath.Epsilon) {\n            return this.range(this.quadraticEquation(b, c, d), 0.0, 1.0);\n          }\n          var ba = b / a;\n          var ca = c / a;\n          var da = d / a;\n          var p = (3.0 * ca - ba * ba) / 3.0;\n          var p3 = p / 3.0;\n          var q = (2.0 * ba * ba * ba - 9.0 * ba * ca + 27.0 * da) / 27.0;\n          var q2 = q / 2.0;\n          var discriminant = q2 * q2 + p3 * p3 * p3;\n          var center = 0.5;\n          var threshold = center + 0.01;\n          if (discriminant < 0.0) {\n            var mp3 = -p / 3.0;\n            var mp33 = mp3 * mp3 * mp3;\n            var r = this.sqrt(mp33);\n            var t = -q / (2.0 * r);\n            var cosphi = this.range(t, -1.0, 1.0);\n            var phi = Math.acos(cosphi);\n            var crtr = this.cbrt(r);\n            var t1 = 2.0 * crtr;\n            var root1_1 = t1 * this.cos(phi / 3.0) - ba / 3.0;\n            if (this.abs(root1_1 - center) < threshold) {\n              return this.range(root1_1, 0.0, 1.0);\n            }\n            var root2 = t1 * this.cos((phi + 2.0 * Math.PI) / 3.0) - ba / 3.0;\n            if (this.abs(root2 - center) < threshold) {\n              return this.range(root2, 0.0, 1.0);\n            }\n            var root3 = t1 * this.cos((phi + 4.0 * Math.PI) / 3.0) - ba / 3.0;\n            return this.range(root3, 0.0, 1.0);\n          }\n          if (discriminant == 0.0) {\n            var u1_1;\n            if (q2 < 0.0) {\n              u1_1 = this.cbrt(-q2);\n            } else {\n              u1_1 = -this.cbrt(q2);\n            }\n            var root1_2 = 2.0 * u1_1 - ba / 3.0;\n            if (this.abs(root1_2 - center) < threshold) {\n              return this.range(root1_2, 0.0, 1.0);\n            }\n            var root2 = -u1_1 - ba / 3.0;\n            return this.range(root2, 0.0, 1.0);\n          }\n          var sd = this.sqrt(discriminant);\n          var u1 = this.cbrt(sd - q2);\n          var v1 = this.cbrt(sd + q2);\n          var root1 = u1 - v1 - ba / 3.0;\n          return this.range(root1, 0.0, 1.0);\n        };\n        CubismMath.Epsilon = 0.00001;\n        return CubismMath;\n      }();\n      var $ = __importStar(__webpack_require__( /*! ./cubismmath */\"../../../Framework/src/math/cubismmath.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMath = $.CubismMath;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/math/cubismmatrix44.ts\":\n    /*!*****************************************************!*\\\n      !*** ../../../Framework/src/math/cubismmatrix44.ts ***!\n      \\*****************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismMatrix44 = void 0;\n      var CubismMatrix44 = function () {\n        function CubismMatrix44() {\n          this._tr = new Float32Array(16);\n          this.loadIdentity();\n        }\n        CubismMatrix44.multiply = function (a, b, dst) {\n          var c = new Float32Array([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]);\n          var n = 4;\n          for (var i = 0; i < n; ++i) {\n            for (var j = 0; j < n; ++j) {\n              for (var k = 0; k < n; ++k) {\n                c[j + i * 4] += a[k + i * 4] * b[j + k * 4];\n              }\n            }\n          }\n          for (var i = 0; i < 16; ++i) {\n            dst[i] = c[i];\n          }\n        };\n        CubismMatrix44.prototype.loadIdentity = function () {\n          var c = new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n          this.setMatrix(c);\n        };\n        CubismMatrix44.prototype.setMatrix = function (tr) {\n          for (var i = 0; i < 16; ++i) {\n            this._tr[i] = tr[i];\n          }\n        };\n        CubismMatrix44.prototype.getArray = function () {\n          return this._tr;\n        };\n        CubismMatrix44.prototype.getScaleX = function () {\n          return this._tr[0];\n        };\n        CubismMatrix44.prototype.getScaleY = function () {\n          return this._tr[5];\n        };\n        CubismMatrix44.prototype.getTranslateX = function () {\n          return this._tr[12];\n        };\n        CubismMatrix44.prototype.getTranslateY = function () {\n          return this._tr[13];\n        };\n        CubismMatrix44.prototype.transformX = function (src) {\n          return this._tr[0] * src + this._tr[12];\n        };\n        CubismMatrix44.prototype.transformY = function (src) {\n          return this._tr[5] * src + this._tr[13];\n        };\n        CubismMatrix44.prototype.invertTransformX = function (src) {\n          return (src - this._tr[12]) / this._tr[0];\n        };\n        CubismMatrix44.prototype.invertTransformY = function (src) {\n          return (src - this._tr[13]) / this._tr[5];\n        };\n        CubismMatrix44.prototype.translateRelative = function (x, y) {\n          var tr1 = new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, x, y, 0.0, 1.0]);\n          CubismMatrix44.multiply(tr1, this._tr, this._tr);\n        };\n        CubismMatrix44.prototype.translate = function (x, y) {\n          this._tr[12] = x;\n          this._tr[13] = y;\n        };\n        CubismMatrix44.prototype.translateX = function (x) {\n          this._tr[12] = x;\n        };\n        CubismMatrix44.prototype.translateY = function (y) {\n          this._tr[13] = y;\n        };\n        CubismMatrix44.prototype.scaleRelative = function (x, y) {\n          var tr1 = new Float32Array([x, 0.0, 0.0, 0.0, 0.0, y, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n          CubismMatrix44.multiply(tr1, this._tr, this._tr);\n        };\n        CubismMatrix44.prototype.scale = function (x, y) {\n          this._tr[0] = x;\n          this._tr[5] = y;\n        };\n        CubismMatrix44.prototype.multiplyByMatrix = function (m) {\n          CubismMatrix44.multiply(m.getArray(), this._tr, this._tr);\n        };\n        CubismMatrix44.prototype.clone = function () {\n          var cloneMatrix = new CubismMatrix44();\n          for (var i = 0; i < this._tr.length; i++) {\n            cloneMatrix._tr[i] = this._tr[i];\n          }\n          return cloneMatrix;\n        };\n        return CubismMatrix44;\n      }();\n      exports.CubismMatrix44 = CubismMatrix44;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmatrix44 */\"../../../Framework/src/math/cubismmatrix44.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMatrix44 = $.CubismMatrix44;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/math/cubismmodelmatrix.ts\":\n    /*!********************************************************!*\\\n      !*** ../../../Framework/src/math/cubismmodelmatrix.ts ***!\n      \\********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismModelMatrix = void 0;\n      var cubismmatrix44_1 = __webpack_require__( /*! ./cubismmatrix44 */\"../../../Framework/src/math/cubismmatrix44.ts\");\n      var CubismModelMatrix = function (_super) {\n        __extends(CubismModelMatrix, _super);\n        function CubismModelMatrix(w, h) {\n          var _this = _super.call(this) || this;\n          _this._width = w !== undefined ? w : 0.0;\n          _this._height = h !== undefined ? h : 0.0;\n          _this.setHeight(2.0);\n          return _this;\n        }\n        CubismModelMatrix.prototype.setWidth = function (w) {\n          var scaleX = w / this._width;\n          var scaleY = scaleX;\n          this.scale(scaleX, scaleY);\n        };\n        CubismModelMatrix.prototype.setHeight = function (h) {\n          var scaleX = h / this._height;\n          var scaleY = scaleX;\n          this.scale(scaleX, scaleY);\n        };\n        CubismModelMatrix.prototype.setPosition = function (x, y) {\n          this.translate(x, y);\n        };\n        CubismModelMatrix.prototype.setCenterPosition = function (x, y) {\n          this.centerX(x);\n          this.centerY(y);\n        };\n        CubismModelMatrix.prototype.top = function (y) {\n          this.setY(y);\n        };\n        CubismModelMatrix.prototype.bottom = function (y) {\n          var h = this._height * this.getScaleY();\n          this.translateY(y - h);\n        };\n        CubismModelMatrix.prototype.left = function (x) {\n          this.setX(x);\n        };\n        CubismModelMatrix.prototype.right = function (x) {\n          var w = this._width * this.getScaleX();\n          this.translateX(x - w);\n        };\n        CubismModelMatrix.prototype.centerX = function (x) {\n          var w = this._width * this.getScaleX();\n          this.translateX(x - w / 2.0);\n        };\n        CubismModelMatrix.prototype.setX = function (x) {\n          this.translateX(x);\n        };\n        CubismModelMatrix.prototype.centerY = function (y) {\n          var h = this._height * this.getScaleY();\n          this.translateY(y - h / 2.0);\n        };\n        CubismModelMatrix.prototype.setY = function (y) {\n          this.translateY(y);\n        };\n        CubismModelMatrix.prototype.setupFromLayout = function (layout) {\n          var keyWidth = 'width';\n          var keyHeight = 'height';\n          var keyX = 'x';\n          var keyY = 'y';\n          var keyCenterX = 'center_x';\n          var keyCenterY = 'center_y';\n          var keyTop = 'top';\n          var keyBottom = 'bottom';\n          var keyLeft = 'left';\n          var keyRight = 'right';\n          for (var ite = layout.begin(); ite.notEqual(layout.end()); ite.preIncrement()) {\n            var key = ite.ptr().first;\n            var value = ite.ptr().second;\n            if (key == keyWidth) {\n              this.setWidth(value);\n            } else if (key == keyHeight) {\n              this.setHeight(value);\n            }\n          }\n          for (var ite = layout.begin(); ite.notEqual(layout.end()); ite.preIncrement()) {\n            var key = ite.ptr().first;\n            var value = ite.ptr().second;\n            if (key == keyX) {\n              this.setX(value);\n            } else if (key == keyY) {\n              this.setY(value);\n            } else if (key == keyCenterX) {\n              this.centerX(value);\n            } else if (key == keyCenterY) {\n              this.centerY(value);\n            } else if (key == keyTop) {\n              this.top(value);\n            } else if (key == keyBottom) {\n              this.bottom(value);\n            } else if (key == keyLeft) {\n              this.left(value);\n            } else if (key == keyRight) {\n              this.right(value);\n            }\n          }\n        };\n        return CubismModelMatrix;\n      }(cubismmatrix44_1.CubismMatrix44);\n      exports.CubismModelMatrix = CubismModelMatrix;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmodelmatrix */\"../../../Framework/src/math/cubismmodelmatrix.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismModelMatrix = $.CubismModelMatrix;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/math/cubismtargetpoint.ts\":\n    /*!********************************************************!*\\\n      !*** ../../../Framework/src/math/cubismtargetpoint.ts ***!\n      \\********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismTargetPoint = void 0;\n      var cubismmath_1 = __webpack_require__( /*! ./cubismmath */\"../../../Framework/src/math/cubismmath.ts\");\n      var FrameRate = 30;\n      var Epsilon = 0.01;\n      var CubismTargetPoint = function () {\n        function CubismTargetPoint() {\n          this._faceTargetX = 0.0;\n          this._faceTargetY = 0.0;\n          this._faceX = 0.0;\n          this._faceY = 0.0;\n          this._faceVX = 0.0;\n          this._faceVY = 0.0;\n          this._lastTimeSeconds = 0.0;\n          this._userTimeSeconds = 0.0;\n        }\n        CubismTargetPoint.prototype.update = function (deltaTimeSeconds) {\n          this._userTimeSeconds += deltaTimeSeconds;\n          var faceParamMaxV = 40.0 / 10.0;\n          var maxV = faceParamMaxV * 1.0 / FrameRate;\n          if (this._lastTimeSeconds == 0.0) {\n            this._lastTimeSeconds = this._userTimeSeconds;\n            return;\n          }\n          var deltaTimeWeight = (this._userTimeSeconds - this._lastTimeSeconds) * FrameRate;\n          this._lastTimeSeconds = this._userTimeSeconds;\n          var timeToMaxSpeed = 0.15;\n          var frameToMaxSpeed = timeToMaxSpeed * FrameRate;\n          var maxA = deltaTimeWeight * maxV / frameToMaxSpeed;\n          var dx = this._faceTargetX - this._faceX;\n          var dy = this._faceTargetY - this._faceY;\n          if (cubismmath_1.CubismMath.abs(dx) <= Epsilon && cubismmath_1.CubismMath.abs(dy) <= Epsilon) {\n            return;\n          }\n          var d = cubismmath_1.CubismMath.sqrt(dx * dx + dy * dy);\n          var vx = maxV * dx / d;\n          var vy = maxV * dy / d;\n          var ax = vx - this._faceVX;\n          var ay = vy - this._faceVY;\n          var a = cubismmath_1.CubismMath.sqrt(ax * ax + ay * ay);\n          if (a < -maxA || a > maxA) {\n            ax *= maxA / a;\n            ay *= maxA / a;\n          }\n          this._faceVX += ax;\n          this._faceVY += ay;\n          {\n            var maxV_1 = 0.5 * (cubismmath_1.CubismMath.sqrt(maxA * maxA + 16.0 * maxA * d - 8.0 * maxA * d) - maxA);\n            var curV = cubismmath_1.CubismMath.sqrt(this._faceVX * this._faceVX + this._faceVY * this._faceVY);\n            if (curV > maxV_1) {\n              this._faceVX *= maxV_1 / curV;\n              this._faceVY *= maxV_1 / curV;\n            }\n          }\n          this._faceX += this._faceVX;\n          this._faceY += this._faceVY;\n        };\n        CubismTargetPoint.prototype.getX = function () {\n          return this._faceX;\n        };\n        CubismTargetPoint.prototype.getY = function () {\n          return this._faceY;\n        };\n        CubismTargetPoint.prototype.set = function (x, y) {\n          this._faceTargetX = x;\n          this._faceTargetY = y;\n        };\n        return CubismTargetPoint;\n      }();\n      exports.CubismTargetPoint = CubismTargetPoint;\n      var $ = __importStar(__webpack_require__( /*! ./cubismtargetpoint */\"../../../Framework/src/math/cubismtargetpoint.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismTargetPoint = $.CubismTargetPoint;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/math/cubismvector2.ts\":\n    /*!****************************************************!*\\\n      !*** ../../../Framework/src/math/cubismvector2.ts ***!\n      \\****************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismVector2 = void 0;\n      var CubismVector2 = function () {\n        function CubismVector2(x, y) {\n          this.x = x;\n          this.y = y;\n          this.x = x == undefined ? 0.0 : x;\n          this.y = y == undefined ? 0.0 : y;\n        }\n        CubismVector2.prototype.add = function (vector2) {\n          var ret = new CubismVector2(0.0, 0.0);\n          ret.x = this.x + vector2.x;\n          ret.y = this.y + vector2.y;\n          return ret;\n        };\n        CubismVector2.prototype.substract = function (vector2) {\n          var ret = new CubismVector2(0.0, 0.0);\n          ret.x = this.x - vector2.x;\n          ret.y = this.y - vector2.y;\n          return ret;\n        };\n        CubismVector2.prototype.multiply = function (vector2) {\n          var ret = new CubismVector2(0.0, 0.0);\n          ret.x = this.x * vector2.x;\n          ret.y = this.y * vector2.y;\n          return ret;\n        };\n        CubismVector2.prototype.multiplyByScaler = function (scalar) {\n          return this.multiply(new CubismVector2(scalar, scalar));\n        };\n        CubismVector2.prototype.division = function (vector2) {\n          var ret = new CubismVector2(0.0, 0.0);\n          ret.x = this.x / vector2.x;\n          ret.y = this.y / vector2.y;\n          return ret;\n        };\n        CubismVector2.prototype.divisionByScalar = function (scalar) {\n          return this.division(new CubismVector2(scalar, scalar));\n        };\n        CubismVector2.prototype.getLength = function () {\n          return Math.sqrt(this.x * this.x + this.y * this.y);\n        };\n        CubismVector2.prototype.getDistanceWith = function (a) {\n          return Math.sqrt((this.x - a.x) * (this.x - a.x) + (this.y - a.y) * (this.y - a.y));\n        };\n        CubismVector2.prototype.dot = function (a) {\n          return this.x * a.x + this.y * a.y;\n        };\n        CubismVector2.prototype.normalize = function () {\n          var length = Math.pow(this.x * this.x + this.y * this.y, 0.5);\n          this.x = this.x / length;\n          this.y = this.y / length;\n        };\n        CubismVector2.prototype.isEqual = function (rhs) {\n          return this.x == rhs.x && this.y == rhs.y;\n        };\n        CubismVector2.prototype.isNotEqual = function (rhs) {\n          return !this.isEqual(rhs);\n        };\n        return CubismVector2;\n      }();\n      exports.CubismVector2 = CubismVector2;\n      var $ = __importStar(__webpack_require__( /*! ./cubismvector2 */\"../../../Framework/src/math/cubismvector2.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismVector2 = $.CubismVector2;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/math/cubismviewmatrix.ts\":\n    /*!*******************************************************!*\\\n      !*** ../../../Framework/src/math/cubismviewmatrix.ts ***!\n      \\*******************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismViewMatrix = void 0;\n      var cubismmatrix44_1 = __webpack_require__( /*! ./cubismmatrix44 */\"../../../Framework/src/math/cubismmatrix44.ts\");\n      var CubismViewMatrix = function (_super) {\n        __extends(CubismViewMatrix, _super);\n        function CubismViewMatrix() {\n          var _this = _super.call(this) || this;\n          _this._screenLeft = 0.0;\n          _this._screenRight = 0.0;\n          _this._screenTop = 0.0;\n          _this._screenBottom = 0.0;\n          _this._maxLeft = 0.0;\n          _this._maxRight = 0.0;\n          _this._maxTop = 0.0;\n          _this._maxBottom = 0.0;\n          _this._maxScale = 0.0;\n          _this._minScale = 0.0;\n          return _this;\n        }\n        CubismViewMatrix.prototype.adjustTranslate = function (x, y) {\n          if (this._tr[0] * this._maxLeft + (this._tr[12] + x) > this._screenLeft) {\n            x = this._screenLeft - this._tr[0] * this._maxLeft - this._tr[12];\n          }\n          if (this._tr[0] * this._maxRight + (this._tr[12] + x) < this._screenRight) {\n            x = this._screenRight - this._tr[0] * this._maxRight - this._tr[12];\n          }\n          if (this._tr[5] * this._maxTop + (this._tr[13] + y) < this._screenTop) {\n            y = this._screenTop - this._tr[5] * this._maxTop - this._tr[13];\n          }\n          if (this._tr[5] * this._maxBottom + (this._tr[13] + y) > this._screenBottom) {\n            y = this._screenBottom - this._tr[5] * this._maxBottom - this._tr[13];\n          }\n          var tr1 = new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, x, y, 0.0, 1.0]);\n          cubismmatrix44_1.CubismMatrix44.multiply(tr1, this._tr, this._tr);\n        };\n        CubismViewMatrix.prototype.adjustScale = function (cx, cy, scale) {\n          var maxScale = this.getMaxScale();\n          var minScale = this.getMinScale();\n          var targetScale = scale * this._tr[0];\n          if (targetScale < minScale) {\n            if (this._tr[0] > 0.0) {\n              scale = minScale / this._tr[0];\n            }\n          } else if (targetScale > maxScale) {\n            if (this._tr[0] > 0.0) {\n              scale = maxScale / this._tr[0];\n            }\n          }\n          var tr1 = new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, cx, cy, 0.0, 1.0]);\n          var tr2 = new Float32Array([scale, 0.0, 0.0, 0.0, 0.0, scale, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);\n          var tr3 = new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, -cx, -cy, 0.0, 1.0]);\n          cubismmatrix44_1.CubismMatrix44.multiply(tr3, this._tr, this._tr);\n          cubismmatrix44_1.CubismMatrix44.multiply(tr2, this._tr, this._tr);\n          cubismmatrix44_1.CubismMatrix44.multiply(tr1, this._tr, this._tr);\n        };\n        CubismViewMatrix.prototype.setScreenRect = function (left, right, bottom, top) {\n          this._screenLeft = left;\n          this._screenRight = right;\n          this._screenBottom = bottom;\n          this._screenTop = top;\n        };\n        CubismViewMatrix.prototype.setMaxScreenRect = function (left, right, bottom, top) {\n          this._maxLeft = left;\n          this._maxRight = right;\n          this._maxTop = top;\n          this._maxBottom = bottom;\n        };\n        CubismViewMatrix.prototype.setMaxScale = function (maxScale) {\n          this._maxScale = maxScale;\n        };\n        CubismViewMatrix.prototype.setMinScale = function (minScale) {\n          this._minScale = minScale;\n        };\n        CubismViewMatrix.prototype.getMaxScale = function () {\n          return this._maxScale;\n        };\n        CubismViewMatrix.prototype.getMinScale = function () {\n          return this._minScale;\n        };\n        CubismViewMatrix.prototype.isMaxScale = function () {\n          return this.getScaleX() >= this._maxScale;\n        };\n        CubismViewMatrix.prototype.isMinScale = function () {\n          return this.getScaleX() <= this._minScale;\n        };\n        CubismViewMatrix.prototype.getScreenLeft = function () {\n          return this._screenLeft;\n        };\n        CubismViewMatrix.prototype.getScreenRight = function () {\n          return this._screenRight;\n        };\n        CubismViewMatrix.prototype.getScreenBottom = function () {\n          return this._screenBottom;\n        };\n        CubismViewMatrix.prototype.getScreenTop = function () {\n          return this._screenTop;\n        };\n        CubismViewMatrix.prototype.getMaxLeft = function () {\n          return this._maxLeft;\n        };\n        CubismViewMatrix.prototype.getMaxRight = function () {\n          return this._maxRight;\n        };\n        CubismViewMatrix.prototype.getMaxBottom = function () {\n          return this._maxBottom;\n        };\n        CubismViewMatrix.prototype.getMaxTop = function () {\n          return this._maxTop;\n        };\n        return CubismViewMatrix;\n      }(cubismmatrix44_1.CubismMatrix44);\n      exports.CubismViewMatrix = CubismViewMatrix;\n      var $ = __importStar(__webpack_require__( /*! ./cubismviewmatrix */\"../../../Framework/src/math/cubismviewmatrix.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismViewMatrix = $.CubismViewMatrix;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/model/cubismmoc.ts\":\n    /*!*************************************************!*\\\n      !*** ../../../Framework/src/model/cubismmoc.ts ***!\n      \\*************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismMoc = void 0;\n      var cubismdebug_1 = __webpack_require__( /*! ../utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var cubismmodel_1 = __webpack_require__( /*! ./cubismmodel */\"../../../Framework/src/model/cubismmodel.ts\");\n      var CubismMoc = function () {\n        function CubismMoc(moc) {\n          this._moc = moc;\n          this._modelCount = 0;\n          this._mocVersion = 0;\n        }\n        CubismMoc.create = function (mocBytes, shouldCheckMocConsistency) {\n          var cubismMoc = null;\n          if (shouldCheckMocConsistency) {\n            var consistency = this.hasMocConsistency(mocBytes);\n            if (!consistency) {\n              (0, cubismdebug_1.CubismLogError)(\"Inconsistent MOC3.\");\n              return cubismMoc;\n            }\n          }\n          var moc = Live2DCubismCore.Moc.fromArrayBuffer(mocBytes);\n          if (moc) {\n            cubismMoc = new CubismMoc(moc);\n            cubismMoc._mocVersion = Live2DCubismCore.Version.csmGetMocVersion(moc, mocBytes);\n          }\n          return cubismMoc;\n        };\n        CubismMoc.delete = function (moc) {\n          moc._moc._release();\n          moc._moc = null;\n          moc = null;\n        };\n        CubismMoc.prototype.createModel = function () {\n          var cubismModel = null;\n          var model = Live2DCubismCore.Model.fromMoc(this._moc);\n          if (model) {\n            cubismModel = new cubismmodel_1.CubismModel(model);\n            cubismModel.initialize();\n            ++this._modelCount;\n          }\n          return cubismModel;\n        };\n        CubismMoc.prototype.deleteModel = function (model) {\n          if (model != null) {\n            model.release();\n            model = null;\n            --this._modelCount;\n          }\n        };\n        CubismMoc.prototype.release = function () {\n          (0, cubismdebug_1.CSM_ASSERT)(this._modelCount == 0);\n          this._moc._release();\n          this._moc = null;\n        };\n        CubismMoc.prototype.getLatestMocVersion = function () {\n          return Live2DCubismCore.Version.csmGetLatestMocVersion();\n        };\n        CubismMoc.prototype.getMocVersion = function () {\n          return this._mocVersion;\n        };\n        CubismMoc.hasMocConsistency = function (mocBytes) {\n          var isConsistent = Live2DCubismCore.Moc.prototype.hasMocConsistency(mocBytes);\n          return isConsistent === 1 ? true : false;\n        };\n        return CubismMoc;\n      }();\n      exports.CubismMoc = CubismMoc;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmoc */\"../../../Framework/src/model/cubismmoc.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMoc = $.CubismMoc;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/model/cubismmodel.ts\":\n    /*!***************************************************!*\\\n      !*** ../../../Framework/src/model/cubismmodel.ts ***!\n      \\***************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismModel = exports.DrawableCullingData = exports.PartColorData = exports.DrawableColorData = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var cubismrenderer_1 = __webpack_require__( /*! ../rendering/cubismrenderer */\"../../../Framework/src/rendering/cubismrenderer.ts\");\n      var csmmap_1 = __webpack_require__( /*! ../type/csmmap */\"../../../Framework/src/type/csmmap.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! ../utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var DrawableColorData = function () {\n        function DrawableColorData(isOverwritten, color) {\n          if (isOverwritten === void 0) {\n            isOverwritten = false;\n          }\n          if (color === void 0) {\n            color = new cubismrenderer_1.CubismTextureColor();\n          }\n          this.isOverwritten = isOverwritten;\n          this.Color = color;\n        }\n        return DrawableColorData;\n      }();\n      exports.DrawableColorData = DrawableColorData;\n      var PartColorData = function () {\n        function PartColorData(isOverwritten, color) {\n          if (isOverwritten === void 0) {\n            isOverwritten = false;\n          }\n          if (color === void 0) {\n            color = new cubismrenderer_1.CubismTextureColor();\n          }\n          this.isOverwritten = isOverwritten;\n          this.Color = color;\n        }\n        return PartColorData;\n      }();\n      exports.PartColorData = PartColorData;\n      var DrawableCullingData = function () {\n        function DrawableCullingData(isOverwritten, isCulling) {\n          if (isOverwritten === void 0) {\n            isOverwritten = false;\n          }\n          if (isCulling === void 0) {\n            isCulling = false;\n          }\n          this.isOverwritten = isOverwritten;\n          this.isCulling = isCulling;\n        }\n        return DrawableCullingData;\n      }();\n      exports.DrawableCullingData = DrawableCullingData;\n      var CubismModel = function () {\n        function CubismModel(model) {\n          this._model = model;\n          this._parameterValues = null;\n          this._parameterMaximumValues = null;\n          this._parameterMinimumValues = null;\n          this._partOpacities = null;\n          this._savedParameters = new csmvector_1.csmVector();\n          this._parameterIds = new csmvector_1.csmVector();\n          this._drawableIds = new csmvector_1.csmVector();\n          this._partIds = new csmvector_1.csmVector();\n          this._isOverwrittenModelMultiplyColors = false;\n          this._isOverwrittenModelScreenColors = false;\n          this._isOverwrittenCullings = false;\n          this._modelOpacity = 1.0;\n          this._userMultiplyColors = new csmvector_1.csmVector();\n          this._userScreenColors = new csmvector_1.csmVector();\n          this._userCullings = new csmvector_1.csmVector();\n          this._userPartMultiplyColors = new csmvector_1.csmVector();\n          this._userPartScreenColors = new csmvector_1.csmVector();\n          this._partChildDrawables = new csmvector_1.csmVector();\n          this._notExistPartId = new csmmap_1.csmMap();\n          this._notExistParameterId = new csmmap_1.csmMap();\n          this._notExistParameterValues = new csmmap_1.csmMap();\n          this._notExistPartOpacities = new csmmap_1.csmMap();\n        }\n        CubismModel.prototype.update = function () {\n          this._model.update();\n          this._model.drawables.resetDynamicFlags();\n        };\n        CubismModel.prototype.getPixelsPerUnit = function () {\n          if (this._model == null) {\n            return 0.0;\n          }\n          return this._model.canvasinfo.PixelsPerUnit;\n        };\n        CubismModel.prototype.getCanvasWidth = function () {\n          if (this._model == null) {\n            return 0.0;\n          }\n          return this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit;\n        };\n        CubismModel.prototype.getCanvasHeight = function () {\n          if (this._model == null) {\n            return 0.0;\n          }\n          return this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit;\n        };\n        CubismModel.prototype.saveParameters = function () {\n          var parameterCount = this._model.parameters.count;\n          var savedParameterCount = this._savedParameters.getSize();\n          for (var i = 0; i < parameterCount; ++i) {\n            if (i < savedParameterCount) {\n              this._savedParameters.set(i, this._parameterValues[i]);\n            } else {\n              this._savedParameters.pushBack(this._parameterValues[i]);\n            }\n          }\n        };\n        CubismModel.prototype.getMultiplyColor = function (index) {\n          if (this.getOverwriteFlagForModelMultiplyColors() || this.getOverwriteFlagForDrawableMultiplyColors(index)) {\n            return this._userMultiplyColors.at(index).Color;\n          }\n          var color = this.getDrawableMultiplyColor(index);\n          return color;\n        };\n        CubismModel.prototype.getScreenColor = function (index) {\n          if (this.getOverwriteFlagForModelScreenColors() || this.getOverwriteFlagForDrawableScreenColors(index)) {\n            return this._userScreenColors.at(index).Color;\n          }\n          var color = this.getDrawableScreenColor(index);\n          return color;\n        };\n        CubismModel.prototype.setMultiplyColorByTextureColor = function (index, color) {\n          this.setMultiplyColorByRGBA(index, color.R, color.G, color.B, color.A);\n        };\n        CubismModel.prototype.setMultiplyColorByRGBA = function (index, r, g, b, a) {\n          if (a === void 0) {\n            a = 1.0;\n          }\n          this._userMultiplyColors.at(index).Color.R = r;\n          this._userMultiplyColors.at(index).Color.G = g;\n          this._userMultiplyColors.at(index).Color.B = b;\n          this._userMultiplyColors.at(index).Color.A = a;\n        };\n        CubismModel.prototype.setScreenColorByTextureColor = function (index, color) {\n          this.setScreenColorByRGBA(index, color.R, color.G, color.B, color.A);\n        };\n        CubismModel.prototype.setScreenColorByRGBA = function (index, r, g, b, a) {\n          if (a === void 0) {\n            a = 1.0;\n          }\n          this._userScreenColors.at(index).Color.R = r;\n          this._userScreenColors.at(index).Color.G = g;\n          this._userScreenColors.at(index).Color.B = b;\n          this._userScreenColors.at(index).Color.A = a;\n        };\n        CubismModel.prototype.getPartMultiplyColor = function (partIndex) {\n          return this._userPartMultiplyColors.at(partIndex).Color;\n        };\n        CubismModel.prototype.getPartScreenColor = function (partIndex) {\n          return this._userPartScreenColors.at(partIndex).Color;\n        };\n        CubismModel.prototype.setPartColor = function (partIndex, r, g, b, a, partColors, drawableColors) {\n          partColors.at(partIndex).Color.R = r;\n          partColors.at(partIndex).Color.G = g;\n          partColors.at(partIndex).Color.B = b;\n          partColors.at(partIndex).Color.A = a;\n          if (partColors.at(partIndex).isOverwritten) {\n            for (var i = 0; i < this._partChildDrawables.at(partIndex).getSize(); ++i) {\n              var drawableIndex = this._partChildDrawables.at(partIndex).at(i);\n              drawableColors.at(drawableIndex).Color.R = r;\n              drawableColors.at(drawableIndex).Color.G = g;\n              drawableColors.at(drawableIndex).Color.B = b;\n              drawableColors.at(drawableIndex).Color.A = a;\n            }\n          }\n        };\n        CubismModel.prototype.setPartMultiplyColorByTextureColor = function (partIndex, color) {\n          this.setPartMultiplyColorByRGBA(partIndex, color.R, color.G, color.B, color.A);\n        };\n        CubismModel.prototype.setPartMultiplyColorByRGBA = function (partIndex, r, g, b, a) {\n          this.setPartColor(partIndex, r, g, b, a, this._userPartMultiplyColors, this._userMultiplyColors);\n        };\n        CubismModel.prototype.setPartScreenColorByTextureColor = function (partIndex, color) {\n          this.setPartScreenColorByRGBA(partIndex, color.R, color.G, color.B, color.A);\n        };\n        CubismModel.prototype.setPartScreenColorByRGBA = function (partIndex, r, g, b, a) {\n          this.setPartColor(partIndex, r, g, b, a, this._userPartScreenColors, this._userScreenColors);\n        };\n        CubismModel.prototype.getOverwriteFlagForModelMultiplyColors = function () {\n          return this._isOverwrittenModelMultiplyColors;\n        };\n        CubismModel.prototype.getOverwriteFlagForModelScreenColors = function () {\n          return this._isOverwrittenModelScreenColors;\n        };\n        CubismModel.prototype.setOverwriteFlagForModelMultiplyColors = function (value) {\n          this._isOverwrittenModelMultiplyColors = value;\n        };\n        CubismModel.prototype.setOverwriteFlagForModelScreenColors = function (value) {\n          this._isOverwrittenModelScreenColors = value;\n        };\n        CubismModel.prototype.getOverwriteFlagForDrawableMultiplyColors = function (drawableindex) {\n          return this._userMultiplyColors.at(drawableindex).isOverwritten;\n        };\n        CubismModel.prototype.getOverwriteFlagForDrawableScreenColors = function (drawableindex) {\n          return this._userScreenColors.at(drawableindex).isOverwritten;\n        };\n        CubismModel.prototype.setOverwriteFlagForDrawableMultiplyColors = function (drawableindex, value) {\n          this._userMultiplyColors.at(drawableindex).isOverwritten = value;\n        };\n        CubismModel.prototype.setOverwriteFlagForDrawableScreenColors = function (drawableindex, value) {\n          this._userScreenColors.at(drawableindex).isOverwritten = value;\n        };\n        CubismModel.prototype.getOverwriteColorForPartMultiplyColors = function (partIndex) {\n          return this._userPartMultiplyColors.at(partIndex).isOverwritten;\n        };\n        CubismModel.prototype.getOverwriteColorForPartScreenColors = function (partIndex) {\n          return this._userPartScreenColors.at(partIndex).isOverwritten;\n        };\n        CubismModel.prototype.setOverwriteColorForPartColors = function (partIndex, value, partColors, drawableColors) {\n          partColors.at(partIndex).isOverwritten = value;\n          for (var i = 0; i < this._partChildDrawables.at(partIndex).getSize(); ++i) {\n            var drawableIndex = this._partChildDrawables.at(partIndex).at(i);\n            drawableColors.at(drawableIndex).isOverwritten = value;\n            if (value) {\n              drawableColors.at(drawableIndex).Color.R = partColors.at(partIndex).Color.R;\n              drawableColors.at(drawableIndex).Color.G = partColors.at(partIndex).Color.G;\n              drawableColors.at(drawableIndex).Color.B = partColors.at(partIndex).Color.B;\n              drawableColors.at(drawableIndex).Color.A = partColors.at(partIndex).Color.A;\n            }\n          }\n        };\n        CubismModel.prototype.setOverwriteColorForPartMultiplyColors = function (partIndex, value) {\n          this._userPartMultiplyColors.at(partIndex).isOverwritten = value;\n          this.setOverwriteColorForPartColors(partIndex, value, this._userPartMultiplyColors, this._userMultiplyColors);\n        };\n        CubismModel.prototype.setOverwriteColorForPartScreenColors = function (partIndex, value) {\n          this._userPartScreenColors.at(partIndex).isOverwritten = value;\n          this.setOverwriteColorForPartColors(partIndex, value, this._userPartScreenColors, this._userScreenColors);\n        };\n        CubismModel.prototype.getDrawableCulling = function (drawableIndex) {\n          if (this.getOverwriteFlagForModelCullings() || this.getOverwriteFlagForDrawableCullings(drawableIndex)) {\n            return this._userCullings.at(drawableIndex).isCulling;\n          }\n          var constantFlags = this._model.drawables.constantFlags;\n          return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(constantFlags[drawableIndex]);\n        };\n        CubismModel.prototype.setDrawableCulling = function (drawableIndex, isCulling) {\n          this._userCullings.at(drawableIndex).isCulling = isCulling;\n        };\n        CubismModel.prototype.getOverwriteFlagForModelCullings = function () {\n          return this._isOverwrittenCullings;\n        };\n        CubismModel.prototype.setOverwriteFlagForModelCullings = function (isOverwrittenCullings) {\n          this._isOverwrittenCullings = isOverwrittenCullings;\n        };\n        CubismModel.prototype.getOverwriteFlagForDrawableCullings = function (drawableIndex) {\n          return this._userCullings.at(drawableIndex).isOverwritten;\n        };\n        CubismModel.prototype.setOverwriteFlagForDrawableCullings = function (drawableIndex, isOverwrittenCullings) {\n          this._userCullings.at(drawableIndex).isOverwritten = isOverwrittenCullings;\n        };\n        CubismModel.prototype.getModelOapcity = function () {\n          return this._modelOpacity;\n        };\n        CubismModel.prototype.setModelOapcity = function (value) {\n          this._modelOpacity = value;\n        };\n        CubismModel.prototype.getModel = function () {\n          return this._model;\n        };\n        CubismModel.prototype.getPartIndex = function (partId) {\n          var partIndex;\n          var partCount = this._model.parts.count;\n          for (partIndex = 0; partIndex < partCount; ++partIndex) {\n            if (partId == this._partIds.at(partIndex)) {\n              return partIndex;\n            }\n          }\n          if (this._notExistPartId.isExist(partId)) {\n            return this._notExistPartId.getValue(partId);\n          }\n          partIndex = partCount + this._notExistPartId.getSize();\n          this._notExistPartId.setValue(partId, partIndex);\n          this._notExistPartOpacities.appendKey(partIndex);\n          return partIndex;\n        };\n        CubismModel.prototype.getPartId = function (partIndex) {\n          var partId = this._model.parts.ids[partIndex];\n          return live2dcubismframework_1.CubismFramework.getIdManager().getId(partId);\n        };\n        CubismModel.prototype.getPartCount = function () {\n          var partCount = this._model.parts.count;\n          return partCount;\n        };\n        CubismModel.prototype.setPartOpacityByIndex = function (partIndex, opacity) {\n          if (this._notExistPartOpacities.isExist(partIndex)) {\n            this._notExistPartOpacities.setValue(partIndex, opacity);\n            return;\n          }\n          (0, cubismdebug_1.CSM_ASSERT)(0 <= partIndex && partIndex < this.getPartCount());\n          this._partOpacities[partIndex] = opacity;\n        };\n        CubismModel.prototype.setPartOpacityById = function (partId, opacity) {\n          var index = this.getPartIndex(partId);\n          if (index < 0) {\n            return;\n          }\n          this.setPartOpacityByIndex(index, opacity);\n        };\n        CubismModel.prototype.getPartOpacityByIndex = function (partIndex) {\n          if (this._notExistPartOpacities.isExist(partIndex)) {\n            return this._notExistPartOpacities.getValue(partIndex);\n          }\n          (0, cubismdebug_1.CSM_ASSERT)(0 <= partIndex && partIndex < this.getPartCount());\n          return this._partOpacities[partIndex];\n        };\n        CubismModel.prototype.getPartOpacityById = function (partId) {\n          var index = this.getPartIndex(partId);\n          if (index < 0) {\n            return 0;\n          }\n          return this.getPartOpacityByIndex(index);\n        };\n        CubismModel.prototype.getParameterIndex = function (parameterId) {\n          var parameterIndex;\n          var idCount = this._model.parameters.count;\n          for (parameterIndex = 0; parameterIndex < idCount; ++parameterIndex) {\n            if (parameterId != this._parameterIds.at(parameterIndex)) {\n              continue;\n            }\n            return parameterIndex;\n          }\n          if (this._notExistParameterId.isExist(parameterId)) {\n            return this._notExistParameterId.getValue(parameterId);\n          }\n          parameterIndex = this._model.parameters.count + this._notExistParameterId.getSize();\n          this._notExistParameterId.setValue(parameterId, parameterIndex);\n          this._notExistParameterValues.appendKey(parameterIndex);\n          return parameterIndex;\n        };\n        CubismModel.prototype.getParameterCount = function () {\n          return this._model.parameters.count;\n        };\n        CubismModel.prototype.getParameterType = function (parameterIndex) {\n          return this._model.parameters.types[parameterIndex];\n        };\n        CubismModel.prototype.getParameterMaximumValue = function (parameterIndex) {\n          return this._model.parameters.maximumValues[parameterIndex];\n        };\n        CubismModel.prototype.getParameterMinimumValue = function (parameterIndex) {\n          return this._model.parameters.minimumValues[parameterIndex];\n        };\n        CubismModel.prototype.getParameterDefaultValue = function (parameterIndex) {\n          return this._model.parameters.defaultValues[parameterIndex];\n        };\n        CubismModel.prototype.getParameterValueByIndex = function (parameterIndex) {\n          if (this._notExistParameterValues.isExist(parameterIndex)) {\n            return this._notExistParameterValues.getValue(parameterIndex);\n          }\n          (0, cubismdebug_1.CSM_ASSERT)(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n          return this._parameterValues[parameterIndex];\n        };\n        CubismModel.prototype.getParameterValueById = function (parameterId) {\n          var parameterIndex = this.getParameterIndex(parameterId);\n          return this.getParameterValueByIndex(parameterIndex);\n        };\n        CubismModel.prototype.setParameterValueByIndex = function (parameterIndex, value, weight) {\n          if (weight === void 0) {\n            weight = 1.0;\n          }\n          if (this._notExistParameterValues.isExist(parameterIndex)) {\n            this._notExistParameterValues.setValue(parameterIndex, weight == 1 ? value : this._notExistParameterValues.getValue(parameterIndex) * (1 - weight) + value * weight);\n            return;\n          }\n          (0, cubismdebug_1.CSM_ASSERT)(0 <= parameterIndex && parameterIndex < this.getParameterCount());\n          if (this._model.parameters.maximumValues[parameterIndex] < value) {\n            value = this._model.parameters.maximumValues[parameterIndex];\n          }\n          if (this._model.parameters.minimumValues[parameterIndex] > value) {\n            value = this._model.parameters.minimumValues[parameterIndex];\n          }\n          this._parameterValues[parameterIndex] = weight == 1 ? value : this._parameterValues[parameterIndex] = this._parameterValues[parameterIndex] * (1 - weight) + value * weight;\n        };\n        CubismModel.prototype.setParameterValueById = function (parameterId, value, weight) {\n          if (weight === void 0) {\n            weight = 1.0;\n          }\n          var index = this.getParameterIndex(parameterId);\n          this.setParameterValueByIndex(index, value, weight);\n        };\n        CubismModel.prototype.addParameterValueByIndex = function (parameterIndex, value, weight) {\n          if (weight === void 0) {\n            weight = 1.0;\n          }\n          this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) + value * weight);\n        };\n        CubismModel.prototype.addParameterValueById = function (parameterId, value, weight) {\n          if (weight === void 0) {\n            weight = 1.0;\n          }\n          var index = this.getParameterIndex(parameterId);\n          this.addParameterValueByIndex(index, value, weight);\n        };\n        CubismModel.prototype.multiplyParameterValueById = function (parameterId, value, weight) {\n          if (weight === void 0) {\n            weight = 1.0;\n          }\n          var index = this.getParameterIndex(parameterId);\n          this.multiplyParameterValueByIndex(index, value, weight);\n        };\n        CubismModel.prototype.multiplyParameterValueByIndex = function (parameterIndex, value, weight) {\n          if (weight === void 0) {\n            weight = 1.0;\n          }\n          this.setParameterValueByIndex(parameterIndex, this.getParameterValueByIndex(parameterIndex) * (1.0 + (value - 1.0) * weight));\n        };\n        CubismModel.prototype.getDrawableIndex = function (drawableId) {\n          var drawableCount = this._model.drawables.count;\n          for (var drawableIndex = 0; drawableIndex < drawableCount; ++drawableIndex) {\n            if (this._drawableIds.at(drawableIndex) == drawableId) {\n              return drawableIndex;\n            }\n          }\n          return -1;\n        };\n        CubismModel.prototype.getDrawableCount = function () {\n          var drawableCount = this._model.drawables.count;\n          return drawableCount;\n        };\n        CubismModel.prototype.getDrawableId = function (drawableIndex) {\n          var parameterIds = this._model.drawables.ids;\n          return live2dcubismframework_1.CubismFramework.getIdManager().getId(parameterIds[drawableIndex]);\n        };\n        CubismModel.prototype.getDrawableRenderOrders = function () {\n          var renderOrders = this._model.drawables.renderOrders;\n          return renderOrders;\n        };\n        CubismModel.prototype.getDrawableTextureIndices = function (drawableIndex) {\n          return this.getDrawableTextureIndex(drawableIndex);\n        };\n        CubismModel.prototype.getDrawableTextureIndex = function (drawableIndex) {\n          var textureIndices = this._model.drawables.textureIndices;\n          return textureIndices[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableDynamicFlagVertexPositionsDidChange = function (drawableIndex) {\n          var dynamicFlags = this._model.drawables.dynamicFlags;\n          return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(dynamicFlags[drawableIndex]);\n        };\n        CubismModel.prototype.getDrawableVertexIndexCount = function (drawableIndex) {\n          var indexCounts = this._model.drawables.indexCounts;\n          return indexCounts[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableVertexCount = function (drawableIndex) {\n          var vertexCounts = this._model.drawables.vertexCounts;\n          return vertexCounts[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableVertices = function (drawableIndex) {\n          return this.getDrawableVertexPositions(drawableIndex);\n        };\n        CubismModel.prototype.getDrawableVertexIndices = function (drawableIndex) {\n          var indicesArray = this._model.drawables.indices;\n          return indicesArray[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableVertexPositions = function (drawableIndex) {\n          var verticesArray = this._model.drawables.vertexPositions;\n          return verticesArray[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableVertexUvs = function (drawableIndex) {\n          var uvsArray = this._model.drawables.vertexUvs;\n          return uvsArray[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableOpacity = function (drawableIndex) {\n          var opacities = this._model.drawables.opacities;\n          return opacities[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableMultiplyColor = function (drawableIndex) {\n          var multiplyColors = this._model.drawables.multiplyColors;\n          var index = drawableIndex * 4;\n          var multiplyColor = new cubismrenderer_1.CubismTextureColor();\n          multiplyColor.R = multiplyColors[index];\n          multiplyColor.G = multiplyColors[index + 1];\n          multiplyColor.B = multiplyColors[index + 2];\n          multiplyColor.A = multiplyColors[index + 3];\n          return multiplyColor;\n        };\n        CubismModel.prototype.getDrawableScreenColor = function (drawableIndex) {\n          var screenColors = this._model.drawables.screenColors;\n          var index = drawableIndex * 4;\n          var screenColor = new cubismrenderer_1.CubismTextureColor();\n          screenColor.R = screenColors[index];\n          screenColor.G = screenColors[index + 1];\n          screenColor.B = screenColors[index + 2];\n          screenColor.A = screenColors[index + 3];\n          return screenColor;\n        };\n        CubismModel.prototype.getDrawableParentPartIndex = function (drawableIndex) {\n          return this._model.drawables.parentPartIndices[drawableIndex];\n        };\n        CubismModel.prototype.getDrawableBlendMode = function (drawableIndex) {\n          var constantFlags = this._model.drawables.constantFlags;\n          return Live2DCubismCore.Utils.hasBlendAdditiveBit(constantFlags[drawableIndex]) ? cubismrenderer_1.CubismBlendMode.CubismBlendMode_Additive : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(constantFlags[drawableIndex]) ? cubismrenderer_1.CubismBlendMode.CubismBlendMode_Multiplicative : cubismrenderer_1.CubismBlendMode.CubismBlendMode_Normal;\n        };\n        CubismModel.prototype.getDrawableInvertedMaskBit = function (drawableIndex) {\n          var constantFlags = this._model.drawables.constantFlags;\n          return Live2DCubismCore.Utils.hasIsInvertedMaskBit(constantFlags[drawableIndex]);\n        };\n        CubismModel.prototype.getDrawableMasks = function () {\n          var masks = this._model.drawables.masks;\n          return masks;\n        };\n        CubismModel.prototype.getDrawableMaskCounts = function () {\n          var maskCounts = this._model.drawables.maskCounts;\n          return maskCounts;\n        };\n        CubismModel.prototype.isUsingMasking = function () {\n          for (var d = 0; d < this._model.drawables.count; ++d) {\n            if (this._model.drawables.maskCounts[d] <= 0) {\n              continue;\n            }\n            return true;\n          }\n          return false;\n        };\n        CubismModel.prototype.getDrawableDynamicFlagIsVisible = function (drawableIndex) {\n          var dynamicFlags = this._model.drawables.dynamicFlags;\n          return Live2DCubismCore.Utils.hasIsVisibleBit(dynamicFlags[drawableIndex]);\n        };\n        CubismModel.prototype.getDrawableDynamicFlagVisibilityDidChange = function (drawableIndex) {\n          var dynamicFlags = this._model.drawables.dynamicFlags;\n          return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(dynamicFlags[drawableIndex]);\n        };\n        CubismModel.prototype.getDrawableDynamicFlagOpacityDidChange = function (drawableIndex) {\n          var dynamicFlags = this._model.drawables.dynamicFlags;\n          return Live2DCubismCore.Utils.hasOpacityDidChangeBit(dynamicFlags[drawableIndex]);\n        };\n        CubismModel.prototype.getDrawableDynamicFlagRenderOrderDidChange = function (drawableIndex) {\n          var dynamicFlags = this._model.drawables.dynamicFlags;\n          return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(dynamicFlags[drawableIndex]);\n        };\n        CubismModel.prototype.getDrawableDynamicFlagBlendColorDidChange = function (drawableIndex) {\n          var dynamicFlags = this._model.drawables.dynamicFlags;\n          return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(dynamicFlags[drawableIndex]);\n        };\n        CubismModel.prototype.loadParameters = function () {\n          var parameterCount = this._model.parameters.count;\n          var savedParameterCount = this._savedParameters.getSize();\n          if (parameterCount > savedParameterCount) {\n            parameterCount = savedParameterCount;\n          }\n          for (var i = 0; i < parameterCount; ++i) {\n            this._parameterValues[i] = this._savedParameters.at(i);\n          }\n        };\n        CubismModel.prototype.initialize = function () {\n          (0, cubismdebug_1.CSM_ASSERT)(this._model);\n          this._parameterValues = this._model.parameters.values;\n          this._partOpacities = this._model.parts.opacities;\n          this._parameterMaximumValues = this._model.parameters.maximumValues;\n          this._parameterMinimumValues = this._model.parameters.minimumValues;\n          {\n            var parameterIds = this._model.parameters.ids;\n            var parameterCount = this._model.parameters.count;\n            this._parameterIds.prepareCapacity(parameterCount);\n            for (var i = 0; i < parameterCount; ++i) {\n              this._parameterIds.pushBack(live2dcubismframework_1.CubismFramework.getIdManager().getId(parameterIds[i]));\n            }\n          }\n          var partCount = this._model.parts.count;\n          {\n            var partIds = this._model.parts.ids;\n            this._partIds.prepareCapacity(partCount);\n            for (var i = 0; i < partCount; ++i) {\n              this._partIds.pushBack(live2dcubismframework_1.CubismFramework.getIdManager().getId(partIds[i]));\n            }\n            this._userPartMultiplyColors.prepareCapacity(partCount);\n            this._userPartScreenColors.prepareCapacity(partCount);\n            this._partChildDrawables.prepareCapacity(partCount);\n          }\n          {\n            var drawableIds = this._model.drawables.ids;\n            var drawableCount = this._model.drawables.count;\n            this._userMultiplyColors.prepareCapacity(drawableCount);\n            this._userScreenColors.prepareCapacity(drawableCount);\n            this._userCullings.prepareCapacity(drawableCount);\n            var userCulling = new DrawableCullingData(false, false);\n            {\n              for (var i = 0; i < partCount; ++i) {\n                var multiplyColor = new cubismrenderer_1.CubismTextureColor(1.0, 1.0, 1.0, 1.0);\n                var screenColor = new cubismrenderer_1.CubismTextureColor(0.0, 0.0, 0.0, 1.0);\n                var userMultiplyColor = new PartColorData(false, multiplyColor);\n                var userScreenColor = new PartColorData(false, screenColor);\n                this._userPartMultiplyColors.pushBack(userMultiplyColor);\n                this._userPartScreenColors.pushBack(userScreenColor);\n                this._partChildDrawables.pushBack(new csmvector_1.csmVector());\n                this._partChildDrawables.at(i).prepareCapacity(drawableCount);\n              }\n            }\n            {\n              for (var i = 0; i < drawableCount; ++i) {\n                var multiplyColor = new cubismrenderer_1.CubismTextureColor(1.0, 1.0, 1.0, 1.0);\n                var screenColor = new cubismrenderer_1.CubismTextureColor(0.0, 0.0, 0.0, 1.0);\n                var userMultiplyColor = new DrawableColorData(false, multiplyColor);\n                var userScreenColor = new DrawableColorData(false, screenColor);\n                this._drawableIds.pushBack(live2dcubismframework_1.CubismFramework.getIdManager().getId(drawableIds[i]));\n                this._userMultiplyColors.pushBack(userMultiplyColor);\n                this._userScreenColors.pushBack(userScreenColor);\n                this._userCullings.pushBack(userCulling);\n                var parentIndex = this.getDrawableParentPartIndex(i);\n                if (parentIndex >= 0) {\n                  this._partChildDrawables.at(parentIndex).pushBack(i);\n                }\n              }\n            }\n          }\n        };\n        CubismModel.prototype.release = function () {\n          this._model.release();\n          this._model = null;\n        };\n        return CubismModel;\n      }();\n      exports.CubismModel = CubismModel;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmodel */\"../../../Framework/src/model/cubismmodel.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismModel = $.CubismModel;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/model/cubismmodeluserdata.ts\":\n    /*!***********************************************************!*\\\n      !*** ../../../Framework/src/model/cubismmodeluserdata.ts ***!\n      \\***********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismModelUserData = exports.CubismModelUserDataNode = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var csmstring_1 = __webpack_require__( /*! ../type/csmstring */\"../../../Framework/src/type/csmstring.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismmodeluserdatajson_1 = __webpack_require__( /*! ./cubismmodeluserdatajson */\"../../../Framework/src/model/cubismmodeluserdatajson.ts\");\n      var ArtMesh = 'ArtMesh';\n      var CubismModelUserDataNode = function () {\n        function CubismModelUserDataNode() {}\n        return CubismModelUserDataNode;\n      }();\n      exports.CubismModelUserDataNode = CubismModelUserDataNode;\n      var CubismModelUserData = function () {\n        function CubismModelUserData() {\n          this._userDataNodes = new csmvector_1.csmVector();\n          this._artMeshUserDataNode = new csmvector_1.csmVector();\n        }\n        CubismModelUserData.create = function (buffer, size) {\n          var ret = new CubismModelUserData();\n          ret.parseUserData(buffer, size);\n          return ret;\n        };\n        CubismModelUserData.delete = function (modelUserData) {\n          if (modelUserData != null) {\n            modelUserData.release();\n            modelUserData = null;\n          }\n        };\n        CubismModelUserData.prototype.getArtMeshUserDatas = function () {\n          return this._artMeshUserDataNode;\n        };\n        CubismModelUserData.prototype.parseUserData = function (buffer, size) {\n          var json = new cubismmodeluserdatajson_1.CubismModelUserDataJson(buffer, size);\n          var typeOfArtMesh = live2dcubismframework_1.CubismFramework.getIdManager().getId(ArtMesh);\n          var nodeCount = json.getUserDataCount();\n          for (var i = 0; i < nodeCount; i++) {\n            var addNode = new CubismModelUserDataNode();\n            addNode.targetId = json.getUserDataId(i);\n            addNode.targetType = live2dcubismframework_1.CubismFramework.getIdManager().getId(json.getUserDataTargetType(i));\n            addNode.value = new csmstring_1.csmString(json.getUserDataValue(i));\n            this._userDataNodes.pushBack(addNode);\n            if (addNode.targetType == typeOfArtMesh) {\n              this._artMeshUserDataNode.pushBack(addNode);\n            }\n          }\n          json.release();\n          json = void 0;\n        };\n        CubismModelUserData.prototype.release = function () {\n          for (var i = 0; i < this._userDataNodes.getSize(); ++i) {\n            this._userDataNodes.set(i, null);\n          }\n          this._userDataNodes = null;\n        };\n        return CubismModelUserData;\n      }();\n      exports.CubismModelUserData = CubismModelUserData;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmodeluserdata */\"../../../Framework/src/model/cubismmodeluserdata.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismModelUserData = $.CubismModelUserData;\n        Live2DCubismFramework.CubismModelUserDataNode = $.CubismModelUserDataNode;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/model/cubismmodeluserdatajson.ts\":\n    /*!***************************************************************!*\\\n      !*** ../../../Framework/src/model/cubismmodeluserdatajson.ts ***!\n      \\***************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismModelUserDataJson = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var cubismjson_1 = __webpack_require__( /*! ../utils/cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      var Meta = 'Meta';\n      var UserDataCount = 'UserDataCount';\n      var TotalUserDataSize = 'TotalUserDataSize';\n      var UserData = 'UserData';\n      var Target = 'Target';\n      var Id = 'Id';\n      var Value = 'Value';\n      var CubismModelUserDataJson = function () {\n        function CubismModelUserDataJson(buffer, size) {\n          this._json = cubismjson_1.CubismJson.create(buffer, size);\n        }\n        CubismModelUserDataJson.prototype.release = function () {\n          cubismjson_1.CubismJson.delete(this._json);\n        };\n        CubismModelUserDataJson.prototype.getUserDataCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(UserDataCount).toInt();\n        };\n        CubismModelUserDataJson.prototype.getTotalUserDataSize = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(TotalUserDataSize).toInt();\n        };\n        CubismModelUserDataJson.prototype.getUserDataTargetType = function (i) {\n          return this._json.getRoot().getValueByString(UserData).getValueByIndex(i).getValueByString(Target).getRawString();\n        };\n        CubismModelUserDataJson.prototype.getUserDataId = function (i) {\n          return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(UserData).getValueByIndex(i).getValueByString(Id).getRawString());\n        };\n        CubismModelUserDataJson.prototype.getUserDataValue = function (i) {\n          return this._json.getRoot().getValueByString(UserData).getValueByIndex(i).getValueByString(Value).getRawString();\n        };\n        return CubismModelUserDataJson;\n      }();\n      exports.CubismModelUserDataJson = CubismModelUserDataJson;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmodeluserdatajson */\"../../../Framework/src/model/cubismmodeluserdatajson.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismModelUserDataJson = $.CubismModelUserDataJson;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/model/cubismusermodel.ts\":\n    /*!*******************************************************!*\\\n      !*** ../../../Framework/src/model/cubismusermodel.ts ***!\n      \\*******************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismUserModel = void 0;\n      var cubismbreath_1 = __webpack_require__( /*! ../effect/cubismbreath */\"../../../Framework/src/effect/cubismbreath.ts\");\n      var cubismeyeblink_1 = __webpack_require__( /*! ../effect/cubismeyeblink */\"../../../Framework/src/effect/cubismeyeblink.ts\");\n      var cubismpose_1 = __webpack_require__( /*! ../effect/cubismpose */\"../../../Framework/src/effect/cubismpose.ts\");\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var cubismmodelmatrix_1 = __webpack_require__( /*! ../math/cubismmodelmatrix */\"../../../Framework/src/math/cubismmodelmatrix.ts\");\n      var cubismtargetpoint_1 = __webpack_require__( /*! ../math/cubismtargetpoint */\"../../../Framework/src/math/cubismtargetpoint.ts\");\n      var cubismexpressionmotion_1 = __webpack_require__( /*! ../motion/cubismexpressionmotion */\"../../../Framework/src/motion/cubismexpressionmotion.ts\");\n      var cubismmotion_1 = __webpack_require__( /*! ../motion/cubismmotion */\"../../../Framework/src/motion/cubismmotion.ts\");\n      var cubismmotionmanager_1 = __webpack_require__( /*! ../motion/cubismmotionmanager */\"../../../Framework/src/motion/cubismmotionmanager.ts\");\n      var cubismphysics_1 = __webpack_require__( /*! ../physics/cubismphysics */\"../../../Framework/src/physics/cubismphysics.ts\");\n      var cubismrenderer_webgl_1 = __webpack_require__( /*! ../rendering/cubismrenderer_webgl */\"../../../Framework/src/rendering/cubismrenderer_webgl.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! ../utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var cubismmoc_1 = __webpack_require__( /*! ./cubismmoc */\"../../../Framework/src/model/cubismmoc.ts\");\n      var cubismmodeluserdata_1 = __webpack_require__( /*! ./cubismmodeluserdata */\"../../../Framework/src/model/cubismmodeluserdata.ts\");\n      var CubismUserModel = function () {\n        function CubismUserModel() {\n          this.loadMotion = function (buffer, size, name, onFinishedMotionHandler) {\n            return cubismmotion_1.CubismMotion.create(buffer, size, onFinishedMotionHandler);\n          };\n          this._moc = null;\n          this._model = null;\n          this._motionManager = null;\n          this._expressionManager = null;\n          this._eyeBlink = null;\n          this._breath = null;\n          this._modelMatrix = null;\n          this._pose = null;\n          this._dragManager = null;\n          this._physics = null;\n          this._modelUserData = null;\n          this._initialized = false;\n          this._updating = false;\n          this._opacity = 1.0;\n          this._lipsync = true;\n          this._lastLipSyncValue = 0.0;\n          this._dragX = 0.0;\n          this._dragY = 0.0;\n          this._accelerationX = 0.0;\n          this._accelerationY = 0.0;\n          this._accelerationZ = 0.0;\n          this._mocConsistency = false;\n          this._debugMode = false;\n          this._renderer = null;\n          this._motionManager = new cubismmotionmanager_1.CubismMotionManager();\n          this._motionManager.setEventCallback(CubismUserModel.cubismDefaultMotionEventCallback, this);\n          this._expressionManager = new cubismmotionmanager_1.CubismMotionManager();\n          this._dragManager = new cubismtargetpoint_1.CubismTargetPoint();\n        }\n        CubismUserModel.prototype.isInitialized = function () {\n          return this._initialized;\n        };\n        CubismUserModel.prototype.setInitialized = function (v) {\n          this._initialized = v;\n        };\n        CubismUserModel.prototype.isUpdating = function () {\n          return this._updating;\n        };\n        CubismUserModel.prototype.setUpdating = function (v) {\n          this._updating = v;\n        };\n        CubismUserModel.prototype.setDragging = function (x, y) {\n          this._dragManager.set(x, y);\n        };\n        CubismUserModel.prototype.setAcceleration = function (x, y, z) {\n          this._accelerationX = x;\n          this._accelerationY = y;\n          this._accelerationZ = z;\n        };\n        CubismUserModel.prototype.getModelMatrix = function () {\n          return this._modelMatrix;\n        };\n        CubismUserModel.prototype.setOpacity = function (a) {\n          this._opacity = a;\n        };\n        CubismUserModel.prototype.getOpacity = function () {\n          return this._opacity;\n        };\n        CubismUserModel.prototype.loadModel = function (buffer, shouldCheckMocConsistency) {\n          if (shouldCheckMocConsistency === void 0) {\n            shouldCheckMocConsistency = false;\n          }\n          this._moc = cubismmoc_1.CubismMoc.create(buffer, shouldCheckMocConsistency);\n          if (this._moc == null) {\n            (0, cubismdebug_1.CubismLogError)('Failed to CubismMoc.create().');\n            return;\n          }\n          this._model = this._moc.createModel();\n          if (this._model == null) {\n            (0, cubismdebug_1.CubismLogError)('Failed to CreateModel().');\n            return;\n          }\n          this._model.saveParameters();\n          this._modelMatrix = new cubismmodelmatrix_1.CubismModelMatrix(this._model.getCanvasWidth(), this._model.getCanvasHeight());\n        };\n        CubismUserModel.prototype.loadExpression = function (buffer, size, name) {\n          return cubismexpressionmotion_1.CubismExpressionMotion.create(buffer, size);\n        };\n        CubismUserModel.prototype.loadPose = function (buffer, size) {\n          this._pose = cubismpose_1.CubismPose.create(buffer, size);\n        };\n        CubismUserModel.prototype.loadUserData = function (buffer, size) {\n          this._modelUserData = cubismmodeluserdata_1.CubismModelUserData.create(buffer, size);\n        };\n        CubismUserModel.prototype.loadPhysics = function (buffer, size) {\n          this._physics = cubismphysics_1.CubismPhysics.create(buffer, size);\n        };\n        CubismUserModel.prototype.isHit = function (drawableId, pointX, pointY) {\n          var drawIndex = this._model.getDrawableIndex(drawableId);\n          if (drawIndex < 0) {\n            return false;\n          }\n          var count = this._model.getDrawableVertexCount(drawIndex);\n          var vertices = this._model.getDrawableVertices(drawIndex);\n          var left = vertices[0];\n          var right = vertices[0];\n          var top = vertices[1];\n          var bottom = vertices[1];\n          for (var j = 1; j < count; ++j) {\n            var x = vertices[live2dcubismframework_1.Constant.vertexOffset + j * live2dcubismframework_1.Constant.vertexStep];\n            var y = vertices[live2dcubismframework_1.Constant.vertexOffset + j * live2dcubismframework_1.Constant.vertexStep + 1];\n            if (x < left) {\n              left = x;\n            }\n            if (x > right) {\n              right = x;\n            }\n            if (y < top) {\n              top = y;\n            }\n            if (y > bottom) {\n              bottom = y;\n            }\n          }\n          var tx = this._modelMatrix.invertTransformX(pointX);\n          var ty = this._modelMatrix.invertTransformY(pointY);\n          return left <= tx && tx <= right && top <= ty && ty <= bottom;\n        };\n        CubismUserModel.prototype.getModel = function () {\n          return this._model;\n        };\n        CubismUserModel.prototype.getRenderer = function () {\n          return this._renderer;\n        };\n        CubismUserModel.prototype.createRenderer = function (maskBufferCount) {\n          if (maskBufferCount === void 0) {\n            maskBufferCount = 1;\n          }\n          if (this._renderer) {\n            this.deleteRenderer();\n          }\n          this._renderer = new cubismrenderer_webgl_1.CubismRenderer_WebGL();\n          this._renderer.initialize(this._model, maskBufferCount);\n        };\n        CubismUserModel.prototype.deleteRenderer = function () {\n          if (this._renderer != null) {\n            this._renderer.release();\n            this._renderer = null;\n          }\n        };\n        CubismUserModel.prototype.motionEventFired = function (eventValue) {\n          (0, cubismdebug_1.CubismLogInfo)('{0}', eventValue.s);\n        };\n        CubismUserModel.cubismDefaultMotionEventCallback = function (caller, eventValue, customData) {\n          var model = customData;\n          if (model != null) {\n            model.motionEventFired(eventValue);\n          }\n        };\n        CubismUserModel.prototype.release = function () {\n          if (this._motionManager != null) {\n            this._motionManager.release();\n            this._motionManager = null;\n          }\n          if (this._expressionManager != null) {\n            this._expressionManager.release();\n            this._expressionManager = null;\n          }\n          if (this._moc != null) {\n            this._moc.deleteModel(this._model);\n            this._moc.release();\n            this._moc = null;\n          }\n          this._modelMatrix = null;\n          cubismpose_1.CubismPose.delete(this._pose);\n          cubismeyeblink_1.CubismEyeBlink.delete(this._eyeBlink);\n          cubismbreath_1.CubismBreath.delete(this._breath);\n          this._dragManager = null;\n          cubismphysics_1.CubismPhysics.delete(this._physics);\n          cubismmodeluserdata_1.CubismModelUserData.delete(this._modelUserData);\n          this.deleteRenderer();\n        };\n        return CubismUserModel;\n      }();\n      exports.CubismUserModel = CubismUserModel;\n      var $ = __importStar(__webpack_require__( /*! ./cubismusermodel */\"../../../Framework/src/model/cubismusermodel.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismUserModel = $.CubismUserModel;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/acubismmotion.ts\":\n    /*!******************************************************!*\\\n      !*** ../../../Framework/src/motion/acubismmotion.ts ***!\n      \\******************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.ACubismMotion = void 0;\n      var cubismmath_1 = __webpack_require__( /*! ../math/cubismmath */\"../../../Framework/src/math/cubismmath.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! ../utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var ACubismMotion = function () {\n        function ACubismMotion() {\n          var _this = this;\n          this.setFinishedMotionHandler = function (onFinishedMotionHandler) {\n            return _this._onFinishedMotion = onFinishedMotionHandler;\n          };\n          this.getFinishedMotionHandler = function () {\n            return _this._onFinishedMotion;\n          };\n          this._fadeInSeconds = -1.0;\n          this._fadeOutSeconds = -1.0;\n          this._weight = 1.0;\n          this._offsetSeconds = 0.0;\n          this._firedEventValues = new csmvector_1.csmVector();\n        }\n        ACubismMotion.delete = function (motion) {\n          motion.release();\n          motion = null;\n        };\n        ACubismMotion.prototype.release = function () {\n          this._weight = 0.0;\n        };\n        ACubismMotion.prototype.updateParameters = function (model, motionQueueEntry, userTimeSeconds) {\n          if (!motionQueueEntry.isAvailable() || motionQueueEntry.isFinished()) {\n            return;\n          }\n          if (!motionQueueEntry.isStarted()) {\n            motionQueueEntry.setIsStarted(true);\n            motionQueueEntry.setStartTime(userTimeSeconds - this._offsetSeconds);\n            motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n            var duration = this.getDuration();\n            if (motionQueueEntry.getEndTime() < 0) {\n              motionQueueEntry.setEndTime(duration <= 0 ? -1 : motionQueueEntry.getStartTime() + duration);\n            }\n          }\n          var fadeWeight = this._weight;\n          var fadeIn = this._fadeInSeconds == 0.0 ? 1.0 : cubismmath_1.CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / this._fadeInSeconds);\n          var fadeOut = this._fadeOutSeconds == 0.0 || motionQueueEntry.getEndTime() < 0.0 ? 1.0 : cubismmath_1.CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / this._fadeOutSeconds);\n          fadeWeight = fadeWeight * fadeIn * fadeOut;\n          motionQueueEntry.setState(userTimeSeconds, fadeWeight);\n          (0, cubismdebug_1.CSM_ASSERT)(0.0 <= fadeWeight && fadeWeight <= 1.0);\n          this.doUpdateParameters(model, userTimeSeconds, fadeWeight, motionQueueEntry);\n          if (motionQueueEntry.getEndTime() > 0 && motionQueueEntry.getEndTime() < userTimeSeconds) {\n            motionQueueEntry.setIsFinished(true);\n          }\n        };\n        ACubismMotion.prototype.setFadeInTime = function (fadeInSeconds) {\n          this._fadeInSeconds = fadeInSeconds;\n        };\n        ACubismMotion.prototype.setFadeOutTime = function (fadeOutSeconds) {\n          this._fadeOutSeconds = fadeOutSeconds;\n        };\n        ACubismMotion.prototype.getFadeOutTime = function () {\n          return this._fadeOutSeconds;\n        };\n        ACubismMotion.prototype.getFadeInTime = function () {\n          return this._fadeInSeconds;\n        };\n        ACubismMotion.prototype.setWeight = function (weight) {\n          this._weight = weight;\n        };\n        ACubismMotion.prototype.getWeight = function () {\n          return this._weight;\n        };\n        ACubismMotion.prototype.getDuration = function () {\n          return -1.0;\n        };\n        ACubismMotion.prototype.getLoopDuration = function () {\n          return -1.0;\n        };\n        ACubismMotion.prototype.setOffsetTime = function (offsetSeconds) {\n          this._offsetSeconds = offsetSeconds;\n        };\n        ACubismMotion.prototype.getFiredEvent = function (beforeCheckTimeSeconds, motionTimeSeconds) {\n          return this._firedEventValues;\n        };\n        ACubismMotion.prototype.isExistModelOpacity = function () {\n          return false;\n        };\n        ACubismMotion.prototype.getModelOpacityIndex = function () {\n          return -1;\n        };\n        ACubismMotion.prototype.getModelOpacityId = function (index) {\n          return null;\n        };\n        ACubismMotion.prototype.getModelOpacityValue = function () {\n          return 1.0;\n        };\n        return ACubismMotion;\n      }();\n      exports.ACubismMotion = ACubismMotion;\n      var $ = __importStar(__webpack_require__( /*! ./acubismmotion */\"../../../Framework/src/motion/acubismmotion.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.ACubismMotion = $.ACubismMotion;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/cubismexpressionmotion.ts\":\n    /*!***************************************************************!*\\\n      !*** ../../../Framework/src/motion/cubismexpressionmotion.ts ***!\n      \\***************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.ExpressionParameter = exports.ExpressionBlendType = exports.CubismExpressionMotion = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismjson_1 = __webpack_require__( /*! ../utils/cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      var acubismmotion_1 = __webpack_require__( /*! ./acubismmotion */\"../../../Framework/src/motion/acubismmotion.ts\");\n      var ExpressionKeyFadeIn = 'FadeInTime';\n      var ExpressionKeyFadeOut = 'FadeOutTime';\n      var ExpressionKeyParameters = 'Parameters';\n      var ExpressionKeyId = 'Id';\n      var ExpressionKeyValue = 'Value';\n      var ExpressionKeyBlend = 'Blend';\n      var BlendValueAdd = 'Add';\n      var BlendValueMultiply = 'Multiply';\n      var BlendValueOverwrite = 'Overwrite';\n      var DefaultFadeTime = 1.0;\n      var CubismExpressionMotion = function (_super) {\n        __extends(CubismExpressionMotion, _super);\n        function CubismExpressionMotion() {\n          var _this = _super.call(this) || this;\n          _this._parameters = new csmvector_1.csmVector();\n          return _this;\n        }\n        CubismExpressionMotion.create = function (buffer, size) {\n          var expression = new CubismExpressionMotion();\n          expression.parse(buffer, size);\n          return expression;\n        };\n        CubismExpressionMotion.prototype.doUpdateParameters = function (model, userTimeSeconds, weight, motionQueueEntry) {\n          for (var i = 0; i < this._parameters.getSize(); ++i) {\n            var parameter = this._parameters.at(i);\n            switch (parameter.blendType) {\n              case ExpressionBlendType.ExpressionBlendType_Add:\n                {\n                  model.addParameterValueById(parameter.parameterId, parameter.value, weight);\n                  break;\n                }\n              case ExpressionBlendType.ExpressionBlendType_Multiply:\n                {\n                  model.multiplyParameterValueById(parameter.parameterId, parameter.value, weight);\n                  break;\n                }\n              case ExpressionBlendType.ExpressionBlendType_Overwrite:\n                {\n                  model.setParameterValueById(parameter.parameterId, parameter.value, weight);\n                  break;\n                }\n              default:\n                break;\n            }\n          }\n        };\n        CubismExpressionMotion.prototype.parse = function (buffer, size) {\n          var json = cubismjson_1.CubismJson.create(buffer, size);\n          var root = json.getRoot();\n          this.setFadeInTime(root.getValueByString(ExpressionKeyFadeIn).toFloat(DefaultFadeTime));\n          this.setFadeOutTime(root.getValueByString(ExpressionKeyFadeOut).toFloat(DefaultFadeTime));\n          var parameterCount = root.getValueByString(ExpressionKeyParameters).getSize();\n          this._parameters.prepareCapacity(parameterCount);\n          for (var i = 0; i < parameterCount; ++i) {\n            var param = root.getValueByString(ExpressionKeyParameters).getValueByIndex(i);\n            var parameterId = live2dcubismframework_1.CubismFramework.getIdManager().getId(param.getValueByString(ExpressionKeyId).getRawString());\n            var value = param.getValueByString(ExpressionKeyValue).toFloat();\n            var blendType = void 0;\n            if (param.getValueByString(ExpressionKeyBlend).isNull() || param.getValueByString(ExpressionKeyBlend).getString() == BlendValueAdd) {\n              blendType = ExpressionBlendType.ExpressionBlendType_Add;\n            } else if (param.getValueByString(ExpressionKeyBlend).getString() == BlendValueMultiply) {\n              blendType = ExpressionBlendType.ExpressionBlendType_Multiply;\n            } else if (param.getValueByString(ExpressionKeyBlend).getString() == BlendValueOverwrite) {\n              blendType = ExpressionBlendType.ExpressionBlendType_Overwrite;\n            } else {\n              blendType = ExpressionBlendType.ExpressionBlendType_Add;\n            }\n            var item = new ExpressionParameter();\n            item.parameterId = parameterId;\n            item.blendType = blendType;\n            item.value = value;\n            this._parameters.pushBack(item);\n          }\n          cubismjson_1.CubismJson.delete(json);\n        };\n        return CubismExpressionMotion;\n      }(acubismmotion_1.ACubismMotion);\n      exports.CubismExpressionMotion = CubismExpressionMotion;\n      var ExpressionBlendType;\n      (function (ExpressionBlendType) {\n        ExpressionBlendType[ExpressionBlendType[\"ExpressionBlendType_Add\"] = 0] = \"ExpressionBlendType_Add\";\n        ExpressionBlendType[ExpressionBlendType[\"ExpressionBlendType_Multiply\"] = 1] = \"ExpressionBlendType_Multiply\";\n        ExpressionBlendType[ExpressionBlendType[\"ExpressionBlendType_Overwrite\"] = 2] = \"ExpressionBlendType_Overwrite\";\n      })(ExpressionBlendType = exports.ExpressionBlendType || (exports.ExpressionBlendType = {}));\n      var ExpressionParameter = function () {\n        function ExpressionParameter() {}\n        return ExpressionParameter;\n      }();\n      exports.ExpressionParameter = ExpressionParameter;\n      var $ = __importStar(__webpack_require__( /*! ./cubismexpressionmotion */\"../../../Framework/src/motion/cubismexpressionmotion.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismExpressionMotion = $.CubismExpressionMotion;\n        Live2DCubismFramework.ExpressionBlendType = $.ExpressionBlendType;\n        Live2DCubismFramework.ExpressionParameter = $.ExpressionParameter;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/cubismmotion.ts\":\n    /*!*****************************************************!*\\\n      !*** ../../../Framework/src/motion/cubismmotion.ts ***!\n      \\*****************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismMotion = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var cubismmath_1 = __webpack_require__( /*! ../math/cubismmath */\"../../../Framework/src/math/cubismmath.ts\");\n      var csmstring_1 = __webpack_require__( /*! ../type/csmstring */\"../../../Framework/src/type/csmstring.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! ../utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var acubismmotion_1 = __webpack_require__( /*! ./acubismmotion */\"../../../Framework/src/motion/acubismmotion.ts\");\n      var cubismmotioninternal_1 = __webpack_require__( /*! ./cubismmotioninternal */\"../../../Framework/src/motion/cubismmotioninternal.ts\");\n      var cubismmotionjson_1 = __webpack_require__( /*! ./cubismmotionjson */\"../../../Framework/src/motion/cubismmotionjson.ts\");\n      var EffectNameEyeBlink = 'EyeBlink';\n      var EffectNameLipSync = 'LipSync';\n      var TargetNameModel = 'Model';\n      var TargetNameParameter = 'Parameter';\n      var TargetNamePartOpacity = 'PartOpacity';\n      var IdNameOpacity = 'Opacity';\n      var UseOldBeziersCurveMotion = false;\n      function lerpPoints(a, b, t) {\n        var result = new cubismmotioninternal_1.CubismMotionPoint();\n        result.time = a.time + (b.time - a.time) * t;\n        result.value = a.value + (b.value - a.value) * t;\n        return result;\n      }\n      function linearEvaluate(points, time) {\n        var t = (time - points[0].time) / (points[1].time - points[0].time);\n        if (t < 0.0) {\n          t = 0.0;\n        }\n        return points[0].value + (points[1].value - points[0].value) * t;\n      }\n      function bezierEvaluate(points, time) {\n        var t = (time - points[0].time) / (points[3].time - points[0].time);\n        if (t < 0.0) {\n          t = 0.0;\n        }\n        var p01 = lerpPoints(points[0], points[1], t);\n        var p12 = lerpPoints(points[1], points[2], t);\n        var p23 = lerpPoints(points[2], points[3], t);\n        var p012 = lerpPoints(p01, p12, t);\n        var p123 = lerpPoints(p12, p23, t);\n        return lerpPoints(p012, p123, t).value;\n      }\n      function bezierEvaluateBinarySearch(points, time) {\n        var x_error = 0.01;\n        var x = time;\n        var x1 = points[0].time;\n        var x2 = points[3].time;\n        var cx1 = points[1].time;\n        var cx2 = points[2].time;\n        var ta = 0.0;\n        var tb = 1.0;\n        var t = 0.0;\n        var i = 0;\n        for (var var33 = true; i < 20; ++i) {\n          if (x < x1 + x_error) {\n            t = ta;\n            break;\n          }\n          if (x2 - x_error < x) {\n            t = tb;\n            break;\n          }\n          var centerx = (cx1 + cx2) * 0.5;\n          cx1 = (x1 + cx1) * 0.5;\n          cx2 = (x2 + cx2) * 0.5;\n          var ctrlx12 = (cx1 + centerx) * 0.5;\n          var ctrlx21 = (cx2 + centerx) * 0.5;\n          centerx = (ctrlx12 + ctrlx21) * 0.5;\n          if (x < centerx) {\n            tb = (ta + tb) * 0.5;\n            if (centerx - x_error < x) {\n              t = tb;\n              break;\n            }\n            x2 = centerx;\n            cx2 = ctrlx12;\n          } else {\n            ta = (ta + tb) * 0.5;\n            if (x < centerx + x_error) {\n              t = ta;\n              break;\n            }\n            x1 = centerx;\n            cx1 = ctrlx21;\n          }\n        }\n        if (i == 20) {\n          t = (ta + tb) * 0.5;\n        }\n        if (t < 0.0) {\n          t = 0.0;\n        }\n        if (t > 1.0) {\n          t = 1.0;\n        }\n        var p01 = lerpPoints(points[0], points[1], t);\n        var p12 = lerpPoints(points[1], points[2], t);\n        var p23 = lerpPoints(points[2], points[3], t);\n        var p012 = lerpPoints(p01, p12, t);\n        var p123 = lerpPoints(p12, p23, t);\n        return lerpPoints(p012, p123, t).value;\n      }\n      function bezierEvaluateCardanoInterpretation(points, time) {\n        var x = time;\n        var x1 = points[0].time;\n        var x2 = points[3].time;\n        var cx1 = points[1].time;\n        var cx2 = points[2].time;\n        var a = x2 - 3.0 * cx2 + 3.0 * cx1 - x1;\n        var b = 3.0 * cx2 - 6.0 * cx1 + 3.0 * x1;\n        var c = 3.0 * cx1 - 3.0 * x1;\n        var d = x1 - x;\n        var t = cubismmath_1.CubismMath.cardanoAlgorithmForBezier(a, b, c, d);\n        var p01 = lerpPoints(points[0], points[1], t);\n        var p12 = lerpPoints(points[1], points[2], t);\n        var p23 = lerpPoints(points[2], points[3], t);\n        var p012 = lerpPoints(p01, p12, t);\n        var p123 = lerpPoints(p12, p23, t);\n        return lerpPoints(p012, p123, t).value;\n      }\n      function steppedEvaluate(points, time) {\n        return points[0].value;\n      }\n      function inverseSteppedEvaluate(points, time) {\n        return points[1].value;\n      }\n      function evaluateCurve(motionData, index, time) {\n        var curve = motionData.curves.at(index);\n        var target = -1;\n        var totalSegmentCount = curve.baseSegmentIndex + curve.segmentCount;\n        var pointPosition = 0;\n        for (var i = curve.baseSegmentIndex; i < totalSegmentCount; ++i) {\n          pointPosition = motionData.segments.at(i).basePointIndex + (motionData.segments.at(i).segmentType == cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Bezier ? 3 : 1);\n          if (motionData.points.at(pointPosition).time > time) {\n            target = i;\n            break;\n          }\n        }\n        if (target == -1) {\n          return motionData.points.at(pointPosition).value;\n        }\n        var segment = motionData.segments.at(target);\n        return segment.evaluate(motionData.points.get(segment.basePointIndex), time);\n      }\n      var CubismMotion = function (_super) {\n        __extends(CubismMotion, _super);\n        function CubismMotion() {\n          var _this = _super.call(this) || this;\n          _this._sourceFrameRate = 30.0;\n          _this._loopDurationSeconds = -1.0;\n          _this._isLoop = false;\n          _this._isLoopFadeIn = true;\n          _this._lastWeight = 0.0;\n          _this._motionData = null;\n          _this._modelCurveIdEyeBlink = null;\n          _this._modelCurveIdLipSync = null;\n          _this._modelCurveIdOpacity = null;\n          _this._eyeBlinkParameterIds = null;\n          _this._lipSyncParameterIds = null;\n          _this._modelOpacity = 1.0;\n          return _this;\n        }\n        CubismMotion.create = function (buffer, size, onFinishedMotionHandler) {\n          var ret = new CubismMotion();\n          ret.parse(buffer, size);\n          ret._sourceFrameRate = ret._motionData.fps;\n          ret._loopDurationSeconds = ret._motionData.duration;\n          ret._onFinishedMotion = onFinishedMotionHandler;\n          return ret;\n        };\n        CubismMotion.prototype.doUpdateParameters = function (model, userTimeSeconds, fadeWeight, motionQueueEntry) {\n          if (this._modelCurveIdEyeBlink == null) {\n            this._modelCurveIdEyeBlink = live2dcubismframework_1.CubismFramework.getIdManager().getId(EffectNameEyeBlink);\n          }\n          if (this._modelCurveIdLipSync == null) {\n            this._modelCurveIdLipSync = live2dcubismframework_1.CubismFramework.getIdManager().getId(EffectNameLipSync);\n          }\n          if (this._modelCurveIdOpacity == null) {\n            this._modelCurveIdOpacity = live2dcubismframework_1.CubismFramework.getIdManager().getId(IdNameOpacity);\n          }\n          var timeOffsetSeconds = userTimeSeconds - motionQueueEntry.getStartTime();\n          if (timeOffsetSeconds < 0.0) {\n            timeOffsetSeconds = 0.0;\n          }\n          var lipSyncValue = Number.MAX_VALUE;\n          var eyeBlinkValue = Number.MAX_VALUE;\n          var MaxTargetSize = 64;\n          var lipSyncFlags = 0;\n          var eyeBlinkFlags = 0;\n          if (this._eyeBlinkParameterIds.getSize() > MaxTargetSize) {\n            (0, cubismdebug_1.CubismLogDebug)('too many eye blink targets : {0}', this._eyeBlinkParameterIds.getSize());\n          }\n          if (this._lipSyncParameterIds.getSize() > MaxTargetSize) {\n            (0, cubismdebug_1.CubismLogDebug)('too many lip sync targets : {0}', this._lipSyncParameterIds.getSize());\n          }\n          var tmpFadeIn = this._fadeInSeconds <= 0.0 ? 1.0 : cubismmath_1.CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / this._fadeInSeconds);\n          var tmpFadeOut = this._fadeOutSeconds <= 0.0 || motionQueueEntry.getEndTime() < 0.0 ? 1.0 : cubismmath_1.CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / this._fadeOutSeconds);\n          var value;\n          var c, parameterIndex;\n          var time = timeOffsetSeconds;\n          if (this._isLoop) {\n            while (time > this._motionData.duration) {\n              time -= this._motionData.duration;\n            }\n          }\n          var curves = this._motionData.curves;\n          for (c = 0; c < this._motionData.curveCount && curves.at(c).type == cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Model; ++c) {\n            value = evaluateCurve(this._motionData, c, time);\n            if (curves.at(c).id == this._modelCurveIdEyeBlink) {\n              eyeBlinkValue = value;\n            } else if (curves.at(c).id == this._modelCurveIdLipSync) {\n              lipSyncValue = value;\n            } else if (curves.at(c).id == this._modelCurveIdOpacity) {\n              this._modelOpacity = value;\n              model.setModelOapcity(this.getModelOpacityValue());\n            }\n          }\n          var parameterMotionCurveCount = 0;\n          for (; c < this._motionData.curveCount && curves.at(c).type == cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter; ++c) {\n            parameterMotionCurveCount++;\n            parameterIndex = model.getParameterIndex(curves.at(c).id);\n            if (parameterIndex == -1) {\n              continue;\n            }\n            var sourceValue = model.getParameterValueByIndex(parameterIndex);\n            value = evaluateCurve(this._motionData, c, time);\n            if (eyeBlinkValue != Number.MAX_VALUE) {\n              for (var i = 0; i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                if (this._eyeBlinkParameterIds.at(i) == curves.at(c).id) {\n                  value *= eyeBlinkValue;\n                  eyeBlinkFlags |= 1 << i;\n                  break;\n                }\n              }\n            }\n            if (lipSyncValue != Number.MAX_VALUE) {\n              for (var i = 0; i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                if (this._lipSyncParameterIds.at(i) == curves.at(c).id) {\n                  value += lipSyncValue;\n                  lipSyncFlags |= 1 << i;\n                  break;\n                }\n              }\n            }\n            var v = void 0;\n            if (curves.at(c).fadeInTime < 0.0 && curves.at(c).fadeOutTime < 0.0) {\n              v = sourceValue + (value - sourceValue) * fadeWeight;\n            } else {\n              var fin = void 0;\n              var fout = void 0;\n              if (curves.at(c).fadeInTime < 0.0) {\n                fin = tmpFadeIn;\n              } else {\n                fin = curves.at(c).fadeInTime == 0.0 ? 1.0 : cubismmath_1.CubismMath.getEasingSine((userTimeSeconds - motionQueueEntry.getFadeInStartTime()) / curves.at(c).fadeInTime);\n              }\n              if (curves.at(c).fadeOutTime < 0.0) {\n                fout = tmpFadeOut;\n              } else {\n                fout = curves.at(c).fadeOutTime == 0.0 || motionQueueEntry.getEndTime() < 0.0 ? 1.0 : cubismmath_1.CubismMath.getEasingSine((motionQueueEntry.getEndTime() - userTimeSeconds) / curves.at(c).fadeOutTime);\n              }\n              var paramWeight = this._weight * fin * fout;\n              v = sourceValue + (value - sourceValue) * paramWeight;\n            }\n            model.setParameterValueByIndex(parameterIndex, v, 1.0);\n          }\n          {\n            if (eyeBlinkValue != Number.MAX_VALUE) {\n              for (var i = 0; i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                var sourceValue = model.getParameterValueById(this._eyeBlinkParameterIds.at(i));\n                if (eyeBlinkFlags >> i & 0x01) {\n                  continue;\n                }\n                var v = sourceValue + (eyeBlinkValue - sourceValue) * fadeWeight;\n                model.setParameterValueById(this._eyeBlinkParameterIds.at(i), v);\n              }\n            }\n            if (lipSyncValue != Number.MAX_VALUE) {\n              for (var i = 0; i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize; ++i) {\n                var sourceValue = model.getParameterValueById(this._lipSyncParameterIds.at(i));\n                if (lipSyncFlags >> i & 0x01) {\n                  continue;\n                }\n                var v = sourceValue + (lipSyncValue - sourceValue) * fadeWeight;\n                model.setParameterValueById(this._lipSyncParameterIds.at(i), v);\n              }\n            }\n          }\n          for (; c < this._motionData.curveCount && curves.at(c).type == cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity; ++c) {\n            parameterIndex = model.getParameterIndex(curves.at(c).id);\n            if (parameterIndex == -1) {\n              continue;\n            }\n            value = evaluateCurve(this._motionData, c, time);\n            model.setParameterValueByIndex(parameterIndex, value);\n          }\n          if (timeOffsetSeconds >= this._motionData.duration) {\n            if (this._isLoop) {\n              motionQueueEntry.setStartTime(userTimeSeconds);\n              if (this._isLoopFadeIn) {\n                motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n              }\n            } else {\n              if (this._onFinishedMotion) {\n                this._onFinishedMotion(this);\n              }\n              motionQueueEntry.setIsFinished(true);\n            }\n          }\n          this._lastWeight = fadeWeight;\n        };\n        CubismMotion.prototype.setIsLoop = function (loop) {\n          this._isLoop = loop;\n        };\n        CubismMotion.prototype.isLoop = function () {\n          return this._isLoop;\n        };\n        CubismMotion.prototype.setIsLoopFadeIn = function (loopFadeIn) {\n          this._isLoopFadeIn = loopFadeIn;\n        };\n        CubismMotion.prototype.isLoopFadeIn = function () {\n          return this._isLoopFadeIn;\n        };\n        CubismMotion.prototype.getDuration = function () {\n          return this._isLoop ? -1.0 : this._loopDurationSeconds;\n        };\n        CubismMotion.prototype.getLoopDuration = function () {\n          return this._loopDurationSeconds;\n        };\n        CubismMotion.prototype.setParameterFadeInTime = function (parameterId, value) {\n          var curves = this._motionData.curves;\n          for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n              curves.at(i).fadeInTime = value;\n              return;\n            }\n          }\n        };\n        CubismMotion.prototype.setParameterFadeOutTime = function (parameterId, value) {\n          var curves = this._motionData.curves;\n          for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n              curves.at(i).fadeOutTime = value;\n              return;\n            }\n          }\n        };\n        CubismMotion.prototype.getParameterFadeInTime = function (parameterId) {\n          var curves = this._motionData.curves;\n          for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n              return curves.at(i).fadeInTime;\n            }\n          }\n          return -1;\n        };\n        CubismMotion.prototype.getParameterFadeOutTime = function (parameterId) {\n          var curves = this._motionData.curves;\n          for (var i = 0; i < this._motionData.curveCount; ++i) {\n            if (parameterId == curves.at(i).id) {\n              return curves.at(i).fadeOutTime;\n            }\n          }\n          return -1;\n        };\n        CubismMotion.prototype.setEffectIds = function (eyeBlinkParameterIds, lipSyncParameterIds) {\n          this._eyeBlinkParameterIds = eyeBlinkParameterIds;\n          this._lipSyncParameterIds = lipSyncParameterIds;\n        };\n        CubismMotion.prototype.release = function () {\n          this._motionData = void 0;\n          this._motionData = null;\n        };\n        CubismMotion.prototype.parse = function (motionJson, size) {\n          this._motionData = new cubismmotioninternal_1.CubismMotionData();\n          var json = new cubismmotionjson_1.CubismMotionJson(motionJson, size);\n          this._motionData.duration = json.getMotionDuration();\n          this._motionData.loop = json.isMotionLoop();\n          this._motionData.curveCount = json.getMotionCurveCount();\n          this._motionData.fps = json.getMotionFps();\n          this._motionData.eventCount = json.getEventCount();\n          var areBeziersRestructed = json.getEvaluationOptionFlag(cubismmotionjson_1.EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted);\n          if (json.isExistMotionFadeInTime()) {\n            this._fadeInSeconds = json.getMotionFadeInTime() < 0.0 ? 1.0 : json.getMotionFadeInTime();\n          } else {\n            this._fadeInSeconds = 1.0;\n          }\n          if (json.isExistMotionFadeOutTime()) {\n            this._fadeOutSeconds = json.getMotionFadeOutTime() < 0.0 ? 1.0 : json.getMotionFadeOutTime();\n          } else {\n            this._fadeOutSeconds = 1.0;\n          }\n          this._motionData.curves.updateSize(this._motionData.curveCount, cubismmotioninternal_1.CubismMotionCurve, true);\n          this._motionData.segments.updateSize(json.getMotionTotalSegmentCount(), cubismmotioninternal_1.CubismMotionSegment, true);\n          this._motionData.points.updateSize(json.getMotionTotalPointCount(), cubismmotioninternal_1.CubismMotionPoint, true);\n          this._motionData.events.updateSize(this._motionData.eventCount, cubismmotioninternal_1.CubismMotionEvent, true);\n          var totalPointCount = 0;\n          var totalSegmentCount = 0;\n          for (var curveCount = 0; curveCount < this._motionData.curveCount; ++curveCount) {\n            if (json.getMotionCurveTarget(curveCount) == TargetNameModel) {\n              this._motionData.curves.at(curveCount).type = cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n            } else if (json.getMotionCurveTarget(curveCount) == TargetNameParameter) {\n              this._motionData.curves.at(curveCount).type = cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\n            } else if (json.getMotionCurveTarget(curveCount) == TargetNamePartOpacity) {\n              this._motionData.curves.at(curveCount).type = cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\n            } else {\n              (0, cubismdebug_1.CubismLogWarning)('Warning : Unable to get segment type from Curve! The number of \"CurveCount\" may be incorrect!');\n            }\n            this._motionData.curves.at(curveCount).id = json.getMotionCurveId(curveCount);\n            this._motionData.curves.at(curveCount).baseSegmentIndex = totalSegmentCount;\n            this._motionData.curves.at(curveCount).fadeInTime = json.isExistMotionCurveFadeInTime(curveCount) ? json.getMotionCurveFadeInTime(curveCount) : -1.0;\n            this._motionData.curves.at(curveCount).fadeOutTime = json.isExistMotionCurveFadeOutTime(curveCount) ? json.getMotionCurveFadeOutTime(curveCount) : -1.0;\n            for (var segmentPosition = 0; segmentPosition < json.getMotionCurveSegmentCount(curveCount);) {\n              if (segmentPosition == 0) {\n                this._motionData.segments.at(totalSegmentCount).basePointIndex = totalPointCount;\n                this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition);\n                this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                totalPointCount += 1;\n                segmentPosition += 2;\n              } else {\n                this._motionData.segments.at(totalSegmentCount).basePointIndex = totalPointCount - 1;\n              }\n              var segment = json.getMotionCurveSegment(curveCount, segmentPosition);\n              switch (segment) {\n                case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Linear:\n                  {\n                    this._motionData.segments.at(totalSegmentCount).segmentType = cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Linear;\n                    this._motionData.segments.at(totalSegmentCount).evaluate = linearEvaluate;\n                    this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                    this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                    totalPointCount += 1;\n                    segmentPosition += 3;\n                    break;\n                  }\n                case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Bezier:\n                  {\n                    this._motionData.segments.at(totalSegmentCount).segmentType = cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Bezier;\n                    if (areBeziersRestructed || UseOldBeziersCurveMotion) {\n                      this._motionData.segments.at(totalSegmentCount).evaluate = bezierEvaluate;\n                    } else {\n                      this._motionData.segments.at(totalSegmentCount).evaluate = bezierEvaluateCardanoInterpretation;\n                    }\n                    this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                    this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                    this._motionData.points.at(totalPointCount + 1).time = json.getMotionCurveSegment(curveCount, segmentPosition + 3);\n                    this._motionData.points.at(totalPointCount + 1).value = json.getMotionCurveSegment(curveCount, segmentPosition + 4);\n                    this._motionData.points.at(totalPointCount + 2).time = json.getMotionCurveSegment(curveCount, segmentPosition + 5);\n                    this._motionData.points.at(totalPointCount + 2).value = json.getMotionCurveSegment(curveCount, segmentPosition + 6);\n                    totalPointCount += 3;\n                    segmentPosition += 7;\n                    break;\n                  }\n                case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Stepped:\n                  {\n                    this._motionData.segments.at(totalSegmentCount).segmentType = cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_Stepped;\n                    this._motionData.segments.at(totalSegmentCount).evaluate = steppedEvaluate;\n                    this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                    this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                    totalPointCount += 1;\n                    segmentPosition += 3;\n                    break;\n                  }\n                case cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:\n                  {\n                    this._motionData.segments.at(totalSegmentCount).segmentType = cubismmotioninternal_1.CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;\n                    this._motionData.segments.at(totalSegmentCount).evaluate = inverseSteppedEvaluate;\n                    this._motionData.points.at(totalPointCount).time = json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n                    this._motionData.points.at(totalPointCount).value = json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n                    totalPointCount += 1;\n                    segmentPosition += 3;\n                    break;\n                  }\n                default:\n                  {\n                    (0, cubismdebug_1.CSM_ASSERT)(0);\n                    break;\n                  }\n              }\n              ++this._motionData.curves.at(curveCount).segmentCount;\n              ++totalSegmentCount;\n            }\n          }\n          for (var userdatacount = 0; userdatacount < json.getEventCount(); ++userdatacount) {\n            this._motionData.events.at(userdatacount).fireTime = json.getEventTime(userdatacount);\n            this._motionData.events.at(userdatacount).value = json.getEventValue(userdatacount);\n          }\n          json.release();\n          json = void 0;\n          json = null;\n        };\n        CubismMotion.prototype.getFiredEvent = function (beforeCheckTimeSeconds, motionTimeSeconds) {\n          this._firedEventValues.updateSize(0);\n          for (var u = 0; u < this._motionData.eventCount; ++u) {\n            if (this._motionData.events.at(u).fireTime > beforeCheckTimeSeconds && this._motionData.events.at(u).fireTime <= motionTimeSeconds) {\n              this._firedEventValues.pushBack(new csmstring_1.csmString(this._motionData.events.at(u).value.s));\n            }\n          }\n          return this._firedEventValues;\n        };\n        CubismMotion.prototype.isExistModelOpacity = function () {\n          for (var i = 0; i < this._motionData.curveCount; i++) {\n            var curve = this._motionData.curves.at(i);\n            if (curve.type != cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n              continue;\n            }\n            if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n              return true;\n            }\n          }\n          return false;\n        };\n        CubismMotion.prototype.getModelOpacityIndex = function () {\n          if (this.isExistModelOpacity()) {\n            for (var i = 0; i < this._motionData.curveCount; i++) {\n              var curve = this._motionData.curves.at(i);\n              if (curve.type != cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n                continue;\n              }\n              if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n                return i;\n              }\n            }\n          }\n          return -1;\n        };\n        CubismMotion.prototype.getModelOpacityId = function (index) {\n          if (index != -1) {\n            var curve = this._motionData.curves.at(index);\n            if (curve.type == cubismmotioninternal_1.CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n              if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n                return live2dcubismframework_1.CubismFramework.getIdManager().getId(curve.id.getString().s);\n              }\n            }\n          }\n          return null;\n        };\n        CubismMotion.prototype.getModelOpacityValue = function () {\n          return this._modelOpacity;\n        };\n        return CubismMotion;\n      }(acubismmotion_1.ACubismMotion);\n      exports.CubismMotion = CubismMotion;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmotion */\"../../../Framework/src/motion/cubismmotion.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMotion = $.CubismMotion;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/cubismmotioninternal.ts\":\n    /*!*************************************************************!*\\\n      !*** ../../../Framework/src/motion/cubismmotioninternal.ts ***!\n      \\*************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismMotionData = exports.CubismMotionEvent = exports.CubismMotionCurve = exports.CubismMotionSegment = exports.CubismMotionPoint = exports.CubismMotionSegmentType = exports.CubismMotionCurveTarget = void 0;\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var CubismMotionCurveTarget;\n      (function (CubismMotionCurveTarget) {\n        CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_Model\"] = 0] = \"CubismMotionCurveTarget_Model\";\n        CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_Parameter\"] = 1] = \"CubismMotionCurveTarget_Parameter\";\n        CubismMotionCurveTarget[CubismMotionCurveTarget[\"CubismMotionCurveTarget_PartOpacity\"] = 2] = \"CubismMotionCurveTarget_PartOpacity\";\n      })(CubismMotionCurveTarget = exports.CubismMotionCurveTarget || (exports.CubismMotionCurveTarget = {}));\n      var CubismMotionSegmentType;\n      (function (CubismMotionSegmentType) {\n        CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Linear\"] = 0] = \"CubismMotionSegmentType_Linear\";\n        CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Bezier\"] = 1] = \"CubismMotionSegmentType_Bezier\";\n        CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_Stepped\"] = 2] = \"CubismMotionSegmentType_Stepped\";\n        CubismMotionSegmentType[CubismMotionSegmentType[\"CubismMotionSegmentType_InverseStepped\"] = 3] = \"CubismMotionSegmentType_InverseStepped\";\n      })(CubismMotionSegmentType = exports.CubismMotionSegmentType || (exports.CubismMotionSegmentType = {}));\n      var CubismMotionPoint = function () {\n        function CubismMotionPoint() {\n          this.time = 0.0;\n          this.value = 0.0;\n        }\n        return CubismMotionPoint;\n      }();\n      exports.CubismMotionPoint = CubismMotionPoint;\n      var CubismMotionSegment = function () {\n        function CubismMotionSegment() {\n          this.evaluate = null;\n          this.basePointIndex = 0;\n          this.segmentType = 0;\n        }\n        return CubismMotionSegment;\n      }();\n      exports.CubismMotionSegment = CubismMotionSegment;\n      var CubismMotionCurve = function () {\n        function CubismMotionCurve() {\n          this.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n          this.segmentCount = 0;\n          this.baseSegmentIndex = 0;\n          this.fadeInTime = 0.0;\n          this.fadeOutTime = 0.0;\n        }\n        return CubismMotionCurve;\n      }();\n      exports.CubismMotionCurve = CubismMotionCurve;\n      var CubismMotionEvent = function () {\n        function CubismMotionEvent() {\n          this.fireTime = 0.0;\n        }\n        return CubismMotionEvent;\n      }();\n      exports.CubismMotionEvent = CubismMotionEvent;\n      var CubismMotionData = function () {\n        function CubismMotionData() {\n          this.duration = 0.0;\n          this.loop = false;\n          this.curveCount = 0;\n          this.eventCount = 0;\n          this.fps = 0.0;\n          this.curves = new csmvector_1.csmVector();\n          this.segments = new csmvector_1.csmVector();\n          this.points = new csmvector_1.csmVector();\n          this.events = new csmvector_1.csmVector();\n        }\n        return CubismMotionData;\n      }();\n      exports.CubismMotionData = CubismMotionData;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmotioninternal */\"../../../Framework/src/motion/cubismmotioninternal.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMotionCurve = $.CubismMotionCurve;\n        Live2DCubismFramework.CubismMotionCurveTarget = $.CubismMotionCurveTarget;\n        Live2DCubismFramework.CubismMotionData = $.CubismMotionData;\n        Live2DCubismFramework.CubismMotionEvent = $.CubismMotionEvent;\n        Live2DCubismFramework.CubismMotionPoint = $.CubismMotionPoint;\n        Live2DCubismFramework.CubismMotionSegment = $.CubismMotionSegment;\n        Live2DCubismFramework.CubismMotionSegmentType = $.CubismMotionSegmentType;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/cubismmotionjson.ts\":\n    /*!*********************************************************!*\\\n      !*** ../../../Framework/src/motion/cubismmotionjson.ts ***!\n      \\*********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.EvaluationOptionFlag = exports.CubismMotionJson = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var csmstring_1 = __webpack_require__( /*! ../type/csmstring */\"../../../Framework/src/type/csmstring.ts\");\n      var cubismjson_1 = __webpack_require__( /*! ../utils/cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      var Meta = 'Meta';\n      var Duration = 'Duration';\n      var Loop = 'Loop';\n      var AreBeziersRestricted = 'AreBeziersRestricted';\n      var CurveCount = 'CurveCount';\n      var Fps = 'Fps';\n      var TotalSegmentCount = 'TotalSegmentCount';\n      var TotalPointCount = 'TotalPointCount';\n      var Curves = 'Curves';\n      var Target = 'Target';\n      var Id = 'Id';\n      var FadeInTime = 'FadeInTime';\n      var FadeOutTime = 'FadeOutTime';\n      var Segments = 'Segments';\n      var UserData = 'UserData';\n      var UserDataCount = 'UserDataCount';\n      var TotalUserDataSize = 'TotalUserDataSize';\n      var Time = 'Time';\n      var Value = 'Value';\n      var CubismMotionJson = function () {\n        function CubismMotionJson(buffer, size) {\n          this._json = cubismjson_1.CubismJson.create(buffer, size);\n        }\n        CubismMotionJson.prototype.release = function () {\n          cubismjson_1.CubismJson.delete(this._json);\n        };\n        CubismMotionJson.prototype.getMotionDuration = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(Duration).toFloat();\n        };\n        CubismMotionJson.prototype.isMotionLoop = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(Loop).toBoolean();\n        };\n        CubismMotionJson.prototype.getEvaluationOptionFlag = function (flagType) {\n          if (EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted == flagType) {\n            return this._json.getRoot().getValueByString(Meta).getValueByString(AreBeziersRestricted).toBoolean();\n          }\n          return false;\n        };\n        CubismMotionJson.prototype.getMotionCurveCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(CurveCount).toInt();\n        };\n        CubismMotionJson.prototype.getMotionFps = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(Fps).toFloat();\n        };\n        CubismMotionJson.prototype.getMotionTotalSegmentCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(TotalSegmentCount).toInt();\n        };\n        CubismMotionJson.prototype.getMotionTotalPointCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(TotalPointCount).toInt();\n        };\n        CubismMotionJson.prototype.isExistMotionFadeInTime = function () {\n          return !this._json.getRoot().getValueByString(Meta).getValueByString(FadeInTime).isNull();\n        };\n        CubismMotionJson.prototype.isExistMotionFadeOutTime = function () {\n          return !this._json.getRoot().getValueByString(Meta).getValueByString(FadeOutTime).isNull();\n        };\n        CubismMotionJson.prototype.getMotionFadeInTime = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(FadeInTime).toFloat();\n        };\n        CubismMotionJson.prototype.getMotionFadeOutTime = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(FadeOutTime).toFloat();\n        };\n        CubismMotionJson.prototype.getMotionCurveTarget = function (curveIndex) {\n          return this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(Target).getRawString();\n        };\n        CubismMotionJson.prototype.getMotionCurveId = function (curveIndex) {\n          return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(Id).getRawString());\n        };\n        CubismMotionJson.prototype.isExistMotionCurveFadeInTime = function (curveIndex) {\n          return !this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(FadeInTime).isNull();\n        };\n        CubismMotionJson.prototype.isExistMotionCurveFadeOutTime = function (curveIndex) {\n          return !this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(FadeOutTime).isNull();\n        };\n        CubismMotionJson.prototype.getMotionCurveFadeInTime = function (curveIndex) {\n          return this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(FadeInTime).toFloat();\n        };\n        CubismMotionJson.prototype.getMotionCurveFadeOutTime = function (curveIndex) {\n          return this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(FadeOutTime).toFloat();\n        };\n        CubismMotionJson.prototype.getMotionCurveSegmentCount = function (curveIndex) {\n          return this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(Segments).getVector().getSize();\n        };\n        CubismMotionJson.prototype.getMotionCurveSegment = function (curveIndex, segmentIndex) {\n          return this._json.getRoot().getValueByString(Curves).getValueByIndex(curveIndex).getValueByString(Segments).getValueByIndex(segmentIndex).toFloat();\n        };\n        CubismMotionJson.prototype.getEventCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(UserDataCount).toInt();\n        };\n        CubismMotionJson.prototype.getTotalEventValueSize = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(TotalUserDataSize).toInt();\n        };\n        CubismMotionJson.prototype.getEventTime = function (userDataIndex) {\n          return this._json.getRoot().getValueByString(UserData).getValueByIndex(userDataIndex).getValueByString(Time).toFloat();\n        };\n        CubismMotionJson.prototype.getEventValue = function (userDataIndex) {\n          return new csmstring_1.csmString(this._json.getRoot().getValueByString(UserData).getValueByIndex(userDataIndex).getValueByString(Value).getRawString());\n        };\n        return CubismMotionJson;\n      }();\n      exports.CubismMotionJson = CubismMotionJson;\n      var EvaluationOptionFlag;\n      (function (EvaluationOptionFlag) {\n        EvaluationOptionFlag[EvaluationOptionFlag[\"EvaluationOptionFlag_AreBeziersRistricted\"] = 0] = \"EvaluationOptionFlag_AreBeziersRistricted\";\n      })(EvaluationOptionFlag = exports.EvaluationOptionFlag || (exports.EvaluationOptionFlag = {}));\n      var $ = __importStar(__webpack_require__( /*! ./cubismmotionjson */\"../../../Framework/src/motion/cubismmotionjson.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMotionJson = $.CubismMotionJson;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/cubismmotionmanager.ts\":\n    /*!************************************************************!*\\\n      !*** ../../../Framework/src/motion/cubismmotionmanager.ts ***!\n      \\************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismMotionManager = void 0;\n      var cubismmotionqueuemanager_1 = __webpack_require__( /*! ./cubismmotionqueuemanager */\"../../../Framework/src/motion/cubismmotionqueuemanager.ts\");\n      var CubismMotionManager = function (_super) {\n        __extends(CubismMotionManager, _super);\n        function CubismMotionManager() {\n          var _this = _super.call(this) || this;\n          _this._currentPriority = 0;\n          _this._reservePriority = 0;\n          return _this;\n        }\n        CubismMotionManager.prototype.getCurrentPriority = function () {\n          return this._currentPriority;\n        };\n        CubismMotionManager.prototype.getReservePriority = function () {\n          return this._reservePriority;\n        };\n        CubismMotionManager.prototype.setReservePriority = function (val) {\n          this._reservePriority = val;\n        };\n        CubismMotionManager.prototype.startMotionPriority = function (motion, autoDelete, priority) {\n          if (priority == this._reservePriority) {\n            this._reservePriority = 0;\n          }\n          this._currentPriority = priority;\n          return _super.prototype.startMotion.call(this, motion, autoDelete, this._userTimeSeconds);\n        };\n        CubismMotionManager.prototype.updateMotion = function (model, deltaTimeSeconds) {\n          this._userTimeSeconds += deltaTimeSeconds;\n          var updated = _super.prototype.doUpdateMotion.call(this, model, this._userTimeSeconds);\n          if (this.isFinished()) {\n            this._currentPriority = 0;\n          }\n          return updated;\n        };\n        CubismMotionManager.prototype.reserveMotion = function (priority) {\n          if (priority <= this._reservePriority || priority <= this._currentPriority) {\n            return false;\n          }\n          this._reservePriority = priority;\n          return true;\n        };\n        return CubismMotionManager;\n      }(cubismmotionqueuemanager_1.CubismMotionQueueManager);\n      exports.CubismMotionManager = CubismMotionManager;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmotionmanager */\"../../../Framework/src/motion/cubismmotionmanager.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMotionManager = $.CubismMotionManager;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/cubismmotionqueueentry.ts\":\n    /*!***************************************************************!*\\\n      !*** ../../../Framework/src/motion/cubismmotionqueueentry.ts ***!\n      \\***************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismMotionQueueEntry = void 0;\n      var acubismmotion_1 = __webpack_require__( /*! ./acubismmotion */\"../../../Framework/src/motion/acubismmotion.ts\");\n      var CubismMotionQueueEntry = function () {\n        function CubismMotionQueueEntry() {\n          this._autoDelete = false;\n          this._motion = null;\n          this._available = true;\n          this._finished = false;\n          this._started = false;\n          this._startTimeSeconds = -1.0;\n          this._fadeInStartTimeSeconds = 0.0;\n          this._endTimeSeconds = -1.0;\n          this._stateTimeSeconds = 0.0;\n          this._stateWeight = 0.0;\n          this._lastEventCheckSeconds = 0.0;\n          this._motionQueueEntryHandle = this;\n          this._fadeOutSeconds = 0.0;\n          this._isTriggeredFadeOut = false;\n        }\n        CubismMotionQueueEntry.prototype.release = function () {\n          if (this._autoDelete && this._motion) {\n            acubismmotion_1.ACubismMotion.delete(this._motion);\n          }\n        };\n        CubismMotionQueueEntry.prototype.setFadeOut = function (fadeOutSeconds) {\n          this._fadeOutSeconds = fadeOutSeconds;\n          this._isTriggeredFadeOut = true;\n        };\n        CubismMotionQueueEntry.prototype.startFadeOut = function (fadeOutSeconds, userTimeSeconds) {\n          var newEndTimeSeconds = userTimeSeconds + fadeOutSeconds;\n          this._isTriggeredFadeOut = true;\n          if (this._endTimeSeconds < 0.0 || newEndTimeSeconds < this._endTimeSeconds) {\n            this._endTimeSeconds = newEndTimeSeconds;\n          }\n        };\n        CubismMotionQueueEntry.prototype.isFinished = function () {\n          return this._finished;\n        };\n        CubismMotionQueueEntry.prototype.isStarted = function () {\n          return this._started;\n        };\n        CubismMotionQueueEntry.prototype.getStartTime = function () {\n          return this._startTimeSeconds;\n        };\n        CubismMotionQueueEntry.prototype.getFadeInStartTime = function () {\n          return this._fadeInStartTimeSeconds;\n        };\n        CubismMotionQueueEntry.prototype.getEndTime = function () {\n          return this._endTimeSeconds;\n        };\n        CubismMotionQueueEntry.prototype.setStartTime = function (startTime) {\n          this._startTimeSeconds = startTime;\n        };\n        CubismMotionQueueEntry.prototype.setFadeInStartTime = function (startTime) {\n          this._fadeInStartTimeSeconds = startTime;\n        };\n        CubismMotionQueueEntry.prototype.setEndTime = function (endTime) {\n          this._endTimeSeconds = endTime;\n        };\n        CubismMotionQueueEntry.prototype.setIsFinished = function (f) {\n          this._finished = f;\n        };\n        CubismMotionQueueEntry.prototype.setIsStarted = function (f) {\n          this._started = f;\n        };\n        CubismMotionQueueEntry.prototype.isAvailable = function () {\n          return this._available;\n        };\n        CubismMotionQueueEntry.prototype.setIsAvailable = function (v) {\n          this._available = v;\n        };\n        CubismMotionQueueEntry.prototype.setState = function (timeSeconds, weight) {\n          this._stateTimeSeconds = timeSeconds;\n          this._stateWeight = weight;\n        };\n        CubismMotionQueueEntry.prototype.getStateTime = function () {\n          return this._stateTimeSeconds;\n        };\n        CubismMotionQueueEntry.prototype.getStateWeight = function () {\n          return this._stateWeight;\n        };\n        CubismMotionQueueEntry.prototype.getLastCheckEventSeconds = function () {\n          return this._lastEventCheckSeconds;\n        };\n        CubismMotionQueueEntry.prototype.setLastCheckEventSeconds = function (checkSeconds) {\n          this._lastEventCheckSeconds = checkSeconds;\n        };\n        CubismMotionQueueEntry.prototype.isTriggeredFadeOut = function () {\n          return this._isTriggeredFadeOut;\n        };\n        CubismMotionQueueEntry.prototype.getFadeOutSeconds = function () {\n          return this._fadeOutSeconds;\n        };\n        return CubismMotionQueueEntry;\n      }();\n      exports.CubismMotionQueueEntry = CubismMotionQueueEntry;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmotionqueueentry */\"../../../Framework/src/motion/cubismmotionqueueentry.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMotionQueueEntry = $.CubismMotionQueueEntry;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/motion/cubismmotionqueuemanager.ts\":\n    /*!*****************************************************************!*\\\n      !*** ../../../Framework/src/motion/cubismmotionqueuemanager.ts ***!\n      \\*****************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.InvalidMotionQueueEntryHandleValue = exports.CubismMotionQueueManager = void 0;\n      var cubismmotionqueueentry_1 = __webpack_require__( /*! ./cubismmotionqueueentry */\"../../../Framework/src/motion/cubismmotionqueueentry.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var CubismMotionQueueManager = function () {\n        function CubismMotionQueueManager() {\n          this._userTimeSeconds = 0.0;\n          this._eventCallBack = null;\n          this._eventCustomData = null;\n          this._motions = new csmvector_1.csmVector();\n        }\n        CubismMotionQueueManager.prototype.release = function () {\n          for (var i = 0; i < this._motions.getSize(); ++i) {\n            if (this._motions.at(i)) {\n              this._motions.at(i).release();\n              this._motions.set(i, null);\n            }\n          }\n          this._motions = null;\n        };\n        CubismMotionQueueManager.prototype.startMotion = function (motion, autoDelete, userTimeSeconds) {\n          if (motion == null) {\n            return exports.InvalidMotionQueueEntryHandleValue;\n          }\n          var motionQueueEntry = null;\n          for (var i = 0; i < this._motions.getSize(); ++i) {\n            motionQueueEntry = this._motions.at(i);\n            if (motionQueueEntry == null) {\n              continue;\n            }\n            motionQueueEntry.setFadeOut(motionQueueEntry._motion.getFadeOutTime());\n          }\n          motionQueueEntry = new cubismmotionqueueentry_1.CubismMotionQueueEntry();\n          motionQueueEntry._autoDelete = autoDelete;\n          motionQueueEntry._motion = motion;\n          this._motions.pushBack(motionQueueEntry);\n          return motionQueueEntry._motionQueueEntryHandle;\n        };\n        CubismMotionQueueManager.prototype.isFinished = function () {\n          for (var ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n              ite = this._motions.erase(ite);\n              continue;\n            }\n            var motion = motionQueueEntry._motion;\n            if (motion == null) {\n              motionQueueEntry.release();\n              motionQueueEntry = null;\n              ite = this._motions.erase(ite);\n              continue;\n            }\n            if (!motionQueueEntry.isFinished()) {\n              return false;\n            } else {\n              ite.preIncrement();\n            }\n          }\n          return true;\n        };\n        CubismMotionQueueManager.prototype.isFinishedByHandle = function (motionQueueEntryNumber) {\n          for (var ite = this._motions.begin(); ite.notEqual(this._motions.end()); ite.increment()) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n              continue;\n            }\n            if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber && !motionQueueEntry.isFinished()) {\n              return false;\n            }\n          }\n          return true;\n        };\n        CubismMotionQueueManager.prototype.stopAllMotions = function () {\n          for (var ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n              ite = this._motions.erase(ite);\n              continue;\n            }\n            motionQueueEntry.release();\n            motionQueueEntry = null;\n            ite = this._motions.erase(ite);\n          }\n        };\n        CubismMotionQueueManager.prototype.getCubismMotionQueueEntry = function (motionQueueEntryNumber) {\n          for (var ite = this._motions.begin(); ite.notEqual(this._motions.end()); ite.preIncrement()) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n              continue;\n            }\n            if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber) {\n              return motionQueueEntry;\n            }\n          }\n          return null;\n        };\n        CubismMotionQueueManager.prototype.setEventCallback = function (callback, customData) {\n          if (customData === void 0) {\n            customData = null;\n          }\n          this._eventCallBack = callback;\n          this._eventCustomData = customData;\n        };\n        CubismMotionQueueManager.prototype.doUpdateMotion = function (model, userTimeSeconds) {\n          var updated = false;\n          for (var ite = this._motions.begin(); ite.notEqual(this._motions.end());) {\n            var motionQueueEntry = ite.ptr();\n            if (motionQueueEntry == null) {\n              ite = this._motions.erase(ite);\n              continue;\n            }\n            var motion = motionQueueEntry._motion;\n            if (motion == null) {\n              motionQueueEntry.release();\n              motionQueueEntry = null;\n              ite = this._motions.erase(ite);\n              continue;\n            }\n            motion.updateParameters(model, motionQueueEntry, userTimeSeconds);\n            updated = true;\n            var firedList = motion.getFiredEvent(motionQueueEntry.getLastCheckEventSeconds() - motionQueueEntry.getStartTime(), userTimeSeconds - motionQueueEntry.getStartTime());\n            for (var i = 0; i < firedList.getSize(); ++i) {\n              this._eventCallBack(this, firedList.at(i), this._eventCustomData);\n            }\n            motionQueueEntry.setLastCheckEventSeconds(userTimeSeconds);\n            if (motionQueueEntry.isFinished()) {\n              motionQueueEntry.release();\n              motionQueueEntry = null;\n              ite = this._motions.erase(ite);\n            } else {\n              if (motionQueueEntry.isTriggeredFadeOut()) {\n                motionQueueEntry.startFadeOut(motionQueueEntry.getFadeOutSeconds(), userTimeSeconds);\n              }\n              ite.preIncrement();\n            }\n          }\n          return updated;\n        };\n        return CubismMotionQueueManager;\n      }();\n      exports.CubismMotionQueueManager = CubismMotionQueueManager;\n      exports.InvalidMotionQueueEntryHandleValue = -1;\n      var $ = __importStar(__webpack_require__( /*! ./cubismmotionqueuemanager */\"../../../Framework/src/motion/cubismmotionqueuemanager.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismMotionQueueManager = $.CubismMotionQueueManager;\n        Live2DCubismFramework.InvalidMotionQueueEntryHandleValue = $.InvalidMotionQueueEntryHandleValue;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/physics/cubismphysics.ts\":\n    /*!*******************************************************!*\\\n      !*** ../../../Framework/src/physics/cubismphysics.ts ***!\n      \\*******************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.PhysicsOutput = exports.Options = exports.CubismPhysics = void 0;\n      var cubismmath_1 = __webpack_require__( /*! ../math/cubismmath */\"../../../Framework/src/math/cubismmath.ts\");\n      var cubismvector2_1 = __webpack_require__( /*! ../math/cubismvector2 */\"../../../Framework/src/math/cubismvector2.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismphysicsinternal_1 = __webpack_require__( /*! ./cubismphysicsinternal */\"../../../Framework/src/physics/cubismphysicsinternal.ts\");\n      var cubismphysicsjson_1 = __webpack_require__( /*! ./cubismphysicsjson */\"../../../Framework/src/physics/cubismphysicsjson.ts\");\n      var PhysicsTypeTagX = 'X';\n      var PhysicsTypeTagY = 'Y';\n      var PhysicsTypeTagAngle = 'Angle';\n      var AirResistance = 5.0;\n      var MaximumWeight = 100.0;\n      var MovementThreshold = 0.001;\n      var MaxDeltaTime = 5.0;\n      var CubismPhysics = function () {\n        function CubismPhysics() {\n          this._physicsRig = null;\n          this._options = new Options();\n          this._options.gravity.y = -1.0;\n          this._options.gravity.x = 0.0;\n          this._options.wind.x = 0.0;\n          this._options.wind.y = 0.0;\n          this._currentRigOutputs = new csmvector_1.csmVector();\n          this._previousRigOutputs = new csmvector_1.csmVector();\n          this._currentRemainTime = 0.0;\n          this._parameterCaches = null;\n          this._parameterInputCaches = null;\n        }\n        CubismPhysics.create = function (buffer, size) {\n          var ret = new CubismPhysics();\n          ret.parse(buffer, size);\n          ret._physicsRig.gravity.y = 0;\n          return ret;\n        };\n        CubismPhysics.delete = function (physics) {\n          if (physics != null) {\n            physics.release();\n            physics = null;\n          }\n        };\n        CubismPhysics.prototype.parse = function (physicsJson, size) {\n          this._physicsRig = new cubismphysicsinternal_1.CubismPhysicsRig();\n          var json = new cubismphysicsjson_1.CubismPhysicsJson(physicsJson, size);\n          this._physicsRig.gravity = json.getGravity();\n          this._physicsRig.wind = json.getWind();\n          this._physicsRig.subRigCount = json.getSubRigCount();\n          this._physicsRig.fps = json.getFps();\n          this._physicsRig.settings.updateSize(this._physicsRig.subRigCount, cubismphysicsinternal_1.CubismPhysicsSubRig, true);\n          this._physicsRig.inputs.updateSize(json.getTotalInputCount(), cubismphysicsinternal_1.CubismPhysicsInput, true);\n          this._physicsRig.outputs.updateSize(json.getTotalOutputCount(), cubismphysicsinternal_1.CubismPhysicsOutput, true);\n          this._physicsRig.particles.updateSize(json.getVertexCount(), cubismphysicsinternal_1.CubismPhysicsParticle, true);\n          this._currentRigOutputs.clear();\n          this._previousRigOutputs.clear();\n          var inputIndex = 0,\n            outputIndex = 0,\n            particleIndex = 0;\n          for (var i = 0; i < this._physicsRig.settings.getSize(); ++i) {\n            this._physicsRig.settings.at(i).normalizationPosition.minimum = json.getNormalizationPositionMinimumValue(i);\n            this._physicsRig.settings.at(i).normalizationPosition.maximum = json.getNormalizationPositionMaximumValue(i);\n            this._physicsRig.settings.at(i).normalizationPosition.defalut = json.getNormalizationPositionDefaultValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.minimum = json.getNormalizationAngleMinimumValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.maximum = json.getNormalizationAngleMaximumValue(i);\n            this._physicsRig.settings.at(i).normalizationAngle.defalut = json.getNormalizationAngleDefaultValue(i);\n            this._physicsRig.settings.at(i).inputCount = json.getInputCount(i);\n            this._physicsRig.settings.at(i).baseInputIndex = inputIndex;\n            for (var j = 0; j < this._physicsRig.settings.at(i).inputCount; ++j) {\n              this._physicsRig.inputs.at(inputIndex + j).sourceParameterIndex = -1;\n              this._physicsRig.inputs.at(inputIndex + j).weight = json.getInputWeight(i, j);\n              this._physicsRig.inputs.at(inputIndex + j).reflect = json.getInputReflect(i, j);\n              if (json.getInputType(i, j) == PhysicsTypeTagX) {\n                this._physicsRig.inputs.at(inputIndex + j).type = cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_X;\n                this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue = getInputTranslationXFromNormalizedParameterValue;\n              } else if (json.getInputType(i, j) == PhysicsTypeTagY) {\n                this._physicsRig.inputs.at(inputIndex + j).type = cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Y;\n                this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue = getInputTranslationYFromNormalizedParamterValue;\n              } else if (json.getInputType(i, j) == PhysicsTypeTagAngle) {\n                this._physicsRig.inputs.at(inputIndex + j).type = cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Angle;\n                this._physicsRig.inputs.at(inputIndex + j).getNormalizedParameterValue = getInputAngleFromNormalizedParameterValue;\n              }\n              this._physicsRig.inputs.at(inputIndex + j).source.targetType = cubismphysicsinternal_1.CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n              this._physicsRig.inputs.at(inputIndex + j).source.id = json.getInputSourceId(i, j);\n            }\n            inputIndex += this._physicsRig.settings.at(i).inputCount;\n            this._physicsRig.settings.at(i).outputCount = json.getOutputCount(i);\n            this._physicsRig.settings.at(i).baseOutputIndex = outputIndex;\n            var currentRigOutput = new PhysicsOutput();\n            currentRigOutput.outputs.resize(this._physicsRig.settings.at(i).outputCount);\n            var previousRigOutput = new PhysicsOutput();\n            previousRigOutput.outputs.resize(this._physicsRig.settings.at(i).outputCount);\n            for (var j = 0; j < this._physicsRig.settings.at(i).outputCount; ++j) {\n              currentRigOutput.outputs.set(j, 0.0);\n              previousRigOutput.outputs.set(j, 0.0);\n              this._physicsRig.outputs.at(outputIndex + j).destinationParameterIndex = -1;\n              this._physicsRig.outputs.at(outputIndex + j).vertexIndex = json.getOutputVertexIndex(i, j);\n              this._physicsRig.outputs.at(outputIndex + j).angleScale = json.getOutputAngleScale(i, j);\n              this._physicsRig.outputs.at(outputIndex + j).weight = json.getOutputWeight(i, j);\n              this._physicsRig.outputs.at(outputIndex + j).destination.targetType = cubismphysicsinternal_1.CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n              this._physicsRig.outputs.at(outputIndex + j).destination.id = json.getOutputDestinationId(i, j);\n              if (json.getOutputType(i, j) == PhysicsTypeTagX) {\n                this._physicsRig.outputs.at(outputIndex + j).type = cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_X;\n                this._physicsRig.outputs.at(outputIndex + j).getValue = getOutputTranslationX;\n                this._physicsRig.outputs.at(outputIndex + j).getScale = getOutputScaleTranslationX;\n              } else if (json.getOutputType(i, j) == PhysicsTypeTagY) {\n                this._physicsRig.outputs.at(outputIndex + j).type = cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Y;\n                this._physicsRig.outputs.at(outputIndex + j).getValue = getOutputTranslationY;\n                this._physicsRig.outputs.at(outputIndex + j).getScale = getOutputScaleTranslationY;\n              } else if (json.getOutputType(i, j) == PhysicsTypeTagAngle) {\n                this._physicsRig.outputs.at(outputIndex + j).type = cubismphysicsinternal_1.CubismPhysicsSource.CubismPhysicsSource_Angle;\n                this._physicsRig.outputs.at(outputIndex + j).getValue = getOutputAngle;\n                this._physicsRig.outputs.at(outputIndex + j).getScale = getOutputScaleAngle;\n              }\n              this._physicsRig.outputs.at(outputIndex + j).reflect = json.getOutputReflect(i, j);\n            }\n            this._currentRigOutputs.pushBack(currentRigOutput);\n            this._previousRigOutputs.pushBack(previousRigOutput);\n            outputIndex += this._physicsRig.settings.at(i).outputCount;\n            this._physicsRig.settings.at(i).particleCount = json.getParticleCount(i);\n            this._physicsRig.settings.at(i).baseParticleIndex = particleIndex;\n            for (var j = 0; j < this._physicsRig.settings.at(i).particleCount; ++j) {\n              this._physicsRig.particles.at(particleIndex + j).mobility = json.getParticleMobility(i, j);\n              this._physicsRig.particles.at(particleIndex + j).delay = json.getParticleDelay(i, j);\n              this._physicsRig.particles.at(particleIndex + j).acceleration = json.getParticleAcceleration(i, j);\n              this._physicsRig.particles.at(particleIndex + j).radius = json.getParticleRadius(i, j);\n              this._physicsRig.particles.at(particleIndex + j).position = json.getParticlePosition(i, j);\n            }\n            particleIndex += this._physicsRig.settings.at(i).particleCount;\n          }\n          this.initialize();\n          json.release();\n          json = void 0;\n          json = null;\n        };\n        CubismPhysics.prototype.stabilization = function (model) {\n          var _a, _b, _c, _d;\n          var totalAngle;\n          var weight;\n          var radAngle;\n          var outputValue;\n          var totalTranslation = new cubismvector2_1.CubismVector2();\n          var currentSetting;\n          var currentInputs;\n          var currentOutputs;\n          var currentParticles;\n          var parameterValues;\n          var parameterMaximumValues;\n          var parameterMinimumValues;\n          var parameterDefaultValues;\n          parameterValues = model.getModel().parameters.values;\n          parameterMaximumValues = model.getModel().parameters.maximumValues;\n          parameterMinimumValues = model.getModel().parameters.minimumValues;\n          parameterDefaultValues = model.getModel().parameters.defaultValues;\n          if (((_b = (_a = this._parameterCaches) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) < model.getParameterCount()) {\n            this._parameterCaches = new Float32Array(model.getParameterCount());\n          }\n          if (((_d = (_c = this._parameterInputCaches) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) < model.getParameterCount()) {\n            this._parameterInputCaches = new Float32Array(model.getParameterCount());\n          }\n          for (var j = 0; j < model.getParameterCount(); ++j) {\n            this._parameterCaches[j] = parameterValues[j];\n            this._parameterInputCaches[j] = parameterValues[j];\n          }\n          for (var settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            totalAngle = {\n              angle: 0.0\n            };\n            totalTranslation.x = 0.0;\n            totalTranslation.y = 0.0;\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            currentInputs = this._physicsRig.inputs.get(currentSetting.baseInputIndex);\n            currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n            currentParticles = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n            for (var i = 0; i < currentSetting.inputCount; ++i) {\n              weight = currentInputs[i].weight / MaximumWeight;\n              if (currentInputs[i].sourceParameterIndex == -1) {\n                currentInputs[i].sourceParameterIndex = model.getParameterIndex(currentInputs[i].source.id);\n              }\n              currentInputs[i].getNormalizedParameterValue(totalTranslation, totalAngle, parameterValues[currentInputs[i].sourceParameterIndex], parameterMinimumValues[currentInputs[i].sourceParameterIndex], parameterMaximumValues[currentInputs[i].sourceParameterIndex], parameterDefaultValues[currentInputs[i].sourceParameterIndex], currentSetting.normalizationPosition, currentSetting.normalizationAngle, currentInputs[i].reflect, weight);\n              this._parameterCaches[currentInputs[i].sourceParameterIndex] = parameterValues[currentInputs[i].sourceParameterIndex];\n            }\n            radAngle = cubismmath_1.CubismMath.degreesToRadian(-totalAngle.angle);\n            totalTranslation.x = totalTranslation.x * cubismmath_1.CubismMath.cos(radAngle) - totalTranslation.y * cubismmath_1.CubismMath.sin(radAngle);\n            totalTranslation.y = totalTranslation.x * cubismmath_1.CubismMath.sin(radAngle) + totalTranslation.y * cubismmath_1.CubismMath.cos(radAngle);\n            updateParticlesForStabilization(currentParticles, currentSetting.particleCount, totalTranslation, totalAngle.angle, this._options.wind, MovementThreshold * currentSetting.normalizationPosition.maximum);\n            for (var i = 0; i < currentSetting.outputCount; ++i) {\n              var particleIndex = currentOutputs[i].vertexIndex;\n              if (currentOutputs[i].destinationParameterIndex == -1) {\n                currentOutputs[i].destinationParameterIndex = model.getParameterIndex(currentOutputs[i].destination.id);\n              }\n              if (particleIndex < 1 || particleIndex >= currentSetting.particleCount) {\n                continue;\n              }\n              var translation = new cubismvector2_1.CubismVector2();\n              translation = currentParticles[particleIndex].position.substract(currentParticles[particleIndex - 1].position);\n              outputValue = currentOutputs[i].getValue(translation, currentParticles, particleIndex, currentOutputs[i].reflect, this._options.gravity);\n              this._currentRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n              this._previousRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n              var destinationParameterIndex = currentOutputs[i].destinationParameterIndex;\n              var outParameterCaches = !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype ? JSON.parse(JSON.stringify(parameterValues.subarray(destinationParameterIndex))) : parameterValues.slice(destinationParameterIndex);\n              updateOutputParameterValue(outParameterCaches, parameterMinimumValues[destinationParameterIndex], parameterMaximumValues[destinationParameterIndex], outputValue, currentOutputs[i]);\n              for (var offset = destinationParameterIndex, outParamIndex = 0; offset < this._parameterCaches.length; offset++, outParamIndex++) {\n                parameterValues[offset] = this._parameterCaches[offset] = outParameterCaches[outParamIndex];\n              }\n            }\n          }\n        };\n        CubismPhysics.prototype.evaluate = function (model, deltaTimeSeconds) {\n          var _a, _b, _c, _d;\n          var totalAngle;\n          var weight;\n          var radAngle;\n          var outputValue;\n          var totalTranslation = new cubismvector2_1.CubismVector2();\n          var currentSetting;\n          var currentInputs;\n          var currentOutputs;\n          var currentParticles;\n          if (0.0 >= deltaTimeSeconds) {\n            return;\n          }\n          var parameterValues;\n          var parameterMaximumValues;\n          var parameterMinimumValues;\n          var parameterDefaultValues;\n          var physicsDeltaTime;\n          this._currentRemainTime += deltaTimeSeconds;\n          if (this._currentRemainTime > MaxDeltaTime) {\n            this._currentRemainTime = 0.0;\n          }\n          parameterValues = model.getModel().parameters.values;\n          parameterMaximumValues = model.getModel().parameters.maximumValues;\n          parameterMinimumValues = model.getModel().parameters.minimumValues;\n          parameterDefaultValues = model.getModel().parameters.defaultValues;\n          if (((_b = (_a = this._parameterCaches) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) < model.getParameterCount()) {\n            this._parameterCaches = new Float32Array(model.getParameterCount());\n          }\n          if (((_d = (_c = this._parameterInputCaches) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) < model.getParameterCount()) {\n            this._parameterInputCaches = new Float32Array(model.getParameterCount());\n            for (var j = 0; j < model.getParameterCount(); ++j) {\n              this._parameterInputCaches[j] = parameterValues[j];\n            }\n          }\n          if (this._physicsRig.fps > 0.0) {\n            physicsDeltaTime = 1.0 / this._physicsRig.fps;\n          } else {\n            physicsDeltaTime = deltaTimeSeconds;\n          }\n          while (this._currentRemainTime >= physicsDeltaTime) {\n            for (var settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n              currentSetting = this._physicsRig.settings.at(settingIndex);\n              currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n              for (var i = 0; i < currentSetting.outputCount; ++i) {\n                this._previousRigOutputs.at(settingIndex).outputs.set(i, this._currentRigOutputs.at(settingIndex).outputs.at(i));\n              }\n            }\n            var inputWeight = physicsDeltaTime / this._currentRemainTime;\n            for (var j = 0; j < model.getParameterCount(); ++j) {\n              this._parameterCaches[j] = this._parameterInputCaches[j] * (1.0 - inputWeight) + parameterValues[j] * inputWeight;\n              this._parameterInputCaches[j] = this._parameterCaches[j];\n            }\n            for (var settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n              totalAngle = {\n                angle: 0.0\n              };\n              totalTranslation.x = 0.0;\n              totalTranslation.y = 0.0;\n              currentSetting = this._physicsRig.settings.at(settingIndex);\n              currentInputs = this._physicsRig.inputs.get(currentSetting.baseInputIndex);\n              currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n              currentParticles = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n              for (var i = 0; i < currentSetting.inputCount; ++i) {\n                weight = currentInputs[i].weight / MaximumWeight;\n                if (currentInputs[i].sourceParameterIndex == -1) {\n                  currentInputs[i].sourceParameterIndex = model.getParameterIndex(currentInputs[i].source.id);\n                }\n                currentInputs[i].getNormalizedParameterValue(totalTranslation, totalAngle, this._parameterCaches[currentInputs[i].sourceParameterIndex], parameterMinimumValues[currentInputs[i].sourceParameterIndex], parameterMaximumValues[currentInputs[i].sourceParameterIndex], parameterDefaultValues[currentInputs[i].sourceParameterIndex], currentSetting.normalizationPosition, currentSetting.normalizationAngle, currentInputs[i].reflect, weight);\n              }\n              radAngle = cubismmath_1.CubismMath.degreesToRadian(-totalAngle.angle);\n              totalTranslation.x = totalTranslation.x * cubismmath_1.CubismMath.cos(radAngle) - totalTranslation.y * cubismmath_1.CubismMath.sin(radAngle);\n              totalTranslation.y = totalTranslation.x * cubismmath_1.CubismMath.sin(radAngle) + totalTranslation.y * cubismmath_1.CubismMath.cos(radAngle);\n              updateParticles(currentParticles, currentSetting.particleCount, totalTranslation, totalAngle.angle, this._options.wind, MovementThreshold * currentSetting.normalizationPosition.maximum, physicsDeltaTime, AirResistance);\n              for (var i = 0; i < currentSetting.outputCount; ++i) {\n                var particleIndex = currentOutputs[i].vertexIndex;\n                if (currentOutputs[i].destinationParameterIndex == -1) {\n                  currentOutputs[i].destinationParameterIndex = model.getParameterIndex(currentOutputs[i].destination.id);\n                }\n                if (particleIndex < 1 || particleIndex >= currentSetting.particleCount) {\n                  continue;\n                }\n                var translation = new cubismvector2_1.CubismVector2();\n                translation.x = currentParticles[particleIndex].position.x - currentParticles[particleIndex - 1].position.x;\n                translation.y = currentParticles[particleIndex].position.y - currentParticles[particleIndex - 1].position.y;\n                outputValue = currentOutputs[i].getValue(translation, currentParticles, particleIndex, currentOutputs[i].reflect, this._options.gravity);\n                this._currentRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n                var destinationParameterIndex = currentOutputs[i].destinationParameterIndex;\n                var outParameterCaches = !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype ? JSON.parse(JSON.stringify(this._parameterCaches.subarray(destinationParameterIndex))) : this._parameterCaches.slice(destinationParameterIndex);\n                updateOutputParameterValue(outParameterCaches, parameterMinimumValues[destinationParameterIndex], parameterMaximumValues[destinationParameterIndex], outputValue, currentOutputs[i]);\n                for (var offset = destinationParameterIndex, outParamIndex = 0; offset < this._parameterCaches.length; offset++, outParamIndex++) {\n                  this._parameterCaches[offset] = outParameterCaches[outParamIndex];\n                }\n              }\n            }\n            this._currentRemainTime -= physicsDeltaTime;\n          }\n          var alpha = this._currentRemainTime / physicsDeltaTime;\n          this.interpolate(model, alpha);\n        };\n        CubismPhysics.prototype.interpolate = function (model, weight) {\n          var currentOutputs;\n          var currentSetting;\n          var parameterValues;\n          var parameterMaximumValues;\n          var parameterMinimumValues;\n          parameterValues = model.getModel().parameters.values;\n          parameterMaximumValues = model.getModel().parameters.maximumValues;\n          parameterMinimumValues = model.getModel().parameters.minimumValues;\n          for (var settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            currentOutputs = this._physicsRig.outputs.get(currentSetting.baseOutputIndex);\n            for (var i = 0; i < currentSetting.outputCount; ++i) {\n              if (currentOutputs[i].destinationParameterIndex == -1) {\n                continue;\n              }\n              var destinationParameterIndex = currentOutputs[i].destinationParameterIndex;\n              var outParameterValues = !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype ? JSON.parse(JSON.stringify(parameterValues.subarray(destinationParameterIndex))) : parameterValues.slice(destinationParameterIndex);\n              updateOutputParameterValue(outParameterValues, parameterMinimumValues[destinationParameterIndex], parameterMaximumValues[destinationParameterIndex], this._previousRigOutputs.at(settingIndex).outputs.at(i) * (1 - weight) + this._currentRigOutputs.at(settingIndex).outputs.at(i) * weight, currentOutputs[i]);\n              for (var offset = destinationParameterIndex, outParamIndex = 0; offset < parameterValues.length; offset++, outParamIndex++) {\n                parameterValues[offset] = outParameterValues[outParamIndex];\n              }\n            }\n          }\n        };\n        CubismPhysics.prototype.setOptions = function (options) {\n          this._options = options;\n        };\n        CubismPhysics.prototype.getOption = function () {\n          return this._options;\n        };\n        CubismPhysics.prototype.release = function () {\n          this._physicsRig = void 0;\n          this._physicsRig = null;\n        };\n        CubismPhysics.prototype.initialize = function () {\n          var strand;\n          var currentSetting;\n          var radius;\n          for (var settingIndex = 0; settingIndex < this._physicsRig.subRigCount; ++settingIndex) {\n            currentSetting = this._physicsRig.settings.at(settingIndex);\n            strand = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n            strand[0].initialPosition = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            strand[0].lastPosition = new cubismvector2_1.CubismVector2(strand[0].initialPosition.x, strand[0].initialPosition.y);\n            strand[0].lastGravity = new cubismvector2_1.CubismVector2(0.0, -1.0);\n            strand[0].lastGravity.y *= -1.0;\n            strand[0].velocity = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            strand[0].force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            for (var i = 1; i < currentSetting.particleCount; ++i) {\n              radius = new cubismvector2_1.CubismVector2(0.0, 0.0);\n              radius.y = strand[i].radius;\n              strand[i].initialPosition = new cubismvector2_1.CubismVector2(strand[i - 1].initialPosition.x + radius.x, strand[i - 1].initialPosition.y + radius.y);\n              strand[i].position = new cubismvector2_1.CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n              strand[i].lastPosition = new cubismvector2_1.CubismVector2(strand[i].initialPosition.x, strand[i].initialPosition.y);\n              strand[i].lastGravity = new cubismvector2_1.CubismVector2(0.0, -1.0);\n              strand[i].lastGravity.y *= -1.0;\n              strand[i].velocity = new cubismvector2_1.CubismVector2(0.0, 0.0);\n              strand[i].force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n            }\n          }\n        };\n        return CubismPhysics;\n      }();\n      exports.CubismPhysics = CubismPhysics;\n      var Options = function () {\n        function Options() {\n          this.gravity = new cubismvector2_1.CubismVector2(0, 0);\n          this.wind = new cubismvector2_1.CubismVector2(0, 0);\n        }\n        return Options;\n      }();\n      exports.Options = Options;\n      var PhysicsOutput = function () {\n        function PhysicsOutput() {\n          this.outputs = new csmvector_1.csmVector(0);\n        }\n        return PhysicsOutput;\n      }();\n      exports.PhysicsOutput = PhysicsOutput;\n      function sign(value) {\n        var ret = 0;\n        if (value > 0.0) {\n          ret = 1;\n        } else if (value < 0.0) {\n          ret = -1;\n        }\n        return ret;\n      }\n      function getInputTranslationXFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n        targetTranslation.x += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n      }\n      function getInputTranslationYFromNormalizedParamterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition, normalizationAngle, isInverted, weight) {\n        targetTranslation.y += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationPosition.minimum, normalizationPosition.maximum, normalizationPosition.defalut, isInverted) * weight;\n      }\n      function getInputAngleFromNormalizedParameterValue(targetTranslation, targetAngle, value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizaitionPosition, normalizationAngle, isInverted, weight) {\n        targetAngle.angle += normalizeParameterValue(value, parameterMinimumValue, parameterMaximumValue, parameterDefaultValue, normalizationAngle.minimum, normalizationAngle.maximum, normalizationAngle.defalut, isInverted) * weight;\n      }\n      function getOutputTranslationX(translation, particles, particleIndex, isInverted, parentGravity) {\n        var outputValue = translation.x;\n        if (isInverted) {\n          outputValue *= -1.0;\n        }\n        return outputValue;\n      }\n      function getOutputTranslationY(translation, particles, particleIndex, isInverted, parentGravity) {\n        var outputValue = translation.y;\n        if (isInverted) {\n          outputValue *= -1.0;\n        }\n        return outputValue;\n      }\n      function getOutputAngle(translation, particles, particleIndex, isInverted, parentGravity) {\n        var outputValue;\n        if (particleIndex >= 2) {\n          parentGravity = particles[particleIndex - 1].position.substract(particles[particleIndex - 2].position);\n        } else {\n          parentGravity = parentGravity.multiplyByScaler(-1.0);\n        }\n        outputValue = cubismmath_1.CubismMath.directionToRadian(parentGravity, translation);\n        if (isInverted) {\n          outputValue *= -1.0;\n        }\n        return outputValue;\n      }\n      function getRangeValue(min, max) {\n        var maxValue = cubismmath_1.CubismMath.max(min, max);\n        var minValue = cubismmath_1.CubismMath.min(min, max);\n        return cubismmath_1.CubismMath.abs(maxValue - minValue);\n      }\n      function getDefaultValue(min, max) {\n        var minValue = cubismmath_1.CubismMath.min(min, max);\n        return minValue + getRangeValue(min, max) / 2.0;\n      }\n      function getOutputScaleTranslationX(translationScale, angleScale) {\n        return JSON.parse(JSON.stringify(translationScale.x));\n      }\n      function getOutputScaleTranslationY(translationScale, angleScale) {\n        return JSON.parse(JSON.stringify(translationScale.y));\n      }\n      function getOutputScaleAngle(translationScale, angleScale) {\n        return JSON.parse(JSON.stringify(angleScale));\n      }\n      function updateParticles(strand, strandCount, totalTranslation, totalAngle, windDirection, thresholdValue, deltaTimeSeconds, airResistance) {\n        var totalRadian;\n        var delay;\n        var radian;\n        var currentGravity;\n        var direction = new cubismvector2_1.CubismVector2(0.0, 0.0);\n        var velocity = new cubismvector2_1.CubismVector2(0.0, 0.0);\n        var force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n        var newDirection = new cubismvector2_1.CubismVector2(0.0, 0.0);\n        strand[0].position = new cubismvector2_1.CubismVector2(totalTranslation.x, totalTranslation.y);\n        totalRadian = cubismmath_1.CubismMath.degreesToRadian(totalAngle);\n        currentGravity = cubismmath_1.CubismMath.radianToDirection(totalRadian);\n        currentGravity.normalize();\n        for (var i = 1; i < strandCount; ++i) {\n          strand[i].force = currentGravity.multiplyByScaler(strand[i].acceleration).add(windDirection);\n          strand[i].lastPosition = new cubismvector2_1.CubismVector2(strand[i].position.x, strand[i].position.y);\n          delay = strand[i].delay * deltaTimeSeconds * 30.0;\n          direction = strand[i].position.substract(strand[i - 1].position);\n          radian = cubismmath_1.CubismMath.directionToRadian(strand[i].lastGravity, currentGravity) / airResistance;\n          direction.x = cubismmath_1.CubismMath.cos(radian) * direction.x - direction.y * cubismmath_1.CubismMath.sin(radian);\n          direction.y = cubismmath_1.CubismMath.sin(radian) * direction.x + direction.y * cubismmath_1.CubismMath.cos(radian);\n          strand[i].position = strand[i - 1].position.add(direction);\n          velocity = strand[i].velocity.multiplyByScaler(delay);\n          force = strand[i].force.multiplyByScaler(delay).multiplyByScaler(delay);\n          strand[i].position = strand[i].position.add(velocity).add(force);\n          newDirection = strand[i].position.substract(strand[i - 1].position);\n          newDirection.normalize();\n          strand[i].position = strand[i - 1].position.add(newDirection.multiplyByScaler(strand[i].radius));\n          if (cubismmath_1.CubismMath.abs(strand[i].position.x) < thresholdValue) {\n            strand[i].position.x = 0.0;\n          }\n          if (delay != 0.0) {\n            strand[i].velocity = strand[i].position.substract(strand[i].lastPosition);\n            strand[i].velocity = strand[i].velocity.divisionByScalar(delay);\n            strand[i].velocity = strand[i].velocity.multiplyByScaler(strand[i].mobility);\n          }\n          strand[i].force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n          strand[i].lastGravity = new cubismvector2_1.CubismVector2(currentGravity.x, currentGravity.y);\n        }\n      }\n      function updateParticlesForStabilization(strand, strandCount, totalTranslation, totalAngle, windDirection, thresholdValue) {\n        var totalRadian;\n        var currentGravity;\n        var force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n        strand[0].position = new cubismvector2_1.CubismVector2(totalTranslation.x, totalTranslation.y);\n        totalRadian = cubismmath_1.CubismMath.degreesToRadian(totalAngle);\n        currentGravity = cubismmath_1.CubismMath.radianToDirection(totalRadian);\n        currentGravity.normalize();\n        for (var i = 1; i < strandCount; ++i) {\n          strand[i].force = currentGravity.multiplyByScaler(strand[i].acceleration).add(windDirection);\n          strand[i].lastPosition = new cubismvector2_1.CubismVector2(strand[i].position.x, strand[i].position.y);\n          strand[i].velocity = new cubismvector2_1.CubismVector2(0.0, 0.0);\n          force = strand[i].force;\n          force.normalize();\n          force = force.multiplyByScaler(strand[i].radius);\n          strand[i].position = strand[i - 1].position.add(force);\n          if (cubismmath_1.CubismMath.abs(strand[i].position.x) < thresholdValue) {\n            strand[i].position.x = 0.0;\n          }\n          strand[i].force = new cubismvector2_1.CubismVector2(0.0, 0.0);\n          strand[i].lastGravity = new cubismvector2_1.CubismVector2(currentGravity.x, currentGravity.y);\n        }\n      }\n      function updateOutputParameterValue(parameterValue, parameterValueMinimum, parameterValueMaximum, translation, output) {\n        var outputScale;\n        var value;\n        var weight;\n        outputScale = output.getScale(output.translationScale, output.angleScale);\n        value = translation * outputScale;\n        if (value < parameterValueMinimum) {\n          if (value < output.valueBelowMinimum) {\n            output.valueBelowMinimum = value;\n          }\n          value = parameterValueMinimum;\n        } else if (value > parameterValueMaximum) {\n          if (value > output.valueExceededMaximum) {\n            output.valueExceededMaximum = value;\n          }\n          value = parameterValueMaximum;\n        }\n        weight = output.weight / MaximumWeight;\n        if (weight >= 1.0) {\n          parameterValue[0] = value;\n        } else {\n          value = parameterValue[0] * (1.0 - weight) + value * weight;\n          parameterValue[0] = value;\n        }\n      }\n      function normalizeParameterValue(value, parameterMinimum, parameterMaximum, parameterDefault, normalizedMinimum, normalizedMaximum, normalizedDefault, isInverted) {\n        var result = 0.0;\n        var maxValue = cubismmath_1.CubismMath.max(parameterMaximum, parameterMinimum);\n        if (maxValue < value) {\n          value = maxValue;\n        }\n        var minValue = cubismmath_1.CubismMath.min(parameterMaximum, parameterMinimum);\n        if (minValue > value) {\n          value = minValue;\n        }\n        var minNormValue = cubismmath_1.CubismMath.min(normalizedMinimum, normalizedMaximum);\n        var maxNormValue = cubismmath_1.CubismMath.max(normalizedMinimum, normalizedMaximum);\n        var middleNormValue = normalizedDefault;\n        var middleValue = getDefaultValue(minValue, maxValue);\n        var paramValue = value - middleValue;\n        switch (sign(paramValue)) {\n          case 1:\n            {\n              var nLength = maxNormValue - middleNormValue;\n              var pLength = maxValue - middleValue;\n              if (pLength != 0.0) {\n                result = paramValue * (nLength / pLength);\n                result += middleNormValue;\n              }\n              break;\n            }\n          case -1:\n            {\n              var nLength = minNormValue - middleNormValue;\n              var pLength = minValue - middleValue;\n              if (pLength != 0.0) {\n                result = paramValue * (nLength / pLength);\n                result += middleNormValue;\n              }\n              break;\n            }\n          case 0:\n            {\n              result = middleNormValue;\n              break;\n            }\n          default:\n            {\n              break;\n            }\n        }\n        return isInverted ? result : result * -1.0;\n      }\n      var $ = __importStar(__webpack_require__( /*! ./cubismphysics */\"../../../Framework/src/physics/cubismphysics.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismPhysics = $.CubismPhysics;\n        Live2DCubismFramework.Options = $.Options;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/physics/cubismphysicsinternal.ts\":\n    /*!***************************************************************!*\\\n      !*** ../../../Framework/src/physics/cubismphysicsinternal.ts ***!\n      \\***************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismPhysicsRig = exports.CubismPhysicsOutput = exports.CubismPhysicsInput = exports.CubismPhysicsSubRig = exports.CubismPhysicsParticle = exports.CubismPhysicsNormalization = exports.CubismPhysicsParameter = exports.PhysicsJsonEffectiveForces = exports.CubismPhysicsSource = exports.CubismPhysicsTargetType = void 0;\n      var cubismvector2_1 = __webpack_require__( /*! ../math/cubismvector2 */\"../../../Framework/src/math/cubismvector2.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var CubismPhysicsTargetType;\n      (function (CubismPhysicsTargetType) {\n        CubismPhysicsTargetType[CubismPhysicsTargetType[\"CubismPhysicsTargetType_Parameter\"] = 0] = \"CubismPhysicsTargetType_Parameter\";\n      })(CubismPhysicsTargetType = exports.CubismPhysicsTargetType || (exports.CubismPhysicsTargetType = {}));\n      var CubismPhysicsSource;\n      (function (CubismPhysicsSource) {\n        CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_X\"] = 0] = \"CubismPhysicsSource_X\";\n        CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_Y\"] = 1] = \"CubismPhysicsSource_Y\";\n        CubismPhysicsSource[CubismPhysicsSource[\"CubismPhysicsSource_Angle\"] = 2] = \"CubismPhysicsSource_Angle\";\n      })(CubismPhysicsSource = exports.CubismPhysicsSource || (exports.CubismPhysicsSource = {}));\n      var PhysicsJsonEffectiveForces = function () {\n        function PhysicsJsonEffectiveForces() {\n          this.gravity = new cubismvector2_1.CubismVector2(0, 0);\n          this.wind = new cubismvector2_1.CubismVector2(0, 0);\n        }\n        return PhysicsJsonEffectiveForces;\n      }();\n      exports.PhysicsJsonEffectiveForces = PhysicsJsonEffectiveForces;\n      var CubismPhysicsParameter = function () {\n        function CubismPhysicsParameter() {}\n        return CubismPhysicsParameter;\n      }();\n      exports.CubismPhysicsParameter = CubismPhysicsParameter;\n      var CubismPhysicsNormalization = function () {\n        function CubismPhysicsNormalization() {}\n        return CubismPhysicsNormalization;\n      }();\n      exports.CubismPhysicsNormalization = CubismPhysicsNormalization;\n      var CubismPhysicsParticle = function () {\n        function CubismPhysicsParticle() {\n          this.initialPosition = new cubismvector2_1.CubismVector2(0, 0);\n          this.position = new cubismvector2_1.CubismVector2(0, 0);\n          this.lastPosition = new cubismvector2_1.CubismVector2(0, 0);\n          this.lastGravity = new cubismvector2_1.CubismVector2(0, 0);\n          this.force = new cubismvector2_1.CubismVector2(0, 0);\n          this.velocity = new cubismvector2_1.CubismVector2(0, 0);\n        }\n        return CubismPhysicsParticle;\n      }();\n      exports.CubismPhysicsParticle = CubismPhysicsParticle;\n      var CubismPhysicsSubRig = function () {\n        function CubismPhysicsSubRig() {\n          this.normalizationPosition = new CubismPhysicsNormalization();\n          this.normalizationAngle = new CubismPhysicsNormalization();\n        }\n        return CubismPhysicsSubRig;\n      }();\n      exports.CubismPhysicsSubRig = CubismPhysicsSubRig;\n      var CubismPhysicsInput = function () {\n        function CubismPhysicsInput() {\n          this.source = new CubismPhysicsParameter();\n        }\n        return CubismPhysicsInput;\n      }();\n      exports.CubismPhysicsInput = CubismPhysicsInput;\n      var CubismPhysicsOutput = function () {\n        function CubismPhysicsOutput() {\n          this.destination = new CubismPhysicsParameter();\n          this.translationScale = new cubismvector2_1.CubismVector2(0, 0);\n        }\n        return CubismPhysicsOutput;\n      }();\n      exports.CubismPhysicsOutput = CubismPhysicsOutput;\n      var CubismPhysicsRig = function () {\n        function CubismPhysicsRig() {\n          this.settings = new csmvector_1.csmVector();\n          this.inputs = new csmvector_1.csmVector();\n          this.outputs = new csmvector_1.csmVector();\n          this.particles = new csmvector_1.csmVector();\n          this.gravity = new cubismvector2_1.CubismVector2(0, 0);\n          this.wind = new cubismvector2_1.CubismVector2(0, 0);\n          this.fps = 0.0;\n        }\n        return CubismPhysicsRig;\n      }();\n      exports.CubismPhysicsRig = CubismPhysicsRig;\n      var $ = __importStar(__webpack_require__( /*! ./cubismphysicsinternal */\"../../../Framework/src/physics/cubismphysicsinternal.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismPhysicsInput = $.CubismPhysicsInput;\n        Live2DCubismFramework.CubismPhysicsNormalization = $.CubismPhysicsNormalization;\n        Live2DCubismFramework.CubismPhysicsOutput = $.CubismPhysicsOutput;\n        Live2DCubismFramework.CubismPhysicsParameter = $.CubismPhysicsParameter;\n        Live2DCubismFramework.CubismPhysicsParticle = $.CubismPhysicsParticle;\n        Live2DCubismFramework.CubismPhysicsRig = $.CubismPhysicsRig;\n        Live2DCubismFramework.CubismPhysicsSource = $.CubismPhysicsSource;\n        Live2DCubismFramework.CubismPhysicsSubRig = $.CubismPhysicsSubRig;\n        Live2DCubismFramework.CubismPhysicsTargetType = $.CubismPhysicsTargetType;\n        Live2DCubismFramework.PhysicsJsonEffectiveForces = $.PhysicsJsonEffectiveForces;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/physics/cubismphysicsjson.ts\":\n    /*!***********************************************************!*\\\n      !*** ../../../Framework/src/physics/cubismphysicsjson.ts ***!\n      \\***********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismPhysicsJson = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var cubismvector2_1 = __webpack_require__( /*! ../math/cubismvector2 */\"../../../Framework/src/math/cubismvector2.ts\");\n      var cubismjson_1 = __webpack_require__( /*! ../utils/cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      var Position = 'Position';\n      var X = 'X';\n      var Y = 'Y';\n      var Angle = 'Angle';\n      var Type = 'Type';\n      var Id = 'Id';\n      var Meta = 'Meta';\n      var EffectiveForces = 'EffectiveForces';\n      var TotalInputCount = 'TotalInputCount';\n      var TotalOutputCount = 'TotalOutputCount';\n      var PhysicsSettingCount = 'PhysicsSettingCount';\n      var Gravity = 'Gravity';\n      var Wind = 'Wind';\n      var VertexCount = 'VertexCount';\n      var Fps = 'Fps';\n      var PhysicsSettings = 'PhysicsSettings';\n      var Normalization = 'Normalization';\n      var Minimum = 'Minimum';\n      var Maximum = 'Maximum';\n      var Default = 'Default';\n      var Reflect = 'Reflect';\n      var Weight = 'Weight';\n      var Input = 'Input';\n      var Source = 'Source';\n      var Output = 'Output';\n      var Scale = 'Scale';\n      var VertexIndex = 'VertexIndex';\n      var Destination = 'Destination';\n      var Vertices = 'Vertices';\n      var Mobility = 'Mobility';\n      var Delay = 'Delay';\n      var Radius = 'Radius';\n      var Acceleration = 'Acceleration';\n      var CubismPhysicsJson = function () {\n        function CubismPhysicsJson(buffer, size) {\n          this._json = cubismjson_1.CubismJson.create(buffer, size);\n        }\n        CubismPhysicsJson.prototype.release = function () {\n          cubismjson_1.CubismJson.delete(this._json);\n        };\n        CubismPhysicsJson.prototype.getGravity = function () {\n          var ret = new cubismvector2_1.CubismVector2(0, 0);\n          ret.x = this._json.getRoot().getValueByString(Meta).getValueByString(EffectiveForces).getValueByString(Gravity).getValueByString(X).toFloat();\n          ret.y = this._json.getRoot().getValueByString(Meta).getValueByString(EffectiveForces).getValueByString(Gravity).getValueByString(Y).toFloat();\n          return ret;\n        };\n        CubismPhysicsJson.prototype.getWind = function () {\n          var ret = new cubismvector2_1.CubismVector2(0, 0);\n          ret.x = this._json.getRoot().getValueByString(Meta).getValueByString(EffectiveForces).getValueByString(Wind).getValueByString(X).toFloat();\n          ret.y = this._json.getRoot().getValueByString(Meta).getValueByString(EffectiveForces).getValueByString(Wind).getValueByString(Y).toFloat();\n          return ret;\n        };\n        CubismPhysicsJson.prototype.getFps = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(Fps).toFloat(0.0);\n        };\n        CubismPhysicsJson.prototype.getSubRigCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(PhysicsSettingCount).toInt();\n        };\n        CubismPhysicsJson.prototype.getTotalInputCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(TotalInputCount).toInt();\n        };\n        CubismPhysicsJson.prototype.getTotalOutputCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(TotalOutputCount).toInt();\n        };\n        CubismPhysicsJson.prototype.getVertexCount = function () {\n          return this._json.getRoot().getValueByString(Meta).getValueByString(VertexCount).toInt();\n        };\n        CubismPhysicsJson.prototype.getNormalizationPositionMinimumValue = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Normalization).getValueByString(Position).getValueByString(Minimum).toFloat();\n        };\n        CubismPhysicsJson.prototype.getNormalizationPositionMaximumValue = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Normalization).getValueByString(Position).getValueByString(Maximum).toFloat();\n        };\n        CubismPhysicsJson.prototype.getNormalizationPositionDefaultValue = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Normalization).getValueByString(Position).getValueByString(Default).toFloat();\n        };\n        CubismPhysicsJson.prototype.getNormalizationAngleMinimumValue = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Normalization).getValueByString(Angle).getValueByString(Minimum).toFloat();\n        };\n        CubismPhysicsJson.prototype.getNormalizationAngleMaximumValue = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Normalization).getValueByString(Angle).getValueByString(Maximum).toFloat();\n        };\n        CubismPhysicsJson.prototype.getNormalizationAngleDefaultValue = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Normalization).getValueByString(Angle).getValueByString(Default).toFloat();\n        };\n        CubismPhysicsJson.prototype.getInputCount = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Input).getVector().getSize();\n        };\n        CubismPhysicsJson.prototype.getInputWeight = function (physicsSettingIndex, inputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Input).getValueByIndex(inputIndex).getValueByString(Weight).toFloat();\n        };\n        CubismPhysicsJson.prototype.getInputReflect = function (physicsSettingIndex, inputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Input).getValueByIndex(inputIndex).getValueByString(Reflect).toBoolean();\n        };\n        CubismPhysicsJson.prototype.getInputType = function (physicsSettingIndex, inputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Input).getValueByIndex(inputIndex).getValueByString(Type).getRawString();\n        };\n        CubismPhysicsJson.prototype.getInputSourceId = function (physicsSettingIndex, inputIndex) {\n          return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Input).getValueByIndex(inputIndex).getValueByString(Source).getValueByString(Id).getRawString());\n        };\n        CubismPhysicsJson.prototype.getOutputCount = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Output).getVector().getSize();\n        };\n        CubismPhysicsJson.prototype.getOutputVertexIndex = function (physicsSettingIndex, outputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Output).getValueByIndex(outputIndex).getValueByString(VertexIndex).toInt();\n        };\n        CubismPhysicsJson.prototype.getOutputAngleScale = function (physicsSettingIndex, outputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Output).getValueByIndex(outputIndex).getValueByString(Scale).toFloat();\n        };\n        CubismPhysicsJson.prototype.getOutputWeight = function (physicsSettingIndex, outputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Output).getValueByIndex(outputIndex).getValueByString(Weight).toFloat();\n        };\n        CubismPhysicsJson.prototype.getOutputDestinationId = function (physicsSettingIndex, outputIndex) {\n          return live2dcubismframework_1.CubismFramework.getIdManager().getId(this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Output).getValueByIndex(outputIndex).getValueByString(Destination).getValueByString(Id).getRawString());\n        };\n        CubismPhysicsJson.prototype.getOutputType = function (physicsSettingIndex, outputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Output).getValueByIndex(outputIndex).getValueByString(Type).getRawString();\n        };\n        CubismPhysicsJson.prototype.getOutputReflect = function (physicsSettingIndex, outputIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Output).getValueByIndex(outputIndex).getValueByString(Reflect).toBoolean();\n        };\n        CubismPhysicsJson.prototype.getParticleCount = function (physicsSettingIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Vertices).getVector().getSize();\n        };\n        CubismPhysicsJson.prototype.getParticleMobility = function (physicsSettingIndex, vertexIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Vertices).getValueByIndex(vertexIndex).getValueByString(Mobility).toFloat();\n        };\n        CubismPhysicsJson.prototype.getParticleDelay = function (physicsSettingIndex, vertexIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Vertices).getValueByIndex(vertexIndex).getValueByString(Delay).toFloat();\n        };\n        CubismPhysicsJson.prototype.getParticleAcceleration = function (physicsSettingIndex, vertexIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Vertices).getValueByIndex(vertexIndex).getValueByString(Acceleration).toFloat();\n        };\n        CubismPhysicsJson.prototype.getParticleRadius = function (physicsSettingIndex, vertexIndex) {\n          return this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Vertices).getValueByIndex(vertexIndex).getValueByString(Radius).toFloat();\n        };\n        CubismPhysicsJson.prototype.getParticlePosition = function (physicsSettingIndex, vertexIndex) {\n          var ret = new cubismvector2_1.CubismVector2(0, 0);\n          ret.x = this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Vertices).getValueByIndex(vertexIndex).getValueByString(Position).getValueByString(X).toFloat();\n          ret.y = this._json.getRoot().getValueByString(PhysicsSettings).getValueByIndex(physicsSettingIndex).getValueByString(Vertices).getValueByIndex(vertexIndex).getValueByString(Position).getValueByString(Y).toFloat();\n          return ret;\n        };\n        return CubismPhysicsJson;\n      }();\n      exports.CubismPhysicsJson = CubismPhysicsJson;\n      var $ = __importStar(__webpack_require__( /*! ./cubismphysicsjson */\"../../../Framework/src/physics/cubismphysicsjson.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismPhysicsJson = $.CubismPhysicsJson;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/rendering/cubismrenderer.ts\":\n    /*!**********************************************************!*\\\n      !*** ../../../Framework/src/rendering/cubismrenderer.ts ***!\n      \\**********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismTextureColor = exports.CubismBlendMode = exports.CubismRenderer = void 0;\n      var cubismmatrix44_1 = __webpack_require__( /*! ../math/cubismmatrix44 */\"../../../Framework/src/math/cubismmatrix44.ts\");\n      var CubismRenderer = function () {\n        function CubismRenderer() {\n          this._isCulling = false;\n          this._isPremultipliedAlpha = false;\n          this._anisotropy = 0.0;\n          this._model = null;\n          this._modelColor = new CubismTextureColor();\n          this._useHighPrecisionMask = false;\n          this._mvpMatrix4x4 = new cubismmatrix44_1.CubismMatrix44();\n          this._mvpMatrix4x4.loadIdentity();\n        }\n        CubismRenderer.create = function () {\n          return null;\n        };\n        CubismRenderer.delete = function (renderer) {\n          renderer = null;\n        };\n        CubismRenderer.prototype.initialize = function (model) {\n          this._model = model;\n        };\n        CubismRenderer.prototype.drawModel = function () {\n          if (this.getModel() == null) return;\n          this.saveProfile();\n          this.doDrawModel();\n          this.restoreProfile();\n        };\n        CubismRenderer.prototype.setMvpMatrix = function (matrix44) {\n          this._mvpMatrix4x4.setMatrix(matrix44.getArray());\n        };\n        CubismRenderer.prototype.getMvpMatrix = function () {\n          return this._mvpMatrix4x4;\n        };\n        CubismRenderer.prototype.setModelColor = function (red, green, blue, alpha) {\n          if (red < 0.0) {\n            red = 0.0;\n          } else if (red > 1.0) {\n            red = 1.0;\n          }\n          if (green < 0.0) {\n            green = 0.0;\n          } else if (green > 1.0) {\n            green = 1.0;\n          }\n          if (blue < 0.0) {\n            blue = 0.0;\n          } else if (blue > 1.0) {\n            blue = 1.0;\n          }\n          if (alpha < 0.0) {\n            alpha = 0.0;\n          } else if (alpha > 1.0) {\n            alpha = 1.0;\n          }\n          this._modelColor.R = red;\n          this._modelColor.G = green;\n          this._modelColor.B = blue;\n          this._modelColor.A = alpha;\n        };\n        CubismRenderer.prototype.getModelColor = function () {\n          return JSON.parse(JSON.stringify(this._modelColor));\n        };\n        CubismRenderer.prototype.setIsPremultipliedAlpha = function (enable) {\n          this._isPremultipliedAlpha = enable;\n        };\n        CubismRenderer.prototype.isPremultipliedAlpha = function () {\n          return this._isPremultipliedAlpha;\n        };\n        CubismRenderer.prototype.setIsCulling = function (culling) {\n          this._isCulling = culling;\n        };\n        CubismRenderer.prototype.isCulling = function () {\n          return this._isCulling;\n        };\n        CubismRenderer.prototype.setAnisotropy = function (n) {\n          this._anisotropy = n;\n        };\n        CubismRenderer.prototype.getAnisotropy = function () {\n          return this._anisotropy;\n        };\n        CubismRenderer.prototype.getModel = function () {\n          return this._model;\n        };\n        CubismRenderer.prototype.useHighPrecisionMask = function (high) {\n          this._useHighPrecisionMask = high;\n        };\n        CubismRenderer.prototype.isUsingHighPrecisionMask = function () {\n          return this._useHighPrecisionMask;\n        };\n        return CubismRenderer;\n      }();\n      exports.CubismRenderer = CubismRenderer;\n      var CubismBlendMode;\n      (function (CubismBlendMode) {\n        CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Normal\"] = 0] = \"CubismBlendMode_Normal\";\n        CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Additive\"] = 1] = \"CubismBlendMode_Additive\";\n        CubismBlendMode[CubismBlendMode[\"CubismBlendMode_Multiplicative\"] = 2] = \"CubismBlendMode_Multiplicative\";\n      })(CubismBlendMode = exports.CubismBlendMode || (exports.CubismBlendMode = {}));\n      var CubismTextureColor = function () {\n        function CubismTextureColor(r, g, b, a) {\n          if (r === void 0) {\n            r = 1.0;\n          }\n          if (g === void 0) {\n            g = 1.0;\n          }\n          if (b === void 0) {\n            b = 1.0;\n          }\n          if (a === void 0) {\n            a = 1.0;\n          }\n          this.R = r;\n          this.G = g;\n          this.B = b;\n          this.A = a;\n        }\n        return CubismTextureColor;\n      }();\n      exports.CubismTextureColor = CubismTextureColor;\n      var $ = __importStar(__webpack_require__( /*! ./cubismrenderer */\"../../../Framework/src/rendering/cubismrenderer.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismBlendMode = $.CubismBlendMode;\n        Live2DCubismFramework.CubismRenderer = $.CubismRenderer;\n        Live2DCubismFramework.CubismTextureColor = $.CubismTextureColor;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/rendering/cubismrenderer_webgl.ts\":\n    /*!****************************************************************!*\\\n      !*** ../../../Framework/src/rendering/cubismrenderer_webgl.ts ***!\n      \\****************************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismRenderer_WebGL = exports.fragmentShaderSrcMaskInvertedPremultipliedAlpha = exports.fragmentShaderSrcMaskPremultipliedAlpha = exports.fragmentShaderSrcPremultipliedAlpha = exports.vertexShaderSrcMasked = exports.vertexShaderSrc = exports.fragmentShaderSrcsetupMask = exports.vertexShaderSrcSetupMask = exports.ShaderNames = exports.CubismShaderSet = exports.CubismShader_WebGL = exports.CubismRendererProfile_WebGL = exports.CubismClippingContext = exports.CubismRenderTextureResource = exports.CubismClippingManager_WebGL = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var cubismmatrix44_1 = __webpack_require__( /*! ../math/cubismmatrix44 */\"../../../Framework/src/math/cubismmatrix44.ts\");\n      var csmmap_1 = __webpack_require__( /*! ../type/csmmap */\"../../../Framework/src/type/csmmap.ts\");\n      var csmrectf_1 = __webpack_require__( /*! ../type/csmrectf */\"../../../Framework/src/type/csmrectf.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! ../utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var cubismrenderer_1 = __webpack_require__( /*! ./cubismrenderer */\"../../../Framework/src/rendering/cubismrenderer.ts\");\n      var ColorChannelCount = 4;\n      var ClippingMaskMaxCountOnDefault = 36;\n      var ClippingMaskMaxCountOnMultiRenderTexture = 32;\n      var ShaderCount = 10;\n      var s_instance;\n      var s_viewport;\n      var s_fbo;\n      var CubismClippingManager_WebGL = function () {\n        function CubismClippingManager_WebGL() {\n          this._currentMaskRenderTexture = null;\n          this._maskColorBuffers = null;\n          this._currentFrameNo = 0;\n          this._renderTextureCount = 0;\n          this._clippingMaskBufferSize = 256;\n          this._clippingContextListForMask = new csmvector_1.csmVector();\n          this._clippingContextListForDraw = new csmvector_1.csmVector();\n          this._channelColors = new csmvector_1.csmVector();\n          this._tmpBoundsOnModel = new csmrectf_1.csmRect();\n          this._tmpMatrix = new cubismmatrix44_1.CubismMatrix44();\n          this._tmpMatrixForMask = new cubismmatrix44_1.CubismMatrix44();\n          this._tmpMatrixForDraw = new cubismmatrix44_1.CubismMatrix44();\n          this._maskTexture = null;\n          var tmp = new cubismrenderer_1.CubismTextureColor();\n          tmp.R = 1.0;\n          tmp.G = 0.0;\n          tmp.B = 0.0;\n          tmp.A = 0.0;\n          this._channelColors.pushBack(tmp);\n          tmp = new cubismrenderer_1.CubismTextureColor();\n          tmp.R = 0.0;\n          tmp.G = 1.0;\n          tmp.B = 0.0;\n          tmp.A = 0.0;\n          this._channelColors.pushBack(tmp);\n          tmp = new cubismrenderer_1.CubismTextureColor();\n          tmp.R = 0.0;\n          tmp.G = 0.0;\n          tmp.B = 1.0;\n          tmp.A = 0.0;\n          this._channelColors.pushBack(tmp);\n          tmp = new cubismrenderer_1.CubismTextureColor();\n          tmp.R = 0.0;\n          tmp.G = 0.0;\n          tmp.B = 0.0;\n          tmp.A = 1.0;\n          this._channelColors.pushBack(tmp);\n        }\n        CubismClippingManager_WebGL.prototype.getChannelFlagAsColor = function (channelNo) {\n          return this._channelColors.at(channelNo);\n        };\n        CubismClippingManager_WebGL.prototype.getMaskRenderTexture = function () {\n          if (this._maskTexture && this._maskTexture.textures != null) {\n            this._maskTexture.frameNo = this._currentFrameNo;\n          } else {\n            if (this._maskRenderTextures != null) {\n              this._maskRenderTextures.clear();\n            }\n            this._maskRenderTextures = new csmvector_1.csmVector();\n            if (this._maskColorBuffers != null) {\n              this._maskColorBuffers.clear();\n            }\n            this._maskColorBuffers = new csmvector_1.csmVector();\n            var size = this._clippingMaskBufferSize;\n            for (var index = 0; index < this._renderTextureCount; index++) {\n              this._maskColorBuffers.pushBack(this.gl.createTexture());\n              this.gl.bindTexture(this.gl.TEXTURE_2D, this._maskColorBuffers.at(index));\n              this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, size, size, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\n              this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n              this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n              this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\n              this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\n              this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n              this._maskRenderTextures.pushBack(this.gl.createFramebuffer());\n              this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTextures.at(index));\n              this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this._maskColorBuffers.at(index), 0);\n            }\n            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n            this._maskTexture = new CubismRenderTextureResource(this._currentFrameNo, this._maskRenderTextures);\n          }\n          return this._maskTexture.textures;\n        };\n        CubismClippingManager_WebGL.prototype.setGL = function (gl) {\n          this.gl = gl;\n        };\n        CubismClippingManager_WebGL.prototype.calcClippedDrawTotalBounds = function (model, clippingContext) {\n          var clippedDrawTotalMinX = Number.MAX_VALUE;\n          var clippedDrawTotalMinY = Number.MAX_VALUE;\n          var clippedDrawTotalMaxX = Number.MIN_VALUE;\n          var clippedDrawTotalMaxY = Number.MIN_VALUE;\n          var clippedDrawCount = clippingContext._clippedDrawableIndexList.length;\n          for (var clippedDrawableIndex = 0; clippedDrawableIndex < clippedDrawCount; clippedDrawableIndex++) {\n            var drawableIndex = clippingContext._clippedDrawableIndexList[clippedDrawableIndex];\n            var drawableVertexCount = model.getDrawableVertexCount(drawableIndex);\n            var drawableVertexes = model.getDrawableVertices(drawableIndex);\n            var minX = Number.MAX_VALUE;\n            var minY = Number.MAX_VALUE;\n            var maxX = -Number.MAX_VALUE;\n            var maxY = -Number.MAX_VALUE;\n            var loop = drawableVertexCount * live2dcubismframework_1.Constant.vertexStep;\n            for (var pi = live2dcubismframework_1.Constant.vertexOffset; pi < loop; pi += live2dcubismframework_1.Constant.vertexStep) {\n              var x = drawableVertexes[pi];\n              var y = drawableVertexes[pi + 1];\n              if (x < minX) {\n                minX = x;\n              }\n              if (x > maxX) {\n                maxX = x;\n              }\n              if (y < minY) {\n                minY = y;\n              }\n              if (y > maxY) {\n                maxY = y;\n              }\n            }\n            if (minX == Number.MAX_VALUE) {\n              continue;\n            }\n            if (minX < clippedDrawTotalMinX) {\n              clippedDrawTotalMinX = minX;\n            }\n            if (minY < clippedDrawTotalMinY) {\n              clippedDrawTotalMinY = minY;\n            }\n            if (maxX > clippedDrawTotalMaxX) {\n              clippedDrawTotalMaxX = maxX;\n            }\n            if (maxY > clippedDrawTotalMaxY) {\n              clippedDrawTotalMaxY = maxY;\n            }\n            if (clippedDrawTotalMinX == Number.MAX_VALUE) {\n              clippingContext._allClippedDrawRect.x = 0.0;\n              clippingContext._allClippedDrawRect.y = 0.0;\n              clippingContext._allClippedDrawRect.width = 0.0;\n              clippingContext._allClippedDrawRect.height = 0.0;\n              clippingContext._isUsing = false;\n            } else {\n              clippingContext._isUsing = true;\n              var w = clippedDrawTotalMaxX - clippedDrawTotalMinX;\n              var h = clippedDrawTotalMaxY - clippedDrawTotalMinY;\n              clippingContext._allClippedDrawRect.x = clippedDrawTotalMinX;\n              clippingContext._allClippedDrawRect.y = clippedDrawTotalMinY;\n              clippingContext._allClippedDrawRect.width = w;\n              clippingContext._allClippedDrawRect.height = h;\n            }\n          }\n        };\n        CubismClippingManager_WebGL.prototype.release = function () {\n          for (var i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n            if (this._clippingContextListForMask.at(i)) {\n              this._clippingContextListForMask.at(i).release();\n              this._clippingContextListForMask.set(i, void 0);\n            }\n            this._clippingContextListForMask.set(i, null);\n          }\n          this._clippingContextListForMask = null;\n          for (var i = 0; i < this._clippingContextListForDraw.getSize(); i++) {\n            this._clippingContextListForDraw.set(i, null);\n          }\n          this._clippingContextListForDraw = null;\n          if (this._maskTexture) {\n            for (var i = 0; i < this._maskTexture.textures.getSize(); i++) {\n              this.gl.deleteFramebuffer(this._maskTexture.textures.at(i));\n            }\n            this._maskTexture.textures.clear();\n            this._maskTexture.textures = null;\n            this._maskTexture = null;\n          }\n          for (var i = 0; i < this._channelColors.getSize(); i++) {\n            this._channelColors.set(i, null);\n          }\n          this._channelColors = null;\n          if (this._maskColorBuffers != null) {\n            for (var index = 0; index < this._maskColorBuffers.getSize(); index++) {\n              this.gl.deleteTexture(this._maskColorBuffers.at(index));\n            }\n            this._maskColorBuffers.clear();\n          }\n          this._maskColorBuffers = null;\n          if (this._maskRenderTextures != null) {\n            this._maskRenderTextures.clear();\n          }\n          this._maskRenderTextures = null;\n          if (this._clearedFrameBufferflags != null) {\n            this._clearedFrameBufferflags.clear();\n          }\n          this._clearedFrameBufferflags = null;\n        };\n        CubismClippingManager_WebGL.prototype.initialize = function (model, drawableCount, drawableMasks, drawableMaskCounts, renderTextureCount) {\n          if (renderTextureCount % 1 != 0) {\n            (0, cubismdebug_1.CubismLogWarning)('The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer.');\n            renderTextureCount = ~~renderTextureCount;\n          }\n          if (renderTextureCount < 1) {\n            (0, cubismdebug_1.CubismLogWarning)('The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1.');\n          }\n          this._renderTextureCount = renderTextureCount < 1 ? 1 : renderTextureCount;\n          this._clearedFrameBufferflags = new csmvector_1.csmVector(this._renderTextureCount);\n          for (var i = 0; i < drawableCount; i++) {\n            if (drawableMaskCounts[i] <= 0) {\n              this._clippingContextListForDraw.pushBack(null);\n              continue;\n            }\n            var clippingContext = this.findSameClip(drawableMasks[i], drawableMaskCounts[i]);\n            if (clippingContext == null) {\n              clippingContext = new CubismClippingContext(this, drawableMasks[i], drawableMaskCounts[i]);\n              this._clippingContextListForMask.pushBack(clippingContext);\n            }\n            clippingContext.addClippedDrawable(i);\n            this._clippingContextListForDraw.pushBack(clippingContext);\n          }\n        };\n        CubismClippingManager_WebGL.prototype.setupClippingContext = function (model, renderer) {\n          this._currentFrameNo++;\n          var usingClipCount = 0;\n          for (var clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n            var cc = this._clippingContextListForMask.at(clipIndex);\n            this.calcClippedDrawTotalBounds(model, cc);\n            if (cc._isUsing) {\n              usingClipCount++;\n            }\n          }\n          if (usingClipCount > 0) {\n            this.setupLayoutBounds(renderer.isUsingHighPrecisionMask() ? 0 : usingClipCount);\n            if (!renderer.isUsingHighPrecisionMask()) {\n              this.gl.viewport(0, 0, this._clippingMaskBufferSize, this._clippingMaskBufferSize);\n              this._currentMaskRenderTexture = this.getMaskRenderTexture().at(0);\n              renderer.preDraw();\n              this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._currentMaskRenderTexture);\n            }\n            if (this._clearedFrameBufferflags.getSize() != this._renderTextureCount) {\n              this._clearedFrameBufferflags.clear();\n              this._clearedFrameBufferflags = new csmvector_1.csmVector(this._renderTextureCount);\n            }\n            for (var index = 0; index < this._clearedFrameBufferflags.getSize(); index++) {\n              this._clearedFrameBufferflags.set(index, false);\n            }\n            for (var clipIndex = 0; clipIndex < this._clippingContextListForMask.getSize(); clipIndex++) {\n              var clipContext = this._clippingContextListForMask.at(clipIndex);\n              var allClipedDrawRect = clipContext._allClippedDrawRect;\n              var layoutBoundsOnTex01 = clipContext._layoutBounds;\n              var MARGIN = 0.05;\n              var scaleX = 0;\n              var scaleY = 0;\n              var clipContextRenderTexture = this.getMaskRenderTexture().at(clipContext._bufferIndex);\n              if (this._currentMaskRenderTexture != clipContextRenderTexture && !renderer.isUsingHighPrecisionMask()) {\n                this._currentMaskRenderTexture = clipContextRenderTexture;\n                renderer.preDraw();\n                this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._currentMaskRenderTexture);\n              }\n              if (renderer.isUsingHighPrecisionMask()) {\n                var ppu = model.getPixelsPerUnit();\n                var maskPixelSize = clipContext.getClippingManager()._clippingMaskBufferSize;\n                var physicalMaskWidth = layoutBoundsOnTex01.width * maskPixelSize;\n                var physicalMaskHeight = layoutBoundsOnTex01.height * maskPixelSize;\n                this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n                if (this._tmpBoundsOnModel.width * ppu > physicalMaskWidth) {\n                  this._tmpBoundsOnModel.expand(allClipedDrawRect.width * MARGIN, 0.0);\n                  scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n                } else {\n                  scaleX = ppu / physicalMaskWidth;\n                }\n                if (this._tmpBoundsOnModel.height * ppu > physicalMaskHeight) {\n                  this._tmpBoundsOnModel.expand(0.0, allClipedDrawRect.height * MARGIN);\n                  scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n                } else {\n                  scaleY = ppu / physicalMaskHeight;\n                }\n              } else {\n                this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n                this._tmpBoundsOnModel.expand(allClipedDrawRect.width * MARGIN, allClipedDrawRect.height * MARGIN);\n                scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n                scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n              }\n              {\n                this._tmpMatrix.loadIdentity();\n                {\n                  this._tmpMatrix.translateRelative(-1.0, -1.0);\n                  this._tmpMatrix.scaleRelative(2.0, 2.0);\n                }\n                {\n                  this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n                  this._tmpMatrix.scaleRelative(scaleX, scaleY);\n                  this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n                }\n                this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\n              }\n              {\n                this._tmpMatrix.loadIdentity();\n                {\n                  this._tmpMatrix.translateRelative(layoutBoundsOnTex01.x, layoutBoundsOnTex01.y);\n                  this._tmpMatrix.scaleRelative(scaleX, scaleY);\n                  this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y);\n                }\n                this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\n              }\n              clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\n              clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\n              if (!renderer.isUsingHighPrecisionMask()) {\n                var clipDrawCount = clipContext._clippingIdCount;\n                for (var i = 0; i < clipDrawCount; i++) {\n                  var clipDrawIndex = clipContext._clippingIdList[i];\n                  if (!model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)) {\n                    continue;\n                  }\n                  renderer.setIsCulling(model.getDrawableCulling(clipDrawIndex) != false);\n                  if (!this._clearedFrameBufferflags.at(clipContext._bufferIndex)) {\n                    this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\n                    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n                    this._clearedFrameBufferflags.set(clipContext._bufferIndex, true);\n                  }\n                  renderer.setClippingContextBufferForMask(clipContext);\n                  renderer.drawMesh(model.getDrawableTextureIndex(clipDrawIndex), model.getDrawableVertexIndexCount(clipDrawIndex), model.getDrawableVertexCount(clipDrawIndex), model.getDrawableVertexIndices(clipDrawIndex), model.getDrawableVertices(clipDrawIndex), model.getDrawableVertexUvs(clipDrawIndex), model.getMultiplyColor(clipDrawIndex), model.getScreenColor(clipDrawIndex), model.getDrawableOpacity(clipDrawIndex), cubismrenderer_1.CubismBlendMode.CubismBlendMode_Normal, false);\n                }\n              }\n            }\n            if (!renderer.isUsingHighPrecisionMask()) {\n              this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n              renderer.setClippingContextBufferForMask(null);\n              this.gl.viewport(s_viewport[0], s_viewport[1], s_viewport[2], s_viewport[3]);\n            }\n          }\n        };\n        CubismClippingManager_WebGL.prototype.findSameClip = function (drawableMasks, drawableMaskCounts) {\n          for (var i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n            var clippingContext = this._clippingContextListForMask.at(i);\n            var count = clippingContext._clippingIdCount;\n            if (count != drawableMaskCounts) {\n              continue;\n            }\n            var sameCount = 0;\n            for (var j = 0; j < count; j++) {\n              var clipId = clippingContext._clippingIdList[j];\n              for (var k = 0; k < count; k++) {\n                if (drawableMasks[k] == clipId) {\n                  sameCount++;\n                  break;\n                }\n              }\n            }\n            if (sameCount == count) {\n              return clippingContext;\n            }\n          }\n          return null;\n        };\n        CubismClippingManager_WebGL.prototype.setupLayoutBounds = function (usingClipCount) {\n          var useClippingMaskMaxCount = this._renderTextureCount <= 1 ? ClippingMaskMaxCountOnDefault : ClippingMaskMaxCountOnMultiRenderTexture * this._renderTextureCount;\n          if (usingClipCount <= 0 || usingClipCount > useClippingMaskMaxCount) {\n            if (usingClipCount > useClippingMaskMaxCount) {\n              (0, cubismdebug_1.CubismLogError)('not supported mask count : {0}\\n[Details] render texture count : {1}, mask count : {2}', usingClipCount - useClippingMaskMaxCount, this._renderTextureCount, usingClipCount);\n            }\n            for (var index = 0; index < this._clippingContextListForMask.getSize(); index++) {\n              var clipContext = this._clippingContextListForMask.at(index);\n              clipContext._layoutChannelNo = 0;\n              clipContext._layoutBounds.x = 0.0;\n              clipContext._layoutBounds.y = 0.0;\n              clipContext._layoutBounds.width = 1.0;\n              clipContext._layoutBounds.height = 1.0;\n              clipContext._bufferIndex = 0;\n            }\n            return;\n          }\n          var layoutCountMaxValue = this._renderTextureCount <= 1 ? 9 : 8;\n          var countPerSheetDiv = usingClipCount / this._renderTextureCount;\n          var countPerSheetMod = usingClipCount % this._renderTextureCount;\n          countPerSheetDiv = ~~countPerSheetDiv;\n          countPerSheetMod = ~~countPerSheetMod;\n          var div = countPerSheetDiv / ColorChannelCount;\n          var mod = countPerSheetDiv % ColorChannelCount;\n          div = ~~div;\n          mod = ~~mod;\n          var curClipIndex = 0;\n          for (var renderTextureNo = 0; renderTextureNo < this._renderTextureCount; renderTextureNo++) {\n            for (var channelNo = 0; channelNo < ColorChannelCount; channelNo++) {\n              var layoutCount = div + (channelNo < mod ? 1 : 0);\n              var checkChannelNo = mod + 1 >= ColorChannelCount ? 0 : mod + 1;\n              if (layoutCount < layoutCountMaxValue && channelNo == checkChannelNo) {\n                layoutCount += renderTextureNo < countPerSheetMod ? 1 : 0;\n              }\n              if (layoutCount == 0) {} else if (layoutCount == 1) {\n                var clipContext = this._clippingContextListForMask.at(curClipIndex++);\n                clipContext._layoutChannelNo = channelNo;\n                clipContext._layoutBounds.x = 0.0;\n                clipContext._layoutBounds.y = 0.0;\n                clipContext._layoutBounds.width = 1.0;\n                clipContext._layoutBounds.height = 1.0;\n                clipContext._bufferIndex = renderTextureNo;\n              } else if (layoutCount == 2) {\n                for (var i = 0; i < layoutCount; i++) {\n                  var xpos = i % 2;\n                  xpos = ~~xpos;\n                  var cc = this._clippingContextListForMask.at(curClipIndex++);\n                  cc._layoutChannelNo = channelNo;\n                  cc._layoutBounds.x = xpos * 0.5;\n                  cc._layoutBounds.y = 0.0;\n                  cc._layoutBounds.width = 0.5;\n                  cc._layoutBounds.height = 1.0;\n                  cc._bufferIndex = renderTextureNo;\n                }\n              } else if (layoutCount <= 4) {\n                for (var i = 0; i < layoutCount; i++) {\n                  var xpos = i % 2;\n                  var ypos = i / 2;\n                  xpos = ~~xpos;\n                  ypos = ~~ypos;\n                  var cc = this._clippingContextListForMask.at(curClipIndex++);\n                  cc._layoutChannelNo = channelNo;\n                  cc._layoutBounds.x = xpos * 0.5;\n                  cc._layoutBounds.y = ypos * 0.5;\n                  cc._layoutBounds.width = 0.5;\n                  cc._layoutBounds.height = 0.5;\n                  cc._bufferIndex = renderTextureNo;\n                }\n              } else if (layoutCount <= layoutCountMaxValue) {\n                for (var i = 0; i < layoutCount; i++) {\n                  var xpos = i % 3;\n                  var ypos = i / 3;\n                  xpos = ~~xpos;\n                  ypos = ~~ypos;\n                  var cc = this._clippingContextListForMask.at(curClipIndex++);\n                  cc._layoutChannelNo = channelNo;\n                  cc._layoutBounds.x = xpos / 3.0;\n                  cc._layoutBounds.y = ypos / 3.0;\n                  cc._layoutBounds.width = 1.0 / 3.0;\n                  cc._layoutBounds.height = 1.0 / 3.0;\n                  cc._bufferIndex = renderTextureNo;\n                }\n              } else {\n                (0, cubismdebug_1.CubismLogError)('not supported mask count : {0}\\n[Details] render texture count : {1}, mask count : {2}', usingClipCount - useClippingMaskMaxCount, this._renderTextureCount, usingClipCount);\n                for (var index = 0; index < layoutCount; index++) {\n                  var cc = this._clippingContextListForMask.at(curClipIndex++);\n                  cc._layoutChannelNo = 0;\n                  cc._layoutBounds.x = 0.0;\n                  cc._layoutBounds.y = 0.0;\n                  cc._layoutBounds.width = 1.0;\n                  cc._layoutBounds.height = 1.0;\n                  cc._bufferIndex = 0;\n                }\n              }\n            }\n          }\n        };\n        CubismClippingManager_WebGL.prototype.getColorBuffer = function () {\n          return this._maskColorBuffers;\n        };\n        CubismClippingManager_WebGL.prototype.getClippingContextListForDraw = function () {\n          return this._clippingContextListForDraw;\n        };\n        CubismClippingManager_WebGL.prototype.getClippingMaskCount = function () {\n          return this._clippingContextListForMask.getSize();\n        };\n        CubismClippingManager_WebGL.prototype.setClippingMaskBufferSize = function (size) {\n          this._clippingMaskBufferSize = size;\n        };\n        CubismClippingManager_WebGL.prototype.getClippingMaskBufferSize = function () {\n          return this._clippingMaskBufferSize;\n        };\n        CubismClippingManager_WebGL.prototype.getRenderTextureCount = function () {\n          return this._renderTextureCount;\n        };\n        return CubismClippingManager_WebGL;\n      }();\n      exports.CubismClippingManager_WebGL = CubismClippingManager_WebGL;\n      var CubismRenderTextureResource = function () {\n        function CubismRenderTextureResource(frameNo, texture) {\n          this.frameNo = frameNo;\n          this.textures = texture;\n        }\n        return CubismRenderTextureResource;\n      }();\n      exports.CubismRenderTextureResource = CubismRenderTextureResource;\n      var CubismClippingContext = function () {\n        function CubismClippingContext(manager, clippingDrawableIndices, clipCount) {\n          this._owner = manager;\n          this._clippingIdList = clippingDrawableIndices;\n          this._clippingIdCount = clipCount;\n          this._allClippedDrawRect = new csmrectf_1.csmRect();\n          this._layoutBounds = new csmrectf_1.csmRect();\n          this._clippedDrawableIndexList = [];\n          this._matrixForMask = new cubismmatrix44_1.CubismMatrix44();\n          this._matrixForDraw = new cubismmatrix44_1.CubismMatrix44();\n          this._bufferIndex = 0;\n        }\n        CubismClippingContext.prototype.release = function () {\n          if (this._layoutBounds != null) {\n            this._layoutBounds = null;\n          }\n          if (this._allClippedDrawRect != null) {\n            this._allClippedDrawRect = null;\n          }\n          if (this._clippedDrawableIndexList != null) {\n            this._clippedDrawableIndexList = null;\n          }\n        };\n        CubismClippingContext.prototype.addClippedDrawable = function (drawableIndex) {\n          this._clippedDrawableIndexList.push(drawableIndex);\n        };\n        CubismClippingContext.prototype.getClippingManager = function () {\n          return this._owner;\n        };\n        CubismClippingContext.prototype.setGl = function (gl) {\n          this._owner.setGL(gl);\n        };\n        return CubismClippingContext;\n      }();\n      exports.CubismClippingContext = CubismClippingContext;\n      var CubismRendererProfile_WebGL = function () {\n        var _s = $RefreshSig$();\n        function CubismRendererProfile_WebGL() {\n          this._lastVertexAttribArrayEnabled = new Array(4);\n          this._lastColorMask = new Array(4);\n          this._lastBlending = new Array(4);\n          this._lastViewport = new Array(4);\n        }\n        CubismRendererProfile_WebGL.prototype.setGlEnable = function (index, enabled) {\n          if (enabled) this.gl.enable(index);else this.gl.disable(index);\n        };\n        CubismRendererProfile_WebGL.prototype.setGlEnableVertexAttribArray = function (index, enabled) {\n          if (enabled) this.gl.enableVertexAttribArray(index);else this.gl.disableVertexAttribArray(index);\n        };\n        CubismRendererProfile_WebGL.prototype.save = function () {\n          if (this.gl == null) {\n            (0, cubismdebug_1.CubismLogError)(\"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\");\n            return;\n          }\n          this._lastArrayBufferBinding = this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING);\n          this._lastArrayBufferBinding = this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING);\n          this._lastProgram = this.gl.getParameter(this.gl.CURRENT_PROGRAM);\n          this._lastActiveTexture = this.gl.getParameter(this.gl.ACTIVE_TEXTURE);\n          this.gl.activeTexture(this.gl.TEXTURE1);\n          this._lastTexture1Binding2D = this.gl.getParameter(this.gl.TEXTURE_BINDING_2D);\n          this.gl.activeTexture(this.gl.TEXTURE0);\n          this._lastTexture0Binding2D = this.gl.getParameter(this.gl.TEXTURE_BINDING_2D);\n          this._lastVertexAttribArrayEnabled[0] = this.gl.getVertexAttrib(0, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n          this._lastVertexAttribArrayEnabled[1] = this.gl.getVertexAttrib(1, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n          this._lastVertexAttribArrayEnabled[2] = this.gl.getVertexAttrib(2, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n          this._lastVertexAttribArrayEnabled[3] = this.gl.getVertexAttrib(3, this.gl.VERTEX_ATTRIB_ARRAY_ENABLED);\n          this._lastScissorTest = this.gl.isEnabled(this.gl.SCISSOR_TEST);\n          this._lastStencilTest = this.gl.isEnabled(this.gl.STENCIL_TEST);\n          this._lastDepthTest = this.gl.isEnabled(this.gl.DEPTH_TEST);\n          this._lastCullFace = this.gl.isEnabled(this.gl.CULL_FACE);\n          this._lastBlend = this.gl.isEnabled(this.gl.BLEND);\n          this._lastFrontFace = this.gl.getParameter(this.gl.FRONT_FACE);\n          this._lastColorMask = this.gl.getParameter(this.gl.COLOR_WRITEMASK);\n          this._lastBlending[0] = this.gl.getParameter(this.gl.BLEND_SRC_RGB);\n          this._lastBlending[1] = this.gl.getParameter(this.gl.BLEND_DST_RGB);\n          this._lastBlending[2] = this.gl.getParameter(this.gl.BLEND_SRC_ALPHA);\n          this._lastBlending[3] = this.gl.getParameter(this.gl.BLEND_DST_ALPHA);\n          this._lastFBO = this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING);\n          this._lastViewport = this.gl.getParameter(this.gl.VIEWPORT);\n        };\n        CubismRendererProfile_WebGL.prototype.restore = _s(function () {\n          _s();\n          if (this.gl == null) {\n            (0, cubismdebug_1.CubismLogError)(\"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\");\n            return;\n          }\n          this.gl.useProgram(this._lastProgram);\n          this.setGlEnableVertexAttribArray(0, this._lastVertexAttribArrayEnabled[0]);\n          this.setGlEnableVertexAttribArray(1, this._lastVertexAttribArrayEnabled[1]);\n          this.setGlEnableVertexAttribArray(2, this._lastVertexAttribArrayEnabled[2]);\n          this.setGlEnableVertexAttribArray(3, this._lastVertexAttribArrayEnabled[3]);\n          this.setGlEnable(this.gl.SCISSOR_TEST, this._lastScissorTest);\n          this.setGlEnable(this.gl.STENCIL_TEST, this._lastStencilTest);\n          this.setGlEnable(this.gl.DEPTH_TEST, this._lastDepthTest);\n          this.setGlEnable(this.gl.CULL_FACE, this._lastCullFace);\n          this.setGlEnable(this.gl.BLEND, this._lastBlend);\n          this.gl.frontFace(this._lastFrontFace);\n          this.gl.colorMask(this._lastColorMask[0], this._lastColorMask[1], this._lastColorMask[2], this._lastColorMask[3]);\n          this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this._lastArrayBufferBinding);\n          this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this._lastElementArrayBufferBinding);\n          this.gl.activeTexture(this.gl.TEXTURE1);\n          this.gl.bindTexture(this.gl.TEXTURE_2D, this._lastTexture1Binding2D);\n          this.gl.activeTexture(this.gl.TEXTURE0);\n          this.gl.bindTexture(this.gl.TEXTURE_2D, this._lastTexture0Binding2D);\n          this.gl.activeTexture(this._lastActiveTexture);\n          this.gl.blendFuncSeparate(this._lastBlending[0], this._lastBlending[1], this._lastBlending[2], this._lastBlending[3]);\n        }, \"ZdQBZ3rq7bWAAMQq6hlVCmYF0jM=\", true);\n        CubismRendererProfile_WebGL.prototype.setGl = function (gl) {\n          this.gl = gl;\n        };\n        return CubismRendererProfile_WebGL;\n      }();\n      exports.CubismRendererProfile_WebGL = CubismRendererProfile_WebGL;\n      var CubismShader_WebGL = function () {\n        var _s2 = $RefreshSig$();\n        function CubismShader_WebGL() {\n          this._shaderSets = new csmvector_1.csmVector();\n        }\n        CubismShader_WebGL.getInstance = function () {\n          if (s_instance == null) {\n            s_instance = new CubismShader_WebGL();\n            return s_instance;\n          }\n          return s_instance;\n        };\n        CubismShader_WebGL.deleteInstance = function () {\n          if (s_instance) {\n            s_instance.release();\n            s_instance = null;\n          }\n        };\n        CubismShader_WebGL.prototype.release = function () {\n          this.releaseShaderProgram();\n        };\n        CubismShader_WebGL.prototype.setupShaderProgram = _s2(function (renderer, textureId, vertexCount, vertexArray, indexArray, uvArray, bufferData, opacity, colorBlendMode, baseColor, multiplyColor, screenColor, isPremultipliedAlpha, matrix4x4, invertedMask) {\n          _s2();\n          if (!isPremultipliedAlpha) {\n            (0, cubismdebug_1.CubismLogError)('NoPremultipliedAlpha is not allowed');\n          }\n          if (this._shaderSets.getSize() == 0) {\n            this.generateShaders();\n          }\n          var SRC_COLOR;\n          var DST_COLOR;\n          var SRC_ALPHA;\n          var DST_ALPHA;\n          if (renderer.getClippingContextBufferForMask() != null) {\n            var shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_SetupMask);\n            this.gl.useProgram(shaderSet.shaderProgram);\n            this.gl.activeTexture(this.gl.TEXTURE0);\n            this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n            this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n            if (bufferData.vertex == null) {\n              bufferData.vertex = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n            if (bufferData.uv == null) {\n              bufferData.uv = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n            var channelNo = renderer.getClippingContextBufferForMask()._layoutChannelNo;\n            var colorChannel = renderer.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(channelNo);\n            this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n            this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, renderer.getClippingContextBufferForMask()._matrixForMask.getArray());\n            var rect = renderer.getClippingContextBufferForMask()._layoutBounds;\n            this.gl.uniform4f(shaderSet.uniformBaseColorLocation, rect.x * 2.0 - 1.0, rect.y * 2.0 - 1.0, rect.getRight() * 2.0 - 1.0, rect.getBottom() * 2.0 - 1.0);\n            this.gl.uniform4f(shaderSet.uniformMultiplyColorLocation, multiplyColor.R, multiplyColor.G, multiplyColor.B, multiplyColor.A);\n            this.gl.uniform4f(shaderSet.uniformScreenColorLocation, screenColor.R, screenColor.G, screenColor.B, screenColor.A);\n            SRC_COLOR = this.gl.ZERO;\n            DST_COLOR = this.gl.ONE_MINUS_SRC_COLOR;\n            SRC_ALPHA = this.gl.ZERO;\n            DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n          } else {\n            var masked = renderer.getClippingContextBufferForDraw() != null;\n            var offset = masked ? invertedMask ? 2 : 1 : 0;\n            var shaderSet = new CubismShaderSet();\n            switch (colorBlendMode) {\n              case cubismrenderer_1.CubismBlendMode.CubismBlendMode_Normal:\n              default:\n                shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_NormalPremultipliedAlpha + offset);\n                SRC_COLOR = this.gl.ONE;\n                DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n                SRC_ALPHA = this.gl.ONE;\n                DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n                break;\n              case cubismrenderer_1.CubismBlendMode.CubismBlendMode_Additive:\n                shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_AddPremultipliedAlpha + offset);\n                SRC_COLOR = this.gl.ONE;\n                DST_COLOR = this.gl.ONE;\n                SRC_ALPHA = this.gl.ZERO;\n                DST_ALPHA = this.gl.ONE;\n                break;\n              case cubismrenderer_1.CubismBlendMode.CubismBlendMode_Multiplicative:\n                shaderSet = this._shaderSets.at(ShaderNames.ShaderNames_MultPremultipliedAlpha + offset);\n                SRC_COLOR = this.gl.DST_COLOR;\n                DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n                SRC_ALPHA = this.gl.ZERO;\n                DST_ALPHA = this.gl.ONE;\n                break;\n            }\n            this.gl.useProgram(shaderSet.shaderProgram);\n            if (bufferData.vertex == null) {\n              bufferData.vertex = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, vertexArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributePositionLocation, 2, this.gl.FLOAT, false, 0, 0);\n            if (bufferData.uv == null) {\n              bufferData.uv = this.gl.createBuffer();\n            }\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n            this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n            this.gl.vertexAttribPointer(shaderSet.attributeTexCoordLocation, 2, this.gl.FLOAT, false, 0, 0);\n            if (masked) {\n              this.gl.activeTexture(this.gl.TEXTURE1);\n              var tex = renderer.getClippingContextBufferForDraw().getClippingManager().getColorBuffer().at(renderer.getClippingContextBufferForDraw()._bufferIndex);\n              this.gl.bindTexture(this.gl.TEXTURE_2D, tex);\n              this.gl.uniform1i(shaderSet.samplerTexture1Location, 1);\n              this.gl.uniformMatrix4fv(shaderSet.uniformClipMatrixLocation, false, renderer.getClippingContextBufferForDraw()._matrixForDraw.getArray());\n              var channelNo = renderer.getClippingContextBufferForDraw()._layoutChannelNo;\n              var colorChannel = renderer.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(channelNo);\n              this.gl.uniform4f(shaderSet.uniformChannelFlagLocation, colorChannel.R, colorChannel.G, colorChannel.B, colorChannel.A);\n            }\n            this.gl.activeTexture(this.gl.TEXTURE0);\n            this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n            this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n            this.gl.uniformMatrix4fv(shaderSet.uniformMatrixLocation, false, matrix4x4.getArray());\n            this.gl.uniform4f(shaderSet.uniformBaseColorLocation, baseColor.R, baseColor.G, baseColor.B, baseColor.A);\n            this.gl.uniform4f(shaderSet.uniformMultiplyColorLocation, multiplyColor.R, multiplyColor.G, multiplyColor.B, multiplyColor.A);\n            this.gl.uniform4f(shaderSet.uniformScreenColorLocation, screenColor.R, screenColor.G, screenColor.B, screenColor.A);\n          }\n          if (bufferData.index == null) {\n            bufferData.index = this.gl.createBuffer();\n          }\n          this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, bufferData.index);\n          this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, indexArray, this.gl.DYNAMIC_DRAW);\n          this.gl.blendFuncSeparate(SRC_COLOR, DST_COLOR, SRC_ALPHA, DST_ALPHA);\n        }, \"ZMbfHVZCMtvIE16D9+c3opbTr3E=\", true);\n        CubismShader_WebGL.prototype.releaseShaderProgram = function () {\n          for (var i = 0; i < this._shaderSets.getSize(); i++) {\n            this.gl.deleteProgram(this._shaderSets.at(i).shaderProgram);\n            this._shaderSets.at(i).shaderProgram = 0;\n            this._shaderSets.set(i, void 0);\n            this._shaderSets.set(i, null);\n          }\n        };\n        CubismShader_WebGL.prototype.generateShaders = function () {\n          for (var i = 0; i < ShaderCount; i++) {\n            this._shaderSets.pushBack(new CubismShaderSet());\n          }\n          this._shaderSets.at(0).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrcSetupMask, exports.fragmentShaderSrcsetupMask);\n          this._shaderSets.at(1).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrc, exports.fragmentShaderSrcPremultipliedAlpha);\n          this._shaderSets.at(2).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrcMasked, exports.fragmentShaderSrcMaskPremultipliedAlpha);\n          this._shaderSets.at(3).shaderProgram = this.loadShaderProgram(exports.vertexShaderSrcMasked, exports.fragmentShaderSrcMaskInvertedPremultipliedAlpha);\n          this._shaderSets.at(4).shaderProgram = this._shaderSets.at(1).shaderProgram;\n          this._shaderSets.at(5).shaderProgram = this._shaderSets.at(2).shaderProgram;\n          this._shaderSets.at(6).shaderProgram = this._shaderSets.at(3).shaderProgram;\n          this._shaderSets.at(7).shaderProgram = this._shaderSets.at(1).shaderProgram;\n          this._shaderSets.at(8).shaderProgram = this._shaderSets.at(2).shaderProgram;\n          this._shaderSets.at(9).shaderProgram = this._shaderSets.at(3).shaderProgram;\n          this._shaderSets.at(0).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram, 'a_position');\n          this._shaderSets.at(0).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(0).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 's_texture0');\n          this._shaderSets.at(0).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_clipMatrix');\n          this._shaderSets.at(0).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_channelFlag');\n          this._shaderSets.at(0).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(0).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(0).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(1).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram, 'a_position');\n          this._shaderSets.at(1).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(1).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 's_texture0');\n          this._shaderSets.at(1).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_matrix');\n          this._shaderSets.at(1).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(1).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(1).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(2).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram, 'a_position');\n          this._shaderSets.at(2).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(2).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 's_texture0');\n          this._shaderSets.at(2).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 's_texture1');\n          this._shaderSets.at(2).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_matrix');\n          this._shaderSets.at(2).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_clipMatrix');\n          this._shaderSets.at(2).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_channelFlag');\n          this._shaderSets.at(2).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(2).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(2).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(3).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram, 'a_position');\n          this._shaderSets.at(3).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(3).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 's_texture0');\n          this._shaderSets.at(3).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 's_texture1');\n          this._shaderSets.at(3).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_matrix');\n          this._shaderSets.at(3).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_clipMatrix');\n          this._shaderSets.at(3).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_channelFlag');\n          this._shaderSets.at(3).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(3).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(3).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(4).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram, 'a_position');\n          this._shaderSets.at(4).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(4).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 's_texture0');\n          this._shaderSets.at(4).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_matrix');\n          this._shaderSets.at(4).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(4).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(4).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(5).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram, 'a_position');\n          this._shaderSets.at(5).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(5).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 's_texture0');\n          this._shaderSets.at(5).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 's_texture1');\n          this._shaderSets.at(5).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_matrix');\n          this._shaderSets.at(5).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_clipMatrix');\n          this._shaderSets.at(5).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_channelFlag');\n          this._shaderSets.at(5).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(5).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(5).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(6).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram, 'a_position');\n          this._shaderSets.at(6).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(6).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 's_texture0');\n          this._shaderSets.at(6).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 's_texture1');\n          this._shaderSets.at(6).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_matrix');\n          this._shaderSets.at(6).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_clipMatrix');\n          this._shaderSets.at(6).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_channelFlag');\n          this._shaderSets.at(6).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(6).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(6).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(7).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram, 'a_position');\n          this._shaderSets.at(7).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(7).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 's_texture0');\n          this._shaderSets.at(7).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_matrix');\n          this._shaderSets.at(7).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(7).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(7).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(8).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram, 'a_position');\n          this._shaderSets.at(8).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(8).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 's_texture0');\n          this._shaderSets.at(8).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 's_texture1');\n          this._shaderSets.at(8).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_matrix');\n          this._shaderSets.at(8).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_clipMatrix');\n          this._shaderSets.at(8).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_channelFlag');\n          this._shaderSets.at(8).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(8).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(8).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram, 'u_screenColor');\n          this._shaderSets.at(9).attributePositionLocation = this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram, 'a_position');\n          this._shaderSets.at(9).attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram, 'a_texCoord');\n          this._shaderSets.at(9).samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 's_texture0');\n          this._shaderSets.at(9).samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 's_texture1');\n          this._shaderSets.at(9).uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_matrix');\n          this._shaderSets.at(9).uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_clipMatrix');\n          this._shaderSets.at(9).uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_channelFlag');\n          this._shaderSets.at(9).uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_baseColor');\n          this._shaderSets.at(9).uniformMultiplyColorLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_multiplyColor');\n          this._shaderSets.at(9).uniformScreenColorLocation = this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram, 'u_screenColor');\n        };\n        CubismShader_WebGL.prototype.loadShaderProgram = function (vertexShaderSource, fragmentShaderSource) {\n          var shaderProgram = this.gl.createProgram();\n          var vertShader = this.compileShaderSource(this.gl.VERTEX_SHADER, vertexShaderSource);\n          if (!vertShader) {\n            (0, cubismdebug_1.CubismLogError)('Vertex shader compile error!');\n            return 0;\n          }\n          var fragShader = this.compileShaderSource(this.gl.FRAGMENT_SHADER, fragmentShaderSource);\n          if (!fragShader) {\n            (0, cubismdebug_1.CubismLogError)('Vertex shader compile error!');\n            return 0;\n          }\n          this.gl.attachShader(shaderProgram, vertShader);\n          this.gl.attachShader(shaderProgram, fragShader);\n          this.gl.linkProgram(shaderProgram);\n          var linkStatus = this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS);\n          if (!linkStatus) {\n            (0, cubismdebug_1.CubismLogError)('Failed to link program: {0}', shaderProgram);\n            this.gl.deleteShader(vertShader);\n            vertShader = 0;\n            this.gl.deleteShader(fragShader);\n            fragShader = 0;\n            if (shaderProgram) {\n              this.gl.deleteProgram(shaderProgram);\n              shaderProgram = 0;\n            }\n            return 0;\n          }\n          this.gl.deleteShader(vertShader);\n          this.gl.deleteShader(fragShader);\n          return shaderProgram;\n        };\n        CubismShader_WebGL.prototype.compileShaderSource = function (shaderType, shaderSource) {\n          var source = shaderSource;\n          var shader = this.gl.createShader(shaderType);\n          this.gl.shaderSource(shader, source);\n          this.gl.compileShader(shader);\n          if (!shader) {\n            var log = this.gl.getShaderInfoLog(shader);\n            (0, cubismdebug_1.CubismLogError)('Shader compile log: {0} ', log);\n          }\n          var status = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n          if (!status) {\n            this.gl.deleteShader(shader);\n            return null;\n          }\n          return shader;\n        };\n        CubismShader_WebGL.prototype.setGl = function (gl) {\n          this.gl = gl;\n        };\n        return CubismShader_WebGL;\n      }();\n      exports.CubismShader_WebGL = CubismShader_WebGL;\n      var CubismShaderSet = function () {\n        function CubismShaderSet() {}\n        return CubismShaderSet;\n      }();\n      exports.CubismShaderSet = CubismShaderSet;\n      var ShaderNames;\n      (function (ShaderNames) {\n        ShaderNames[ShaderNames[\"ShaderNames_SetupMask\"] = 0] = \"ShaderNames_SetupMask\";\n        ShaderNames[ShaderNames[\"ShaderNames_NormalPremultipliedAlpha\"] = 1] = \"ShaderNames_NormalPremultipliedAlpha\";\n        ShaderNames[ShaderNames[\"ShaderNames_NormalMaskedPremultipliedAlpha\"] = 2] = \"ShaderNames_NormalMaskedPremultipliedAlpha\";\n        ShaderNames[ShaderNames[\"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\"] = 3] = \"ShaderNames_NomralMaskedInvertedPremultipliedAlpha\";\n        ShaderNames[ShaderNames[\"ShaderNames_AddPremultipliedAlpha\"] = 4] = \"ShaderNames_AddPremultipliedAlpha\";\n        ShaderNames[ShaderNames[\"ShaderNames_AddMaskedPremultipliedAlpha\"] = 5] = \"ShaderNames_AddMaskedPremultipliedAlpha\";\n        ShaderNames[ShaderNames[\"ShaderNames_AddMaskedPremultipliedAlphaInverted\"] = 6] = \"ShaderNames_AddMaskedPremultipliedAlphaInverted\";\n        ShaderNames[ShaderNames[\"ShaderNames_MultPremultipliedAlpha\"] = 7] = \"ShaderNames_MultPremultipliedAlpha\";\n        ShaderNames[ShaderNames[\"ShaderNames_MultMaskedPremultipliedAlpha\"] = 8] = \"ShaderNames_MultMaskedPremultipliedAlpha\";\n        ShaderNames[ShaderNames[\"ShaderNames_MultMaskedPremultipliedAlphaInverted\"] = 9] = \"ShaderNames_MultMaskedPremultipliedAlphaInverted\";\n      })(ShaderNames = exports.ShaderNames || (exports.ShaderNames = {}));\n      exports.vertexShaderSrcSetupMask = 'attribute vec4     a_position;' + 'attribute vec2     a_texCoord;' + 'varying vec2       v_texCoord;' + 'varying vec4       v_myPos;' + 'uniform mat4       u_clipMatrix;' + 'void main()' + '{' + '   gl_Position = u_clipMatrix * a_position;' + '   v_myPos = u_clipMatrix * a_position;' + '   v_texCoord = a_texCoord;' + '   v_texCoord.y = 1.0 - v_texCoord.y;' + '}';\n      exports.fragmentShaderSrcsetupMask = 'precision mediump float;' + 'varying vec2       v_texCoord;' + 'varying vec4       v_myPos;' + 'uniform vec4       u_baseColor;' + 'uniform vec4       u_channelFlag;' + 'uniform sampler2D  s_texture0;' + 'void main()' + '{' + '   float isInside = ' + '       step(u_baseColor.x, v_myPos.x/v_myPos.w)' + '       * step(u_baseColor.y, v_myPos.y/v_myPos.w)' + '       * step(v_myPos.x/v_myPos.w, u_baseColor.z)' + '       * step(v_myPos.y/v_myPos.w, u_baseColor.w);' + '   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;' + '}';\n      exports.vertexShaderSrc = 'attribute vec4     a_position;' + 'attribute vec2     a_texCoord;' + 'varying vec2       v_texCoord;' + 'uniform mat4       u_matrix;' + 'void main()' + '{' + '   gl_Position = u_matrix * a_position;' + '   v_texCoord = a_texCoord;' + '   v_texCoord.y = 1.0 - v_texCoord.y;' + '}';\n      exports.vertexShaderSrcMasked = 'attribute vec4     a_position;' + 'attribute vec2     a_texCoord;' + 'varying vec2       v_texCoord;' + 'varying vec4       v_clipPos;' + 'uniform mat4       u_matrix;' + 'uniform mat4       u_clipMatrix;' + 'void main()' + '{' + '   gl_Position = u_matrix * a_position;' + '   v_clipPos = u_clipMatrix * a_position;' + '   v_texCoord = a_texCoord;' + '   v_texCoord.y = 1.0 - v_texCoord.y;' + '}';\n      exports.fragmentShaderSrcPremultipliedAlpha = 'precision mediump float;' + 'varying vec2       v_texCoord;' + 'uniform vec4       u_baseColor;' + 'uniform sampler2D  s_texture0;' + 'uniform vec4       u_multiplyColor;' + 'uniform vec4       u_screenColor;' + 'void main()' + '{' + '   vec4 texColor = texture2D(s_texture0, v_texCoord);' + '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' + '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' + '   vec4 color = texColor * u_baseColor;' + '   gl_FragColor = vec4(color.rgb, color.a);' + '}';\n      exports.fragmentShaderSrcMaskPremultipliedAlpha = 'precision mediump float;' + 'varying vec2       v_texCoord;' + 'varying vec4       v_clipPos;' + 'uniform vec4       u_baseColor;' + 'uniform vec4       u_channelFlag;' + 'uniform sampler2D  s_texture0;' + 'uniform sampler2D  s_texture1;' + 'uniform vec4       u_multiplyColor;' + 'uniform vec4       u_screenColor;' + 'void main()' + '{' + '   vec4 texColor = texture2D(s_texture0, v_texCoord);' + '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' + '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' + '   vec4 col_formask = texColor * u_baseColor;' + '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' + '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' + '   col_formask = col_formask * maskVal;' + '   gl_FragColor = col_formask;' + '}';\n      exports.fragmentShaderSrcMaskInvertedPremultipliedAlpha = 'precision mediump float;' + 'varying vec2      v_texCoord;' + 'varying vec4      v_clipPos;' + 'uniform sampler2D s_texture0;' + 'uniform sampler2D s_texture1;' + 'uniform vec4      u_channelFlag;' + 'uniform vec4      u_baseColor;' + 'uniform vec4      u_multiplyColor;' + 'uniform vec4      u_screenColor;' + 'void main()' + '{' + '   vec4 texColor = texture2D(s_texture0, v_texCoord);' + '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' + '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' + '   vec4 col_formask = texColor * u_baseColor;' + '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' + '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' + '   col_formask = col_formask * (1.0 - maskVal);' + '   gl_FragColor = col_formask;' + '}';\n      var CubismRenderer_WebGL = function (_super) {\n        var _s3 = $RefreshSig$();\n        __extends(CubismRenderer_WebGL, _super);\n        function CubismRenderer_WebGL() {\n          var _this = _super.call(this) || this;\n          _this._clippingContextBufferForMask = null;\n          _this._clippingContextBufferForDraw = null;\n          _this._rendererProfile = new CubismRendererProfile_WebGL();\n          _this.firstDraw = true;\n          _this._textures = new csmmap_1.csmMap();\n          _this._sortedDrawableIndexList = new csmvector_1.csmVector();\n          _this._bufferData = {\n            vertex: WebGLBuffer = null,\n            uv: WebGLBuffer = null,\n            index: WebGLBuffer = null\n          };\n          _this._textures.prepareCapacity(32, true);\n          return _this;\n        }\n        CubismRenderer_WebGL.prototype.initialize = function (model, maskBufferCount) {\n          if (maskBufferCount === void 0) {\n            maskBufferCount = 1;\n          }\n          if (model.isUsingMasking()) {\n            this._clippingManager = new CubismClippingManager_WebGL();\n            this._clippingManager.initialize(model, model.getDrawableCount(), model.getDrawableMasks(), model.getDrawableMaskCounts(), maskBufferCount);\n          }\n          this._sortedDrawableIndexList.resize(model.getDrawableCount(), 0);\n          _super.prototype.initialize.call(this, model);\n        };\n        CubismRenderer_WebGL.prototype.bindTexture = function (modelTextureNo, glTexture) {\n          this._textures.setValue(modelTextureNo, glTexture);\n        };\n        CubismRenderer_WebGL.prototype.getBindedTextures = function () {\n          return this._textures;\n        };\n        CubismRenderer_WebGL.prototype.setClippingMaskBufferSize = function (size) {\n          if (!this._model.isUsingMasking()) {\n            return;\n          }\n          var renderTextureCount = this._clippingManager.getRenderTextureCount();\n          this._clippingManager.release();\n          this._clippingManager = void 0;\n          this._clippingManager = null;\n          this._clippingManager = new CubismClippingManager_WebGL();\n          this._clippingManager.setClippingMaskBufferSize(size);\n          this._clippingManager.initialize(this.getModel(), this.getModel().getDrawableCount(), this.getModel().getDrawableMasks(), this.getModel().getDrawableMaskCounts(), renderTextureCount);\n        };\n        CubismRenderer_WebGL.prototype.getClippingMaskBufferSize = function () {\n          return this._model.isUsingMasking() ? this._clippingManager.getClippingMaskBufferSize() : -1;\n        };\n        CubismRenderer_WebGL.prototype.getRenderTextureCount = function () {\n          return this._model.isUsingMasking() ? this._clippingManager.getRenderTextureCount() : -1;\n        };\n        CubismRenderer_WebGL.prototype.release = function () {\n          if (this._clippingManager) {\n            this._clippingManager.release();\n            this._clippingManager = void 0;\n            this._clippingManager = null;\n          }\n          if (this.gl == null) {\n            return;\n          }\n          this.gl.deleteBuffer(this._bufferData.vertex);\n          this._bufferData.vertex = null;\n          this.gl.deleteBuffer(this._bufferData.uv);\n          this._bufferData.uv = null;\n          this.gl.deleteBuffer(this._bufferData.index);\n          this._bufferData.index = null;\n          this._bufferData = null;\n          this._textures = null;\n        };\n        CubismRenderer_WebGL.prototype.doDrawModel = function () {\n          if (this.gl == null) {\n            (0, cubismdebug_1.CubismLogError)(\"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\");\n            return;\n          }\n          if (this._clippingManager != null) {\n            this.preDraw();\n            this._clippingManager.setupClippingContext(this.getModel(), this);\n          }\n          this.preDraw();\n          var drawableCount = this.getModel().getDrawableCount();\n          var renderOrder = this.getModel().getDrawableRenderOrders();\n          for (var i = 0; i < drawableCount; ++i) {\n            var order = renderOrder[i];\n            this._sortedDrawableIndexList.set(order, i);\n          }\n          for (var i = 0; i < drawableCount; ++i) {\n            var drawableIndex = this._sortedDrawableIndexList.at(i);\n            if (!this.getModel().getDrawableDynamicFlagIsVisible(drawableIndex)) {\n              continue;\n            }\n            var clipContext = this._clippingManager != null ? this._clippingManager.getClippingContextListForDraw().at(drawableIndex) : null;\n            if (clipContext != null && this.isUsingHighPrecisionMask()) {\n              if (clipContext._isUsing) {\n                this.gl.viewport(0, 0, this._clippingManager.getClippingMaskBufferSize(), this._clippingManager.getClippingMaskBufferSize());\n                this.preDraw();\n                this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, clipContext.getClippingManager().getMaskRenderTexture().at(clipContext._bufferIndex));\n                this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\n                this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n              }\n              {\n                var clipDrawCount = clipContext._clippingIdCount;\n                for (var index = 0; index < clipDrawCount; index++) {\n                  var clipDrawIndex = clipContext._clippingIdList[index];\n                  if (!this._model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)) {\n                    continue;\n                  }\n                  this.setIsCulling(this._model.getDrawableCulling(clipDrawIndex) != false);\n                  this.setClippingContextBufferForMask(clipContext);\n                  this.drawMesh(this.getModel().getDrawableTextureIndex(clipDrawIndex), this.getModel().getDrawableVertexIndexCount(clipDrawIndex), this.getModel().getDrawableVertexCount(clipDrawIndex), this.getModel().getDrawableVertexIndices(clipDrawIndex), this.getModel().getDrawableVertices(clipDrawIndex), this.getModel().getDrawableVertexUvs(clipDrawIndex), this.getModel().getMultiplyColor(clipDrawIndex), this.getModel().getScreenColor(clipDrawIndex), this.getModel().getDrawableOpacity(clipDrawIndex), cubismrenderer_1.CubismBlendMode.CubismBlendMode_Normal, false);\n                }\n              }\n              {\n                this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n                this.setClippingContextBufferForMask(null);\n                this.gl.viewport(s_viewport[0], s_viewport[1], s_viewport[2], s_viewport[3]);\n                this.preDraw();\n              }\n            }\n            this.setClippingContextBufferForDraw(clipContext);\n            this.setIsCulling(this.getModel().getDrawableCulling(drawableIndex));\n            this.drawMesh(this.getModel().getDrawableTextureIndex(drawableIndex), this.getModel().getDrawableVertexIndexCount(drawableIndex), this.getModel().getDrawableVertexCount(drawableIndex), this.getModel().getDrawableVertexIndices(drawableIndex), this.getModel().getDrawableVertices(drawableIndex), this.getModel().getDrawableVertexUvs(drawableIndex), this.getModel().getMultiplyColor(drawableIndex), this.getModel().getScreenColor(drawableIndex), this.getModel().getDrawableOpacity(drawableIndex), this.getModel().getDrawableBlendMode(drawableIndex), this.getModel().getDrawableInvertedMaskBit(drawableIndex));\n          }\n        };\n        CubismRenderer_WebGL.prototype.drawMesh = _s3(function (textureNo, indexCount, vertexCount, indexArray, vertexArray, uvArray, multiplyColor, screenColor, opacity, colorBlendMode, invertedMask) {\n          _s3();\n          if (this.isCulling()) {\n            this.gl.enable(this.gl.CULL_FACE);\n          } else {\n            this.gl.disable(this.gl.CULL_FACE);\n          }\n          this.gl.frontFace(this.gl.CCW);\n          var modelColorRGBA = this.getModelColor();\n          if (this.getClippingContextBufferForMask() == null) {\n            modelColorRGBA.A *= opacity;\n            if (this.isPremultipliedAlpha()) {\n              modelColorRGBA.R *= modelColorRGBA.A;\n              modelColorRGBA.G *= modelColorRGBA.A;\n              modelColorRGBA.B *= modelColorRGBA.A;\n            }\n          }\n          var drawtexture;\n          if (this._textures.getValue(textureNo) != null) {\n            drawtexture = this._textures.getValue(textureNo);\n          } else {\n            drawtexture = null;\n          }\n          CubismShader_WebGL.getInstance().setupShaderProgram(this, drawtexture, vertexCount, vertexArray, indexArray, uvArray, this._bufferData, opacity, colorBlendMode, modelColorRGBA, multiplyColor, screenColor, this.isPremultipliedAlpha(), this.getMvpMatrix(), invertedMask);\n          this.gl.drawElements(this.gl.TRIANGLES, indexCount, this.gl.UNSIGNED_SHORT, 0);\n          this.gl.useProgram(null);\n          this.setClippingContextBufferForDraw(null);\n          this.setClippingContextBufferForMask(null);\n        }, \"ZdQBZ3rq7bWAAMQq6hlVCmYF0jM=\", true);\n        CubismRenderer_WebGL.prototype.saveProfile = function () {\n          this._rendererProfile.save();\n        };\n        CubismRenderer_WebGL.prototype.restoreProfile = function () {\n          this._rendererProfile.restore();\n        };\n        CubismRenderer_WebGL.doStaticRelease = function () {\n          CubismShader_WebGL.deleteInstance();\n        };\n        CubismRenderer_WebGL.prototype.setRenderState = function (fbo, viewport) {\n          s_fbo = fbo;\n          s_viewport = viewport;\n        };\n        CubismRenderer_WebGL.prototype.preDraw = function () {\n          if (this.firstDraw) {\n            this.firstDraw = false;\n          }\n          this.gl.disable(this.gl.SCISSOR_TEST);\n          this.gl.disable(this.gl.STENCIL_TEST);\n          this.gl.disable(this.gl.DEPTH_TEST);\n          this.gl.frontFace(this.gl.CW);\n          this.gl.enable(this.gl.BLEND);\n          this.gl.colorMask(true, true, true, true);\n          this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\n          this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n          if (this.getAnisotropy() > 0.0 && this._extension) {\n            for (var i = 0; i < this._textures.getSize(); ++i) {\n              this.gl.bindTexture(this.gl.TEXTURE_2D, this._textures.getValue(i));\n              this.gl.texParameterf(this.gl.TEXTURE_2D, this._extension.TEXTURE_MAX_ANISOTROPY_EXT, this.getAnisotropy());\n            }\n          }\n        };\n        CubismRenderer_WebGL.prototype.setClippingContextBufferForMask = function (clip) {\n          this._clippingContextBufferForMask = clip;\n        };\n        CubismRenderer_WebGL.prototype.getClippingContextBufferForMask = function () {\n          return this._clippingContextBufferForMask;\n        };\n        CubismRenderer_WebGL.prototype.setClippingContextBufferForDraw = function (clip) {\n          this._clippingContextBufferForDraw = clip;\n        };\n        CubismRenderer_WebGL.prototype.getClippingContextBufferForDraw = function () {\n          return this._clippingContextBufferForDraw;\n        };\n        CubismRenderer_WebGL.prototype.startUp = function (gl) {\n          this.gl = gl;\n          if (this._clippingManager) {\n            this._clippingManager.setGL(gl);\n          }\n          CubismShader_WebGL.getInstance().setGl(gl);\n          this._rendererProfile.setGl(gl);\n          this._extension = this.gl.getExtension('EXT_texture_filter_anisotropic') || this.gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic') || this.gl.getExtension('MOZ_EXT_texture_filter_anisotropic');\n        };\n        return CubismRenderer_WebGL;\n      }(cubismrenderer_1.CubismRenderer);\n      exports.CubismRenderer_WebGL = CubismRenderer_WebGL;\n      cubismrenderer_1.CubismRenderer.staticRelease = function () {\n        CubismRenderer_WebGL.doStaticRelease();\n      };\n      var $ = __importStar(__webpack_require__( /*! ./cubismrenderer_webgl */\"../../../Framework/src/rendering/cubismrenderer_webgl.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismClippingContext = $.CubismClippingContext;\n        Live2DCubismFramework.CubismClippingManager_WebGL = $.CubismClippingManager_WebGL;\n        Live2DCubismFramework.CubismRenderTextureResource = $.CubismRenderTextureResource;\n        Live2DCubismFramework.CubismRenderer_WebGL = $.CubismRenderer_WebGL;\n        Live2DCubismFramework.CubismShaderSet = $.CubismShaderSet;\n        Live2DCubismFramework.CubismShader_WebGL = $.CubismShader_WebGL;\n        Live2DCubismFramework.ShaderNames = $.ShaderNames;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/type/csmmap.ts\":\n    /*!*********************************************!*\\\n      !*** ../../../Framework/src/type/csmmap.ts ***!\n      \\*********************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.iterator = exports.csmMap = exports.csmPair = void 0;\n      var cubismdebug_1 = __webpack_require__( /*! ../utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var csmPair = function () {\n        function csmPair(key, value) {\n          this.first = key == undefined ? null : key;\n          this.second = value == undefined ? null : value;\n        }\n        return csmPair;\n      }();\n      exports.csmPair = csmPair;\n      var csmMap = exports.csmMap = function () {\n        function csmMap(size) {\n          if (size != undefined) {\n            if (size < 1) {\n              this._keyValues = [];\n              this._dummyValue = null;\n              this._size = 0;\n            } else {\n              this._keyValues = new Array(size);\n              this._size = size;\n            }\n          } else {\n            this._keyValues = [];\n            this._dummyValue = null;\n            this._size = 0;\n          }\n        }\n        csmMap.prototype.release = function () {\n          this.clear();\n        };\n        csmMap.prototype.appendKey = function (key) {\n          this.prepareCapacity(this._size + 1, false);\n          this._keyValues[this._size] = new csmPair(key);\n          this._size += 1;\n        };\n        csmMap.prototype.getValue = function (key) {\n          var found = -1;\n          for (var i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n              found = i;\n              break;\n            }\n          }\n          if (found >= 0) {\n            return this._keyValues[found].second;\n          } else {\n            this.appendKey(key);\n            return this._keyValues[this._size - 1].second;\n          }\n        };\n        csmMap.prototype.setValue = function (key, value) {\n          var found = -1;\n          for (var i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n              found = i;\n              break;\n            }\n          }\n          if (found >= 0) {\n            this._keyValues[found].second = value;\n          } else {\n            this.appendKey(key);\n            this._keyValues[this._size - 1].second = value;\n          }\n        };\n        csmMap.prototype.isExist = function (key) {\n          for (var i = 0; i < this._size; i++) {\n            if (this._keyValues[i].first == key) {\n              return true;\n            }\n          }\n          return false;\n        };\n        csmMap.prototype.clear = function () {\n          this._keyValues = void 0;\n          this._keyValues = null;\n          this._keyValues = [];\n          this._size = 0;\n        };\n        csmMap.prototype.getSize = function () {\n          return this._size;\n        };\n        csmMap.prototype.prepareCapacity = function (newSize, fitToSize) {\n          if (newSize > this._keyValues.length) {\n            if (this._keyValues.length == 0) {\n              if (!fitToSize && newSize < csmMap.DefaultSize) newSize = csmMap.DefaultSize;\n              this._keyValues.length = newSize;\n            } else {\n              if (!fitToSize && newSize < this._keyValues.length * 2) newSize = this._keyValues.length * 2;\n              this._keyValues.length = newSize;\n            }\n          }\n        };\n        csmMap.prototype.begin = function () {\n          var ite = new iterator(this, 0);\n          return ite;\n        };\n        csmMap.prototype.end = function () {\n          var ite = new iterator(this, this._size);\n          return ite;\n        };\n        csmMap.prototype.erase = function (ite) {\n          var index = ite._index;\n          if (index < 0 || this._size <= index) {\n            return ite;\n          }\n          this._keyValues.splice(index, 1);\n          --this._size;\n          var ite2 = new iterator(this, index);\n          return ite2;\n        };\n        csmMap.prototype.dumpAsInt = function () {\n          for (var i = 0; i < this._size; i++) {\n            (0, cubismdebug_1.CubismLogDebug)('{0} ,', this._keyValues[i]);\n            (0, cubismdebug_1.CubismLogDebug)('\\n');\n          }\n        };\n        csmMap.DefaultSize = 10;\n        return csmMap;\n      }();\n      var iterator = function () {\n        function iterator(v, idx) {\n          this._map = v != undefined ? v : new csmMap();\n          this._index = idx != undefined ? idx : 0;\n        }\n        iterator.prototype.set = function (ite) {\n          this._index = ite._index;\n          this._map = ite._map;\n          return this;\n        };\n        iterator.prototype.preIncrement = function () {\n          ++this._index;\n          return this;\n        };\n        iterator.prototype.preDecrement = function () {\n          --this._index;\n          return this;\n        };\n        iterator.prototype.increment = function () {\n          var iteold = new iterator(this._map, this._index++);\n          return iteold;\n        };\n        iterator.prototype.decrement = function () {\n          var iteold = new iterator(this._map, this._index);\n          this._map = iteold._map;\n          this._index = iteold._index;\n          return this;\n        };\n        iterator.prototype.ptr = function () {\n          return this._map._keyValues[this._index];\n        };\n        iterator.prototype.notEqual = function (ite) {\n          return this._index != ite._index || this._map != ite._map;\n        };\n        return iterator;\n      }();\n      exports.iterator = iterator;\n      var $ = __importStar(__webpack_require__( /*! ./csmmap */\"../../../Framework/src/type/csmmap.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.csmMap = $.csmMap;\n        Live2DCubismFramework.csmPair = $.csmPair;\n        Live2DCubismFramework.iterator = $.iterator;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/type/csmrectf.ts\":\n    /*!***********************************************!*\\\n      !*** ../../../Framework/src/type/csmrectf.ts ***!\n      \\***********************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.csmRect = void 0;\n      var csmRect = function () {\n        function csmRect(x, y, w, h) {\n          this.x = x;\n          this.y = y;\n          this.width = w;\n          this.height = h;\n        }\n        csmRect.prototype.getCenterX = function () {\n          return this.x + 0.5 * this.width;\n        };\n        csmRect.prototype.getCenterY = function () {\n          return this.y + 0.5 * this.height;\n        };\n        csmRect.prototype.getRight = function () {\n          return this.x + this.width;\n        };\n        csmRect.prototype.getBottom = function () {\n          return this.y + this.height;\n        };\n        csmRect.prototype.setRect = function (r) {\n          this.x = r.x;\n          this.y = r.y;\n          this.width = r.width;\n          this.height = r.height;\n        };\n        csmRect.prototype.expand = function (w, h) {\n          this.x -= w;\n          this.y -= h;\n          this.width += w * 2.0;\n          this.height += h * 2.0;\n        };\n        return csmRect;\n      }();\n      exports.csmRect = csmRect;\n      var $ = __importStar(__webpack_require__( /*! ./csmrectf */\"../../../Framework/src/type/csmrectf.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.csmRect = $.csmRect;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/type/csmstring.ts\":\n    /*!************************************************!*\\\n      !*** ../../../Framework/src/type/csmstring.ts ***!\n      \\************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.csmString = void 0;\n      var csmString = function () {\n        function csmString(s) {\n          this.s = s;\n        }\n        csmString.prototype.append = function (c, length) {\n          this.s += length !== undefined ? c.substr(0, length) : c;\n          return this;\n        };\n        csmString.prototype.expansion = function (length, v) {\n          for (var i = 0; i < length; i++) {\n            this.append(v);\n          }\n          return this;\n        };\n        csmString.prototype.getBytes = function () {\n          return encodeURIComponent(this.s).replace(/%../g, 'x').length;\n        };\n        csmString.prototype.getLength = function () {\n          return this.s.length;\n        };\n        csmString.prototype.isLess = function (s) {\n          return this.s < s.s;\n        };\n        csmString.prototype.isGreat = function (s) {\n          return this.s > s.s;\n        };\n        csmString.prototype.isEqual = function (s) {\n          return this.s == s;\n        };\n        csmString.prototype.isEmpty = function () {\n          return this.s.length == 0;\n        };\n        return csmString;\n      }();\n      exports.csmString = csmString;\n      var $ = __importStar(__webpack_require__( /*! ./csmstring */\"../../../Framework/src/type/csmstring.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.csmString = $.csmString;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/type/csmvector.ts\":\n    /*!************************************************!*\\\n      !*** ../../../Framework/src/type/csmvector.ts ***!\n      \\************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.iterator = exports.csmVector = void 0;\n      var csmVector = exports.csmVector = function () {\n        function csmVector(initialCapacity) {\n          if (initialCapacity === void 0) {\n            initialCapacity = 0;\n          }\n          if (initialCapacity < 1) {\n            this._ptr = [];\n            this._capacity = 0;\n            this._size = 0;\n          } else {\n            this._ptr = new Array(initialCapacity);\n            this._capacity = initialCapacity;\n            this._size = 0;\n          }\n        }\n        csmVector.prototype.at = function (index) {\n          return this._ptr[index];\n        };\n        csmVector.prototype.set = function (index, value) {\n          this._ptr[index] = value;\n        };\n        csmVector.prototype.get = function (offset) {\n          if (offset === void 0) {\n            offset = 0;\n          }\n          var ret = new Array();\n          for (var i = offset; i < this._size; i++) {\n            ret.push(this._ptr[i]);\n          }\n          return ret;\n        };\n        csmVector.prototype.pushBack = function (value) {\n          if (this._size >= this._capacity) {\n            this.prepareCapacity(this._capacity == 0 ? csmVector.s_defaultSize : this._capacity * 2);\n          }\n          this._ptr[this._size++] = value;\n        };\n        csmVector.prototype.clear = function () {\n          this._ptr.length = 0;\n          this._size = 0;\n        };\n        csmVector.prototype.getSize = function () {\n          return this._size;\n        };\n        csmVector.prototype.assign = function (newSize, value) {\n          var curSize = this._size;\n          if (curSize < newSize) {\n            this.prepareCapacity(newSize);\n          }\n          for (var i = 0; i < newSize; i++) {\n            this._ptr[i] = value;\n          }\n          this._size = newSize;\n        };\n        csmVector.prototype.resize = function (newSize, value) {\n          if (value === void 0) {\n            value = null;\n          }\n          this.updateSize(newSize, value, true);\n        };\n        csmVector.prototype.updateSize = function (newSize, value, callPlacementNew) {\n          if (value === void 0) {\n            value = null;\n          }\n          if (callPlacementNew === void 0) {\n            callPlacementNew = true;\n          }\n          var curSize = this._size;\n          if (curSize < newSize) {\n            this.prepareCapacity(newSize);\n            if (callPlacementNew) {\n              for (var i = this._size; i < newSize; i++) {\n                if (typeof value == 'function') {\n                  this._ptr[i] = JSON.parse(JSON.stringify(new value()));\n                } else {\n                  this._ptr[i] = value;\n                }\n              }\n            } else {\n              for (var i = this._size; i < newSize; i++) {\n                this._ptr[i] = value;\n              }\n            }\n          } else {\n            var sub = this._size - newSize;\n            this._ptr.splice(this._size - sub, sub);\n          }\n          this._size = newSize;\n        };\n        csmVector.prototype.insert = function (position, begin, end) {\n          var dstSi = position._index;\n          var srcSi = begin._index;\n          var srcEi = end._index;\n          var addCount = srcEi - srcSi;\n          this.prepareCapacity(this._size + addCount);\n          var addSize = this._size - dstSi;\n          if (addSize > 0) {\n            for (var i = 0; i < addSize; i++) {\n              this._ptr.splice(dstSi + i, 0, null);\n            }\n          }\n          for (var i = srcSi; i < srcEi; i++, dstSi++) {\n            this._ptr[dstSi] = begin._vector._ptr[i];\n          }\n          this._size = this._size + addCount;\n        };\n        csmVector.prototype.remove = function (index) {\n          if (index < 0 || this._size <= index) {\n            return false;\n          }\n          this._ptr.splice(index, 1);\n          --this._size;\n          return true;\n        };\n        csmVector.prototype.erase = function (ite) {\n          var index = ite._index;\n          if (index < 0 || this._size <= index) {\n            return ite;\n          }\n          this._ptr.splice(index, 1);\n          --this._size;\n          var ite2 = new iterator(this, index);\n          return ite2;\n        };\n        csmVector.prototype.prepareCapacity = function (newSize) {\n          if (newSize > this._capacity) {\n            if (this._capacity == 0) {\n              this._ptr = new Array(newSize);\n              this._capacity = newSize;\n            } else {\n              this._ptr.length = newSize;\n              this._capacity = newSize;\n            }\n          }\n        };\n        csmVector.prototype.begin = function () {\n          var ite = this._size == 0 ? this.end() : new iterator(this, 0);\n          return ite;\n        };\n        csmVector.prototype.end = function () {\n          var ite = new iterator(this, this._size);\n          return ite;\n        };\n        csmVector.prototype.getOffset = function (offset) {\n          var newVector = new csmVector();\n          newVector._ptr = this.get(offset);\n          newVector._size = this.get(offset).length;\n          newVector._capacity = this.get(offset).length;\n          return newVector;\n        };\n        csmVector.s_defaultSize = 10;\n        return csmVector;\n      }();\n      var iterator = function () {\n        function iterator(v, index) {\n          this._vector = v != undefined ? v : null;\n          this._index = index != undefined ? index : 0;\n        }\n        iterator.prototype.set = function (ite) {\n          this._index = ite._index;\n          this._vector = ite._vector;\n          return this;\n        };\n        iterator.prototype.preIncrement = function () {\n          ++this._index;\n          return this;\n        };\n        iterator.prototype.preDecrement = function () {\n          --this._index;\n          return this;\n        };\n        iterator.prototype.increment = function () {\n          var iteold = new iterator(this._vector, this._index++);\n          return iteold;\n        };\n        iterator.prototype.decrement = function () {\n          var iteold = new iterator(this._vector, this._index--);\n          return iteold;\n        };\n        iterator.prototype.ptr = function () {\n          return this._vector._ptr[this._index];\n        };\n        iterator.prototype.substitution = function (ite) {\n          this._index = ite._index;\n          this._vector = ite._vector;\n          return this;\n        };\n        iterator.prototype.notEqual = function (ite) {\n          return this._index != ite._index || this._vector != ite._vector;\n        };\n        return iterator;\n      }();\n      exports.iterator = iterator;\n      var $ = __importStar(__webpack_require__( /*! ./csmvector */\"../../../Framework/src/type/csmvector.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.csmVector = $.csmVector;\n        Live2DCubismFramework.iterator = $.iterator;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/utils/cubismdebug.ts\":\n    /*!***************************************************!*\\\n      !*** ../../../Framework/src/utils/cubismdebug.ts ***!\n      \\***************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.CubismDebug = exports.CubismLogError = exports.CubismLogWarning = exports.CubismLogInfo = exports.CubismLogDebug = exports.CubismLogVerbose = exports.CSM_ASSERT = exports.CubismLogPrintIn = exports.CubismLogPrint = void 0;\n      var cubismframeworkconfig_1 = __webpack_require__( /*! ../cubismframeworkconfig */\"../../../Framework/src/cubismframeworkconfig.ts\");\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var CubismLogPrint = function (level, fmt, args) {\n        CubismDebug.print(level, '[CSM]' + fmt, args);\n      };\n      exports.CubismLogPrint = CubismLogPrint;\n      var CubismLogPrintIn = function (level, fmt, args) {\n        (0, exports.CubismLogPrint)(level, fmt + '\\n', args);\n      };\n      exports.CubismLogPrintIn = CubismLogPrintIn;\n      var CSM_ASSERT = function (expr) {\n        console.assert(expr);\n      };\n      exports.CSM_ASSERT = CSM_ASSERT;\n      if (cubismframeworkconfig_1.CSM_LOG_LEVEL <= cubismframeworkconfig_1.CSM_LOG_LEVEL_VERBOSE) {\n        exports.CubismLogVerbose = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Verbose, '[V]' + fmt, args);\n        };\n        exports.CubismLogDebug = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n        };\n        exports.CubismLogInfo = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Info, '[I]' + fmt, args);\n        };\n        exports.CubismLogWarning = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n        };\n        exports.CubismLogError = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n        };\n      } else if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_DEBUG) {\n        exports.CubismLogDebug = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n        };\n        exports.CubismLogInfo = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Info, '[I]' + fmt, args);\n        };\n        exports.CubismLogWarning = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n        };\n        exports.CubismLogError = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n        };\n      } else if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_INFO) {\n        exports.CubismLogInfo = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Info, '[I]' + fmt, args);\n        };\n        exports.CubismLogWarning = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n        };\n        exports.CubismLogError = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n        };\n      } else if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_WARNING) {\n        exports.CubismLogWarning = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n        };\n        exports.CubismLogError = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n        };\n      } else if (cubismframeworkconfig_1.CSM_LOG_LEVEL == cubismframeworkconfig_1.CSM_LOG_LEVEL_ERROR) {\n        exports.CubismLogError = function (fmt) {\n          var args = [];\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n          (0, exports.CubismLogPrintIn)(live2dcubismframework_1.LogLevel.LogLevel_Error, '[E]' + fmt, args);\n        };\n      }\n      var CubismDebug = function () {\n        function CubismDebug() {}\n        CubismDebug.print = function (logLevel, format, args) {\n          if (logLevel < live2dcubismframework_1.CubismFramework.getLoggingLevel()) {\n            return;\n          }\n          var logPrint = live2dcubismframework_1.CubismFramework.coreLogFunction;\n          if (!logPrint) return;\n          var buffer = format.replace(/\\{(\\d+)\\}/g, function (m, k) {\n            return args[k];\n          });\n          logPrint(buffer);\n        };\n        CubismDebug.dumpBytes = function (logLevel, data, length) {\n          for (var i = 0; i < length; i++) {\n            if (i % 16 == 0 && i > 0) this.print(logLevel, '\\n');else if (i % 8 == 0 && i > 0) this.print(logLevel, '  ');\n            this.print(logLevel, '{0} ', [data[i] & 0xff]);\n          }\n          this.print(logLevel, '\\n');\n        };\n        return CubismDebug;\n      }();\n      exports.CubismDebug = CubismDebug;\n      var $ = __importStar(__webpack_require__( /*! ./cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\"));\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismDebug = $.CubismDebug;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/utils/cubismjson.ts\":\n    /*!**************************************************!*\\\n      !*** ../../../Framework/src/utils/cubismjson.ts ***!\n      \\**************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Live2DCubismFramework = exports.JsonMap = exports.JsonArray = exports.JsonNullvalue = exports.JsonError = exports.JsonString = exports.JsonBoolean = exports.JsonFloat = exports.CubismJson = exports.Value = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! ../live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var csmmap_1 = __webpack_require__( /*! ../type/csmmap */\"../../../Framework/src/type/csmmap.ts\");\n      var csmstring_1 = __webpack_require__( /*! ../type/csmstring */\"../../../Framework/src/type/csmstring.ts\");\n      var csmvector_1 = __webpack_require__( /*! ../type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! ./cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var CSM_JSON_ERROR_TYPE_MISMATCH = 'Error: type mismatch';\n      var CSM_JSON_ERROR_INDEX_OF_BOUNDS = 'Error: index out of bounds';\n      var Value = function () {\n        function Value() {}\n        Value.prototype.getRawString = function (defaultValue, indent) {\n          return this.getString(defaultValue, indent);\n        };\n        Value.prototype.toInt = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = 0;\n          }\n          return defaultValue;\n        };\n        Value.prototype.toFloat = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = 0;\n          }\n          return defaultValue;\n        };\n        Value.prototype.toBoolean = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = false;\n          }\n          return defaultValue;\n        };\n        Value.prototype.getSize = function () {\n          return 0;\n        };\n        Value.prototype.getArray = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = null;\n          }\n          return defaultValue;\n        };\n        Value.prototype.getVector = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = new csmvector_1.csmVector();\n          }\n          return defaultValue;\n        };\n        Value.prototype.getMap = function (defaultValue) {\n          return defaultValue;\n        };\n        Value.prototype.getValueByIndex = function (index) {\n          return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n        };\n        Value.prototype.getValueByString = function (s) {\n          return Value.nullValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n        };\n        Value.prototype.getKeys = function () {\n          return Value.s_dummyKeys;\n        };\n        Value.prototype.isError = function () {\n          return false;\n        };\n        Value.prototype.isNull = function () {\n          return false;\n        };\n        Value.prototype.isBool = function () {\n          return false;\n        };\n        Value.prototype.isFloat = function () {\n          return false;\n        };\n        Value.prototype.isString = function () {\n          return false;\n        };\n        Value.prototype.isArray = function () {\n          return false;\n        };\n        Value.prototype.isMap = function () {\n          return false;\n        };\n        Value.prototype.equals = function (value) {\n          return false;\n        };\n        Value.prototype.isStatic = function () {\n          return false;\n        };\n        Value.prototype.setErrorNotForClientCall = function (errorStr) {\n          return JsonError.errorValue;\n        };\n        Value.staticInitializeNotForClientCall = function () {\n          JsonBoolean.trueValue = new JsonBoolean(true);\n          JsonBoolean.falseValue = new JsonBoolean(false);\n          Value.errorValue = new JsonError('ERROR', true);\n          Value.nullValue = new JsonNullvalue();\n          Value.s_dummyKeys = new csmvector_1.csmVector();\n        };\n        Value.staticReleaseNotForClientCall = function () {\n          JsonBoolean.trueValue = null;\n          JsonBoolean.falseValue = null;\n          Value.errorValue = null;\n          Value.nullValue = null;\n          Value.s_dummyKeys = null;\n        };\n        return Value;\n      }();\n      exports.Value = Value;\n      var CubismJson = function () {\n        function CubismJson(buffer, length) {\n          this._parseCallback = cubismjsonextension_1.CubismJsonExtension.parseJsonObject;\n          this._error = null;\n          this._lineCount = 0;\n          this._root = null;\n          if (buffer != undefined) {\n            this.parseBytes(buffer, length, this._parseCallback);\n          }\n        }\n        CubismJson.create = function (buffer, size) {\n          var json = new CubismJson();\n          var succeeded = json.parseBytes(buffer, size, json._parseCallback);\n          if (!succeeded) {\n            CubismJson.delete(json);\n            return null;\n          } else {\n            return json;\n          }\n        };\n        CubismJson.delete = function (instance) {\n          instance = null;\n        };\n        CubismJson.prototype.getRoot = function () {\n          return this._root;\n        };\n        CubismJson.arrayBufferToString = function (buffer) {\n          var uint8Array = new Uint8Array(buffer);\n          var str = '';\n          for (var i = 0, len = uint8Array.length; i < len; ++i) {\n            str += '%' + this.pad(uint8Array[i].toString(16));\n          }\n          str = decodeURIComponent(str);\n          return str;\n        };\n        CubismJson.pad = function (n) {\n          return n.length < 2 ? '0' + n : n;\n        };\n        CubismJson.prototype.parseBytes = function (buffer, size, parseCallback) {\n          var endPos = new Array(1);\n          var decodeBuffer = CubismJson.arrayBufferToString(buffer);\n          if (parseCallback == undefined) {\n            this._root = this.parseValue(decodeBuffer, size, 0, endPos);\n          } else {\n            this._root = parseCallback(JSON.parse(decodeBuffer), new JsonMap());\n          }\n          if (this._error) {\n            var strbuf = '\\0';\n            strbuf = 'Json parse error : @line ' + (this._lineCount + 1) + '\\n';\n            this._root = new JsonString(strbuf);\n            (0, cubismdebug_1.CubismLogInfo)('{0}', this._root.getRawString());\n            return false;\n          } else if (this._root == null) {\n            this._root = new JsonError(new csmstring_1.csmString(this._error), false);\n            return false;\n          }\n          return true;\n        };\n        CubismJson.prototype.getParseError = function () {\n          return this._error;\n        };\n        CubismJson.prototype.checkEndOfFile = function () {\n          return this._root.getArray()[1].equals('EOF');\n        };\n        CubismJson.prototype.parseValue = function (buffer, length, begin, outEndPos) {\n          if (this._error) return null;\n          var o = null;\n          var i = begin;\n          var f;\n          for (; i < length; i++) {\n            var c = buffer[i];\n            switch (c) {\n              case '-':\n              case '.':\n              case '0':\n              case '1':\n              case '2':\n              case '3':\n              case '4':\n              case '5':\n              case '6':\n              case '7':\n              case '8':\n              case '9':\n                {\n                  var afterString = new Array(1);\n                  f = (0, live2dcubismframework_1.strtod)(buffer.slice(i), afterString);\n                  outEndPos[0] = buffer.indexOf(afterString[0]);\n                  return new JsonFloat(f);\n                }\n              case '\"':\n                return new JsonString(this.parseString(buffer, length, i + 1, outEndPos));\n              case '[':\n                o = this.parseArray(buffer, length, i + 1, outEndPos);\n                return o;\n              case '{':\n                o = this.parseObject(buffer, length, i + 1, outEndPos);\n                return o;\n              case 'n':\n                if (i + 3 < length) {\n                  o = new JsonNullvalue();\n                  outEndPos[0] = i + 4;\n                } else {\n                  this._error = 'parse null';\n                }\n                return o;\n              case 't':\n                if (i + 3 < length) {\n                  o = JsonBoolean.trueValue;\n                  outEndPos[0] = i + 4;\n                } else {\n                  this._error = 'parse true';\n                }\n                return o;\n              case 'f':\n                if (i + 4 < length) {\n                  o = JsonBoolean.falseValue;\n                  outEndPos[0] = i + 5;\n                } else {\n                  this._error = \"illegal ',' position\";\n                }\n                return o;\n              case ',':\n                this._error = \"illegal ',' position\";\n                return null;\n              case ']':\n                outEndPos[0] = i;\n                return null;\n              case '\\n':\n                this._lineCount++;\n              case ' ':\n              case '\\t':\n              case '\\r':\n              default:\n                break;\n            }\n          }\n          this._error = 'illegal end of value';\n          return null;\n        };\n        CubismJson.prototype.parseString = function (string, length, begin, outEndPos) {\n          if (this._error) return null;\n          var i = begin;\n          var c, c2;\n          var ret = new csmstring_1.csmString('');\n          var bufStart = begin;\n          for (; i < length; i++) {\n            c = string[i];\n            switch (c) {\n              case '\"':\n                {\n                  outEndPos[0] = i + 1;\n                  ret.append(string.slice(bufStart), i - bufStart);\n                  return ret.s;\n                }\n              case '//':\n                {\n                  i++;\n                  if (i - 1 > bufStart) {\n                    ret.append(string.slice(bufStart), i - bufStart);\n                  }\n                  bufStart = i + 1;\n                  if (i < length) {\n                    c2 = string[i];\n                    switch (c2) {\n                      case '\\\\':\n                        ret.expansion(1, '\\\\');\n                        break;\n                      case '\"':\n                        ret.expansion(1, '\"');\n                        break;\n                      case '/':\n                        ret.expansion(1, '/');\n                        break;\n                      case 'b':\n                        ret.expansion(1, '\\b');\n                        break;\n                      case 'f':\n                        ret.expansion(1, '\\f');\n                        break;\n                      case 'n':\n                        ret.expansion(1, '\\n');\n                        break;\n                      case 'r':\n                        ret.expansion(1, '\\r');\n                        break;\n                      case 't':\n                        ret.expansion(1, '\\t');\n                        break;\n                      case 'u':\n                        this._error = 'parse string/unicord escape not supported';\n                        break;\n                      default:\n                        break;\n                    }\n                  } else {\n                    this._error = 'parse string/escape error';\n                  }\n                }\n              default:\n                {\n                  break;\n                }\n            }\n          }\n          this._error = 'parse string/illegal end';\n          return null;\n        };\n        CubismJson.prototype.parseObject = function (buffer, length, begin, outEndPos) {\n          if (this._error) return null;\n          var ret = new JsonMap();\n          var key = '';\n          var i = begin;\n          var c = '';\n          var localRetEndPos2 = Array(1);\n          var ok = false;\n          for (; i < length; i++) {\n            FOR_LOOP: for (; i < length; i++) {\n              c = buffer[i];\n              switch (c) {\n                case '\"':\n                  key = this.parseString(buffer, length, i + 1, localRetEndPos2);\n                  if (this._error) {\n                    return null;\n                  }\n                  i = localRetEndPos2[0];\n                  ok = true;\n                  break FOR_LOOP;\n                case '}':\n                  outEndPos[0] = i + 1;\n                  return ret;\n                case ':':\n                  this._error = \"illegal ':' position\";\n                  break;\n                case '\\n':\n                  this._lineCount++;\n                default:\n                  break;\n              }\n            }\n            if (!ok) {\n              this._error = 'key not found';\n              return null;\n            }\n            ok = false;\n            FOR_LOOP2: for (; i < length; i++) {\n              c = buffer[i];\n              switch (c) {\n                case ':':\n                  ok = true;\n                  i++;\n                  break FOR_LOOP2;\n                case '}':\n                  this._error = \"illegal '}' position\";\n                  break;\n                case '\\n':\n                  this._lineCount++;\n                default:\n                  break;\n              }\n            }\n            if (!ok) {\n              this._error = \"':' not found\";\n              return null;\n            }\n            var value = this.parseValue(buffer, length, i, localRetEndPos2);\n            if (this._error) {\n              return null;\n            }\n            i = localRetEndPos2[0];\n            ret.put(key, value);\n            FOR_LOOP3: for (; i < length; i++) {\n              c = buffer[i];\n              switch (c) {\n                case ',':\n                  break FOR_LOOP3;\n                case '}':\n                  outEndPos[0] = i + 1;\n                  return ret;\n                case '\\n':\n                  this._lineCount++;\n                default:\n                  break;\n              }\n            }\n          }\n          this._error = 'illegal end of perseObject';\n          return null;\n        };\n        CubismJson.prototype.parseArray = function (buffer, length, begin, outEndPos) {\n          if (this._error) return null;\n          var ret = new JsonArray();\n          var i = begin;\n          var c;\n          var localRetEndpos2 = new Array(1);\n          for (; i < length; i++) {\n            var value = this.parseValue(buffer, length, i, localRetEndpos2);\n            if (this._error) {\n              return null;\n            }\n            i = localRetEndpos2[0];\n            if (value) {\n              ret.add(value);\n            }\n            FOR_LOOP: for (; i < length; i++) {\n              c = buffer[i];\n              switch (c) {\n                case ',':\n                  break FOR_LOOP;\n                case ']':\n                  outEndPos[0] = i + 1;\n                  return ret;\n                case '\\n':\n                  ++this._lineCount;\n                default:\n                  break;\n              }\n            }\n          }\n          ret = void 0;\n          this._error = 'illegal end of parseObject';\n          return null;\n        };\n        return CubismJson;\n      }();\n      exports.CubismJson = CubismJson;\n      var JsonFloat = function (_super) {\n        __extends(JsonFloat, _super);\n        function JsonFloat(v) {\n          var _this = _super.call(this) || this;\n          _this._value = v;\n          return _this;\n        }\n        JsonFloat.prototype.isFloat = function () {\n          return true;\n        };\n        JsonFloat.prototype.getString = function (defaultValue, indent) {\n          var strbuf = '\\0';\n          this._value = parseFloat(strbuf);\n          this._stringBuffer = strbuf;\n          return this._stringBuffer;\n        };\n        JsonFloat.prototype.toInt = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = 0;\n          }\n          return parseInt(this._value.toString());\n        };\n        JsonFloat.prototype.toFloat = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = 0.0;\n          }\n          return this._value;\n        };\n        JsonFloat.prototype.equals = function (value) {\n          if ('number' === typeof value) {\n            if (Math.round(value)) {\n              return false;\n            } else {\n              return value == this._value;\n            }\n          }\n          return false;\n        };\n        return JsonFloat;\n      }(Value);\n      exports.JsonFloat = JsonFloat;\n      var JsonBoolean = function (_super) {\n        __extends(JsonBoolean, _super);\n        function JsonBoolean(v) {\n          var _this = _super.call(this) || this;\n          _this._boolValue = v;\n          return _this;\n        }\n        JsonBoolean.prototype.isBool = function () {\n          return true;\n        };\n        JsonBoolean.prototype.toBoolean = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = false;\n          }\n          return this._boolValue;\n        };\n        JsonBoolean.prototype.getString = function (defaultValue, indent) {\n          this._stringBuffer = this._boolValue ? 'true' : 'false';\n          return this._stringBuffer;\n        };\n        JsonBoolean.prototype.equals = function (value) {\n          if ('boolean' === typeof value) {\n            return value == this._boolValue;\n          }\n          return false;\n        };\n        JsonBoolean.prototype.isStatic = function () {\n          return true;\n        };\n        return JsonBoolean;\n      }(Value);\n      exports.JsonBoolean = JsonBoolean;\n      var JsonString = function (_super) {\n        __extends(JsonString, _super);\n        function JsonString(s) {\n          var _this = _super.call(this) || this;\n          if ('string' === typeof s) {\n            _this._stringBuffer = s;\n          }\n          if (s instanceof csmstring_1.csmString) {\n            _this._stringBuffer = s.s;\n          }\n          return _this;\n        }\n        JsonString.prototype.isString = function () {\n          return true;\n        };\n        JsonString.prototype.getString = function (defaultValue, indent) {\n          return this._stringBuffer;\n        };\n        JsonString.prototype.equals = function (value) {\n          if ('string' === typeof value) {\n            return this._stringBuffer == value;\n          }\n          if (value instanceof csmstring_1.csmString) {\n            return this._stringBuffer == value.s;\n          }\n          return false;\n        };\n        return JsonString;\n      }(Value);\n      exports.JsonString = JsonString;\n      var JsonError = function (_super) {\n        __extends(JsonError, _super);\n        function JsonError(s, isStatic) {\n          var _this = this;\n          if ('string' === typeof s) {\n            _this = _super.call(this, s) || this;\n          } else {\n            _this = _super.call(this, s) || this;\n          }\n          _this._isStatic = isStatic;\n          return _this;\n        }\n        JsonError.prototype.isStatic = function () {\n          return this._isStatic;\n        };\n        JsonError.prototype.setErrorNotForClientCall = function (s) {\n          this._stringBuffer = s;\n          return this;\n        };\n        JsonError.prototype.isError = function () {\n          return true;\n        };\n        return JsonError;\n      }(JsonString);\n      exports.JsonError = JsonError;\n      var JsonNullvalue = function (_super) {\n        __extends(JsonNullvalue, _super);\n        function JsonNullvalue() {\n          var _this = _super.call(this) || this;\n          _this._stringBuffer = 'NullValue';\n          return _this;\n        }\n        JsonNullvalue.prototype.isNull = function () {\n          return true;\n        };\n        JsonNullvalue.prototype.getString = function (defaultValue, indent) {\n          return this._stringBuffer;\n        };\n        JsonNullvalue.prototype.isStatic = function () {\n          return true;\n        };\n        JsonNullvalue.prototype.setErrorNotForClientCall = function (s) {\n          this._stringBuffer = s;\n          return JsonError.nullValue;\n        };\n        return JsonNullvalue;\n      }(Value);\n      exports.JsonNullvalue = JsonNullvalue;\n      var JsonArray = function (_super) {\n        __extends(JsonArray, _super);\n        function JsonArray() {\n          var _this = _super.call(this) || this;\n          _this._array = new csmvector_1.csmVector();\n          return _this;\n        }\n        JsonArray.prototype.release = function () {\n          for (var ite = this._array.begin(); ite.notEqual(this._array.end()); ite.preIncrement()) {\n            var v = ite.ptr();\n            if (v && !v.isStatic()) {\n              v = void 0;\n              v = null;\n            }\n          }\n        };\n        JsonArray.prototype.isArray = function () {\n          return true;\n        };\n        JsonArray.prototype.getValueByIndex = function (index) {\n          if (index < 0 || this._array.getSize() <= index) {\n            return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_INDEX_OF_BOUNDS);\n          }\n          var v = this._array.at(index);\n          if (v == null) {\n            return Value.nullValue;\n          }\n          return v;\n        };\n        JsonArray.prototype.getValueByString = function (s) {\n          return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n        };\n        JsonArray.prototype.getString = function (defaultValue, indent) {\n          var stringBuffer = indent + '[\\n';\n          for (var ite = this._array.begin(); ite.notEqual(this._array.end()); ite.increment()) {\n            var v = ite.ptr();\n            this._stringBuffer += indent + '' + v.getString(indent + ' ') + '\\n';\n          }\n          this._stringBuffer = stringBuffer + indent + ']\\n';\n          return this._stringBuffer;\n        };\n        JsonArray.prototype.add = function (v) {\n          this._array.pushBack(v);\n        };\n        JsonArray.prototype.getVector = function (defaultValue) {\n          if (defaultValue === void 0) {\n            defaultValue = null;\n          }\n          return this._array;\n        };\n        JsonArray.prototype.getSize = function () {\n          return this._array.getSize();\n        };\n        return JsonArray;\n      }(Value);\n      exports.JsonArray = JsonArray;\n      var JsonMap = function (_super) {\n        __extends(JsonMap, _super);\n        function JsonMap() {\n          var _this = _super.call(this) || this;\n          _this._map = new csmmap_1.csmMap();\n          return _this;\n        }\n        JsonMap.prototype.release = function () {\n          var ite = this._map.begin();\n          while (ite.notEqual(this._map.end())) {\n            var v = ite.ptr().second;\n            if (v && !v.isStatic()) {\n              v = void 0;\n              v = null;\n            }\n            ite.preIncrement();\n          }\n        };\n        JsonMap.prototype.isMap = function () {\n          return true;\n        };\n        JsonMap.prototype.getValueByString = function (s) {\n          if (s instanceof csmstring_1.csmString) {\n            var ret = this._map.getValue(s.s);\n            if (ret == null) {\n              return Value.nullValue;\n            }\n            return ret;\n          }\n          for (var iter = this._map.begin(); iter.notEqual(this._map.end()); iter.preIncrement()) {\n            if (iter.ptr().first == s) {\n              if (iter.ptr().second == null) {\n                return Value.nullValue;\n              }\n              return iter.ptr().second;\n            }\n          }\n          return Value.nullValue;\n        };\n        JsonMap.prototype.getValueByIndex = function (index) {\n          return Value.errorValue.setErrorNotForClientCall(CSM_JSON_ERROR_TYPE_MISMATCH);\n        };\n        JsonMap.prototype.getString = function (defaultValue, indent) {\n          this._stringBuffer = indent + '{\\n';\n          var ite = this._map.begin();\n          while (ite.notEqual(this._map.end())) {\n            var key = ite.ptr().first;\n            var v = ite.ptr().second;\n            this._stringBuffer += indent + ' ' + key + ' : ' + v.getString(indent + '   ') + ' \\n';\n            ite.preIncrement();\n          }\n          this._stringBuffer += indent + '}\\n';\n          return this._stringBuffer;\n        };\n        JsonMap.prototype.getMap = function (defaultValue) {\n          return this._map;\n        };\n        JsonMap.prototype.put = function (key, v) {\n          this._map.setValue(key, v);\n        };\n        JsonMap.prototype.getKeys = function () {\n          if (!this._keys) {\n            this._keys = new csmvector_1.csmVector();\n            var ite = this._map.begin();\n            while (ite.notEqual(this._map.end())) {\n              var key = ite.ptr().first;\n              this._keys.pushBack(key);\n              ite.preIncrement();\n            }\n          }\n          return this._keys;\n        };\n        JsonMap.prototype.getSize = function () {\n          return this._keys.getSize();\n        };\n        return JsonMap;\n      }(Value);\n      exports.JsonMap = JsonMap;\n      var $ = __importStar(__webpack_require__( /*! ./cubismjson */\"../../../Framework/src/utils/cubismjson.ts\"));\n      var cubismjsonextension_1 = __webpack_require__( /*! ./cubismjsonextension */\"../../../Framework/src/utils/cubismjsonextension.ts\");\n      var Live2DCubismFramework;\n      (function (Live2DCubismFramework) {\n        Live2DCubismFramework.CubismJson = $.CubismJson;\n        Live2DCubismFramework.JsonArray = $.JsonArray;\n        Live2DCubismFramework.JsonBoolean = $.JsonBoolean;\n        Live2DCubismFramework.JsonError = $.JsonError;\n        Live2DCubismFramework.JsonFloat = $.JsonFloat;\n        Live2DCubismFramework.JsonMap = $.JsonMap;\n        Live2DCubismFramework.JsonNullvalue = $.JsonNullvalue;\n        Live2DCubismFramework.JsonString = $.JsonString;\n        Live2DCubismFramework.Value = $.Value;\n      })(Live2DCubismFramework = exports.Live2DCubismFramework || (exports.Live2DCubismFramework = {}));\n\n      /***/\n    },\n\n    /***/\"../../../Framework/src/utils/cubismjsonextension.ts\":\n    /*!***********************************************************!*\\\n      !*** ../../../Framework/src/utils/cubismjsonextension.ts ***!\n      \\***********************************************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CubismJsonExtension = void 0;\n      var cubismjson_1 = __webpack_require__( /*! ./cubismjson */\"../../../Framework/src/utils/cubismjson.ts\");\n      var CubismJsonExtension = function () {\n        function CubismJsonExtension() {}\n        CubismJsonExtension.parseJsonObject = function (obj, map) {\n          Object.keys(obj).forEach(function (key) {\n            if (typeof obj[key] == 'boolean') {\n              var convValue = Boolean(obj[key]);\n              map.put(key, new cubismjson_1.JsonBoolean(convValue));\n            } else if (typeof obj[key] == 'string') {\n              var convValue = String(obj[key]);\n              map.put(key, new cubismjson_1.JsonString(convValue));\n            } else if (typeof obj[key] == 'number') {\n              var convValue = Number(obj[key]);\n              map.put(key, new cubismjson_1.JsonFloat(convValue));\n            } else if (obj[key] instanceof Array) {\n              map.put(key, CubismJsonExtension.parseJsonArray(obj[key]));\n            } else if (obj[key] instanceof Object) {\n              map.put(key, CubismJsonExtension.parseJsonObject(obj[key], new cubismjson_1.JsonMap()));\n            } else if (obj[key] == null) {\n              map.put(key, new cubismjson_1.JsonNullvalue());\n            } else {\n              map.put(key, obj[key]);\n            }\n          });\n          return map;\n        };\n        CubismJsonExtension.parseJsonArray = function (obj) {\n          var _this = this;\n          var arr = new cubismjson_1.JsonArray();\n          Object.keys(obj).forEach(function (key) {\n            var convKey = Number(key);\n            if (typeof convKey == 'number') {\n              if (typeof obj[key] == 'boolean') {\n                var convValue = Boolean(obj[key]);\n                arr.add(new cubismjson_1.JsonBoolean(convValue));\n              } else if (typeof obj[key] == 'string') {\n                var convValue = String(obj[key]);\n                arr.add(new cubismjson_1.JsonString(convValue));\n              } else if (typeof obj[key] == 'number') {\n                var convValue = Number(obj[key]);\n                arr.add(new cubismjson_1.JsonFloat(convValue));\n              } else if (obj[key] instanceof Array) {\n                arr.add(_this.parseJsonArray(obj[key]));\n              } else if (obj[key] instanceof Object) {\n                arr.add(_this.parseJsonObject(obj[key], new cubismjson_1.JsonMap()));\n              } else if (obj[key] == null) {\n                arr.add(new cubismjson_1.JsonNullvalue());\n              } else {\n                arr.add(obj[key]);\n              }\n            } else if (obj[key] instanceof Array) {\n              arr.add(_this.parseJsonArray(obj[key]));\n            } else if (obj[key] instanceof Object) {\n              arr.add(_this.parseJsonObject(obj[key], new cubismjson_1.JsonMap()));\n            } else if (obj[key] == null) {\n              arr.add(new cubismjson_1.JsonNullvalue());\n            } else {\n              var convValue = Array(obj[key]);\n              for (var i = 0; i < convValue.length; i++) {\n                arr.add(convValue[i]);\n              }\n            }\n          });\n          return arr;\n        };\n        return CubismJsonExtension;\n      }();\n      exports.CubismJsonExtension = CubismJsonExtension;\n\n      /***/\n    },\n\n    /***/\"./src/lappdefine.ts\":\n    /*!***************************!*\\\n      !*** ./src/lappdefine.ts ***!\n      \\***************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RenderTargetHeight = exports.RenderTargetWidth = exports.CubismLoggingLevel = exports.DebugTouchLogEnable = exports.DebugLogEnable = exports.MOCConsistencyValidationEnable = exports.PriorityForce = exports.PriorityNormal = exports.PriorityIdle = exports.PriorityNone = exports.HitAreaNameBody = exports.HitAreaNameHead = exports.MotionGroupTapBody = exports.MotionGroupIdle = exports.ModelDirSize = exports.ModelDir = exports.PowerImageName = exports.GearImageName = exports.BackImageName = exports.ResourcesPath = exports.ViewLogicalMaxTop = exports.ViewLogicalMaxBottom = exports.ViewLogicalMaxRight = exports.ViewLogicalMaxLeft = exports.ViewLogicalTop = exports.ViewLogicalBottom = exports.ViewLogicalRight = exports.ViewLogicalLeft = exports.ViewMinScale = exports.ViewMaxScale = exports.ViewScale = exports.CanvasSize = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! @framework/live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      exports.CanvasSize = 'auto';\n      exports.ViewScale = 1.0;\n      exports.ViewMaxScale = 2.0;\n      exports.ViewMinScale = 0.8;\n      exports.ViewLogicalLeft = -1.0;\n      exports.ViewLogicalRight = 1.0;\n      exports.ViewLogicalBottom = -1.0;\n      exports.ViewLogicalTop = 1.0;\n      exports.ViewLogicalMaxLeft = -2.0;\n      exports.ViewLogicalMaxRight = 2.0;\n      exports.ViewLogicalMaxBottom = -2.0;\n      exports.ViewLogicalMaxTop = 2.0;\n      exports.ResourcesPath = '../../Resources/';\n      exports.BackImageName = 'back_class_normal.png';\n      exports.GearImageName = 'icon_gear.png';\n      exports.PowerImageName = 'CloseNormal.png';\n      exports.ModelDir = ['Mao'];\n      exports.ModelDirSize = exports.ModelDir.length;\n      exports.MotionGroupIdle = 'Idle';\n      exports.MotionGroupTapBody = 'TapBody';\n      exports.HitAreaNameHead = 'Head';\n      exports.HitAreaNameBody = 'Body';\n      exports.PriorityNone = 0;\n      exports.PriorityIdle = 1;\n      exports.PriorityNormal = 2;\n      exports.PriorityForce = 3;\n      exports.MOCConsistencyValidationEnable = true;\n      exports.DebugLogEnable = true;\n      exports.DebugTouchLogEnable = false;\n      exports.CubismLoggingLevel = live2dcubismframework_1.LogLevel.LogLevel_Verbose;\n      exports.RenderTargetWidth = 1900;\n      exports.RenderTargetHeight = 1000;\n\n      /***/\n    },\n\n    /***/\"./src/lappdelegate.ts\":\n    /*!*****************************!*\\\n      !*** ./src/lappdelegate.ts ***!\n      \\*****************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LAppDelegate = exports.frameBuffer = exports.gl = exports.s_instance = exports.canvas = void 0;\n      var live2dcubismframework_1 = __webpack_require__( /*! @framework/live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var LAppDefine = __importStar(__webpack_require__( /*! ./lappdefine */\"./src/lappdefine.ts\"));\n      var lapplive2dmanager_1 = __webpack_require__( /*! ./lapplive2dmanager */\"./src/lapplive2dmanager.ts\");\n      var lapppal_1 = __webpack_require__( /*! ./lapppal */\"./src/lapppal.ts\");\n      var lapptexturemanager_1 = __webpack_require__( /*! ./lapptexturemanager */\"./src/lapptexturemanager.ts\");\n      var lappview_1 = __webpack_require__( /*! ./lappview */\"./src/lappview.ts\");\n      exports.canvas = null;\n      exports.s_instance = null;\n      exports.gl = null;\n      exports.frameBuffer = null;\n      var LAppDelegate = function () {\n        var _s4 = $RefreshSig$();\n        function LAppDelegate() {\n          this._captured = false;\n          this._mouseX = 0.0;\n          this._mouseY = 0.0;\n          this._isEnd = false;\n          this._cubismOption = new live2dcubismframework_1.Option();\n          this._view = new lappview_1.LAppView();\n          this._textureManager = new lapptexturemanager_1.LAppTextureManager();\n        }\n        LAppDelegate.getInstance = function () {\n          if (exports.s_instance == null) {\n            exports.s_instance = new LAppDelegate();\n          }\n          return exports.s_instance;\n        };\n        LAppDelegate.releaseInstance = function () {\n          if (exports.s_instance != null) {\n            exports.s_instance.release();\n          }\n          exports.s_instance = null;\n        };\n        LAppDelegate.prototype.initialize = function () {\n          exports.canvas = document.createElement('canvas');\n          if (LAppDefine.CanvasSize === 'auto') {\n            this._resizeCanvas();\n          } else {\n            exports.canvas.width = LAppDefine.CanvasSize.width;\n            exports.canvas.height = LAppDefine.CanvasSize.height;\n          }\n          exports.gl = exports.canvas.getContext('webgl') || exports.canvas.getContext('experimental-webgl');\n          if (!exports.gl) {\n            alert('Cannot initialize WebGL. This browser does not support.');\n            exports.gl = null;\n            document.body.innerHTML = 'This browser does not support the <code>&lt;canvas&gt;</code> element.';\n            return false;\n          }\n          document.body.appendChild(exports.canvas);\n          if (!exports.frameBuffer) {\n            exports.frameBuffer = exports.gl.getParameter(exports.gl.FRAMEBUFFER_BINDING);\n          }\n          exports.gl.enable(exports.gl.BLEND);\n          exports.gl.blendFunc(exports.gl.SRC_ALPHA, exports.gl.ONE_MINUS_SRC_ALPHA);\n          var supportTouch = ('ontouchend' in exports.canvas);\n          if (supportTouch) {\n            exports.canvas.ontouchstart = onTouchBegan;\n            exports.canvas.ontouchmove = onTouchMoved;\n            exports.canvas.ontouchend = onTouchEnded;\n            exports.canvas.ontouchcancel = onTouchCancel;\n          } else {\n            exports.canvas.onmousedown = onClickBegan;\n            exports.canvas.onmousemove = onMouseMoved;\n            exports.canvas.onmouseup = onClickEnded;\n          }\n          this._view.initialize();\n          this.initializeCubism();\n          return true;\n        };\n        LAppDelegate.prototype.onResize = function () {\n          this._resizeCanvas();\n          this._view.initialize();\n          this._view.initializeSprite();\n          var viewport = [0, 0, exports.canvas.width, exports.canvas.height];\n          exports.gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n        };\n        LAppDelegate.prototype.release = function () {\n          this._textureManager.release();\n          this._textureManager = null;\n          this._view.release();\n          this._view = null;\n          lapplive2dmanager_1.LAppLive2DManager.releaseInstance();\n          live2dcubismframework_1.CubismFramework.dispose();\n        };\n        LAppDelegate.prototype.run = function () {\n          var _this = this;\n          var loop = function () {\n            if (exports.s_instance == null) {\n              return;\n            }\n            lapppal_1.LAppPal.updateTime();\n            exports.gl.clearColor(0.0, 0.0, 0.0, 1.0);\n            exports.gl.enable(exports.gl.DEPTH_TEST);\n            exports.gl.depthFunc(exports.gl.LEQUAL);\n            exports.gl.clear(exports.gl.COLOR_BUFFER_BIT | exports.gl.DEPTH_BUFFER_BIT);\n            exports.gl.clearDepth(1.0);\n            exports.gl.enable(exports.gl.BLEND);\n            exports.gl.blendFunc(exports.gl.SRC_ALPHA, exports.gl.ONE_MINUS_SRC_ALPHA);\n            _this._view.render();\n            requestAnimationFrame(loop);\n          };\n          loop();\n        };\n        LAppDelegate.prototype.createShader = _s4(function () {\n          _s4();\n          var vertexShaderId = exports.gl.createShader(exports.gl.VERTEX_SHADER);\n          if (vertexShaderId == null) {\n            lapppal_1.LAppPal.printMessage('failed to create vertexShader');\n            return null;\n          }\n          var vertexShader = 'precision mediump float;' + 'attribute vec3 position;' + 'attribute vec2 uv;' + 'varying vec2 vuv;' + 'void main(void)' + '{' + '   gl_Position = vec4(position, 1.0);' + '   vuv = uv;' + '}';\n          exports.gl.shaderSource(vertexShaderId, vertexShader);\n          exports.gl.compileShader(vertexShaderId);\n          var fragmentShaderId = exports.gl.createShader(exports.gl.FRAGMENT_SHADER);\n          if (fragmentShaderId == null) {\n            lapppal_1.LAppPal.printMessage('failed to create fragmentShader');\n            return null;\n          }\n          var fragmentShader = 'precision mediump float;' + 'varying vec2 vuv;' + 'uniform sampler2D texture;' + 'void main(void)' + '{' + '   gl_FragColor = texture2D(texture, vuv);' + '}';\n          exports.gl.shaderSource(fragmentShaderId, fragmentShader);\n          exports.gl.compileShader(fragmentShaderId);\n          var programId = exports.gl.createProgram();\n          exports.gl.attachShader(programId, vertexShaderId);\n          exports.gl.attachShader(programId, fragmentShaderId);\n          exports.gl.deleteShader(vertexShaderId);\n          exports.gl.deleteShader(fragmentShaderId);\n          exports.gl.linkProgram(programId);\n          exports.gl.useProgram(programId);\n          return programId;\n        }, \"ZdQBZ3rq7bWAAMQq6hlVCmYF0jM=\", true);\n        LAppDelegate.prototype.getView = function () {\n          return this._view;\n        };\n        LAppDelegate.prototype.getTextureManager = function () {\n          return this._textureManager;\n        };\n        LAppDelegate.prototype.initializeCubism = function () {\n          this._cubismOption.logFunction = lapppal_1.LAppPal.printMessage;\n          this._cubismOption.loggingLevel = LAppDefine.CubismLoggingLevel;\n          live2dcubismframework_1.CubismFramework.startUp(this._cubismOption);\n          live2dcubismframework_1.CubismFramework.initialize();\n          lapplive2dmanager_1.LAppLive2DManager.getInstance();\n          lapppal_1.LAppPal.updateTime();\n          this._view.initializeSprite();\n        };\n        LAppDelegate.prototype._resizeCanvas = function () {\n          exports.canvas.width = window.innerWidth;\n          exports.canvas.height = window.innerHeight;\n        };\n        return LAppDelegate;\n      }();\n      exports.LAppDelegate = LAppDelegate;\n      function onClickBegan(e) {\n        if (!LAppDelegate.getInstance()._view) {\n          lapppal_1.LAppPal.printMessage('view notfound');\n          return;\n        }\n        LAppDelegate.getInstance()._captured = true;\n        var posX = e.pageX;\n        var posY = e.pageY;\n        LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\n      }\n      function onMouseMoved(e) {\n        if (!LAppDelegate.getInstance()._captured) {\n          return;\n        }\n        if (!LAppDelegate.getInstance()._view) {\n          lapppal_1.LAppPal.printMessage('view notfound');\n          return;\n        }\n        var rect = e.target.getBoundingClientRect();\n        var posX = e.clientX - rect.left;\n        var posY = e.clientY - rect.top;\n        LAppDelegate.getInstance()._view.onTouchesMoved(posX, posY);\n      }\n      function onClickEnded(e) {\n        LAppDelegate.getInstance()._captured = false;\n        if (!LAppDelegate.getInstance()._view) {\n          lapppal_1.LAppPal.printMessage('view notfound');\n          return;\n        }\n        var rect = e.target.getBoundingClientRect();\n        var posX = e.clientX - rect.left;\n        var posY = e.clientY - rect.top;\n        LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n      }\n      function onTouchBegan(e) {\n        if (!LAppDelegate.getInstance()._view) {\n          lapppal_1.LAppPal.printMessage('view notfound');\n          return;\n        }\n        LAppDelegate.getInstance()._captured = true;\n        var posX = e.changedTouches[0].pageX;\n        var posY = e.changedTouches[0].pageY;\n        LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\n      }\n      function onTouchMoved(e) {\n        if (!LAppDelegate.getInstance()._captured) {\n          return;\n        }\n        if (!LAppDelegate.getInstance()._view) {\n          lapppal_1.LAppPal.printMessage('view notfound');\n          return;\n        }\n        var rect = e.target.getBoundingClientRect();\n        var posX = e.changedTouches[0].clientX - rect.left;\n        var posY = e.changedTouches[0].clientY - rect.top;\n        LAppDelegate.getInstance()._view.onTouchesMoved(posX, posY);\n      }\n      function onTouchEnded(e) {\n        LAppDelegate.getInstance()._captured = false;\n        if (!LAppDelegate.getInstance()._view) {\n          lapppal_1.LAppPal.printMessage('view notfound');\n          return;\n        }\n        var rect = e.target.getBoundingClientRect();\n        var posX = e.changedTouches[0].clientX - rect.left;\n        var posY = e.changedTouches[0].clientY - rect.top;\n        LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n      }\n      function onTouchCancel(e) {\n        LAppDelegate.getInstance()._captured = false;\n        if (!LAppDelegate.getInstance()._view) {\n          lapppal_1.LAppPal.printMessage('view notfound');\n          return;\n        }\n        var rect = e.target.getBoundingClientRect();\n        var posX = e.changedTouches[0].clientX - rect.left;\n        var posY = e.changedTouches[0].clientY - rect.top;\n        LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n      }\n\n      /***/\n    },\n\n    /***/\"./src/lapplive2dmanager.ts\":\n    /*!**********************************!*\\\n      !*** ./src/lapplive2dmanager.ts ***!\n      \\**********************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LAppLive2DManager = exports.s_instance = void 0;\n      var cubismmatrix44_1 = __webpack_require__( /*! @framework/math/cubismmatrix44 */\"../../../Framework/src/math/cubismmatrix44.ts\");\n      var csmvector_1 = __webpack_require__( /*! @framework/type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var LAppDefine = __importStar(__webpack_require__( /*! ./lappdefine */\"./src/lappdefine.ts\"));\n      var lappdelegate_1 = __webpack_require__( /*! ./lappdelegate */\"./src/lappdelegate.ts\");\n      var lappmodel_1 = __webpack_require__( /*! ./lappmodel */\"./src/lappmodel.ts\");\n      var lapppal_1 = __webpack_require__( /*! ./lapppal */\"./src/lapppal.ts\");\n      exports.s_instance = null;\n      var LAppLive2DManager = function () {\n        function LAppLive2DManager() {\n          this._finishedMotion = function (self) {\n            lapppal_1.LAppPal.printMessage('Motion Finished:');\n            console.log(self);\n          };\n          this._viewMatrix = new cubismmatrix44_1.CubismMatrix44();\n          this._models = new csmvector_1.csmVector();\n          this._sceneIndex = 0;\n          this.changeScene(this._sceneIndex);\n        }\n        LAppLive2DManager.getInstance = function () {\n          if (exports.s_instance == null) {\n            exports.s_instance = new LAppLive2DManager();\n          }\n          return exports.s_instance;\n        };\n        LAppLive2DManager.releaseInstance = function () {\n          if (exports.s_instance != null) {\n            exports.s_instance = void 0;\n          }\n          exports.s_instance = null;\n        };\n        LAppLive2DManager.prototype.getModel = function (no) {\n          if (no < this._models.getSize()) {\n            return this._models.at(no);\n          }\n          return null;\n        };\n        LAppLive2DManager.prototype.releaseAllModel = function () {\n          for (var i = 0; i < this._models.getSize(); i++) {\n            this._models.at(i).release();\n            this._models.set(i, null);\n          }\n          this._models.clear();\n        };\n        LAppLive2DManager.prototype.onDrag = function (x, y) {\n          for (var i = 0; i < this._models.getSize(); i++) {\n            var model = this.getModel(i);\n            if (model) {\n              model.setDragging(x, y);\n            }\n          }\n        };\n        LAppLive2DManager.prototype.ExpressionSet = function (x) {\n          for (var i = 0; i < this._models.getSize(); i++) {\n            this._models.at(i).setExpression(x);\n          }\n        };\n        LAppLive2DManager.prototype.onTap = function (x, y) {\n          if (LAppDefine.DebugLogEnable) {\n            lapppal_1.LAppPal.printMessage(\"[APP]tap point: {x: \".concat(x.toFixed(2), \" y: \").concat(y.toFixed(2), \"}\"));\n          }\n        };\n        LAppLive2DManager.prototype.onUpdate = function () {\n          var width = lappdelegate_1.canvas.width,\n            height = lappdelegate_1.canvas.height;\n          var modelCount = this._models.getSize();\n          for (var i = 0; i < modelCount; ++i) {\n            var projection = new cubismmatrix44_1.CubismMatrix44();\n            var model = this.getModel(i);\n            if (model.getModel()) {\n              if (model.getModel().getCanvasWidth() > 1.0 && width < height) {\n                model.getModelMatrix().setWidth(2.0);\n                projection.scale(1.0, width / height);\n              } else {\n                projection.scale(height / width, 1.0);\n              }\n              if (this._viewMatrix != null) {\n                projection.multiplyByMatrix(this._viewMatrix);\n              }\n            }\n            model.update();\n            model.draw(projection);\n          }\n        };\n        LAppLive2DManager.prototype.nextScene = function () {\n          var no = (this._sceneIndex + 1) % LAppDefine.ModelDirSize;\n          this.changeScene(no);\n        };\n        LAppLive2DManager.prototype.changeScene = function (index) {\n          this._sceneIndex = index;\n          if (LAppDefine.DebugLogEnable) {\n            lapppal_1.LAppPal.printMessage(\"[APP]model index: \".concat(this._sceneIndex));\n          }\n          var model = LAppDefine.ModelDir[index];\n          var modelPath = LAppDefine.ResourcesPath + model + '/';\n          var modelJsonName = LAppDefine.ModelDir[index];\n          modelJsonName += '.model3.json';\n          this.releaseAllModel();\n          this._models.pushBack(new lappmodel_1.LAppModel());\n          this._models.at(0).loadAssets(modelPath, modelJsonName);\n        };\n        LAppLive2DManager.prototype.setViewMatrix = function (m) {\n          for (var i = 0; i < 16; i++) {\n            this._viewMatrix.getArray()[i] = m.getArray()[i];\n          }\n        };\n        return LAppLive2DManager;\n      }();\n      exports.LAppLive2DManager = LAppLive2DManager;\n\n      /***/\n    },\n\n    /***/\"./src/lappmodel.ts\":\n    /*!**************************!*\\\n      !*** ./src/lappmodel.ts ***!\n      \\**************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __extends = this && this.__extends || function () {\n        var extendStatics = function (d, b) {\n          extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          };\n          return extendStatics(d, b);\n        };\n        return function (d, b) {\n          if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n          extendStatics(d, b);\n          function __() {\n            this.constructor = d;\n          }\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n        function adopt(value) {\n          return value instanceof P ? value : new P(function (resolve) {\n            resolve(value);\n          });\n        }\n        return new (P || (P = Promise))(function (resolve, reject) {\n          function fulfilled(value) {\n            try {\n              step(generator.next(value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n          function rejected(value) {\n            try {\n              step(generator[\"throw\"](value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n          function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n          }\n          step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n      };\n      var __generator = this && this.__generator || function (thisArg, body) {\n        var _ = {\n            label: 0,\n            sent: function () {\n              if (t[0] & 1) throw t[1];\n              return t[1];\n            },\n            trys: [],\n            ops: []\n          },\n          f,\n          y,\n          t,\n          g;\n        return g = {\n          next: verb(0),\n          \"throw\": verb(1),\n          \"return\": verb(2)\n        }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n          return this;\n        }), g;\n        function verb(n) {\n          return function (v) {\n            return step([n, v]);\n          };\n        }\n        function step(op) {\n          if (f) throw new TypeError(\"Generator is already executing.\");\n          while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n              case 0:\n              case 1:\n                t = op;\n                break;\n              case 4:\n                _.label++;\n                return {\n                  value: op[1],\n                  done: false\n                };\n              case 5:\n                _.label++;\n                y = op[1];\n                op = [0];\n                continue;\n              case 7:\n                op = _.ops.pop();\n                _.trys.pop();\n                continue;\n              default:\n                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                  _ = 0;\n                  continue;\n                }\n                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                  _.label = op[1];\n                  break;\n                }\n                if (op[0] === 6 && _.label < t[1]) {\n                  _.label = t[1];\n                  t = op;\n                  break;\n                }\n                if (t && _.label < t[2]) {\n                  _.label = t[2];\n                  _.ops.push(op);\n                  break;\n                }\n                if (t[2]) _.ops.pop();\n                _.trys.pop();\n                continue;\n            }\n            op = body.call(thisArg, _);\n          } catch (e) {\n            op = [6, e];\n            y = 0;\n          } finally {\n            f = t = 0;\n          }\n          if (op[0] & 5) throw op[1];\n          return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n          };\n        }\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LAppModel = void 0;\n      __webpack_require__( /*! whatwg-fetch */\"./node_modules/whatwg-fetch/fetch.js\");\n      var cubismdefaultparameterid_1 = __webpack_require__( /*! @framework/cubismdefaultparameterid */\"../../../Framework/src/cubismdefaultparameterid.ts\");\n      var cubismmodelsettingjson_1 = __webpack_require__( /*! @framework/cubismmodelsettingjson */\"../../../Framework/src/cubismmodelsettingjson.ts\");\n      var cubismbreath_1 = __webpack_require__( /*! @framework/effect/cubismbreath */\"../../../Framework/src/effect/cubismbreath.ts\");\n      var cubismeyeblink_1 = __webpack_require__( /*! @framework/effect/cubismeyeblink */\"../../../Framework/src/effect/cubismeyeblink.ts\");\n      var live2dcubismframework_1 = __webpack_require__( /*! @framework/live2dcubismframework */\"../../../Framework/src/live2dcubismframework.ts\");\n      var cubismusermodel_1 = __webpack_require__( /*! @framework/model/cubismusermodel */\"../../../Framework/src/model/cubismusermodel.ts\");\n      var acubismmotion_1 = __webpack_require__( /*! @framework/motion/acubismmotion */\"../../../Framework/src/motion/acubismmotion.ts\");\n      var cubismmotionqueuemanager_1 = __webpack_require__( /*! @framework/motion/cubismmotionqueuemanager */\"../../../Framework/src/motion/cubismmotionqueuemanager.ts\");\n      var csmmap_1 = __webpack_require__( /*! @framework/type/csmmap */\"../../../Framework/src/type/csmmap.ts\");\n      var csmvector_1 = __webpack_require__( /*! @framework/type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var cubismdebug_1 = __webpack_require__( /*! @framework/utils/cubismdebug */\"../../../Framework/src/utils/cubismdebug.ts\");\n      var LAppDefine = __importStar(__webpack_require__( /*! ./lappdefine */\"./src/lappdefine.ts\"));\n      var lappdelegate_1 = __webpack_require__( /*! ./lappdelegate */\"./src/lappdelegate.ts\");\n      var lapppal_1 = __webpack_require__( /*! ./lapppal */\"./src/lapppal.ts\");\n      var lappwavfilehandler_1 = __webpack_require__( /*! ./lappwavfilehandler */\"./src/lappwavfilehandler.ts\");\n      var cubismmoc_1 = __webpack_require__( /*! @framework/model/cubismmoc */\"../../../Framework/src/model/cubismmoc.ts\");\n      var LoadStep;\n      (function (LoadStep) {\n        LoadStep[LoadStep[\"LoadAssets\"] = 0] = \"LoadAssets\";\n        LoadStep[LoadStep[\"LoadModel\"] = 1] = \"LoadModel\";\n        LoadStep[LoadStep[\"WaitLoadModel\"] = 2] = \"WaitLoadModel\";\n        LoadStep[LoadStep[\"LoadExpression\"] = 3] = \"LoadExpression\";\n        LoadStep[LoadStep[\"WaitLoadExpression\"] = 4] = \"WaitLoadExpression\";\n        LoadStep[LoadStep[\"LoadPhysics\"] = 5] = \"LoadPhysics\";\n        LoadStep[LoadStep[\"WaitLoadPhysics\"] = 6] = \"WaitLoadPhysics\";\n        LoadStep[LoadStep[\"LoadPose\"] = 7] = \"LoadPose\";\n        LoadStep[LoadStep[\"WaitLoadPose\"] = 8] = \"WaitLoadPose\";\n        LoadStep[LoadStep[\"SetupEyeBlink\"] = 9] = \"SetupEyeBlink\";\n        LoadStep[LoadStep[\"SetupBreath\"] = 10] = \"SetupBreath\";\n        LoadStep[LoadStep[\"LoadUserData\"] = 11] = \"LoadUserData\";\n        LoadStep[LoadStep[\"WaitLoadUserData\"] = 12] = \"WaitLoadUserData\";\n        LoadStep[LoadStep[\"SetupEyeBlinkIds\"] = 13] = \"SetupEyeBlinkIds\";\n        LoadStep[LoadStep[\"SetupLipSyncIds\"] = 14] = \"SetupLipSyncIds\";\n        LoadStep[LoadStep[\"SetupLayout\"] = 15] = \"SetupLayout\";\n        LoadStep[LoadStep[\"LoadMotion\"] = 16] = \"LoadMotion\";\n        LoadStep[LoadStep[\"WaitLoadMotion\"] = 17] = \"WaitLoadMotion\";\n        LoadStep[LoadStep[\"CompleteInitialize\"] = 18] = \"CompleteInitialize\";\n        LoadStep[LoadStep[\"CompleteSetupModel\"] = 19] = \"CompleteSetupModel\";\n        LoadStep[LoadStep[\"LoadTexture\"] = 20] = \"LoadTexture\";\n        LoadStep[LoadStep[\"WaitLoadTexture\"] = 21] = \"WaitLoadTexture\";\n        LoadStep[LoadStep[\"CompleteSetup\"] = 22] = \"CompleteSetup\";\n      })(LoadStep || (LoadStep = {}));\n      var LAppModel = function (_super) {\n        __extends(LAppModel, _super);\n        function LAppModel() {\n          var _this = _super.call(this) || this;\n          _this._modelSetting = null;\n          _this._modelHomeDir = null;\n          _this._userTimeSeconds = 0.0;\n          _this._eyeBlinkIds = new csmvector_1.csmVector();\n          _this._lipSyncIds = new csmvector_1.csmVector();\n          _this._motions = new csmmap_1.csmMap();\n          _this._expressions = new csmmap_1.csmMap();\n          _this._hitArea = new csmvector_1.csmVector();\n          _this._userArea = new csmvector_1.csmVector();\n          _this._idParamAngleX = live2dcubismframework_1.CubismFramework.getIdManager().getId(cubismdefaultparameterid_1.CubismDefaultParameterId.ParamAngleX);\n          _this._idParamAngleY = live2dcubismframework_1.CubismFramework.getIdManager().getId(cubismdefaultparameterid_1.CubismDefaultParameterId.ParamAngleY);\n          _this._idParamAngleZ = live2dcubismframework_1.CubismFramework.getIdManager().getId(cubismdefaultparameterid_1.CubismDefaultParameterId.ParamAngleZ);\n          _this._idParamEyeBallX = live2dcubismframework_1.CubismFramework.getIdManager().getId(cubismdefaultparameterid_1.CubismDefaultParameterId.ParamEyeBallX);\n          _this._idParamEyeBallY = live2dcubismframework_1.CubismFramework.getIdManager().getId(cubismdefaultparameterid_1.CubismDefaultParameterId.ParamEyeBallY);\n          _this._idParamBodyAngleX = live2dcubismframework_1.CubismFramework.getIdManager().getId(cubismdefaultparameterid_1.CubismDefaultParameterId.ParamBodyAngleX);\n          if (LAppDefine.MOCConsistencyValidationEnable) {\n            _this._mocConsistency = true;\n          }\n          _this._state = LoadStep.LoadAssets;\n          _this._expressionCount = 0;\n          _this._textureCount = 0;\n          _this._motionCount = 0;\n          _this._allMotionCount = 0;\n          _this._wavFileHandler = new lappwavfilehandler_1.LAppWavFileHandler();\n          _this._consistency = false;\n          return _this;\n        }\n        LAppModel.prototype.loadAssets = function (dir, fileName) {\n          var _this = this;\n          this._modelHomeDir = dir;\n          fetch(\"\".concat(this._modelHomeDir).concat(fileName)).then(function (response) {\n            return response.arrayBuffer();\n          }).then(function (arrayBuffer) {\n            var setting = new cubismmodelsettingjson_1.CubismModelSettingJson(arrayBuffer, arrayBuffer.byteLength);\n            _this._state = LoadStep.LoadModel;\n            _this.setupModel(setting);\n          });\n        };\n        LAppModel.prototype.setupModel = function (setting) {\n          var _this = this;\n          this._updating = true;\n          this._initialized = false;\n          this._modelSetting = setting;\n          if (this._modelSetting.getModelFileName() != '') {\n            var modelFileName = this._modelSetting.getModelFileName();\n            fetch(\"\".concat(this._modelHomeDir).concat(modelFileName)).then(function (response) {\n              return response.arrayBuffer();\n            }).then(function (arrayBuffer) {\n              _this.loadModel(arrayBuffer, _this._mocConsistency);\n              _this._state = LoadStep.LoadExpression;\n              loadCubismExpression();\n            });\n            this._state = LoadStep.WaitLoadModel;\n          } else {\n            lapppal_1.LAppPal.printMessage('Model data does not exist.');\n          }\n          var loadCubismExpression = function () {\n            if (_this._modelSetting.getExpressionCount() > 0) {\n              var count_1 = _this._modelSetting.getExpressionCount();\n              var _loop_1 = function (i) {\n                var expressionName = _this._modelSetting.getExpressionName(i);\n                var expressionFileName = _this._modelSetting.getExpressionFileName(i);\n                fetch(\"\".concat(_this._modelHomeDir).concat(expressionFileName)).then(function (response) {\n                  return response.arrayBuffer();\n                }).then(function (arrayBuffer) {\n                  var motion = _this.loadExpression(arrayBuffer, arrayBuffer.byteLength, expressionName);\n                  if (_this._expressions.getValue(expressionName) != null) {\n                    acubismmotion_1.ACubismMotion.delete(_this._expressions.getValue(expressionName));\n                    _this._expressions.setValue(expressionName, null);\n                  }\n                  _this._expressions.setValue(expressionName, motion);\n                  _this._expressionCount++;\n                  if (_this._expressionCount >= count_1) {\n                    _this._state = LoadStep.LoadPhysics;\n                    loadCubismPhysics();\n                  }\n                });\n              };\n              for (var i = 0; i < count_1; i++) {\n                _loop_1(i);\n              }\n              _this._state = LoadStep.WaitLoadExpression;\n            } else {\n              _this._state = LoadStep.LoadPhysics;\n              loadCubismPhysics();\n            }\n          };\n          var loadCubismPhysics = function () {\n            if (_this._modelSetting.getPhysicsFileName() != '') {\n              var physicsFileName = _this._modelSetting.getPhysicsFileName();\n              fetch(\"\".concat(_this._modelHomeDir).concat(physicsFileName)).then(function (response) {\n                return response.arrayBuffer();\n              }).then(function (arrayBuffer) {\n                _this.loadPhysics(arrayBuffer, arrayBuffer.byteLength);\n                _this._state = LoadStep.LoadPose;\n                loadCubismPose();\n              });\n              _this._state = LoadStep.WaitLoadPhysics;\n            } else {\n              _this._state = LoadStep.LoadPose;\n              loadCubismPose();\n            }\n          };\n          var loadCubismPose = function () {\n            if (_this._modelSetting.getPoseFileName() != '') {\n              var poseFileName = _this._modelSetting.getPoseFileName();\n              fetch(\"\".concat(_this._modelHomeDir).concat(poseFileName)).then(function (response) {\n                return response.arrayBuffer();\n              }).then(function (arrayBuffer) {\n                _this.loadPose(arrayBuffer, arrayBuffer.byteLength);\n                _this._state = LoadStep.SetupEyeBlink;\n                setupEyeBlink();\n              });\n              _this._state = LoadStep.WaitLoadPose;\n            } else {\n              _this._state = LoadStep.SetupEyeBlink;\n              setupEyeBlink();\n            }\n          };\n          var setupEyeBlink = function () {\n            if (_this._modelSetting.getEyeBlinkParameterCount() > 0) {\n              _this._eyeBlink = cubismeyeblink_1.CubismEyeBlink.create(_this._modelSetting);\n              _this._state = LoadStep.SetupBreath;\n            }\n            setupBreath();\n          };\n          var setupBreath = function () {\n            _this._breath = cubismbreath_1.CubismBreath.create();\n            var breathParameters = new csmvector_1.csmVector();\n            breathParameters.pushBack(new cubismbreath_1.BreathParameterData(_this._idParamAngleX, 0.0, 15.0, 6.5345, 0.5));\n            breathParameters.pushBack(new cubismbreath_1.BreathParameterData(_this._idParamAngleY, 0.0, 8.0, 3.5345, 0.5));\n            breathParameters.pushBack(new cubismbreath_1.BreathParameterData(_this._idParamAngleZ, 0.0, 10.0, 5.5345, 0.5));\n            breathParameters.pushBack(new cubismbreath_1.BreathParameterData(_this._idParamBodyAngleX, 0.0, 4.0, 15.5345, 0.5));\n            breathParameters.pushBack(new cubismbreath_1.BreathParameterData(live2dcubismframework_1.CubismFramework.getIdManager().getId(cubismdefaultparameterid_1.CubismDefaultParameterId.ParamBreath), 0.5, 0.5, 3.2345, 1));\n            _this._breath.setParameters(breathParameters);\n            _this._state = LoadStep.LoadUserData;\n            loadUserData();\n          };\n          var loadUserData = function () {\n            if (_this._modelSetting.getUserDataFile() != '') {\n              var userDataFile = _this._modelSetting.getUserDataFile();\n              fetch(\"\".concat(_this._modelHomeDir).concat(userDataFile)).then(function (response) {\n                return response.arrayBuffer();\n              }).then(function (arrayBuffer) {\n                _this.loadUserData(arrayBuffer, arrayBuffer.byteLength);\n                _this._state = LoadStep.SetupEyeBlinkIds;\n                setupEyeBlinkIds();\n              });\n              _this._state = LoadStep.WaitLoadUserData;\n            } else {\n              _this._state = LoadStep.SetupEyeBlinkIds;\n              setupEyeBlinkIds();\n            }\n          };\n          var setupEyeBlinkIds = function () {\n            var eyeBlinkIdCount = _this._modelSetting.getEyeBlinkParameterCount();\n            for (var i = 0; i < eyeBlinkIdCount; ++i) {\n              _this._eyeBlinkIds.pushBack(_this._modelSetting.getEyeBlinkParameterId(i));\n            }\n            _this._state = LoadStep.SetupLipSyncIds;\n            setupLipSyncIds();\n          };\n          var setupLipSyncIds = function () {\n            var lipSyncIdCount = _this._modelSetting.getLipSyncParameterCount();\n            for (var i = 0; i < lipSyncIdCount; ++i) {\n              _this._lipSyncIds.pushBack(_this._modelSetting.getLipSyncParameterId(i));\n            }\n            _this._state = LoadStep.SetupLayout;\n            setupLayout();\n          };\n          var setupLayout = function () {\n            var layout = new csmmap_1.csmMap();\n            if (_this._modelSetting == null || _this._modelMatrix == null) {\n              (0, cubismdebug_1.CubismLogError)('Failed to setupLayout().');\n              return;\n            }\n            _this._modelSetting.getLayoutMap(layout);\n            _this._modelMatrix.setupFromLayout(layout);\n            _this._state = LoadStep.LoadMotion;\n            loadCubismMotion();\n          };\n          var loadCubismMotion = function () {\n            _this._state = LoadStep.WaitLoadMotion;\n            _this._model.saveParameters();\n            _this._allMotionCount = 0;\n            _this._motionCount = 0;\n            var group = [];\n            var motionGroupCount = _this._modelSetting.getMotionGroupCount();\n            for (var i = 0; i < motionGroupCount; i++) {\n              group[i] = _this._modelSetting.getMotionGroupName(i);\n              _this._allMotionCount += _this._modelSetting.getMotionCount(group[i]);\n            }\n            for (var i = 0; i < motionGroupCount; i++) {\n              _this.preLoadMotionGroup(group[i]);\n            }\n            if (motionGroupCount == 0) {\n              _this._state = LoadStep.LoadTexture;\n              _this._motionManager.stopAllMotions();\n              _this._updating = false;\n              _this._initialized = true;\n              _this.createRenderer();\n              _this.setupTextures();\n              _this.getRenderer().startUp(lappdelegate_1.gl);\n            }\n          };\n        };\n        LAppModel.prototype.setupTextures = function () {\n          var _this = this;\n          var usePremultiply = true;\n          if (this._state == LoadStep.LoadTexture) {\n            var textureCount_1 = this._modelSetting.getTextureCount();\n            var _loop_2 = function (modelTextureNumber) {\n              if (this_1._modelSetting.getTextureFileName(modelTextureNumber) == '') {\n                console.log('getTextureFileName null');\n                return \"continue\";\n              }\n              var texturePath = this_1._modelSetting.getTextureFileName(modelTextureNumber);\n              texturePath = this_1._modelHomeDir + texturePath;\n              var onLoad = function (textureInfo) {\n                _this.getRenderer().bindTexture(modelTextureNumber, textureInfo.id);\n                _this._textureCount++;\n                if (_this._textureCount >= textureCount_1) {\n                  _this._state = LoadStep.CompleteSetup;\n                }\n              };\n              lappdelegate_1.LAppDelegate.getInstance().getTextureManager().createTextureFromPngFile(texturePath, usePremultiply, onLoad);\n              this_1.getRenderer().setIsPremultipliedAlpha(usePremultiply);\n            };\n            var this_1 = this;\n            for (var modelTextureNumber = 0; modelTextureNumber < textureCount_1; modelTextureNumber++) {\n              _loop_2(modelTextureNumber);\n            }\n            this._state = LoadStep.WaitLoadTexture;\n          }\n        };\n        LAppModel.prototype.reloadRenderer = function () {\n          this.deleteRenderer();\n          this.createRenderer();\n          this.setupTextures();\n        };\n        LAppModel.prototype.update = function () {\n          if (this._state != LoadStep.CompleteSetup) return;\n          var deltaTimeSeconds = lapppal_1.LAppPal.getDeltaTime();\n          this._userTimeSeconds += deltaTimeSeconds;\n          this._dragManager.update(deltaTimeSeconds);\n          this._dragX = this._dragManager.getX();\n          this._dragY = this._dragManager.getY();\n          var motionUpdated = false;\n          this._model.loadParameters();\n          if (this._motionManager.isFinished()) {\n            this.startRandomMotion(LAppDefine.MotionGroupIdle, LAppDefine.PriorityIdle);\n          } else {\n            motionUpdated = this._motionManager.updateMotion(this._model, deltaTimeSeconds);\n          }\n          this._model.saveParameters();\n          if (!motionUpdated) {\n            if (this._eyeBlink != null) {\n              this._eyeBlink.updateParameters(this._model, deltaTimeSeconds);\n            }\n          }\n          if (this._expressionManager != null) {\n            this._expressionManager.updateMotion(this._model, deltaTimeSeconds);\n          }\n          this._model.addParameterValueById(this._idParamAngleX, this._dragX * 30);\n          this._model.addParameterValueById(this._idParamAngleY, this._dragY * 30);\n          this._model.addParameterValueById(this._idParamAngleZ, this._dragX * this._dragY * -30);\n          this._model.addParameterValueById(this._idParamBodyAngleX, this._dragX * 10);\n          this._model.addParameterValueById(this._idParamEyeBallX, this._dragX);\n          this._model.addParameterValueById(this._idParamEyeBallY, this._dragY);\n          if (this._breath != null) {\n            this._breath.updateParameters(this._model, deltaTimeSeconds);\n          }\n          if (this._physics != null) {\n            this._physics.evaluate(this._model, deltaTimeSeconds);\n          }\n          if (this._lipsync) {\n            var value = 0.0;\n            this._wavFileHandler.update(deltaTimeSeconds);\n            value = this._wavFileHandler.getRms();\n            for (var i = 0; i < this._lipSyncIds.getSize(); ++i) {\n              this._model.addParameterValueById(this._lipSyncIds.at(i), value, 0.8);\n            }\n          }\n          if (this._pose != null) {\n            this._pose.updateParameters(this._model, deltaTimeSeconds);\n          }\n          this._model.update();\n        };\n        LAppModel.prototype.startMotion = function (group, no, priority, onFinishedMotionHandler) {\n          var _this = this;\n          if (priority == LAppDefine.PriorityForce) {\n            this._motionManager.setReservePriority(priority);\n          } else if (!this._motionManager.reserveMotion(priority)) {\n            if (this._debugMode) {\n              lapppal_1.LAppPal.printMessage(\"[APP]can't start motion.\");\n            }\n            return cubismmotionqueuemanager_1.InvalidMotionQueueEntryHandleValue;\n          }\n          var motionFileName = this._modelSetting.getMotionFileName(group, no);\n          var name = \"\".concat(group, \"_\").concat(no);\n          var motion = this._motions.getValue(name);\n          var autoDelete = false;\n          if (motion == null) {\n            fetch(\"\".concat(this._modelHomeDir).concat(motionFileName)).then(function (response) {\n              return response.arrayBuffer();\n            }).then(function (arrayBuffer) {\n              motion = _this.loadMotion(arrayBuffer, arrayBuffer.byteLength, null, onFinishedMotionHandler);\n              var fadeTime = _this._modelSetting.getMotionFadeInTimeValue(group, no);\n              if (fadeTime >= 0.0) {\n                motion.setFadeInTime(fadeTime);\n              }\n              fadeTime = _this._modelSetting.getMotionFadeOutTimeValue(group, no);\n              if (fadeTime >= 0.0) {\n                motion.setFadeOutTime(fadeTime);\n              }\n              motion.setEffectIds(_this._eyeBlinkIds, _this._lipSyncIds);\n              autoDelete = true;\n            });\n          } else {\n            motion.setFinishedMotionHandler(onFinishedMotionHandler);\n          }\n          var voice = this._modelSetting.getMotionSoundFileName(group, no);\n          if (voice.localeCompare('') != 0) {\n            var path = voice;\n            path = this._modelHomeDir + path;\n            this._wavFileHandler.start(path);\n          }\n          if (this._debugMode) {\n            lapppal_1.LAppPal.printMessage(\"[APP]start motion: [\".concat(group, \"_\").concat(no));\n          }\n          return this._motionManager.startMotionPriority(motion, autoDelete, priority);\n        };\n        LAppModel.prototype.startRandomMotion = function (group, priority, onFinishedMotionHandler) {\n          if (this._modelSetting.getMotionCount(group) == 0) {\n            return cubismmotionqueuemanager_1.InvalidMotionQueueEntryHandleValue;\n          }\n          var no = Math.floor(Math.random() * this._modelSetting.getMotionCount(group));\n          return this.startMotion(group, no, priority, onFinishedMotionHandler);\n        };\n        LAppModel.prototype.setExpression = function (expressionId) {\n          var motion = this._expressions.getValue(expressionId);\n          if (this._debugMode) {\n            lapppal_1.LAppPal.printMessage(\"[APP]expression: [\".concat(expressionId, \"]\"));\n          }\n          if (motion != null) {\n            this._expressionManager.startMotionPriority(motion, false, LAppDefine.PriorityForce);\n          } else {\n            if (this._debugMode) {\n              lapppal_1.LAppPal.printMessage(\"[APP]expression[\".concat(expressionId, \"] is null\"));\n            }\n          }\n        };\n        LAppModel.prototype.setRandomExpression = function () {\n          if (this._expressions.getSize() == 0) {\n            return;\n          }\n          var no = Math.floor(Math.random() * this._expressions.getSize());\n          for (var i = 0; i < this._expressions.getSize(); i++) {\n            if (i == no) {\n              var name_1 = this._expressions._keyValues[i].first;\n              console.log(name_1);\n              this.setExpression(name_1);\n              return;\n            }\n          }\n        };\n        LAppModel.prototype.motionEventFired = function (eventValue) {\n          (0, cubismdebug_1.CubismLogInfo)('{0} is fired on LAppModel!!', eventValue.s);\n        };\n        LAppModel.prototype.hitTest = function (hitArenaName, x, y) {\n          if (this._opacity < 1) {\n            return false;\n          }\n          var count = this._modelSetting.getHitAreasCount();\n          for (var i = 0; i < count; i++) {\n            if (this._modelSetting.getHitAreaName(i) == hitArenaName) {\n              var drawId = this._modelSetting.getHitAreaId(i);\n              return this.isHit(drawId, x, y);\n            }\n          }\n          return false;\n        };\n        LAppModel.prototype.preLoadMotionGroup = function (group) {\n          var _this = this;\n          var _loop_3 = function (i) {\n            var motionFileName = this_2._modelSetting.getMotionFileName(group, i);\n            var name_2 = \"\".concat(group, \"_\").concat(i);\n            if (this_2._debugMode) {\n              lapppal_1.LAppPal.printMessage(\"[APP]load motion: \".concat(motionFileName, \" => [\").concat(name_2, \"]\"));\n            }\n            fetch(\"\".concat(this_2._modelHomeDir).concat(motionFileName)).then(function (response) {\n              return response.arrayBuffer();\n            }).then(function (arrayBuffer) {\n              var tmpMotion = _this.loadMotion(arrayBuffer, arrayBuffer.byteLength, name_2);\n              var fadeTime = _this._modelSetting.getMotionFadeInTimeValue(group, i);\n              if (fadeTime >= 0.0) {\n                tmpMotion.setFadeInTime(fadeTime);\n              }\n              fadeTime = _this._modelSetting.getMotionFadeOutTimeValue(group, i);\n              if (fadeTime >= 0.0) {\n                tmpMotion.setFadeOutTime(fadeTime);\n              }\n              tmpMotion.setEffectIds(_this._eyeBlinkIds, _this._lipSyncIds);\n              if (_this._motions.getValue(name_2) != null) {\n                acubismmotion_1.ACubismMotion.delete(_this._motions.getValue(name_2));\n              }\n              _this._motions.setValue(name_2, tmpMotion);\n              _this._motionCount++;\n              if (_this._motionCount >= _this._allMotionCount) {\n                _this._state = LoadStep.LoadTexture;\n                _this._motionManager.stopAllMotions();\n                _this._updating = false;\n                _this._initialized = true;\n                _this.createRenderer();\n                _this.setupTextures();\n                _this.getRenderer().startUp(lappdelegate_1.gl);\n              }\n            });\n          };\n          var this_2 = this;\n          for (var i = 0; i < this._modelSetting.getMotionCount(group); i++) {\n            _loop_3(i);\n          }\n        };\n        LAppModel.prototype.releaseMotions = function () {\n          this._motions.clear();\n        };\n        LAppModel.prototype.releaseExpressions = function () {\n          this._expressions.clear();\n        };\n        LAppModel.prototype.doDraw = function () {\n          if (this._model == null) return;\n          var viewport = [0, 0, lappdelegate_1.canvas.width, lappdelegate_1.canvas.height];\n          this.getRenderer().setRenderState(lappdelegate_1.frameBuffer, viewport);\n          this.getRenderer().drawModel();\n        };\n        LAppModel.prototype.draw = function (matrix) {\n          if (this._model == null) {\n            return;\n          }\n          if (this._state == LoadStep.CompleteSetup) {\n            matrix.multiplyByMatrix(this._modelMatrix);\n            this.getRenderer().setMvpMatrix(matrix);\n            this.doDraw();\n          }\n        };\n        LAppModel.prototype.hasMocConsistencyFromFile = function () {\n          return __awaiter(this, void 0, void 0, function () {\n            var modelFileName, response, arrayBuffer;\n            return __generator(this, function (_a) {\n              switch (_a.label) {\n                case 0:\n                  (0, cubismdebug_1.CSM_ASSERT)(this._modelSetting.getModelFileName().localeCompare(\"\"));\n                  if (!(this._modelSetting.getModelFileName() != '')) return [3, 3];\n                  modelFileName = this._modelSetting.getModelFileName();\n                  return [4, fetch(\"\".concat(this._modelHomeDir).concat(modelFileName))];\n                case 1:\n                  response = _a.sent();\n                  return [4, response.arrayBuffer()];\n                case 2:\n                  arrayBuffer = _a.sent();\n                  this._consistency = cubismmoc_1.CubismMoc.hasMocConsistency(arrayBuffer);\n                  if (!this._consistency) {\n                    (0, cubismdebug_1.CubismLogInfo)('Inconsistent MOC3.');\n                  } else {\n                    (0, cubismdebug_1.CubismLogInfo)('Consistent MOC3.');\n                  }\n                  return [2, this._consistency];\n                case 3:\n                  lapppal_1.LAppPal.printMessage('Model data does not exist.');\n                  _a.label = 4;\n                case 4:\n                  return [2];\n              }\n            });\n          });\n        };\n        return LAppModel;\n      }(cubismusermodel_1.CubismUserModel);\n      exports.LAppModel = LAppModel;\n\n      /***/\n    },\n\n    /***/\"./src/lapppal.ts\":\n    /*!************************!*\\\n      !*** ./src/lapppal.ts ***!\n      \\************************/\n    /***/\n    function (__unused_webpack_module, exports) {\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LAppPal = void 0;\n      var LAppPal = exports.LAppPal = function () {\n        function LAppPal() {}\n        LAppPal.loadFileAsBytes = function (filePath, callback) {\n          fetch(filePath).then(function (response) {\n            return response.arrayBuffer();\n          }).then(function (arrayBuffer) {\n            return callback(arrayBuffer, arrayBuffer.byteLength);\n          });\n        };\n        LAppPal.getDeltaTime = function () {\n          return this.s_deltaTime;\n        };\n        LAppPal.updateTime = function () {\n          this.s_currentFrame = Date.now();\n          this.s_deltaTime = (this.s_currentFrame - this.s_lastFrame) / 1000;\n          this.s_lastFrame = this.s_currentFrame;\n        };\n        LAppPal.printMessage = function (message) {\n          console.log(message);\n        };\n        LAppPal.lastUpdate = Date.now();\n        LAppPal.s_currentFrame = 0.0;\n        LAppPal.s_lastFrame = 0.0;\n        LAppPal.s_deltaTime = 0.0;\n        return LAppPal;\n      }();\n\n      /***/\n    },\n\n    /***/\"./src/lapptexturemanager.ts\":\n    /*!***********************************!*\\\n      !*** ./src/lapptexturemanager.ts ***!\n      \\***********************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextureInfo = exports.LAppTextureManager = void 0;\n      var csmvector_1 = __webpack_require__( /*! @framework/type/csmvector */\"../../../Framework/src/type/csmvector.ts\");\n      var lappdelegate_1 = __webpack_require__( /*! ./lappdelegate */\"./src/lappdelegate.ts\");\n      var LAppTextureManager = function () {\n        function LAppTextureManager() {\n          this._textures = new csmvector_1.csmVector();\n        }\n        LAppTextureManager.prototype.release = function () {\n          for (var ite = this._textures.begin(); ite.notEqual(this._textures.end()); ite.preIncrement()) {\n            lappdelegate_1.gl.deleteTexture(ite.ptr().id);\n          }\n          this._textures = null;\n        };\n        LAppTextureManager.prototype.createTextureFromPngFile = function (fileName, usePremultiply, callback) {\n          var _this = this;\n          var _loop_1 = function (ite) {\n            if (ite.ptr().fileName == fileName && ite.ptr().usePremultply == usePremultiply) {\n              ite.ptr().img = new Image();\n              ite.ptr().img.onload = function () {\n                return callback(ite.ptr());\n              };\n              ite.ptr().img.src = fileName;\n              return {\n                value: void 0\n              };\n            }\n          };\n          for (var ite = this._textures.begin(); ite.notEqual(this._textures.end()); ite.preIncrement()) {\n            var state_1 = _loop_1(ite);\n            if (typeof state_1 === \"object\") return state_1.value;\n          }\n          var img = new Image();\n          img.onload = function () {\n            var tex = lappdelegate_1.gl.createTexture();\n            lappdelegate_1.gl.bindTexture(lappdelegate_1.gl.TEXTURE_2D, tex);\n            lappdelegate_1.gl.texParameteri(lappdelegate_1.gl.TEXTURE_2D, lappdelegate_1.gl.TEXTURE_MIN_FILTER, lappdelegate_1.gl.LINEAR_MIPMAP_LINEAR);\n            lappdelegate_1.gl.texParameteri(lappdelegate_1.gl.TEXTURE_2D, lappdelegate_1.gl.TEXTURE_MAG_FILTER, lappdelegate_1.gl.LINEAR);\n            if (usePremultiply) {\n              lappdelegate_1.gl.pixelStorei(lappdelegate_1.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n            }\n            lappdelegate_1.gl.texImage2D(lappdelegate_1.gl.TEXTURE_2D, 0, lappdelegate_1.gl.RGBA, lappdelegate_1.gl.RGBA, lappdelegate_1.gl.UNSIGNED_BYTE, img);\n            lappdelegate_1.gl.generateMipmap(lappdelegate_1.gl.TEXTURE_2D);\n            lappdelegate_1.gl.bindTexture(lappdelegate_1.gl.TEXTURE_2D, null);\n            var textureInfo = new TextureInfo();\n            if (textureInfo != null) {\n              textureInfo.fileName = fileName;\n              textureInfo.width = img.width;\n              textureInfo.height = img.height;\n              textureInfo.id = tex;\n              textureInfo.img = img;\n              textureInfo.usePremultply = usePremultiply;\n              _this._textures.pushBack(textureInfo);\n            }\n            callback(textureInfo);\n          };\n          img.src = fileName;\n        };\n        LAppTextureManager.prototype.releaseTextures = function () {\n          for (var i = 0; i < this._textures.getSize(); i++) {\n            this._textures.set(i, null);\n          }\n          this._textures.clear();\n        };\n        LAppTextureManager.prototype.releaseTextureByTexture = function (texture) {\n          for (var i = 0; i < this._textures.getSize(); i++) {\n            if (this._textures.at(i).id != texture) {\n              continue;\n            }\n            this._textures.set(i, null);\n            this._textures.remove(i);\n            break;\n          }\n        };\n        LAppTextureManager.prototype.releaseTextureByFilePath = function (fileName) {\n          for (var i = 0; i < this._textures.getSize(); i++) {\n            if (this._textures.at(i).fileName == fileName) {\n              this._textures.set(i, null);\n              this._textures.remove(i);\n              break;\n            }\n          }\n        };\n        return LAppTextureManager;\n      }();\n      exports.LAppTextureManager = LAppTextureManager;\n      var TextureInfo = function () {\n        function TextureInfo() {\n          this.id = null;\n          this.width = 0;\n          this.height = 0;\n        }\n        return TextureInfo;\n      }();\n      exports.TextureInfo = TextureInfo;\n\n      /***/\n    },\n\n    /***/\"./src/lappview.ts\":\n    /*!*************************!*\\\n      !*** ./src/lappview.ts ***!\n      \\*************************/\n    /***/\n    function (__unused_webpack_module, exports, __webpack_require__) {\n      var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        var desc = Object.getOwnPropertyDescriptor(m, k);\n        if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n          desc = {\n            enumerable: true,\n            get: function () {\n              return m[k];\n            }\n          };\n        }\n        Object.defineProperty(o, k2, desc);\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      });\n      var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      });\n      var __importStar = this && this.__importStar || function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LAppView = void 0;\n      var cubismmatrix44_1 = __webpack_require__( /*! @framework/math/cubismmatrix44 */\"../../../Framework/src/math/cubismmatrix44.ts\");\n      var cubismviewmatrix_1 = __webpack_require__( /*! @framework/math/cubismviewmatrix */\"../../../Framework/src/math/cubismviewmatrix.ts\");\n      var LAppDefine = __importStar(__webpack_require__( /*! ./lappdefine */\"./src/lappdefine.ts\"));\n      var lappdelegate_1 = __webpack_require__( /*! ./lappdelegate */\"./src/lappdelegate.ts\");\n      var lapplive2dmanager_1 = __webpack_require__( /*! ./lapplive2dmanager */\"./src/lapplive2dmanager.ts\");\n      var lapppal_1 = __webpack_require__( /*! ./lapppal */\"./src/lapppal.ts\");\n      var touchmanager_1 = __webpack_require__( /*! ./touchmanager */\"./src/touchmanager.ts\");\n      var LAppView = function () {\n        var _s5 = $RefreshSig$();\n        function LAppView() {\n          this._programId = null;\n          this._back = null;\n          this._gear = null;\n          this._touchManager = new touchmanager_1.TouchManager();\n          this._deviceToScreen = new cubismmatrix44_1.CubismMatrix44();\n          this._viewMatrix = new cubismviewmatrix_1.CubismViewMatrix();\n        }\n        LAppView.prototype.initialize = function () {\n          var width = lappdelegate_1.canvas.width,\n            height = lappdelegate_1.canvas.height;\n          var ratio = width / height;\n          var left = -ratio;\n          var right = ratio;\n          var bottom = LAppDefine.ViewLogicalLeft;\n          var top = LAppDefine.ViewLogicalRight;\n          this._viewMatrix.setScreenRect(left, right, bottom, top);\n          this._viewMatrix.scale(LAppDefine.ViewScale, LAppDefine.ViewScale);\n          this._deviceToScreen.loadIdentity();\n          if (width > height) {\n            var screenW = Math.abs(right - left);\n            this._deviceToScreen.scaleRelative(screenW / width, -screenW / width);\n          } else {\n            var screenH = Math.abs(top - bottom);\n            this._deviceToScreen.scaleRelative(screenH / height, -screenH / height);\n          }\n          this._deviceToScreen.translateRelative(-width * 0.5, -height * 0.5);\n          this._viewMatrix.setMaxScale(LAppDefine.ViewMaxScale);\n          this._viewMatrix.setMinScale(LAppDefine.ViewMinScale);\n          this._viewMatrix.setMaxScreenRect(LAppDefine.ViewLogicalMaxLeft, LAppDefine.ViewLogicalMaxRight, LAppDefine.ViewLogicalMaxBottom, LAppDefine.ViewLogicalMaxTop);\n        };\n        LAppView.prototype.release = function () {\n          this._viewMatrix = null;\n          this._touchManager = null;\n          this._deviceToScreen = null;\n          this._gear.release();\n          this._gear = null;\n          this._back.release();\n          this._back = null;\n          lappdelegate_1.gl.deleteProgram(this._programId);\n          this._programId = null;\n        };\n        LAppView.prototype.render = _s5(function () {\n          _s5();\n          lappdelegate_1.gl.useProgram(this._programId);\n          if (this._back) {\n            this._back.render(this._programId);\n          }\n          if (this._gear) {\n            this._gear.render(this._programId);\n          }\n          lappdelegate_1.gl.flush();\n          var live2DManager = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n          live2DManager.setViewMatrix(this._viewMatrix);\n          live2DManager.onUpdate();\n        }, \"ZdQBZ3rq7bWAAMQq6hlVCmYF0jM=\", true);\n        LAppView.prototype.initializeSprite = function () {\n          var width = lappdelegate_1.canvas.width;\n          var height = lappdelegate_1.canvas.height;\n          var textureManager = lappdelegate_1.LAppDelegate.getInstance().getTextureManager();\n          var resourcesPath = LAppDefine.ResourcesPath;\n          var imageName = '';\n          if (this._programId == null) {\n            this._programId = lappdelegate_1.LAppDelegate.getInstance().createShader();\n          }\n        };\n        LAppView.prototype.onTouchesBegan = function (pointX, pointY) {\n          this._touchManager.touchesBegan(pointX, pointY);\n        };\n        LAppView.prototype.onTouchesMoved = function (pointX, pointY) {\n          var viewX = this.transformViewX(this._touchManager.getX());\n          var viewY = this.transformViewY(this._touchManager.getY());\n          this._touchManager.touchesMoved(pointX, pointY);\n          var live2DManager = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n          live2DManager.onDrag(viewX, viewY);\n        };\n        LAppView.prototype.onTouchesEnded = function (pointX, pointY) {\n          var live2DManager = lapplive2dmanager_1.LAppLive2DManager.getInstance();\n          live2DManager.onDrag(0.0, 0.0);\n          {\n            var x = this._deviceToScreen.transformX(this._touchManager.getX());\n            var y = this._deviceToScreen.transformY(this._touchManager.getY());\n            if (LAppDefine.DebugTouchLogEnable) {\n              lapppal_1.LAppPal.printMessage(\"[APP]touchesEnded x: \".concat(x, \" y: \").concat(y));\n            }\n            live2DManager.onTap(x, y);\n            if (this._gear.isHit(pointX, pointY)) {\n              live2DManager.nextScene();\n            }\n          }\n        };\n        LAppView.prototype.transformViewX = function (deviceX) {\n          var screenX = this._deviceToScreen.transformX(deviceX);\n          return this._viewMatrix.invertTransformX(screenX);\n        };\n        LAppView.prototype.transformViewY = function (deviceY) {\n          var screenY = this._deviceToScreen.transformY(deviceY);\n          return this._viewMatrix.invertTransformY(screenY);\n        };\n        LAppView.prototype.transformScreenX = function (deviceX) {\n          return this._deviceToScreen.transformX(deviceX);\n        };\n        LAppView.prototype.transformScreenY = function (deviceY) {\n          return this._deviceToScreen.transformY(deviceY);\n        };\n        return LAppView;\n      }();\n      exports.LAppView = LAppView;\n\n      /***/\n    },\n\n    /***/\"./src/lappwavfilehandler.ts\":\n    /*!***********************************!*\\\n      !*** ./src/lappwavfilehandler.ts ***!\n      \\***********************************/\n    /***/\n    function (__unused_webpack_module, exports) {\n      var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n        function adopt(value) {\n          return value instanceof P ? value : new P(function (resolve) {\n            resolve(value);\n          });\n        }\n        return new (P || (P = Promise))(function (resolve, reject) {\n          function fulfilled(value) {\n            try {\n              step(generator.next(value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n          function rejected(value) {\n            try {\n              step(generator[\"throw\"](value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n          function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n          }\n          step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n      };\n      var __generator = this && this.__generator || function (thisArg, body) {\n        var _ = {\n            label: 0,\n            sent: function () {\n              if (t[0] & 1) throw t[1];\n              return t[1];\n            },\n            trys: [],\n            ops: []\n          },\n          f,\n          y,\n          t,\n          g;\n        return g = {\n          next: verb(0),\n          \"throw\": verb(1),\n          \"return\": verb(2)\n        }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n          return this;\n        }), g;\n        function verb(n) {\n          return function (v) {\n            return step([n, v]);\n          };\n        }\n        function step(op) {\n          if (f) throw new TypeError(\"Generator is already executing.\");\n          while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n              case 0:\n              case 1:\n                t = op;\n                break;\n              case 4:\n                _.label++;\n                return {\n                  value: op[1],\n                  done: false\n                };\n              case 5:\n                _.label++;\n                y = op[1];\n                op = [0];\n                continue;\n              case 7:\n                op = _.ops.pop();\n                _.trys.pop();\n                continue;\n              default:\n                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                  _ = 0;\n                  continue;\n                }\n                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                  _.label = op[1];\n                  break;\n                }\n                if (op[0] === 6 && _.label < t[1]) {\n                  _.label = t[1];\n                  t = op;\n                  break;\n                }\n                if (t && _.label < t[2]) {\n                  _.label = t[2];\n                  _.ops.push(op);\n                  break;\n                }\n                if (t[2]) _.ops.pop();\n                _.trys.pop();\n                continue;\n            }\n            op = body.call(thisArg, _);\n          } catch (e) {\n            op = [6, e];\n            y = 0;\n          } finally {\n            f = t = 0;\n          }\n          if (op[0] & 5) throw op[1];\n          return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n          };\n        }\n      };\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ByteReader = exports.WavFileInfo = exports.LAppWavFileHandler = exports.s_instance = void 0;\n      exports.s_instance = null;\n      var LAppWavFileHandler = function () {\n        function LAppWavFileHandler() {\n          var _this = this;\n          this._loadFiletoBytes = function (arrayBuffer, length) {\n            _this._byteReader._fileByte = arrayBuffer;\n            _this._byteReader._fileDataView = new DataView(_this._byteReader._fileByte);\n            _this._byteReader._fileSize = length;\n          };\n          this._pcmData = null;\n          this._userTimeSeconds = 0.0;\n          this._lastRms = 0.0;\n          this._sampleOffset = 0.0;\n          this._wavFileInfo = new WavFileInfo();\n          this._byteReader = new ByteReader();\n        }\n        LAppWavFileHandler.getInstance = function () {\n          if (exports.s_instance == null) {\n            exports.s_instance = new LAppWavFileHandler();\n          }\n          return exports.s_instance;\n        };\n        LAppWavFileHandler.releaseInstance = function () {\n          if (exports.s_instance != null) {\n            exports.s_instance = void 0;\n          }\n          exports.s_instance = null;\n        };\n        LAppWavFileHandler.prototype.update = function (deltaTimeSeconds) {\n          var goalOffset;\n          var rms;\n          if (this._pcmData == null || this._sampleOffset >= this._wavFileInfo._samplesPerChannel) {\n            this._lastRms = 0.0;\n            return false;\n          }\n          this._userTimeSeconds += deltaTimeSeconds;\n          goalOffset = Math.floor(this._userTimeSeconds * this._wavFileInfo._samplingRate);\n          if (goalOffset > this._wavFileInfo._samplesPerChannel) {\n            goalOffset = this._wavFileInfo._samplesPerChannel;\n          }\n          rms = 0.0;\n          for (var channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n            for (var sampleCount = this._sampleOffset; sampleCount < goalOffset; sampleCount++) {\n              var pcm = this._pcmData[channelCount][sampleCount];\n              rms += pcm * pcm;\n            }\n          }\n          rms = Math.sqrt(rms / (this._wavFileInfo._numberOfChannels * (goalOffset - this._sampleOffset)));\n          this._lastRms = rms;\n          this._sampleOffset = goalOffset;\n          return true;\n        };\n        LAppWavFileHandler.prototype.start = function (filePath) {\n          this._sampleOffset = 0;\n          this._userTimeSeconds = 0.0;\n          this._lastRms = 0.0;\n          if (!this.loadWavFile(filePath)) {\n            return;\n          }\n        };\n        LAppWavFileHandler.prototype.getRms = function () {\n          return this._lastRms;\n        };\n        LAppWavFileHandler.prototype.loadWavFile = function (filePath) {\n          var _this = this;\n          var ret = false;\n          if (this._pcmData != null) {\n            this.releasePcmData();\n          }\n          var asyncFileLoad = function () {\n            return __awaiter(_this, void 0, void 0, function () {\n              return __generator(this, function (_a) {\n                return [2, fetch(filePath).then(function (responce) {\n                  return responce.arrayBuffer();\n                })];\n              });\n            });\n          };\n          var asyncWavFileManager = function () {\n            return __awaiter(_this, void 0, void 0, function () {\n              var _a, fmtChunkSize, dataChunkSize, channelCount, sampleCount, channelCount;\n              return __generator(this, function (_b) {\n                switch (_b.label) {\n                  case 0:\n                    _a = this._byteReader;\n                    return [4, asyncFileLoad()];\n                  case 1:\n                    _a._fileByte = _b.sent();\n                    this._byteReader._fileDataView = new DataView(this._byteReader._fileByte);\n                    this._byteReader._fileSize = this._byteReader._fileByte.byteLength;\n                    this._byteReader._readOffset = 0;\n                    if (this._byteReader._fileByte == null || this._byteReader._fileSize < 4) {\n                      return [2, false];\n                    }\n                    this._wavFileInfo._fileName = filePath;\n                    try {\n                      if (!this._byteReader.getCheckSignature('RIFF')) {\n                        ret = false;\n                        throw new Error('Cannot find Signeture \"RIFF\".');\n                      }\n                      this._byteReader.get32LittleEndian();\n                      if (!this._byteReader.getCheckSignature('WAVE')) {\n                        ret = false;\n                        throw new Error('Cannot find Signeture \"WAVE\".');\n                      }\n                      if (!this._byteReader.getCheckSignature('fmt ')) {\n                        ret = false;\n                        throw new Error('Cannot find Signeture \"fmt\".');\n                      }\n                      fmtChunkSize = this._byteReader.get32LittleEndian();\n                      if (this._byteReader.get16LittleEndian() != 1) {\n                        ret = false;\n                        throw new Error('File is not linear PCM.');\n                      }\n                      this._wavFileInfo._numberOfChannels = this._byteReader.get16LittleEndian();\n                      this._wavFileInfo._samplingRate = this._byteReader.get32LittleEndian();\n                      this._byteReader.get32LittleEndian();\n                      this._byteReader.get16LittleEndian();\n                      this._wavFileInfo._bitsPerSample = this._byteReader.get16LittleEndian();\n                      if (fmtChunkSize > 16) {\n                        this._byteReader._readOffset += fmtChunkSize - 16;\n                      }\n                      while (!this._byteReader.getCheckSignature('data') && this._byteReader._readOffset < this._byteReader._fileSize) {\n                        this._byteReader._readOffset += this._byteReader.get32LittleEndian() + 4;\n                      }\n                      if (this._byteReader._readOffset >= this._byteReader._fileSize) {\n                        ret = false;\n                        throw new Error('Cannot find \"data\" Chunk.');\n                      }\n                      {\n                        dataChunkSize = this._byteReader.get32LittleEndian();\n                        this._wavFileInfo._samplesPerChannel = dataChunkSize * 8 / (this._wavFileInfo._bitsPerSample * this._wavFileInfo._numberOfChannels);\n                      }\n                      this._pcmData = new Array(this._wavFileInfo._numberOfChannels);\n                      for (channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n                        this._pcmData[channelCount] = new Float32Array(this._wavFileInfo._samplesPerChannel);\n                      }\n                      for (sampleCount = 0; sampleCount < this._wavFileInfo._samplesPerChannel; sampleCount++) {\n                        for (channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n                          this._pcmData[channelCount][sampleCount] = this.getPcmSample();\n                        }\n                      }\n                      ret = true;\n                    } catch (e) {\n                      console.log(e);\n                    }\n                    return [2];\n                }\n              });\n            });\n          }();\n          return ret;\n        };\n        LAppWavFileHandler.prototype.getPcmSample = function () {\n          var pcm32;\n          switch (this._wavFileInfo._bitsPerSample) {\n            case 8:\n              pcm32 = this._byteReader.get8() - 128;\n              pcm32 <<= 24;\n              break;\n            case 16:\n              pcm32 = this._byteReader.get16LittleEndian() << 16;\n              break;\n            case 24:\n              pcm32 = this._byteReader.get24LittleEndian() << 8;\n              break;\n            default:\n              pcm32 = 0;\n              break;\n          }\n          return pcm32 / 2147483647;\n        };\n        LAppWavFileHandler.prototype.releasePcmData = function () {\n          for (var channelCount = 0; channelCount < this._wavFileInfo._numberOfChannels; channelCount++) {\n            delete this._pcmData[channelCount];\n          }\n          delete this._pcmData;\n          this._pcmData = null;\n        };\n        return LAppWavFileHandler;\n      }();\n      exports.LAppWavFileHandler = LAppWavFileHandler;\n      var WavFileInfo = function () {\n        function WavFileInfo() {\n          this._fileName = '';\n          this._numberOfChannels = 0;\n          this._bitsPerSample = 0;\n          this._samplingRate = 0;\n          this._samplesPerChannel = 0;\n        }\n        return WavFileInfo;\n      }();\n      exports.WavFileInfo = WavFileInfo;\n      var ByteReader = function () {\n        function ByteReader() {\n          this._fileByte = null;\n          this._fileDataView = null;\n          this._fileSize = 0;\n          this._readOffset = 0;\n        }\n        ByteReader.prototype.get8 = function () {\n          var ret = this._fileDataView.getUint8(this._readOffset);\n          this._readOffset++;\n          return ret;\n        };\n        ByteReader.prototype.get16LittleEndian = function () {\n          var ret = this._fileDataView.getUint8(this._readOffset + 1) << 8 | this._fileDataView.getUint8(this._readOffset);\n          this._readOffset += 2;\n          return ret;\n        };\n        ByteReader.prototype.get24LittleEndian = function () {\n          var ret = this._fileDataView.getUint8(this._readOffset + 2) << 16 | this._fileDataView.getUint8(this._readOffset + 1) << 8 | this._fileDataView.getUint8(this._readOffset);\n          this._readOffset += 3;\n          return ret;\n        };\n        ByteReader.prototype.get32LittleEndian = function () {\n          var ret = this._fileDataView.getUint8(this._readOffset + 3) << 24 | this._fileDataView.getUint8(this._readOffset + 2) << 16 | this._fileDataView.getUint8(this._readOffset + 1) << 8 | this._fileDataView.getUint8(this._readOffset);\n          this._readOffset += 4;\n          return ret;\n        };\n        ByteReader.prototype.getCheckSignature = function (reference) {\n          var getSignature = new Uint8Array(4);\n          var referenceString = new TextEncoder().encode(reference);\n          if (reference.length != 4) {\n            return false;\n          }\n          for (var signatureOffset = 0; signatureOffset < 4; signatureOffset++) {\n            getSignature[signatureOffset] = this.get8();\n          }\n          return getSignature[0] == referenceString[0] && getSignature[1] == referenceString[1] && getSignature[2] == referenceString[2] && getSignature[3] == referenceString[3];\n        };\n        return ByteReader;\n      }();\n      exports.ByteReader = ByteReader;\n\n      /***/\n    },\n\n    /***/\"./src/touchmanager.ts\":\n    /*!*****************************!*\\\n      !*** ./src/touchmanager.ts ***!\n      \\*****************************/\n    /***/\n    function (__unused_webpack_module, exports) {\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TouchManager = void 0;\n      var TouchManager = function () {\n        function TouchManager() {\n          this._startX = 0.0;\n          this._startY = 0.0;\n          this._lastX = 0.0;\n          this._lastY = 0.0;\n          this._lastX1 = 0.0;\n          this._lastY1 = 0.0;\n          this._lastX2 = 0.0;\n          this._lastY2 = 0.0;\n          this._lastTouchDistance = 0.0;\n          this._deltaX = 0.0;\n          this._deltaY = 0.0;\n          this._scale = 1.0;\n          this._touchSingle = false;\n          this._flipAvailable = false;\n        }\n        TouchManager.prototype.getCenterX = function () {\n          return this._lastX;\n        };\n        TouchManager.prototype.getCenterY = function () {\n          return this._lastY;\n        };\n        TouchManager.prototype.getDeltaX = function () {\n          return this._deltaX;\n        };\n        TouchManager.prototype.getDeltaY = function () {\n          return this._deltaY;\n        };\n        TouchManager.prototype.getStartX = function () {\n          return this._startX;\n        };\n        TouchManager.prototype.getStartY = function () {\n          return this._startY;\n        };\n        TouchManager.prototype.getScale = function () {\n          return this._scale;\n        };\n        TouchManager.prototype.getX = function () {\n          return this._lastX;\n        };\n        TouchManager.prototype.getY = function () {\n          return this._lastY;\n        };\n        TouchManager.prototype.getX1 = function () {\n          return this._lastX1;\n        };\n        TouchManager.prototype.getY1 = function () {\n          return this._lastY1;\n        };\n        TouchManager.prototype.getX2 = function () {\n          return this._lastX2;\n        };\n        TouchManager.prototype.getY2 = function () {\n          return this._lastY2;\n        };\n        TouchManager.prototype.isSingleTouch = function () {\n          return this._touchSingle;\n        };\n        TouchManager.prototype.isFlickAvailable = function () {\n          return this._flipAvailable;\n        };\n        TouchManager.prototype.disableFlick = function () {\n          this._flipAvailable = false;\n        };\n        TouchManager.prototype.touchesBegan = function (deviceX, deviceY) {\n          this._lastX = deviceX;\n          this._lastY = deviceY;\n          this._startX = deviceX;\n          this._startY = deviceY;\n          this._lastTouchDistance = -1.0;\n          this._flipAvailable = true;\n          this._touchSingle = true;\n        };\n        TouchManager.prototype.touchesMoved = function (deviceX, deviceY) {\n          this._lastX = deviceX;\n          this._lastY = deviceY;\n          this._lastTouchDistance = -1.0;\n          this._touchSingle = true;\n        };\n        TouchManager.prototype.getFlickDistance = function () {\n          return this.calculateDistance(this._startX, this._startY, this._lastX, this._lastY);\n        };\n        TouchManager.prototype.calculateDistance = function (x1, y1, x2, y2) {\n          return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        };\n        TouchManager.prototype.calculateMovingAmount = function (v1, v2) {\n          if (v1 > 0.0 != v2 > 0.0) {\n            return 0.0;\n          }\n          var sign = v1 > 0.0 ? 1.0 : -1.0;\n          var absoluteValue1 = Math.abs(v1);\n          var absoluteValue2 = Math.abs(v2);\n          return sign * (absoluteValue1 < absoluteValue2 ? absoluteValue1 : absoluteValue2);\n        };\n        return TouchManager;\n      }();\n      exports.TouchManager = TouchManager;\n\n      /***/\n    },\n\n    /***/\"./node_modules/whatwg-fetch/fetch.js\":\n    /*!********************************************!*\\\n      !*** ./node_modules/whatwg-fetch/fetch.js ***!\n      \\********************************************/\n    /***/\n    function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n      __webpack_require__.r(__webpack_exports__);\n      /* harmony export */\n      __webpack_require__.d(__webpack_exports__, {\n        /* harmony export */DOMException: function () {\n          return (/* binding */DOMException\n          );\n        },\n        /* harmony export */Headers: function () {\n          return (/* binding */Headers\n          );\n        },\n        /* harmony export */Request: function () {\n          return (/* binding */Request\n          );\n        },\n        /* harmony export */Response: function () {\n          return (/* binding */Response\n          );\n        },\n        /* harmony export */fetch: function () {\n          return (/* binding */fetch\n          );\n        }\n        /* harmony export */\n      });\n      var global = typeof globalThis !== 'undefined' && globalThis || typeof self !== 'undefined' && self || typeof global !== 'undefined' && global;\n      var support = {\n        searchParams: 'URLSearchParams' in global,\n        iterable: 'Symbol' in global && 'iterator' in Symbol,\n        blob: 'FileReader' in global && 'Blob' in global && function () {\n          try {\n            new Blob();\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }(),\n        formData: 'FormData' in global,\n        arrayBuffer: 'ArrayBuffer' in global\n      };\n      function isDataView(obj) {\n        return obj && DataView.prototype.isPrototypeOf(obj);\n      }\n      if (support.arrayBuffer) {\n        var viewClasses = ['[object Int8Array]', '[object Uint8Array]', '[object Uint8ClampedArray]', '[object Int16Array]', '[object Uint16Array]', '[object Int32Array]', '[object Uint32Array]', '[object Float32Array]', '[object Float64Array]'];\n        var isArrayBufferView = ArrayBuffer.isView || function (obj) {\n          return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1;\n        };\n      }\n      function normalizeName(name) {\n        if (typeof name !== 'string') {\n          name = String(name);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n          throw new TypeError('Invalid character in header field name: \"' + name + '\"');\n        }\n        return name.toLowerCase();\n      }\n      function normalizeValue(value) {\n        if (typeof value !== 'string') {\n          value = String(value);\n        }\n        return value;\n      }\n\n      // Build a destructive iterator for the value list\n      function iteratorFor(items) {\n        var iterator = {\n          next: function () {\n            var value = items.shift();\n            return {\n              done: value === undefined,\n              value: value\n            };\n          }\n        };\n        if (support.iterable) {\n          iterator[Symbol.iterator] = function () {\n            return iterator;\n          };\n        }\n        return iterator;\n      }\n      function Headers(headers) {\n        this.map = {};\n        if (headers instanceof Headers) {\n          headers.forEach(function (value, name) {\n            this.append(name, value);\n          }, this);\n        } else if (Array.isArray(headers)) {\n          headers.forEach(function (header) {\n            this.append(header[0], header[1]);\n          }, this);\n        } else if (headers) {\n          Object.getOwnPropertyNames(headers).forEach(function (name) {\n            this.append(name, headers[name]);\n          }, this);\n        }\n      }\n      Headers.prototype.append = function (name, value) {\n        name = normalizeName(name);\n        value = normalizeValue(value);\n        var oldValue = this.map[name];\n        this.map[name] = oldValue ? oldValue + ', ' + value : value;\n      };\n      Headers.prototype['delete'] = function (name) {\n        delete this.map[normalizeName(name)];\n      };\n      Headers.prototype.get = function (name) {\n        name = normalizeName(name);\n        return this.has(name) ? this.map[name] : null;\n      };\n      Headers.prototype.has = function (name) {\n        return this.map.hasOwnProperty(normalizeName(name));\n      };\n      Headers.prototype.set = function (name, value) {\n        this.map[normalizeName(name)] = normalizeValue(value);\n      };\n      Headers.prototype.forEach = function (callback, thisArg) {\n        for (var name in this.map) {\n          if (this.map.hasOwnProperty(name)) {\n            callback.call(thisArg, this.map[name], name, this);\n          }\n        }\n      };\n      Headers.prototype.keys = function () {\n        var items = [];\n        this.forEach(function (value, name) {\n          items.push(name);\n        });\n        return iteratorFor(items);\n      };\n      Headers.prototype.values = function () {\n        var items = [];\n        this.forEach(function (value) {\n          items.push(value);\n        });\n        return iteratorFor(items);\n      };\n      Headers.prototype.entries = function () {\n        var items = [];\n        this.forEach(function (value, name) {\n          items.push([name, value]);\n        });\n        return iteratorFor(items);\n      };\n      if (support.iterable) {\n        Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n      }\n      function consumed(body) {\n        if (body.bodyUsed) {\n          return Promise.reject(new TypeError('Already read'));\n        }\n        body.bodyUsed = true;\n      }\n      function fileReaderReady(reader) {\n        return new Promise(function (resolve, reject) {\n          reader.onload = function () {\n            resolve(reader.result);\n          };\n          reader.onerror = function () {\n            reject(reader.error);\n          };\n        });\n      }\n      function readBlobAsArrayBuffer(blob) {\n        var reader = new FileReader();\n        var promise = fileReaderReady(reader);\n        reader.readAsArrayBuffer(blob);\n        return promise;\n      }\n      function readBlobAsText(blob) {\n        var reader = new FileReader();\n        var promise = fileReaderReady(reader);\n        reader.readAsText(blob);\n        return promise;\n      }\n      function readArrayBufferAsText(buf) {\n        var view = new Uint8Array(buf);\n        var chars = new Array(view.length);\n        for (var i = 0; i < view.length; i++) {\n          chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join('');\n      }\n      function bufferClone(buf) {\n        if (buf.slice) {\n          return buf.slice(0);\n        } else {\n          var view = new Uint8Array(buf.byteLength);\n          view.set(new Uint8Array(buf));\n          return view.buffer;\n        }\n      }\n      function Body() {\n        this.bodyUsed = false;\n        this._initBody = function (body) {\n          /*\n            fetch-mock wraps the Response object in an ES6 Proxy to\n            provide useful test harness features such as flush. However, on\n            ES5 browsers without fetch or Proxy support pollyfills must be used;\n            the proxy-pollyfill is unable to proxy an attribute unless it exists\n            on the object before the Proxy is created. This change ensures\n            Response.bodyUsed exists on the instance, while maintaining the\n            semantic of setting Request.bodyUsed in the constructor before\n            _initBody is called.\n          */\n          this.bodyUsed = this.bodyUsed;\n          this._bodyInit = body;\n          if (!body) {\n            this._bodyText = '';\n          } else if (typeof body === 'string') {\n            this._bodyText = body;\n          } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n            this._bodyBlob = body;\n          } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n            this._bodyFormData = body;\n          } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n            this._bodyText = body.toString();\n          } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n            this._bodyArrayBuffer = bufferClone(body.buffer);\n            // IE 10-11 can't handle a DataView body.\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n          } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n            this._bodyArrayBuffer = bufferClone(body);\n          } else {\n            this._bodyText = body = Object.prototype.toString.call(body);\n          }\n          if (!this.headers.get('content-type')) {\n            if (typeof body === 'string') {\n              this.headers.set('content-type', 'text/plain;charset=UTF-8');\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n              this.headers.set('content-type', this._bodyBlob.type);\n            } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n              this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n            }\n          }\n        };\n        if (support.blob) {\n          this.blob = function () {\n            var rejected = consumed(this);\n            if (rejected) {\n              return rejected;\n            }\n            if (this._bodyBlob) {\n              return Promise.resolve(this._bodyBlob);\n            } else if (this._bodyArrayBuffer) {\n              return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n            } else if (this._bodyFormData) {\n              throw new Error('could not read FormData body as blob');\n            } else {\n              return Promise.resolve(new Blob([this._bodyText]));\n            }\n          };\n          this.arrayBuffer = function () {\n            if (this._bodyArrayBuffer) {\n              var isConsumed = consumed(this);\n              if (isConsumed) {\n                return isConsumed;\n              }\n              if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n                return Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset, this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength));\n              } else {\n                return Promise.resolve(this._bodyArrayBuffer);\n              }\n            } else {\n              return this.blob().then(readBlobAsArrayBuffer);\n            }\n          };\n        }\n        this.text = function () {\n          var rejected = consumed(this);\n          if (rejected) {\n            return rejected;\n          }\n          if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n          } else if (this._bodyArrayBuffer) {\n            return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));\n          } else if (this._bodyFormData) {\n            throw new Error('could not read FormData body as text');\n          } else {\n            return Promise.resolve(this._bodyText);\n          }\n        };\n        if (support.formData) {\n          this.formData = function () {\n            return this.text().then(decode);\n          };\n        }\n        this.json = function () {\n          return this.text().then(JSON.parse);\n        };\n        return this;\n      }\n\n      // HTTP methods whose capitalization should be normalized\n      var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n      function normalizeMethod(method) {\n        var upcased = method.toUpperCase();\n        return methods.indexOf(upcased) > -1 ? upcased : method;\n      }\n      function Request(input, options) {\n        if (!(this instanceof Request)) {\n          throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.');\n        }\n        options = options || {};\n        var body = options.body;\n        if (input instanceof Request) {\n          if (input.bodyUsed) {\n            throw new TypeError('Already read');\n          }\n          this.url = input.url;\n          this.credentials = input.credentials;\n          if (!options.headers) {\n            this.headers = new Headers(input.headers);\n          }\n          this.method = input.method;\n          this.mode = input.mode;\n          this.signal = input.signal;\n          if (!body && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n          }\n        } else {\n          this.url = String(input);\n        }\n        this.credentials = options.credentials || this.credentials || 'same-origin';\n        if (options.headers || !this.headers) {\n          this.headers = new Headers(options.headers);\n        }\n        this.method = normalizeMethod(options.method || this.method || 'GET');\n        this.mode = options.mode || this.mode || null;\n        this.signal = options.signal || this.signal;\n        this.referrer = null;\n        if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n          throw new TypeError('Body not allowed for GET or HEAD requests');\n        }\n        this._initBody(body);\n        if (this.method === 'GET' || this.method === 'HEAD') {\n          if (options.cache === 'no-store' || options.cache === 'no-cache') {\n            // Search for a '_' parameter in the query string\n            var reParamSearch = /([?&])_=[^&]*/;\n            if (reParamSearch.test(this.url)) {\n              // If it already exists then set the value with the current time\n              this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n            } else {\n              // Otherwise add a new '_' parameter to the end with the current time\n              var reQueryString = /\\?/;\n              this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();\n            }\n          }\n        }\n      }\n      Request.prototype.clone = function () {\n        return new Request(this, {\n          body: this._bodyInit\n        });\n      };\n      function decode(body) {\n        var form = new FormData();\n        body.trim().split('&').forEach(function (bytes) {\n          if (bytes) {\n            var split = bytes.split('=');\n            var name = split.shift().replace(/\\+/g, ' ');\n            var value = split.join('=').replace(/\\+/g, ' ');\n            form.append(decodeURIComponent(name), decodeURIComponent(value));\n          }\n        });\n        return form;\n      }\n      function parseHeaders(rawHeaders) {\n        var headers = new Headers();\n        // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n        // https://tools.ietf.org/html/rfc7230#section-3.2\n        var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n        // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n        // https://github.com/github/fetch/issues/748\n        // https://github.com/zloirock/core-js/issues/751\n        preProcessedHeaders.split('\\r').map(function (header) {\n          return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header;\n        }).forEach(function (line) {\n          var parts = line.split(':');\n          var key = parts.shift().trim();\n          if (key) {\n            var value = parts.join(':').trim();\n            headers.append(key, value);\n          }\n        });\n        return headers;\n      }\n      Body.call(Request.prototype);\n      function Response(bodyInit, options) {\n        if (!(this instanceof Response)) {\n          throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.');\n        }\n        if (!options) {\n          options = {};\n        }\n        this.type = 'default';\n        this.status = options.status === undefined ? 200 : options.status;\n        this.ok = this.status >= 200 && this.status < 300;\n        this.statusText = options.statusText === undefined ? '' : '' + options.statusText;\n        this.headers = new Headers(options.headers);\n        this.url = options.url || '';\n        this._initBody(bodyInit);\n      }\n      Body.call(Response.prototype);\n      Response.prototype.clone = function () {\n        return new Response(this._bodyInit, {\n          status: this.status,\n          statusText: this.statusText,\n          headers: new Headers(this.headers),\n          url: this.url\n        });\n      };\n      Response.error = function () {\n        var response = new Response(null, {\n          status: 0,\n          statusText: ''\n        });\n        response.type = 'error';\n        return response;\n      };\n      var redirectStatuses = [301, 302, 303, 307, 308];\n      Response.redirect = function (url, status) {\n        if (redirectStatuses.indexOf(status) === -1) {\n          throw new RangeError('Invalid status code');\n        }\n        return new Response(null, {\n          status: status,\n          headers: {\n            location: url\n          }\n        });\n      };\n      var DOMException = global.DOMException;\n      try {\n        new DOMException();\n      } catch (err) {\n        DOMException = function (message, name) {\n          this.message = message;\n          this.name = name;\n          var error = Error(message);\n          this.stack = error.stack;\n        };\n        DOMException.prototype = Object.create(Error.prototype);\n        DOMException.prototype.constructor = DOMException;\n      }\n      function fetch(input, init) {\n        return new Promise(function (resolve, reject) {\n          var request = new Request(input, init);\n          if (request.signal && request.signal.aborted) {\n            return reject(new DOMException('Aborted', 'AbortError'));\n          }\n          var xhr = new XMLHttpRequest();\n          function abortXhr() {\n            xhr.abort();\n          }\n          xhr.onload = function () {\n            var options = {\n              status: xhr.status,\n              statusText: xhr.statusText,\n              headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n            };\n            options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n            var body = 'response' in xhr ? xhr.response : xhr.responseText;\n            setTimeout(function () {\n              resolve(new Response(body, options));\n            }, 0);\n          };\n          xhr.onerror = function () {\n            setTimeout(function () {\n              reject(new TypeError('Network request failed'));\n            }, 0);\n          };\n          xhr.ontimeout = function () {\n            setTimeout(function () {\n              reject(new TypeError('Network request failed'));\n            }, 0);\n          };\n          xhr.onabort = function () {\n            setTimeout(function () {\n              reject(new DOMException('Aborted', 'AbortError'));\n            }, 0);\n          };\n          function fixUrl(url) {\n            try {\n              return url === '' && global.location.href ? global.location.href : url;\n            } catch (e) {\n              return url;\n            }\n          }\n          xhr.open(request.method, fixUrl(request.url), true);\n          if (request.credentials === 'include') {\n            xhr.withCredentials = true;\n          } else if (request.credentials === 'omit') {\n            xhr.withCredentials = false;\n          }\n          if ('responseType' in xhr) {\n            if (support.blob) {\n              xhr.responseType = 'blob';\n            } else if (support.arrayBuffer && request.headers.get('Content-Type') && request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1) {\n              xhr.responseType = 'arraybuffer';\n            }\n          }\n          if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n            Object.getOwnPropertyNames(init.headers).forEach(function (name) {\n              xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n            });\n          } else {\n            request.headers.forEach(function (value, name) {\n              xhr.setRequestHeader(name, value);\n            });\n          }\n          if (request.signal) {\n            request.signal.addEventListener('abort', abortXhr);\n            xhr.onreadystatechange = function () {\n              // DONE (success or failure)\n              if (xhr.readyState === 4) {\n                request.signal.removeEventListener('abort', abortXhr);\n              }\n            };\n          }\n          xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n        });\n      }\n      fetch.polyfill = true;\n      if (!global.fetch) {\n        global.fetch = fetch;\n        global.Headers = Headers;\n        global.Request = Request;\n        global.Response = Response;\n      }\n\n      /***/\n    }\n\n    /******/\n  };\n  /************************************************************************/\n  /******/ // The module cache\n  /******/\n  var __webpack_module_cache__ = {};\n  /******/\n  /******/ // The require function\n  /******/\n  function __webpack_require__(moduleId) {\n    /******/ // Check if module is in cache\n    /******/var cachedModule = __webpack_module_cache__[moduleId];\n    /******/\n    if (cachedModule !== undefined) {\n      /******/return cachedModule.exports;\n      /******/\n    }\n    /******/ // Create a new module (and put it into the cache)\n    /******/\n    var module = __webpack_module_cache__[moduleId] = {\n      /******/ // no module.id needed\n      /******/ // no module.loaded needed\n      /******/exports: {}\n      /******/\n    };\n    /******/\n    /******/ // Execute the module function\n    /******/\n    __webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n    /******/ // Return the exports of the module\n    /******/\n    return module.exports;\n    /******/\n  }\n  /******/\n  /************************************************************************/\n  /******/ /* webpack/runtime/define property getters */\n  /******/\n  !function () {\n    /******/ // define getter functions for harmony exports\n    /******/__webpack_require__.d = function (exports, definition) {\n      /******/for (var key in definition) {\n        /******/if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n          /******/Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n          });\n          /******/\n        }\n        /******/\n      }\n      /******/\n    };\n    /******/\n  }();\n  /******/\n  /******/ /* webpack/runtime/hasOwnProperty shorthand */\n  /******/\n  !function () {\n    /******/__webpack_require__.o = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    /******/\n  }();\n  /******/\n  /******/ /* webpack/runtime/make namespace object */\n  /******/\n  !function () {\n    /******/ // define __esModule on exports\n    /******/__webpack_require__.r = function (exports) {\n      /******/if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n        /******/Object.defineProperty(exports, Symbol.toStringTag, {\n          value: 'Module'\n        });\n        /******/\n      }\n      /******/\n      Object.defineProperty(exports, '__esModule', {\n        value: true\n      });\n      /******/\n    };\n    /******/\n  }();\n  /******/\n  /************************************************************************/\n  var __webpack_exports__ = {};\n  // This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n  !function () {\n    var exports = __webpack_exports__;\n    /*!*********************!*\\\n      !*** ./src/main.ts ***!\n      \\*********************/\n\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    var lappdelegate_1 = __webpack_require__( /*! ./lappdelegate */\"./src/lappdelegate.ts\");\n    window.onload = function () {\n      if (lappdelegate_1.LAppDelegate.getInstance().initialize() == false) {\n        return;\n      }\n      lappdelegate_1.LAppDelegate.getInstance().run();\n    };\n    window.onbeforeunload = function () {\n      return lappdelegate_1.LAppDelegate.releaseInstance();\n    };\n  }();\n  /******/\n})();","map":{"version":3,"names":["Object","defineProperty","exports","value","Live2DCubismFramework","CubismDefaultParameterId","freeze","HitAreaPrefix","HitAreaHead","HitAreaBody","PartsIdCore","PartsArmPrefix","PartsArmLPrefix","PartsArmRPrefix","ParamAngleX","ParamAngleY","ParamAngleZ","ParamEyeLOpen","ParamEyeLSmile","ParamEyeROpen","ParamEyeRSmile","ParamEyeBallX","ParamEyeBallY","ParamEyeBallForm","ParamBrowLY","ParamBrowRY","ParamBrowLX","ParamBrowRX","ParamBrowLAngle","ParamBrowRAngle","ParamBrowLForm","ParamBrowRForm","ParamMouthForm","ParamMouthOpenY","ParamCheek","ParamBodyAngleX","ParamBodyAngleY","ParamBodyAngleZ","ParamBreath","ParamArmLA","ParamArmRA","ParamArmLB","ParamArmRB","ParamHandL","ParamHandR","ParamHairFront","ParamHairSide","ParamHairBack","ParamHairFluffy","ParamShoulderY","ParamBustX","ParamBustY","ParamBaseX","ParamBaseY","ParamNONE","$","__importStar","__webpack_require__","CSM_LOG_LEVEL","CSM_LOG_LEVEL_OFF","CSM_LOG_LEVEL_ERROR","CSM_LOG_LEVEL_WARNING","CSM_LOG_LEVEL_INFO","CSM_LOG_LEVEL_DEBUG","CSM_LOG_LEVEL_VERBOSE","CubismModelSettingJson","icubismmodelsetting_1","live2dcubismframework_1","csmvector_1","cubismjson_1","Version","FileReferences","Groups","Layout","HitAreas","Moc","Textures","Physics","Pose","Expressions","Motions","UserData","Name","FilePath","Id","Ids","Target","Idle","TapBody","PinchIn","PinchOut","Shake","FlickHead","Parameter","SoundPath","FadeInTime","FadeOutTime","CenterX","CenterY","X","Y","Width","Height","LipSync","EyeBlink","InitParameter","InitPartsVisible","Val","FrequestNode","_super","buffer","size","_this","call","_json","CubismJson","create","_jsonValue","csmVector","pushBack","getRoot","getValueByString","prototype","release","delete","GetJson","getModelFileName","isExistModelFile","at","FrequestNode_Moc","getRawString","getTextureCount","isExistTextureFiles","FrequestNode_Textures","getSize","getTextureDirectory","getValueByIndex","pathArray","texturePath","split","arrayLength","length","textureDirectoryStr","i","getTextureFileName","index","getHitAreasCount","isExistHitAreas","FrequestNode_HitAreas","getHitAreaId","CubismFramework","getIdManager","getId","getHitAreaName","getPhysicsFileName","isExistPhysicsFile","FrequestNode_Physics","getPoseFileName","isExistPoseFile","FrequestNode_Pose","getExpressionCount","isExistExpressionFile","FrequestNode_Expressions","getExpressionName","getExpressionFileName","getMotionGroupCount","isExistMotionGroups","FrequestNode_Motions","getKeys","getMotionGroupName","getMotionCount","groupName","isExistMotionGroupName","getMotionFileName","getMotionSoundFileName","isExistMotionSoundFile","getMotionFadeInTimeValue","isExistMotionFadeIn","toFloat","getMotionFadeOutTimeValue","isExistMotionFadeOut","getUserDataFile","isExistUserDataFile","getLayoutMap","outLayoutMap","getMap","map","ret","ite","begin","notEqual","end","preIncrement","setValue","ptr","first","second","getEyeBlinkParameterCount","isExistEyeBlinkParameters","num","FrequestNode_Groups","refI","isNull","isError","getVector","getEyeBlinkParameterId","getLipSyncParameterCount","isExistLipSyncParameters","getLipSyncParameterId","node","ICubismModelSetting","BreathParameterData","CubismBreath","_currentTime","instance","setParameters","breathParameters","_breathParameters","getParameters","updateParameters","model","deltaTimeSeconds","t","data","addParameterValueById","parameterId","offset","peak","Math","sin","cycle","weight","undefined","EyeState","CubismEyeBlink","modelSetting","_blinkingState","EyeState_First","_nextBlinkingTime","_stateStartTimeSeconds","_blinkingIntervalSeconds","_closingSeconds","_closedSeconds","_openingSeconds","_userTimeSeconds","_parameterIds","eyeBlink","setBlinkingInterval","blinkingInterval","setBlinkingSetting","closing","closed","opening","setParameterIds","parameterIds","getParameterIds","parameterValue","EyeState_Closing","EyeState_Closed","EyeState_Opening","EyeState_Interval","determinNextBlinkingTiming","CloseIfZero","setParameterValueById","r","random","PartData","CubismPose","Epsilon","DefaultFadeInSeconds","FadeIn","Link","_fadeTimeSeconds","_lastModel","_partGroups","_partGroupCounts","pose3json","json","root","poseListInfo","poseCount","poseIndex","idListInfo","idCount","groupCount","groupIndex","partInfo","partData","partId","linkListInfo","linkCount","linkIndex","linkPart","linkId","getString","link","clone","pose","reset","beginIndex","partGroupCount","doFade","copyPartOpacities","j","initialize","partsIndex","partIndex","paramIndex","parameterIndex","setPartOpacityByIndex","setParameterValueByIndex","k","opacity","getPartOpacityByIndex","linkPartIndex","visiblePartIndex","newOpacity","phi","backOpacityThreshold","getParameterValueByIndex","a1","backOpacity","v","assignment","getParameterIndex","getPartIndex","clonePartData","increment","CubismId","csmstring_1","id","_id","csmString","isEqual","c","s","isNotEqual","CubismIdManager","cubismid_1","_ids","set","registerIds","ids","registerId","result","findId","isExist","LogLevel","Option","csmDelete","Constant","strtod","cubismidmanager_1","cubismrenderer_1","cubismdebug_1","endPtr","testC","slice","test","substring","number","Number","isNaN","d","parseFloat","NaN","s_isStarted","s_isInitialized","s_option","s_cubismIdManager","vertexOffset","vertexStep","address","startUp","option","CubismLogInfo","Live2DCubismCore","Logging","csmSetLogFunction","logFunction","version","csmGetVersion","major","minor","patch","versionNumber","cleanUp","memorySize","CSM_ASSERT","CubismLogWarning","Value","staticInitializeNotForClientCall","Memory","initializeAmountOfMemory","dispose","staticReleaseNotForClientCall","CubismRenderer","staticRelease","isStarted","isInitialized","coreLogFunction","message","csmGetLogFunction","getLoggingLevel","loggingLevel","LogLevel_Off","CubismMath","cubismvector2_1","range","min","max","x","cos","abs","sqrt","cbrt","cx","isNegativeNumber","Infinity","exp","log","getEasingSine","PI","left","right","degreesToRadian","degrees","radianToDegrees","radian","directionToRadian","from","to","q1","atan2","y","q2","directionToDegrees","degree","radianToDirection","totalAngle","CubismVector2","quadraticEquation","a","b","cardanoAlgorithmForBezier","ba","ca","da","p","p3","q","discriminant","center","threshold","mp3","mp33","cosphi","acos","crtr","t1","root1_1","root2","root3","u1_1","root1_2","sd","u1","v1","root1","CubismMatrix44","_tr","Float32Array","loadIdentity","multiply","dst","n","setMatrix","tr","getArray","getScaleX","getScaleY","getTranslateX","getTranslateY","transformX","src","transformY","invertTransformX","invertTransformY","translateRelative","tr1","translate","translateX","translateY","scaleRelative","scale","multiplyByMatrix","m","cloneMatrix","CubismModelMatrix","cubismmatrix44_1","w","h","_width","setHeight","setWidth","scaleX","scaleY","_height","setPosition","setCenterPosition","centerX","centerY","top","setY","bottom","setX","setupFromLayout","layout","keyWidth","keyHeight","keyX","keyY","keyCenterX","keyCenterY","keyTop","keyBottom","keyLeft","keyRight","key","CubismTargetPoint","cubismmath_1","FrameRate","_faceTargetX","_faceTargetY","_faceX","_faceY","_faceVX","_faceVY","_lastTimeSeconds","update","faceParamMaxV","maxV","deltaTimeWeight","timeToMaxSpeed","frameToMaxSpeed","maxA","dx","dy","vx","vy","ax","ay","curV","maxV_1","getX","getY","add","vector2","substract","multiplyByScaler","scalar","division","divisionByScalar","getLength","getDistanceWith","dot","normalize","pow","rhs","CubismViewMatrix","_screenLeft","_screenRight","_screenTop","_screenBottom","_maxLeft","_maxRight","_maxTop","_maxBottom","_minScale","adjustTranslate","adjustScale","cy","maxScale","getMaxScale","minScale","getMinScale","targetScale","tr2","tr3","setScreenRect","setMaxScreenRect","setMaxScale","_maxScale","setMinScale","isMaxScale","isMinScale","getScreenLeft","getScreenRight","getScreenBottom","getScreenTop","getMaxLeft","getMaxRight","getMaxBottom","getMaxTop","CubismMoc","cubismmodel_1","moc","_moc","_modelCount","_mocVersion","mocBytes","shouldCheckMocConsistency","cubismMoc","consistency","hasMocConsistency","CubismLogError","fromArrayBuffer","csmGetMocVersion","_release","createModel","cubismModel","Model","fromMoc","CubismModel","deleteModel","getLatestMocVersion","csmGetLatestMocVersion","getMocVersion","isConsistent","DrawableCullingData","PartColorData","DrawableColorData","csmmap_1","isOverwritten","color","CubismTextureColor","Color","isCulling","_model","_parameterValues","_parameterMaximumValues","_parameterMinimumValues","_partOpacities","_savedParameters","_drawableIds","_partIds","_isOverwrittenModelMultiplyColors","_isOverwrittenModelScreenColors","_isOverwrittenCullings","_modelOpacity","_userMultiplyColors","_userScreenColors","_userCullings","_userPartMultiplyColors","_userPartScreenColors","_partChildDrawables","_notExistPartId","csmMap","_notExistParameterId","_notExistParameterValues","_notExistPartOpacities","drawables","resetDynamicFlags","getPixelsPerUnit","canvasinfo","PixelsPerUnit","getCanvasWidth","CanvasWidth","getCanvasHeight","CanvasHeight","saveParameters","parameterCount","parameters","count","savedParameterCount","getMultiplyColor","getOverwriteFlagForModelMultiplyColors","getOverwriteFlagForDrawableMultiplyColors","getDrawableMultiplyColor","getScreenColor","getOverwriteFlagForModelScreenColors","getOverwriteFlagForDrawableScreenColors","getDrawableScreenColor","setMultiplyColorByTextureColor","setMultiplyColorByRGBA","R","G","B","A","g","setScreenColorByTextureColor","setScreenColorByRGBA","getPartMultiplyColor","getPartScreenColor","setPartColor","partColors","drawableColors","drawableIndex","setPartMultiplyColorByTextureColor","setPartMultiplyColorByRGBA","setPartScreenColorByTextureColor","setPartScreenColorByRGBA","setOverwriteFlagForModelMultiplyColors","setOverwriteFlagForModelScreenColors","drawableindex","setOverwriteFlagForDrawableMultiplyColors","setOverwriteFlagForDrawableScreenColors","getOverwriteColorForPartMultiplyColors","getOverwriteColorForPartScreenColors","setOverwriteColorForPartColors","setOverwriteColorForPartMultiplyColors","setOverwriteColorForPartScreenColors","getDrawableCulling","getOverwriteFlagForModelCullings","getOverwriteFlagForDrawableCullings","constantFlags","Utils","hasIsDoubleSidedBit","setDrawableCulling","setOverwriteFlagForModelCullings","isOverwrittenCullings","setOverwriteFlagForDrawableCullings","getModelOapcity","setModelOapcity","getModel","partCount","parts","getValue","appendKey","getPartId","getPartCount","setPartOpacityById","getPartOpacityById","getParameterCount","getParameterType","types","getParameterMaximumValue","maximumValues","getParameterMinimumValue","minimumValues","getParameterDefaultValue","defaultValues","getParameterValueById","addParameterValueByIndex","multiplyParameterValueById","multiplyParameterValueByIndex","getDrawableIndex","drawableId","drawableCount","getDrawableCount","getDrawableId","getDrawableRenderOrders","renderOrders","getDrawableTextureIndices","getDrawableTextureIndex","textureIndices","getDrawableDynamicFlagVertexPositionsDidChange","dynamicFlags","hasVertexPositionsDidChangeBit","getDrawableVertexIndexCount","indexCounts","getDrawableVertexCount","vertexCounts","getDrawableVertices","getDrawableVertexPositions","getDrawableVertexIndices","indicesArray","indices","verticesArray","vertexPositions","getDrawableVertexUvs","uvsArray","vertexUvs","getDrawableOpacity","opacities","multiplyColors","multiplyColor","screenColors","screenColor","getDrawableParentPartIndex","parentPartIndices","getDrawableBlendMode","hasBlendAdditiveBit","CubismBlendMode","CubismBlendMode_Additive","hasBlendMultiplicativeBit","CubismBlendMode_Multiplicative","CubismBlendMode_Normal","getDrawableInvertedMaskBit","hasIsInvertedMaskBit","getDrawableMasks","masks","getDrawableMaskCounts","maskCounts","isUsingMasking","getDrawableDynamicFlagIsVisible","hasIsVisibleBit","getDrawableDynamicFlagVisibilityDidChange","hasVisibilityDidChangeBit","getDrawableDynamicFlagOpacityDidChange","hasOpacityDidChangeBit","getDrawableDynamicFlagRenderOrderDidChange","hasRenderOrderDidChangeBit","getDrawableDynamicFlagBlendColorDidChange","hasBlendColorDidChangeBit","loadParameters","values","prepareCapacity","partIds","drawableIds","userCulling","userMultiplyColor","userScreenColor","parentIndex","CubismModelUserData","CubismModelUserDataNode","cubismmodeluserdatajson_1","ArtMesh","_userDataNodes","_artMeshUserDataNode","parseUserData","modelUserData","getArtMeshUserDatas","CubismModelUserDataJson","typeOfArtMesh","nodeCount","getUserDataCount","addNode","targetId","getUserDataId","targetType","getUserDataTargetType","getUserDataValue","Meta","UserDataCount","TotalUserDataSize","toInt","getTotalUserDataSize","CubismUserModel","cubismbreath_1","cubismeyeblink_1","cubismpose_1","cubismmodelmatrix_1","cubismtargetpoint_1","cubismexpressionmotion_1","cubismmotion_1","cubismmotionmanager_1","cubismphysics_1","cubismrenderer_webgl_1","cubismmoc_1","cubismmodeluserdata_1","loadMotion","name","onFinishedMotionHandler","CubismMotion","_motionManager","_expressionManager","_eyeBlink","_breath","_modelMatrix","_pose","_dragManager","_physics","_modelUserData","_initialized","_updating","_opacity","_lipsync","_lastLipSyncValue","_dragX","_dragY","_accelerationX","_accelerationY","_accelerationZ","_mocConsistency","_debugMode","_renderer","CubismMotionManager","setEventCallback","cubismDefaultMotionEventCallback","setInitialized","isUpdating","setUpdating","setDragging","setAcceleration","z","getModelMatrix","setOpacity","getOpacity","loadModel","loadExpression","CubismExpressionMotion","loadPose","loadUserData","loadPhysics","CubismPhysics","isHit","pointX","pointY","drawIndex","vertices","tx","ty","getRenderer","createRenderer","maskBufferCount","deleteRenderer","CubismRenderer_WebGL","motionEventFired","eventValue","caller","customData","ACubismMotion","setFinishedMotionHandler","_onFinishedMotion","getFinishedMotionHandler","_fadeInSeconds","_fadeOutSeconds","_weight","_offsetSeconds","_firedEventValues","motion","motionQueueEntry","userTimeSeconds","isAvailable","isFinished","setIsStarted","setStartTime","setFadeInStartTime","duration","getDuration","getEndTime","setEndTime","getStartTime","fadeWeight","fadeIn","getFadeInStartTime","fadeOut","setState","doUpdateParameters","setIsFinished","setFadeInTime","fadeInSeconds","setFadeOutTime","fadeOutSeconds","getFadeOutTime","getFadeInTime","setWeight","getWeight","getLoopDuration","setOffsetTime","offsetSeconds","getFiredEvent","beforeCheckTimeSeconds","motionTimeSeconds","isExistModelOpacity","getModelOpacityIndex","getModelOpacityId","getModelOpacityValue","ExpressionParameter","ExpressionBlendType","acubismmotion_1","ExpressionKeyFadeIn","ExpressionKeyFadeOut","ExpressionKeyParameters","ExpressionKeyId","ExpressionKeyValue","ExpressionKeyBlend","BlendValueAdd","BlendValueMultiply","BlendValueOverwrite","DefaultFadeTime","_parameters","expression","parse","parameter","blendType","ExpressionBlendType_Add","ExpressionBlendType_Multiply","ExpressionBlendType_Overwrite","param","item","cubismmotioninternal_1","cubismmotionjson_1","EffectNameEyeBlink","EffectNameLipSync","TargetNameModel","TargetNameParameter","TargetNamePartOpacity","IdNameOpacity","UseOldBeziersCurveMotion","lerpPoints","CubismMotionPoint","time","linearEvaluate","points","bezierEvaluate","p01","p12","p23","p012","p123","bezierEvaluateBinarySearch","x_error","x1","x2","cx1","cx2","ta","tb","var33","centerx","ctrlx12","ctrlx21","bezierEvaluateCardanoInterpretation","steppedEvaluate","inverseSteppedEvaluate","evaluateCurve","motionData","curve","curves","target","totalSegmentCount","baseSegmentIndex","segmentCount","pointPosition","segments","basePointIndex","segmentType","CubismMotionSegmentType","CubismMotionSegmentType_Bezier","segment","evaluate","get","_sourceFrameRate","_loopDurationSeconds","_isLoop","_isLoopFadeIn","_lastWeight","_motionData","_modelCurveIdEyeBlink","_modelCurveIdLipSync","_modelCurveIdOpacity","_eyeBlinkParameterIds","fps","timeOffsetSeconds","lipSyncValue","MAX_VALUE","eyeBlinkValue","MaxTargetSize","lipSyncFlags","eyeBlinkFlags","CubismLogDebug","_lipSyncParameterIds","tmpFadeIn","tmpFadeOut","curveCount","type","CubismMotionCurveTarget","CubismMotionCurveTarget_Model","parameterMotionCurveCount","CubismMotionCurveTarget_Parameter","sourceValue","fadeInTime","fadeOutTime","fin","fout","paramWeight","CubismMotionCurveTarget_PartOpacity","setIsLoop","loop","isLoop","setIsLoopFadeIn","loopFadeIn","isLoopFadeIn","setParameterFadeInTime","setParameterFadeOutTime","getParameterFadeInTime","getParameterFadeOutTime","setEffectIds","eyeBlinkParameterIds","lipSyncParameterIds","motionJson","CubismMotionData","CubismMotionJson","getMotionDuration","isMotionLoop","getMotionCurveCount","getMotionFps","eventCount","getEventCount","areBeziersRestructed","getEvaluationOptionFlag","EvaluationOptionFlag","EvaluationOptionFlag_AreBeziersRistricted","isExistMotionFadeInTime","getMotionFadeInTime","isExistMotionFadeOutTime","getMotionFadeOutTime","updateSize","CubismMotionCurve","getMotionTotalSegmentCount","CubismMotionSegment","getMotionTotalPointCount","events","CubismMotionEvent","totalPointCount","getMotionCurveTarget","getMotionCurveId","isExistMotionCurveFadeInTime","getMotionCurveFadeInTime","isExistMotionCurveFadeOutTime","getMotionCurveFadeOutTime","segmentPosition","getMotionCurveSegmentCount","getMotionCurveSegment","CubismMotionSegmentType_Linear","CubismMotionSegmentType_Stepped","CubismMotionSegmentType_InverseStepped","userdatacount","fireTime","getEventTime","getEventValue","u","localeCompare","Duration","Loop","AreBeziersRestricted","CurveCount","Fps","TotalSegmentCount","TotalPointCount","Curves","Segments","Time","toBoolean","flagType","curveIndex","segmentIndex","getTotalEventValueSize","userDataIndex","cubismmotionqueuemanager_1","_reservePriority","getCurrentPriority","_currentPriority","getReservePriority","setReservePriority","val","startMotionPriority","autoDelete","priority","startMotion","updateMotion","updated","doUpdateMotion","reserveMotion","CubismMotionQueueManager","CubismMotionQueueEntry","_autoDelete","_motion","_available","_finished","_started","_startTimeSeconds","_fadeInStartTimeSeconds","_endTimeSeconds","_stateTimeSeconds","_stateWeight","_lastEventCheckSeconds","_motionQueueEntryHandle","_isTriggeredFadeOut","setFadeOut","startFadeOut","newEndTimeSeconds","startTime","endTime","f","setIsAvailable","timeSeconds","getStateTime","getStateWeight","getLastCheckEventSeconds","setLastCheckEventSeconds","checkSeconds","isTriggeredFadeOut","getFadeOutSeconds","InvalidMotionQueueEntryHandleValue","cubismmotionqueueentry_1","_eventCallBack","_eventCustomData","_motions","erase","isFinishedByHandle","motionQueueEntryNumber","stopAllMotions","getCubismMotionQueueEntry","callback","firedList","PhysicsOutput","Options","cubismphysicsinternal_1","cubismphysicsjson_1","PhysicsTypeTagX","PhysicsTypeTagY","PhysicsTypeTagAngle","AirResistance","MaximumWeight","MovementThreshold","MaxDeltaTime","_physicsRig","_options","gravity","wind","_currentRigOutputs","_previousRigOutputs","_currentRemainTime","_parameterCaches","_parameterInputCaches","physics","physicsJson","CubismPhysicsRig","CubismPhysicsJson","getGravity","getWind","subRigCount","getSubRigCount","getFps","settings","CubismPhysicsSubRig","inputs","getTotalInputCount","CubismPhysicsInput","outputs","getTotalOutputCount","CubismPhysicsOutput","particles","getVertexCount","CubismPhysicsParticle","clear","inputIndex","outputIndex","particleIndex","normalizationPosition","minimum","getNormalizationPositionMinimumValue","maximum","getNormalizationPositionMaximumValue","defalut","getNormalizationPositionDefaultValue","normalizationAngle","getNormalizationAngleMinimumValue","getNormalizationAngleMaximumValue","getNormalizationAngleDefaultValue","inputCount","getInputCount","baseInputIndex","sourceParameterIndex","getInputWeight","reflect","getInputReflect","getInputType","CubismPhysicsSource","CubismPhysicsSource_X","getNormalizedParameterValue","getInputTranslationXFromNormalizedParameterValue","CubismPhysicsSource_Y","getInputTranslationYFromNormalizedParamterValue","CubismPhysicsSource_Angle","getInputAngleFromNormalizedParameterValue","source","CubismPhysicsTargetType","CubismPhysicsTargetType_Parameter","getInputSourceId","outputCount","getOutputCount","baseOutputIndex","currentRigOutput","resize","previousRigOutput","destinationParameterIndex","vertexIndex","getOutputVertexIndex","angleScale","getOutputAngleScale","getOutputWeight","destination","getOutputDestinationId","getOutputType","getOutputTranslationX","getScale","getOutputScaleTranslationX","getOutputTranslationY","getOutputScaleTranslationY","getOutputAngle","getOutputScaleAngle","getOutputReflect","particleCount","getParticleCount","baseParticleIndex","mobility","getParticleMobility","delay","getParticleDelay","acceleration","getParticleAcceleration","radius","getParticleRadius","position","getParticlePosition","stabilization","_a","_b","_c","_d","radAngle","outputValue","totalTranslation","currentSetting","currentInputs","currentOutputs","currentParticles","parameterValues","parameterMaximumValues","parameterMinimumValues","parameterDefaultValues","settingIndex","angle","translation","outParameterCaches","JSON","stringify","subarray","outParamIndex","physicsDeltaTime","inputWeight","alpha","interpolate","outParameterValues","setOptions","options","getOption","strand","initialPosition","lastPosition","lastGravity","velocity","force","sign","targetTranslation","targetAngle","parameterMinimumValue","parameterMaximumValue","parameterDefaultValue","isInverted","normalizeParameterValue","normalizaitionPosition","parentGravity","getRangeValue","maxValue","minValue","getDefaultValue","translationScale","updateParticles","strandCount","windDirection","thresholdValue","airResistance","totalRadian","currentGravity","direction","newDirection","updateParticlesForStabilization","updateOutputParameterValue","parameterValueMinimum","parameterValueMaximum","output","outputScale","valueBelowMinimum","valueExceededMaximum","parameterMinimum","parameterMaximum","parameterDefault","normalizedMinimum","normalizedMaximum","normalizedDefault","minNormValue","maxNormValue","middleNormValue","middleValue","paramValue","nLength","pLength","CubismPhysicsNormalization","CubismPhysicsParameter","PhysicsJsonEffectiveForces","Position","Angle","Type","EffectiveForces","TotalInputCount","TotalOutputCount","PhysicsSettingCount","Gravity","Wind","VertexCount","PhysicsSettings","Normalization","Minimum","Maximum","Default","Reflect","Weight","Input","Source","Output","Scale","VertexIndex","Destination","Vertices","Mobility","Delay","Radius","Acceleration","physicsSettingIndex","_isCulling","_isPremultipliedAlpha","_anisotropy","_modelColor","_useHighPrecisionMask","_mvpMatrix4x4","renderer","drawModel","saveProfile","doDrawModel","restoreProfile","setMvpMatrix","matrix44","getMvpMatrix","setModelColor","red","green","blue","getModelColor","setIsPremultipliedAlpha","enable","isPremultipliedAlpha","setIsCulling","culling","setAnisotropy","getAnisotropy","useHighPrecisionMask","high","isUsingHighPrecisionMask","fragmentShaderSrcMaskInvertedPremultipliedAlpha","fragmentShaderSrcMaskPremultipliedAlpha","fragmentShaderSrcPremultipliedAlpha","vertexShaderSrcMasked","vertexShaderSrc","fragmentShaderSrcsetupMask","vertexShaderSrcSetupMask","ShaderNames","CubismShaderSet","CubismShader_WebGL","CubismRendererProfile_WebGL","CubismClippingContext","CubismRenderTextureResource","CubismClippingManager_WebGL","csmrectf_1","ColorChannelCount","ClippingMaskMaxCountOnDefault","ClippingMaskMaxCountOnMultiRenderTexture","ShaderCount","s_instance","s_viewport","s_fbo","_currentMaskRenderTexture","_maskColorBuffers","_currentFrameNo","_renderTextureCount","_clippingMaskBufferSize","_clippingContextListForMask","_clippingContextListForDraw","_channelColors","_tmpBoundsOnModel","csmRect","_tmpMatrix","_tmpMatrixForMask","_tmpMatrixForDraw","_maskTexture","tmp","getChannelFlagAsColor","channelNo","getMaskRenderTexture","textures","frameNo","_maskRenderTextures","gl","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setGL","calcClippedDrawTotalBounds","clippingContext","clippedDrawTotalMinX","clippedDrawTotalMinY","clippedDrawTotalMaxX","MIN_VALUE","clippedDrawTotalMaxY","clippedDrawCount","_clippedDrawableIndexList","clippedDrawableIndex","drawableVertexCount","drawableVertexes","minX","minY","maxX","maxY","pi","_allClippedDrawRect","width","height","_isUsing","deleteFramebuffer","deleteTexture","_clearedFrameBufferflags","drawableMasks","drawableMaskCounts","renderTextureCount","findSameClip","addClippedDrawable","setupClippingContext","usingClipCount","clipIndex","cc","setupLayoutBounds","viewport","preDraw","clipContext","allClipedDrawRect","layoutBoundsOnTex01","_layoutBounds","MARGIN","clipContextRenderTexture","_bufferIndex","ppu","maskPixelSize","getClippingManager","physicalMaskWidth","physicalMaskHeight","setRect","expand","_matrixForMask","_matrixForDraw","clipDrawCount","_clippingIdCount","clipDrawIndex","_clippingIdList","clearColor","COLOR_BUFFER_BIT","setClippingContextBufferForMask","drawMesh","sameCount","clipId","useClippingMaskMaxCount","_layoutChannelNo","layoutCountMaxValue","countPerSheetDiv","countPerSheetMod","div","mod","curClipIndex","renderTextureNo","layoutCount","checkChannelNo","xpos","ypos","getColorBuffer","getClippingContextListForDraw","getClippingMaskCount","setClippingMaskBufferSize","getClippingMaskBufferSize","getRenderTextureCount","texture","manager","clippingDrawableIndices","clipCount","_owner","push","setGl","_s","$RefreshSig$","_lastVertexAttribArrayEnabled","Array","_lastColorMask","_lastBlending","_lastViewport","setGlEnable","enabled","disable","setGlEnableVertexAttribArray","enableVertexAttribArray","disableVertexAttribArray","save","_lastArrayBufferBinding","getParameter","ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER_BINDING","_lastProgram","CURRENT_PROGRAM","_lastActiveTexture","ACTIVE_TEXTURE","activeTexture","TEXTURE1","_lastTexture1Binding2D","TEXTURE_BINDING_2D","TEXTURE0","_lastTexture0Binding2D","getVertexAttrib","VERTEX_ATTRIB_ARRAY_ENABLED","_lastScissorTest","isEnabled","SCISSOR_TEST","_lastStencilTest","STENCIL_TEST","_lastDepthTest","DEPTH_TEST","_lastCullFace","CULL_FACE","_lastBlend","BLEND","_lastFrontFace","FRONT_FACE","COLOR_WRITEMASK","BLEND_SRC_RGB","BLEND_DST_RGB","BLEND_SRC_ALPHA","BLEND_DST_ALPHA","_lastFBO","FRAMEBUFFER_BINDING","VIEWPORT","restore","useProgram","frontFace","colorMask","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","_lastElementArrayBufferBinding","blendFuncSeparate","_s2","_shaderSets","getInstance","deleteInstance","releaseShaderProgram","setupShaderProgram","textureId","vertexCount","vertexArray","indexArray","uvArray","bufferData","colorBlendMode","baseColor","matrix4x4","invertedMask","generateShaders","SRC_COLOR","DST_COLOR","SRC_ALPHA","DST_ALPHA","getClippingContextBufferForMask","shaderSet","ShaderNames_SetupMask","shaderProgram","uniform1i","samplerTexture0Location","vertex","createBuffer","DYNAMIC_DRAW","attributePositionLocation","vertexAttribPointer","FLOAT","uv","attributeTexCoordLocation","uniform4f","uniformChannelFlagLocation","colorChannel","uniformMatrix4fv","uniformClipMatrixLocation","rect","uniformBaseColorLocation","getRight","getBottom","uniformMultiplyColorLocation","uniformScreenColorLocation","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","masked","getClippingContextBufferForDraw","ShaderNames_NormalPremultipliedAlpha","ONE","ShaderNames_AddPremultipliedAlpha","ShaderNames_MultPremultipliedAlpha","tex","samplerTexture1Location","uniformMatrixLocation","deleteProgram","loadShaderProgram","getAttribLocation","getUniformLocation","vertexShaderSource","fragmentShaderSource","createProgram","vertShader","compileShaderSource","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","attachShader","linkProgram","linkStatus","getProgramParameter","LINK_STATUS","deleteShader","shaderType","shaderSource","shader","createShader","compileShader","getShaderInfoLog","status","getShaderParameter","COMPILE_STATUS","_s3","_clippingContextBufferForMask","_clippingContextBufferForDraw","_rendererProfile","firstDraw","_textures","_sortedDrawableIndexList","_bufferData","WebGLBuffer","_clippingManager","modelTextureNo","glTexture","getBindedTextures","deleteBuffer","renderOrder","order","setClippingContextBufferForDraw","textureNo","indexCount","CCW","modelColorRGBA","drawtexture","drawElements","TRIANGLES","UNSIGNED_SHORT","doStaticRelease","setRenderState","fbo","CW","_extension","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","clip","getExtension","iterator","csmPair","_keyValues","_dummyValue","_size","found","newSize","fitToSize","DefaultSize","_index","splice","ite2","dumpAsInt","idx","_map","preDecrement","iteold","decrement","getCenterX","getCenterY","append","substr","expansion","getBytes","encodeURIComponent","replace","isLess","isGreat","isEmpty","initialCapacity","_ptr","_capacity","s_defaultSize","assign","curSize","callPlacementNew","sub","insert","dstSi","srcSi","srcEi","addCount","addSize","_vector","remove","getOffset","newVector","substitution","CubismDebug","CubismLogVerbose","CubismLogPrintIn","CubismLogPrint","cubismframeworkconfig_1","level","fmt","args","print","expr","console","assert","_i","arguments","LogLevel_Verbose","LogLevel_Debug","LogLevel_Info","LogLevel_Warning","LogLevel_Error","logLevel","format","logPrint","dumpBytes","JsonMap","JsonArray","JsonNullvalue","JsonError","JsonString","JsonBoolean","JsonFloat","CSM_JSON_ERROR_TYPE_MISMATCH","CSM_JSON_ERROR_INDEX_OF_BOUNDS","defaultValue","indent","errorValue","setErrorNotForClientCall","nullValue","s_dummyKeys","isBool","isFloat","isString","isArray","isMap","equals","isStatic","errorStr","trueValue","falseValue","_parseCallback","cubismjsonextension_1","CubismJsonExtension","parseJsonObject","_error","_lineCount","_root","parseBytes","succeeded","arrayBufferToString","uint8Array","Uint8Array","str","len","pad","toString","decodeURIComponent","parseCallback","endPos","decodeBuffer","parseValue","strbuf","getParseError","checkEndOfFile","outEndPos","o","afterString","indexOf","parseString","parseArray","parseObject","string","c2","bufStart","localRetEndPos2","ok","FOR_LOOP","FOR_LOOP2","put","FOR_LOOP3","localRetEndpos2","_value","_stringBuffer","parseInt","round","_boolValue","_isStatic","_array","stringBuffer","iter","_keys","obj","forEach","convValue","Boolean","String","parseJsonArray","arr","keys","convKey","RenderTargetHeight","RenderTargetWidth","CubismLoggingLevel","DebugTouchLogEnable","DebugLogEnable","MOCConsistencyValidationEnable","PriorityForce","PriorityNormal","PriorityIdle","PriorityNone","HitAreaNameBody","HitAreaNameHead","MotionGroupTapBody","MotionGroupIdle","ModelDirSize","ModelDir","PowerImageName","GearImageName","BackImageName","ResourcesPath","ViewLogicalMaxTop","ViewLogicalMaxBottom","ViewLogicalMaxRight","ViewLogicalMaxLeft","ViewLogicalTop","ViewLogicalBottom","ViewLogicalRight","ViewLogicalLeft","ViewMinScale","ViewMaxScale","ViewScale","CanvasSize","LAppDelegate","frameBuffer","canvas","LAppDefine","lapplive2dmanager_1","lapppal_1","lapptexturemanager_1","lappview_1","_s4","_captured","_mouseX","_mouseY","_isEnd","_cubismOption","_view","LAppView","_textureManager","LAppTextureManager","releaseInstance","document","createElement","_resizeCanvas","getContext","alert","body","innerHTML","appendChild","blendFunc","supportTouch","ontouchstart","onTouchBegan","ontouchmove","onTouchMoved","ontouchend","onTouchEnded","ontouchcancel","onTouchCancel","onmousedown","onClickBegan","onmousemove","onMouseMoved","onmouseup","onClickEnded","initializeCubism","onResize","initializeSprite","LAppLive2DManager","run","LAppPal","updateTime","depthFunc","LEQUAL","DEPTH_BUFFER_BIT","clearDepth","render","requestAnimationFrame","vertexShaderId","printMessage","vertexShader","fragmentShaderId","fragmentShader","programId","getView","getTextureManager","window","innerWidth","innerHeight","e","posX","pageX","posY","pageY","onTouchesBegan","getBoundingClientRect","clientX","clientY","onTouchesMoved","onTouchesEnded","changedTouches","lappdelegate_1","lappmodel_1","_finishedMotion","self","_viewMatrix","_models","_sceneIndex","changeScene","no","releaseAllModel","onDrag","ExpressionSet","setExpression","onTap","concat","toFixed","onUpdate","modelCount","projection","draw","nextScene","modelPath","modelJsonName","LAppModel","loadAssets","setViewMatrix","cubismdefaultparameterid_1","cubismmodelsettingjson_1","cubismusermodel_1","lappwavfilehandler_1","LoadStep","_modelSetting","_modelHomeDir","_eyeBlinkIds","_lipSyncIds","_expressions","_hitArea","_userArea","_idParamAngleX","_idParamAngleY","_idParamAngleZ","_idParamEyeBallX","_idParamEyeBallY","_idParamBodyAngleX","_state","LoadAssets","_expressionCount","_textureCount","_motionCount","_allMotionCount","_consistency","dir","fileName","then","response","arrayBuffer","setting","byteLength","LoadModel","setupModel","modelFileName","LoadExpression","loadCubismExpression","WaitLoadModel","count_1","_loop_1","expressionName","expressionFileName","LoadPhysics","loadCubismPhysics","WaitLoadExpression","physicsFileName","LoadPose","loadCubismPose","WaitLoadPhysics","poseFileName","SetupEyeBlink","setupEyeBlink","WaitLoadPose","SetupBreath","setupBreath","LoadUserData","userDataFile","SetupEyeBlinkIds","setupEyeBlinkIds","WaitLoadUserData","eyeBlinkIdCount","SetupLipSyncIds","setupLipSyncIds","lipSyncIdCount","SetupLayout","setupLayout","LoadMotion","loadCubismMotion","WaitLoadMotion","group","motionGroupCount","preLoadMotionGroup","LoadTexture","setupTextures","usePremultiply","textureCount_1","_loop_2","modelTextureNumber","this_1","onLoad","textureInfo","CompleteSetup","WaitLoadTexture","reloadRenderer","getDeltaTime","motionUpdated","startRandomMotion","_wavFileHandler","getRms","motionFileName","fadeTime","voice","path","start","floor","expressionId","setRandomExpression","name_1","hitTest","hitArenaName","drawId","_loop_3","this_2","name_2","tmpMotion","releaseMotions","releaseExpressions","doDraw","matrix","label","fetch","sent","filePath","s_deltaTime","s_currentFrame","Date","now","s_lastFrame","lastUpdate","TextureInfo","createTextureFromPngFile","usePremultply","img","Image","state_1","onload","LINEAR_MIPMAP_LINEAR","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","generateMipmap","releaseTextures","releaseTextureByTexture","releaseTextureByFilePath","cubismviewmatrix_1","touchmanager_1","_s5","_programId","_back","_gear","_touchManager","TouchManager","_deviceToScreen","ratio","screenW","screenH","flush","live2DManager","textureManager","resourcesPath","imageName","touchesBegan","viewX","transformViewX","viewY","transformViewY","touchesMoved","deviceX","screenX","deviceY","screenY","transformScreenX","transformScreenY","ByteReader","WavFileInfo","LAppWavFileHandler","_loadFiletoBytes","_byteReader","_fileByte","_fileDataView","DataView","_fileSize","_pcmData","_lastRms","_sampleOffset","_wavFileInfo","goalOffset","rms","_samplesPerChannel","_samplingRate","channelCount","_numberOfChannels","sampleCount","pcm","loadWavFile","releasePcmData","asyncFileLoad","__awaiter","responce","_readOffset","_fileName","getCheckSignature","Error","get32LittleEndian","get16LittleEndian","_bitsPerSample","fmtChunkSize","getPcmSample","pcm32","get8","get24LittleEndian","getUint8","reference","getSignature","referenceString","TextEncoder","encode","signatureOffset","_startX","_startY","_lastX","_lastY","_lastX1","_lastY1","_lastX2","_lastY2","_lastTouchDistance","_deltaX","_deltaY","_scale","_touchSingle","_flipAvailable","getDeltaX","getDeltaY","getStartX","getStartY","getX1","getY1","getX2","getY2","isSingleTouch","isFlickAvailable","disableFlick","getFlickDistance","calculateDistance","y1","y2","calculateMovingAmount","v2","absoluteValue1","absoluteValue2","global","globalThis","support","searchParams","iterable","Symbol","blob","Blob","formData","isDataView","viewClasses","isArrayBufferView","ArrayBuffer","isView","normalizeName","TypeError","normalizeValue","iteratorFor","items","next","shift","done","headers","Headers","header","getOwnPropertyNames","oldValue","has","thisArg","hasOwnProperty","entries","consumed","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","chars","view","fromCharCode","bufferClone","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","isConsumed","byteOffset","text","decode","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","url","credentials","mode","signal","referrer","cache","reParamSearch","getTime","reQueryString","form","trim","bytes","join","parseHeaders","rawHeaders","preProcessedHeaders","line","Body","Response","bodyInit","statusText","redirectStatuses","redirect","DOMException","err","stack","init","request","aborted","xhr","XMLHttpRequest","abortXhr","getAllResponseHeaders","responseURL","responseText","setTimeout","ontimeout","onabort","fixUrl","location","href","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","__webpack_module_cache__","moduleId","cachedModule","module","__webpack_modules__","definition","enumerable","toStringTag"],"sources":["webpack:///Framework/src/cubismdefaultparameterid.ts","webpack:///Framework/src/cubismframeworkconfig.ts","webpack:///Framework/src/cubismmodelsettingjson.ts","webpack:///Framework/src/effect/cubismbreath.ts","webpack:///Framework/src/effect/cubismeyeblink.ts","webpack:///Framework/src/effect/cubismpose.ts","webpack:///Framework/src/icubismmodelsetting.ts","webpack:///Framework/src/id/cubismid.ts","webpack:///Framework/src/id/cubismidmanager.ts","webpack:///Framework/src/live2dcubismframework.ts","webpack:///Framework/src/math/cubismmath.ts","webpack:///Framework/src/math/cubismmatrix44.ts","webpack:///Framework/src/math/cubismmodelmatrix.ts","webpack:///Framework/src/math/cubismtargetpoint.ts","webpack:///Framework/src/math/cubismvector2.ts","webpack:///Framework/src/math/cubismviewmatrix.ts","webpack:///Framework/src/model/cubismmoc.ts","webpack:///Framework/src/model/cubismmodel.ts","webpack:///Framework/src/model/cubismmodeluserdata.ts","webpack:///Framework/src/model/cubismmodeluserdatajson.ts","webpack:///Framework/src/model/cubismusermodel.ts","webpack:///Framework/src/motion/acubismmotion.ts","webpack:///Framework/src/motion/cubismexpressionmotion.ts","webpack:///Framework/src/motion/cubismmotion.ts","webpack:///Framework/src/motion/cubismmotioninternal.ts","webpack:///Framework/src/motion/cubismmotionjson.ts","webpack:///Framework/src/motion/cubismmotionmanager.ts","webpack:///Framework/src/motion/cubismmotionqueueentry.ts","webpack:///Framework/src/motion/cubismmotionqueuemanager.ts","webpack:///Framework/src/physics/cubismphysics.ts","webpack:///Framework/src/physics/cubismphysicsinternal.ts","webpack:///Framework/src/physics/cubismphysicsjson.ts","webpack:///Framework/src/rendering/cubismrenderer.ts","webpack:///Framework/src/rendering/cubismrenderer_webgl.ts","webpack:///Framework/src/type/csmmap.ts","webpack:///Framework/src/type/csmrectf.ts","webpack:///Framework/src/type/csmstring.ts","webpack:///Framework/src/type/csmvector.ts","webpack:///Framework/src/utils/cubismdebug.ts","webpack:///Framework/src/utils/cubismjson.ts","webpack:///Framework/src/utils/cubismjsonextension.ts","webpack:///src/lappdefine.ts","webpack:///src/lappdelegate.ts","webpack:///src/lapplive2dmanager.ts","webpack:///src/lappmodel.ts","webpack:///src/lapppal.ts","webpack:///src/lapptexturemanager.ts","webpack:///src/lappview.ts","webpack:///src/lappwavfilehandler.ts","webpack:///src/touchmanager.ts","webpack:///node_modules/whatwg-fetch/fetch.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///src/main.ts"],"sourcesContent":["/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n/**\n * @brief パラメータIDのデフォルト値を保持する定数<br>\n *         デフォルト値の仕様は以下のマニュアルに基づく<br>\n *         https://docs.live2d.com/cubism-editor-manual/standard-parametor-list/\n */\nexport const CubismDefaultParameterId = Object.freeze<Record<string, string>>({\n  // パーツID\n  HitAreaPrefix: 'HitArea',\n  HitAreaHead: 'Head',\n  HitAreaBody: 'Body',\n  PartsIdCore: 'Parts01Core',\n  PartsArmPrefix: 'Parts01Arm_',\n  PartsArmLPrefix: 'Parts01ArmL_',\n  PartsArmRPrefix: 'Parts01ArmR_',\n  // パラメータID\n  ParamAngleX: 'ParamAngleX',\n  ParamAngleY: 'ParamAngleY',\n  ParamAngleZ: 'ParamAngleZ',\n  ParamEyeLOpen: 'ParamEyeLOpen',\n  ParamEyeLSmile: 'ParamEyeLSmile',\n  ParamEyeROpen: 'ParamEyeROpen',\n  ParamEyeRSmile: 'ParamEyeRSmile',\n  ParamEyeBallX: 'ParamEyeBallX',\n  ParamEyeBallY: 'ParamEyeBallY',\n  ParamEyeBallForm: 'ParamEyeBallForm',\n  ParamBrowLY: 'ParamBrowLY',\n  ParamBrowRY: 'ParamBrowRY',\n  ParamBrowLX: 'ParamBrowLX',\n  ParamBrowRX: 'ParamBrowRX',\n  ParamBrowLAngle: 'ParamBrowLAngle',\n  ParamBrowRAngle: 'ParamBrowRAngle',\n  ParamBrowLForm: 'ParamBrowLForm',\n  ParamBrowRForm: 'ParamBrowRForm',\n  ParamMouthForm: 'ParamMouthForm',\n  ParamMouthOpenY: 'ParamMouthOpenY',\n  ParamCheek: 'ParamCheek',\n  ParamBodyAngleX: 'ParamBodyAngleX',\n  ParamBodyAngleY: 'ParamBodyAngleY',\n  ParamBodyAngleZ: 'ParamBodyAngleZ',\n  ParamBreath: 'ParamBreath',\n  ParamArmLA: 'ParamArmLA',\n  ParamArmRA: 'ParamArmRA',\n  ParamArmLB: 'ParamArmLB',\n  ParamArmRB: 'ParamArmRB',\n  ParamHandL: 'ParamHandL',\n  ParamHandR: 'ParamHandR',\n  ParamHairFront: 'ParamHairFront',\n  ParamHairSide: 'ParamHairSide',\n  ParamHairBack: 'ParamHairBack',\n  ParamHairFluffy: 'ParamHairFluffy',\n  ParamShoulderY: 'ParamShoulderY',\n  ParamBustX: 'ParamBustX',\n  ParamBustY: 'ParamBustY',\n  ParamBaseX: 'ParamBaseX',\n  ParamBaseY: 'ParamBaseY',\n  ParamNONE: 'NONE:',\n});\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismdefaultparameterid';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const HitAreaBody = $.CubismDefaultParameterId.HitAreaBody;\n  export const HitAreaHead = $.CubismDefaultParameterId.HitAreaHead;\n  export const HitAreaPrefix = $.CubismDefaultParameterId.HitAreaPrefix;\n  export const ParamAngleX = $.CubismDefaultParameterId.ParamAngleX;\n  export const ParamAngleY = $.CubismDefaultParameterId.ParamAngleY;\n  export const ParamAngleZ = $.CubismDefaultParameterId.ParamAngleZ;\n  export const ParamArmLA = $.CubismDefaultParameterId.ParamArmLA;\n  export const ParamArmLB = $.CubismDefaultParameterId.ParamArmLB;\n  export const ParamArmRA = $.CubismDefaultParameterId.ParamArmRA;\n  export const ParamArmRB = $.CubismDefaultParameterId.ParamArmRB;\n  export const ParamBaseX = $.CubismDefaultParameterId.ParamBaseX;\n  export const ParamBaseY = $.CubismDefaultParameterId.ParamBaseY;\n  export const ParamBodyAngleX = $.CubismDefaultParameterId.ParamBodyAngleX;\n  export const ParamBodyAngleY = $.CubismDefaultParameterId.ParamBodyAngleY;\n  export const ParamBodyAngleZ = $.CubismDefaultParameterId.ParamBodyAngleZ;\n  export const ParamBreath = $.CubismDefaultParameterId.ParamBreath;\n  export const ParamBrowLAngle = $.CubismDefaultParameterId.ParamBrowLAngle;\n  export const ParamBrowLForm = $.CubismDefaultParameterId.ParamBrowLForm;\n  export const ParamBrowLX = $.CubismDefaultParameterId.ParamBrowLX;\n  export const ParamBrowLY = $.CubismDefaultParameterId.ParamBrowLY;\n  export const ParamBrowRAngle = $.CubismDefaultParameterId.ParamBrowRAngle;\n  export const ParamBrowRForm = $.CubismDefaultParameterId.ParamBrowRForm;\n  export const ParamBrowRX = $.CubismDefaultParameterId.ParamBrowRX;\n  export const ParamBrowRY = $.CubismDefaultParameterId.ParamBrowRY;\n  export const ParamBustX = $.CubismDefaultParameterId.ParamBustX;\n  export const ParamBustY = $.CubismDefaultParameterId.ParamBustY;\n  export const ParamCheek = $.CubismDefaultParameterId.ParamCheek;\n  export const ParamEyeBallForm = $.CubismDefaultParameterId.ParamEyeBallForm;\n  export const ParamEyeBallX = $.CubismDefaultParameterId.ParamEyeBallX;\n  export const ParamEyeBallY = $.CubismDefaultParameterId.ParamEyeBallY;\n  export const ParamEyeLOpen = $.CubismDefaultParameterId.ParamEyeLOpen;\n  export const ParamEyeLSmile = $.CubismDefaultParameterId.ParamEyeLSmile;\n  export const ParamEyeROpen = $.CubismDefaultParameterId.ParamEyeROpen;\n  export const ParamEyeRSmile = $.CubismDefaultParameterId.ParamEyeRSmile;\n  export const ParamHairBack = $.CubismDefaultParameterId.ParamHairBack;\n  export const ParamHairFluffy = $.CubismDefaultParameterId.ParamHairFluffy;\n  export const ParamHairFront = $.CubismDefaultParameterId.ParamHairFront;\n  export const ParamHairSide = $.CubismDefaultParameterId.ParamHairSide;\n  export const ParamHandL = $.CubismDefaultParameterId.ParamHandL;\n  export const ParamHandR = $.CubismDefaultParameterId.ParamHandR;\n  export const ParamMouthForm = $.CubismDefaultParameterId.ParamMouthForm;\n  export const ParamMouthOpenY = $.CubismDefaultParameterId.ParamMouthOpenY;\n  export const ParamNONE = $.CubismDefaultParameterId.ParamNONE;\n  export const ParamShoulderY = $.CubismDefaultParameterId.ParamShoulderY;\n  export const PartsArmLPrefix = $.CubismDefaultParameterId.PartsArmLPrefix;\n  export const PartsArmPrefix = $.CubismDefaultParameterId.PartsArmPrefix;\n  export const PartsArmRPrefix = $.CubismDefaultParameterId.PartsArmRPrefix;\n  export const PartsIdCore = $.CubismDefaultParameterId.PartsIdCore;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n//========================================================\n//  ログ出力関数の設定\n//========================================================\n\n//---------- ログ出力レベル 選択項目 定義 ----------\n// 詳細ログ出力設定\nexport const CSM_LOG_LEVEL_VERBOSE = 0;\n// デバッグログ出力設定\nexport const CSM_LOG_LEVEL_DEBUG = 1;\n// Infoログ出力設定\nexport const CSM_LOG_LEVEL_INFO = 2;\n// 警告ログ出力設定\nexport const CSM_LOG_LEVEL_WARNING = 3;\n// エラーログ出力設定\nexport const CSM_LOG_LEVEL_ERROR = 4;\n// ログ出力オフ設定\nexport const CSM_LOG_LEVEL_OFF = 5;\n\n/**\n * ログ出力レベル設定。\n *\n * 強制的にログ出力レベルを変える時に定義を有効にする。\n * CSM_LOG_LEVEL_VERBOSE ～ CSM_LOG_LEVEL_OFF を選択する。\n */\nexport const CSM_LOG_LEVEL: number = CSM_LOG_LEVEL_VERBOSE;\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { ICubismModelSetting } from './icubismmodelsetting';\nimport { CubismIdHandle } from './id/cubismid';\nimport { CubismFramework } from './live2dcubismframework';\nimport { csmMap, iterator } from './type/csmmap';\nimport { csmVector } from './type/csmvector';\nimport { CubismJson, Value } from './utils/cubismjson';\n\n/**\n * Model3Jsonのキー文字列\n */\n\n// JSON Keys\nconst Version = 'Version';\nconst FileReferences = 'FileReferences';\nconst Groups = 'Groups';\nconst Layout = 'Layout';\nconst HitAreas = 'HitAreas';\n\nconst Moc = 'Moc';\nconst Textures = 'Textures';\nconst Physics = 'Physics';\nconst Pose = 'Pose';\nconst Expressions = 'Expressions';\nconst Motions = 'Motions';\n\nconst UserData = 'UserData';\nconst Name = 'Name';\nconst FilePath = 'File';\nconst Id = 'Id';\nconst Ids = 'Ids';\nconst Target = 'Target';\n\n// Motions\nconst Idle = 'Idle';\nconst TapBody = 'TapBody';\nconst PinchIn = 'PinchIn';\nconst PinchOut = 'PinchOut';\nconst Shake = 'Shake';\nconst FlickHead = 'FlickHead';\nconst Parameter = 'Parameter';\n\nconst SoundPath = 'Sound';\nconst FadeInTime = 'FadeInTime';\nconst FadeOutTime = 'FadeOutTime';\n\n// Layout\nconst CenterX = 'CenterX';\nconst CenterY = 'CenterY';\nconst X = 'X';\nconst Y = 'Y';\nconst Width = 'Width';\nconst Height = 'Height';\n\nconst LipSync = 'LipSync';\nconst EyeBlink = 'EyeBlink';\n\nconst InitParameter = 'init_param';\nconst InitPartsVisible = 'init_parts_visible';\nconst Val = 'val';\n\nenum FrequestNode {\n  FrequestNode_Groups, // getRoot().getValueByString(Groups)\n  FrequestNode_Moc, // getRoot().getValueByString(FileReferences).getValueByString(Moc)\n  FrequestNode_Motions, // getRoot().getValueByString(FileReferences).getValueByString(Motions)\n  FrequestNode_Expressions, // getRoot().getValueByString(FileReferences).getValueByString(Expressions)\n  FrequestNode_Textures, // getRoot().getValueByString(FileReferences).getValueByString(Textures)\n  FrequestNode_Physics, // getRoot().getValueByString(FileReferences).getValueByString(Physics)\n  FrequestNode_Pose, // getRoot().getValueByString(FileReferences).getValueByString(Pose)\n  FrequestNode_HitAreas, // getRoot().getValueByString(HitAreas)\n}\n\n/**\n * Model3Jsonパーサー\n *\n * model3.jsonファイルをパースして値を取得する\n */\nexport class CubismModelSettingJson extends ICubismModelSetting {\n  /**\n   * 引数付きコンストラクタ\n   *\n   * @param buffer    Model3Jsonをバイト配列として読み込んだデータバッファ\n   * @param size      Model3Jsonのデータサイズ\n   */\n  public constructor(buffer: ArrayBuffer, size: number) {\n    super();\n    this._json = CubismJson.create(buffer, size);\n\n    if (this._json) {\n      this._jsonValue = new csmVector<Value>();\n\n      // 順番はenum FrequestNodeと一致させる\n      this._jsonValue.pushBack(this._json.getRoot().getValueByString(Groups));\n      this._jsonValue.pushBack(\n        this._json\n          .getRoot()\n          .getValueByString(FileReferences)\n          .getValueByString(Moc)\n      );\n      this._jsonValue.pushBack(\n        this._json\n          .getRoot()\n          .getValueByString(FileReferences)\n          .getValueByString(Motions)\n      );\n      this._jsonValue.pushBack(\n        this._json\n          .getRoot()\n          .getValueByString(FileReferences)\n          .getValueByString(Expressions)\n      );\n      this._jsonValue.pushBack(\n        this._json\n          .getRoot()\n          .getValueByString(FileReferences)\n          .getValueByString(Textures)\n      );\n      this._jsonValue.pushBack(\n        this._json\n          .getRoot()\n          .getValueByString(FileReferences)\n          .getValueByString(Physics)\n      );\n      this._jsonValue.pushBack(\n        this._json\n          .getRoot()\n          .getValueByString(FileReferences)\n          .getValueByString(Pose)\n      );\n      this._jsonValue.pushBack(this._json.getRoot().getValueByString(HitAreas));\n    }\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    CubismJson.delete(this._json);\n\n    this._jsonValue = null;\n  }\n\n  /**\n   * CubismJsonオブジェクトを取得する\n   *\n   * @return CubismJson\n   */\n  public GetJson(): CubismJson {\n    return this._json;\n  }\n\n  /**\n   * Mocファイルの名前を取得する\n   * @return Mocファイルの名前\n   */\n  public getModelFileName(): string {\n    if (!this.isExistModelFile()) {\n      return '';\n    }\n    return this._jsonValue.at(FrequestNode.FrequestNode_Moc).getRawString();\n  }\n\n  /**\n   * モデルが使用するテクスチャの数を取得する\n   * テクスチャの数\n   */\n  public getTextureCount(): number {\n    if (!this.isExistTextureFiles()) {\n      return 0;\n    }\n\n    return this._jsonValue.at(FrequestNode.FrequestNode_Textures).getSize();\n  }\n\n  /**\n   * テクスチャが配置されたディレクトリの名前を取得する\n   * @return テクスチャが配置されたディレクトリの名前\n   */\n  public getTextureDirectory(): string {\n    const texturePath = this._jsonValue\n      .at(FrequestNode.FrequestNode_Textures)\n      .getValueByIndex(0)\n      .getRawString();\n\n    const pathArray = texturePath.split('/');\n    // 最後の要素はテクスチャ名なので不要\n    const arrayLength = pathArray.length - 1;\n    let textureDirectoryStr = '';\n\n    // 分割したパスを結合\n    for (let i = 0; i < arrayLength; i++) {\n      textureDirectoryStr += pathArray[i];\n      if (i < arrayLength - 1) {\n        textureDirectoryStr += '/';\n      }\n    }\n\n    return textureDirectoryStr;\n  }\n\n  /**\n   * モデルが使用するテクスチャの名前を取得する\n   * @param index 配列のインデックス値\n   * @return テクスチャの名前\n   */\n  public getTextureFileName(index: number): string {\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Textures)\n      .getValueByIndex(index)\n      .getRawString();\n  }\n\n  /**\n   * モデルに設定された当たり判定の数を取得する\n   * @return モデルに設定された当たり判定の数\n   */\n  public getHitAreasCount(): number {\n    if (!this.isExistHitAreas()) {\n      return 0;\n    }\n\n    return this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getSize();\n  }\n\n  /**\n   * 当たり判定に設定されたIDを取得する\n   *\n   * @param index 配列のindex\n   * @return 当たり判定に設定されたID\n   */\n  public getHitAreaId(index: number): CubismIdHandle {\n    return CubismFramework.getIdManager().getId(\n      this._jsonValue\n        .at(FrequestNode.FrequestNode_HitAreas)\n        .getValueByIndex(index)\n        .getValueByString(Id)\n        .getRawString()\n    );\n  }\n\n  /**\n   * 当たり判定に設定された名前を取得する\n   * @param index 配列のインデックス値\n   * @return 当たり判定に設定された名前\n   */\n  public getHitAreaName(index: number): string {\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_HitAreas)\n      .getValueByIndex(index)\n      .getValueByString(Name)\n      .getRawString();\n  }\n\n  /**\n   * 物理演算設定ファイルの名前を取得する\n   * @return 物理演算設定ファイルの名前\n   */\n  public getPhysicsFileName(): string {\n    if (!this.isExistPhysicsFile()) {\n      return '';\n    }\n\n    return this._jsonValue.at(FrequestNode.FrequestNode_Physics).getRawString();\n  }\n\n  /**\n   * パーツ切り替え設定ファイルの名前を取得する\n   * @return パーツ切り替え設定ファイルの名前\n   */\n  public getPoseFileName(): string {\n    if (!this.isExistPoseFile()) {\n      return '';\n    }\n\n    return this._jsonValue.at(FrequestNode.FrequestNode_Pose).getRawString();\n  }\n\n  /**\n   * 表情設定ファイルの数を取得する\n   * @return 表情設定ファイルの数\n   */\n  public getExpressionCount(): number {\n    if (!this.isExistExpressionFile()) {\n      return 0;\n    }\n\n    return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getSize();\n  }\n\n  /**\n   * 表情設定ファイルを識別する名前（別名）を取得する\n   * @param index 配列のインデックス値\n   * @return 表情の名前\n   */\n  public getExpressionName(index: number): string {\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Expressions)\n      .getValueByIndex(index)\n      .getValueByString(Name)\n      .getRawString();\n  }\n\n  /**\n   * 表情設定ファイルの名前を取得する\n   * @param index 配列のインデックス値\n   * @return 表情設定ファイルの名前\n   */\n  public getExpressionFileName(index: number): string {\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Expressions)\n      .getValueByIndex(index)\n      .getValueByString(FilePath)\n      .getRawString();\n  }\n\n  /**\n   * モーショングループの数を取得する\n   * @return モーショングループの数\n   */\n  public getMotionGroupCount(): number {\n    if (!this.isExistMotionGroups()) {\n      return 0;\n    }\n\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getKeys()\n      .getSize();\n  }\n\n  /**\n   * モーショングループの名前を取得する\n   * @param index 配列のインデックス値\n   * @return モーショングループの名前\n   */\n  public getMotionGroupName(index: number): string {\n    if (!this.isExistMotionGroups()) {\n      return null;\n    }\n\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getKeys()\n      .at(index);\n  }\n\n  /**\n   * モーショングループに含まれるモーションの数を取得する\n   * @param groupName モーショングループの名前\n   * @return モーショングループの数\n   */\n  public getMotionCount(groupName: string): number {\n    if (!this.isExistMotionGroupName(groupName)) {\n      return 0;\n    }\n\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getSize();\n  }\n\n  /**\n   * グループ名とインデックス値からモーションファイル名を取得する\n   * @param groupName モーショングループの名前\n   * @param index     配列のインデックス値\n   * @return モーションファイルの名前\n   */\n  public getMotionFileName(groupName: string, index: number): string {\n    if (!this.isExistMotionGroupName(groupName)) {\n      return '';\n    }\n\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getValueByIndex(index)\n      .getValueByString(FilePath)\n      .getRawString();\n  }\n\n  /**\n   * モーションに対応するサウンドファイルの名前を取得する\n   * @param groupName モーショングループの名前\n   * @param index 配列のインデックス値\n   * @return サウンドファイルの名前\n   */\n  public getMotionSoundFileName(groupName: string, index: number): string {\n    if (!this.isExistMotionSoundFile(groupName, index)) {\n      return '';\n    }\n\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getValueByIndex(index)\n      .getValueByString(SoundPath)\n      .getRawString();\n  }\n\n  /**\n   * モーション開始時のフェードイン処理時間を取得する\n   * @param groupName モーショングループの名前\n   * @param index 配列のインデックス値\n   * @return フェードイン処理時間[秒]\n   */\n  public getMotionFadeInTimeValue(groupName: string, index: number): number {\n    if (!this.isExistMotionFadeIn(groupName, index)) {\n      return -1.0;\n    }\n\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getValueByIndex(index)\n      .getValueByString(FadeInTime)\n      .toFloat();\n  }\n\n  /**\n   * モーション終了時のフェードアウト処理時間を取得する\n   * @param groupName モーショングループの名前\n   * @param index 配列のインデックス値\n   * @return フェードアウト処理時間[秒]\n   */\n  public getMotionFadeOutTimeValue(groupName: string, index: number): number {\n    if (!this.isExistMotionFadeOut(groupName, index)) {\n      return -1.0;\n    }\n\n    return this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getValueByIndex(index)\n      .getValueByString(FadeOutTime)\n      .toFloat();\n  }\n\n  /**\n   * ユーザーデータのファイル名を取得する\n   * @return ユーザーデータのファイル名\n   */\n  public getUserDataFile(): string {\n    if (!this.isExistUserDataFile()) {\n      return '';\n    }\n\n    return this._json\n      .getRoot()\n      .getValueByString(FileReferences)\n      .getValueByString(UserData)\n      .getRawString();\n  }\n\n  /**\n   * レイアウト情報を取得する\n   * @param outLayoutMap csmMapクラスのインスタンス\n   * @return true レイアウト情報が存在する\n   * @return false レイアウト情報が存在しない\n   */\n  public getLayoutMap(outLayoutMap: csmMap<string, number>): boolean {\n    // 存在しない要素にアクセスするとエラーになるためValueがnullの場合はnullを代入する\n    const map: csmMap<string, Value> = this._json\n      .getRoot()\n      .getValueByString(Layout)\n      .getMap();\n\n    if (map == null) {\n      return false;\n    }\n\n    let ret = false;\n\n    for (\n      const ite: iterator<string, Value> = map.begin();\n      ite.notEqual(map.end());\n      ite.preIncrement()\n    ) {\n      outLayoutMap.setValue(ite.ptr().first, ite.ptr().second.toFloat());\n      ret = true;\n    }\n\n    return ret;\n  }\n\n  /**\n   * 目パチに関連付けられたパラメータの数を取得する\n   * @return 目パチに関連付けられたパラメータの数\n   */\n  public getEyeBlinkParameterCount(): number {\n    if (!this.isExistEyeBlinkParameters()) {\n      return 0;\n    }\n\n    let num = 0;\n    for (\n      let i = 0;\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\n      i++\n    ) {\n      const refI: Value = this._jsonValue\n        .at(FrequestNode.FrequestNode_Groups)\n        .getValueByIndex(i);\n      if (refI.isNull() || refI.isError()) {\n        continue;\n      }\n\n      if (refI.getValueByString(Name).getRawString() == EyeBlink) {\n        num = refI.getValueByString(Ids).getVector().getSize();\n        break;\n      }\n    }\n\n    return num;\n  }\n\n  /**\n   * 目パチに関連付けられたパラメータのIDを取得する\n   * @param index 配列のインデックス値\n   * @return パラメータID\n   */\n  public getEyeBlinkParameterId(index: number): CubismIdHandle {\n    if (!this.isExistEyeBlinkParameters()) {\n      return null;\n    }\n\n    for (\n      let i = 0;\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\n      i++\n    ) {\n      const refI: Value = this._jsonValue\n        .at(FrequestNode.FrequestNode_Groups)\n        .getValueByIndex(i);\n      if (refI.isNull() || refI.isError()) {\n        continue;\n      }\n\n      if (refI.getValueByString(Name).getRawString() == EyeBlink) {\n        return CubismFramework.getIdManager().getId(\n          refI.getValueByString(Ids).getValueByIndex(index).getRawString()\n        );\n      }\n    }\n    return null;\n  }\n\n  /**\n   * リップシンクに関連付けられたパラメータの数を取得する\n   * @return リップシンクに関連付けられたパラメータの数\n   */\n  public getLipSyncParameterCount(): number {\n    if (!this.isExistLipSyncParameters()) {\n      return 0;\n    }\n\n    let num = 0;\n    for (\n      let i = 0;\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\n      i++\n    ) {\n      const refI: Value = this._jsonValue\n        .at(FrequestNode.FrequestNode_Groups)\n        .getValueByIndex(i);\n      if (refI.isNull() || refI.isError()) {\n        continue;\n      }\n\n      if (refI.getValueByString(Name).getRawString() == LipSync) {\n        num = refI.getValueByString(Ids).getVector().getSize();\n        break;\n      }\n    }\n\n    return num;\n  }\n\n  /**\n   * リップシンクに関連付けられたパラメータの数を取得する\n   * @param index 配列のインデックス値\n   * @return パラメータID\n   */\n  public getLipSyncParameterId(index: number): CubismIdHandle {\n    if (!this.isExistLipSyncParameters()) {\n      return null;\n    }\n\n    for (\n      let i = 0;\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\n      i++\n    ) {\n      const refI: Value = this._jsonValue\n        .at(FrequestNode.FrequestNode_Groups)\n        .getValueByIndex(i);\n      if (refI.isNull() || refI.isError()) {\n        continue;\n      }\n\n      if (refI.getValueByString(Name).getRawString() == LipSync) {\n        return CubismFramework.getIdManager().getId(\n          refI.getValueByString(Ids).getValueByIndex(index).getRawString()\n        );\n      }\n    }\n    return null;\n  }\n\n  /**\n   * モデルファイルのキーが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistModelFile(): boolean {\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Moc);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * テクスチャファイルのキーが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistTextureFiles(): boolean {\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Textures);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 当たり判定のキーが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistHitAreas(): boolean {\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_HitAreas);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 物理演算ファイルのキーが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistPhysicsFile(): boolean {\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Physics);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * ポーズ設定ファイルのキーが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistPoseFile(): boolean {\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Pose);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 表情設定ファイルのキーが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistExpressionFile(): boolean {\n    const node: Value = this._jsonValue.at(\n      FrequestNode.FrequestNode_Expressions\n    );\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * モーショングループのキーが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistMotionGroups(): boolean {\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Motions);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 引数で指定したモーショングループのキーが存在するかどうかを確認する\n   * @param groupName  グループ名\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistMotionGroupName(groupName: string): boolean {\n    const node: Value = this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 引数で指定したモーションに対応するサウンドファイルのキーが存在するかどうかを確認する\n   * @param groupName  グループ名\n   * @param index 配列のインデックス値\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistMotionSoundFile(groupName: string, index: number): boolean {\n    const node: Value = this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getValueByIndex(index)\n      .getValueByString(SoundPath);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 引数で指定したモーションに対応するフェードイン時間のキーが存在するかどうかを確認する\n   * @param groupName  グループ名\n   * @param index 配列のインデックス値\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistMotionFadeIn(groupName: string, index: number): boolean {\n    const node: Value = this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getValueByIndex(index)\n      .getValueByString(FadeInTime);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 引数で指定したモーションに対応するフェードアウト時間のキーが存在するかどうかを確認する\n   * @param groupName  グループ名\n   * @param index 配列のインデックス値\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistMotionFadeOut(groupName: string, index: number): boolean {\n    const node: Value = this._jsonValue\n      .at(FrequestNode.FrequestNode_Motions)\n      .getValueByString(groupName)\n      .getValueByIndex(index)\n      .getValueByString(FadeOutTime);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * UserDataのファイル名が存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistUserDataFile(): boolean {\n    const node: Value = this._json\n      .getRoot()\n      .getValueByString(FileReferences)\n      .getValueByString(UserData);\n    return !node.isNull() && !node.isError();\n  }\n\n  /**\n   * 目ぱちに対応付けられたパラメータが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistEyeBlinkParameters(): boolean {\n    if (\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()\n    ) {\n      return false;\n    }\n\n    for (\n      let i = 0;\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\n      ++i\n    ) {\n      if (\n        this._jsonValue\n          .at(FrequestNode.FrequestNode_Groups)\n          .getValueByIndex(i)\n          .getValueByString(Name)\n          .getRawString() == EyeBlink\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * リップシンクに対応付けられたパラメータが存在するかどうかを確認する\n   * @return true キーが存在する\n   * @return false キーが存在しない\n   */\n  private isExistLipSyncParameters(): boolean {\n    if (\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()\n    ) {\n      return false;\n    }\n    for (\n      let i = 0;\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\n      ++i\n    ) {\n      if (\n        this._jsonValue\n          .at(FrequestNode.FrequestNode_Groups)\n          .getValueByIndex(i)\n          .getValueByString(Name)\n          .getRawString() == LipSync\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private _json: CubismJson;\n  private _jsonValue: csmVector<Value>;\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmodelsettingjson';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismModelSettingJson = $.CubismModelSettingJson;\n  export type CubismModelSettingJson = $.CubismModelSettingJson;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmVector } from '../type/csmvector';\n\n/**\n * 呼吸機能\n *\n * 呼吸機能を提供する。\n */\nexport class CubismBreath {\n  /**\n   * インスタンスの作成\n   */\n  public static create(): CubismBreath {\n    return new CubismBreath();\n  }\n\n  /**\n   * インスタンスの破棄\n   * @param instance 対象のCubismBreath\n   */\n  public static delete(instance: CubismBreath): void {\n    if (instance != null) {\n      instance = null;\n    }\n  }\n\n  /**\n   * 呼吸のパラメータの紐づけ\n   * @param breathParameters 呼吸を紐づけたいパラメータのリスト\n   */\n  public setParameters(breathParameters: csmVector<BreathParameterData>): void {\n    this._breathParameters = breathParameters;\n  }\n\n  /**\n   * 呼吸に紐づいているパラメータの取得\n   * @return 呼吸に紐づいているパラメータのリスト\n   */\n  public getParameters(): csmVector<BreathParameterData> {\n    return this._breathParameters;\n  }\n\n  /**\n   * モデルのパラメータの更新\n   * @param model 対象のモデル\n   * @param deltaTimeSeconds デルタ時間[秒]\n   */\n  public updateParameters(model: CubismModel, deltaTimeSeconds: number): void {\n    this._currentTime += deltaTimeSeconds;\n\n    const t: number = this._currentTime * 2.0 * 3.14159;\n\n    for (let i = 0; i < this._breathParameters.getSize(); ++i) {\n      const data: BreathParameterData = this._breathParameters.at(i);\n\n      model.addParameterValueById(\n        data.parameterId,\n        data.offset + data.peak * Math.sin(t / data.cycle),\n        data.weight\n      );\n    }\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._currentTime = 0.0;\n  }\n\n  _breathParameters: csmVector<BreathParameterData>; // 呼吸にひもづいているパラメータのリスト\n  _currentTime: number; // 積算時間[秒]\n}\n\n/**\n * 呼吸のパラメータ情報\n */\nexport class BreathParameterData {\n  /**\n   * コンストラクタ\n   * @param parameterId   呼吸をひもづけるパラメータID\n   * @param offset        呼吸を正弦波としたときの、波のオフセット\n   * @param peak          呼吸を正弦波としたときの、波の高さ\n   * @param cycle         呼吸を正弦波としたときの、波の周期\n   * @param weight        パラメータへの重み\n   */\n  constructor(\n    parameterId?: CubismIdHandle,\n    offset?: number,\n    peak?: number,\n    cycle?: number,\n    weight?: number\n  ) {\n    this.parameterId = parameterId == undefined ? null : parameterId;\n    this.offset = offset == undefined ? 0.0 : offset;\n    this.peak = peak == undefined ? 0.0 : peak;\n    this.cycle = cycle == undefined ? 0.0 : cycle;\n    this.weight = weight == undefined ? 0.0 : weight;\n  }\n\n  parameterId: CubismIdHandle; // 呼吸をひもづけるパラメータID\\\n  offset: number; // 呼吸を正弦波としたときの、波のオフセット\n  peak: number; // 呼吸を正弦波としたときの、波の高さ\n  cycle: number; // 呼吸を正弦波としたときの、波の周期\n  weight: number; // パラメータへの重み\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismbreath';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const BreathParameterData = $.BreathParameterData;\n  export type BreathParameterData = $.BreathParameterData;\n  export const CubismBreath = $.CubismBreath;\n  export type CubismBreath = $.CubismBreath;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { ICubismModelSetting } from '../icubismmodelsetting';\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmVector } from '../type/csmvector';\n\n/**\n * 自動まばたき機能\n *\n * 自動まばたき機能を提供する。\n */\nexport class CubismEyeBlink {\n  /**\n   * インスタンスを作成する\n   * @param modelSetting モデルの設定情報\n   * @return 作成されたインスタンス\n   * @note 引数がNULLの場合、パラメータIDが設定されていない空のインスタンスを作成する。\n   */\n  public static create(\n    modelSetting: ICubismModelSetting = null\n  ): CubismEyeBlink {\n    return new CubismEyeBlink(modelSetting);\n  }\n\n  /**\n   * インスタンスの破棄\n   * @param eyeBlink 対象のCubismEyeBlink\n   */\n  public static delete(eyeBlink: CubismEyeBlink): void {\n    if (eyeBlink != null) {\n      eyeBlink = null;\n    }\n  }\n\n  /**\n   * まばたきの間隔の設定\n   * @param blinkingInterval まばたきの間隔の時間[秒]\n   */\n  public setBlinkingInterval(blinkingInterval: number): void {\n    this._blinkingIntervalSeconds = blinkingInterval;\n  }\n\n  /**\n   * まばたきのモーションの詳細設定\n   * @param closing   まぶたを閉じる動作の所要時間[秒]\n   * @param closed    まぶたを閉じている動作の所要時間[秒]\n   * @param opening   まぶたを開く動作の所要時間[秒]\n   */\n  public setBlinkingSetting(\n    closing: number,\n    closed: number,\n    opening: number\n  ): void {\n    this._closingSeconds = closing;\n    this._closedSeconds = closed;\n    this._openingSeconds = opening;\n  }\n\n  /**\n   * まばたきさせるパラメータIDのリストの設定\n   * @param parameterIds パラメータのIDのリスト\n   */\n  public setParameterIds(parameterIds: csmVector<CubismIdHandle>): void {\n    this._parameterIds = parameterIds;\n  }\n\n  /**\n   * まばたきさせるパラメータIDのリストの取得\n   * @return パラメータIDのリスト\n   */\n  public getParameterIds(): csmVector<CubismIdHandle> {\n    return this._parameterIds;\n  }\n\n  /**\n   * モデルのパラメータの更新\n   * @param model 対象のモデル\n   * @param deltaTimeSeconds デルタ時間[秒]\n   */\n  public updateParameters(model: CubismModel, deltaTimeSeconds: number): void {\n    this._userTimeSeconds += deltaTimeSeconds;\n    let parameterValue: number;\n    let t = 0.0;\n\n    switch (this._blinkingState) {\n      case EyeState.EyeState_Closing:\n        t =\n          (this._userTimeSeconds - this._stateStartTimeSeconds) /\n          this._closingSeconds;\n\n        if (t >= 1.0) {\n          t = 1.0;\n          this._blinkingState = EyeState.EyeState_Closed;\n          this._stateStartTimeSeconds = this._userTimeSeconds;\n        }\n\n        parameterValue = 1.0 - t;\n\n        break;\n      case EyeState.EyeState_Closed:\n        t =\n          (this._userTimeSeconds - this._stateStartTimeSeconds) /\n          this._closedSeconds;\n\n        if (t >= 1.0) {\n          this._blinkingState = EyeState.EyeState_Opening;\n          this._stateStartTimeSeconds = this._userTimeSeconds;\n        }\n\n        parameterValue = 0.0;\n\n        break;\n      case EyeState.EyeState_Opening:\n        t =\n          (this._userTimeSeconds - this._stateStartTimeSeconds) /\n          this._openingSeconds;\n\n        if (t >= 1.0) {\n          t = 1.0;\n          this._blinkingState = EyeState.EyeState_Interval;\n          this._nextBlinkingTime = this.determinNextBlinkingTiming();\n        }\n\n        parameterValue = t;\n\n        break;\n      case EyeState.EyeState_Interval:\n        if (this._nextBlinkingTime < this._userTimeSeconds) {\n          this._blinkingState = EyeState.EyeState_Closing;\n          this._stateStartTimeSeconds = this._userTimeSeconds;\n        }\n\n        parameterValue = 1.0;\n\n        break;\n      case EyeState.EyeState_First:\n      default:\n        this._blinkingState = EyeState.EyeState_Interval;\n        this._nextBlinkingTime = this.determinNextBlinkingTiming();\n\n        parameterValue = 1.0;\n        break;\n    }\n\n    if (!CubismEyeBlink.CloseIfZero) {\n      parameterValue = -parameterValue;\n    }\n\n    for (let i = 0; i < this._parameterIds.getSize(); ++i) {\n      model.setParameterValueById(this._parameterIds.at(i), parameterValue);\n    }\n  }\n\n  /**\n   * コンストラクタ\n   * @param modelSetting モデルの設定情報\n   */\n  public constructor(modelSetting: ICubismModelSetting) {\n    this._blinkingState = EyeState.EyeState_First;\n    this._nextBlinkingTime = 0.0;\n    this._stateStartTimeSeconds = 0.0;\n    this._blinkingIntervalSeconds = 4.0;\n    this._closingSeconds = 0.1;\n    this._closedSeconds = 0.05;\n    this._openingSeconds = 0.15;\n    this._userTimeSeconds = 0.0;\n    this._parameterIds = new csmVector<CubismIdHandle>();\n\n    if (modelSetting == null) {\n      return;\n    }\n\n    for (let i = 0; i < modelSetting.getEyeBlinkParameterCount(); ++i) {\n      this._parameterIds.pushBack(modelSetting.getEyeBlinkParameterId(i));\n    }\n  }\n\n  /**\n   * 次の瞬きのタイミングの決定\n   *\n   * @return 次のまばたきを行う時刻[秒]\n   */\n  public determinNextBlinkingTiming(): number {\n    const r: number = Math.random();\n    return (\n      this._userTimeSeconds + r * (2.0 * this._blinkingIntervalSeconds - 1.0)\n    );\n  }\n\n  _blinkingState: number; // 現在の状態\n  _parameterIds: csmVector<CubismIdHandle>; // 操作対象のパラメータのIDのリスト\n  _nextBlinkingTime: number; // 次のまばたきの時刻[秒]\n  _stateStartTimeSeconds: number; // 現在の状態が開始した時刻[秒]\n  _blinkingIntervalSeconds: number; // まばたきの間隔[秒]\n  _closingSeconds: number; // まぶたを閉じる動作の所要時間[秒]\n  _closedSeconds: number; // まぶたを閉じている動作の所要時間[秒]\n  _openingSeconds: number; // まぶたを開く動作の所要時間[秒]\n  _userTimeSeconds: number; // デルタ時間の積算値[秒]\n\n  /**\n   * IDで指定された目のパラメータが、0のときに閉じるなら true 、1の時に閉じるなら false 。\n   */\n  static readonly CloseIfZero: boolean = true;\n}\n\n/**\n * まばたきの状態\n *\n * まばたきの状態を表す列挙型\n */\nexport enum EyeState {\n  EyeState_First = 0, // 初期状態\n  EyeState_Interval, // まばたきしていない状態\n  EyeState_Closing, // まぶたが閉じていく途中の状態\n  EyeState_Closed, // まぶたが閉じている状態\n  EyeState_Opening, // まぶたが開いていく途中の状態\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismeyeblink';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismEyeBlink = $.CubismEyeBlink;\n  export type CubismEyeBlink = $.CubismEyeBlink;\n  export const EyeState = $.EyeState;\n  export type EyeState = $.EyeState;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmVector, iterator } from '../type/csmvector';\nimport { CubismJson, Value } from '../utils/cubismjson';\n\nconst Epsilon = 0.001;\nconst DefaultFadeInSeconds = 0.5;\n\n// Pose.jsonのタグ\nconst FadeIn = 'FadeInTime';\nconst Link = 'Link';\nconst Groups = 'Groups';\nconst Id = 'Id';\n\n/**\n * パーツの不透明度の設定\n *\n * パーツの不透明度の管理と設定を行う。\n */\nexport class CubismPose {\n  /**\n   * インスタンスの作成\n   * @param pose3json pose3.jsonのデータ\n   * @param size pose3.jsonのデータのサイズ[byte]\n   * @return 作成されたインスタンス\n   */\n  public static create(pose3json: ArrayBuffer, size: number): CubismPose {\n    const ret: CubismPose = new CubismPose();\n    const json: CubismJson = CubismJson.create(pose3json, size);\n    const root: Value = json.getRoot();\n\n    // フェード時間の指定\n    if (!root.getValueByString(FadeIn).isNull()) {\n      ret._fadeTimeSeconds = root\n        .getValueByString(FadeIn)\n        .toFloat(DefaultFadeInSeconds);\n\n      if (ret._fadeTimeSeconds <= 0.0) {\n        ret._fadeTimeSeconds = DefaultFadeInSeconds;\n      }\n    }\n\n    // パーツグループ\n    const poseListInfo: Value = root.getValueByString(Groups);\n    const poseCount: number = poseListInfo.getSize();\n\n    for (let poseIndex = 0; poseIndex < poseCount; ++poseIndex) {\n      const idListInfo: Value = poseListInfo.getValueByIndex(poseIndex);\n      const idCount: number = idListInfo.getSize();\n      let groupCount = 0;\n\n      for (let groupIndex = 0; groupIndex < idCount; ++groupIndex) {\n        const partInfo: Value = idListInfo.getValueByIndex(groupIndex);\n        const partData: PartData = new PartData();\n        const parameterId: CubismIdHandle =\n          CubismFramework.getIdManager().getId(\n            partInfo.getValueByString(Id).getRawString()\n          );\n\n        partData.partId = parameterId;\n\n        // リンクするパーツの設定\n        if (!partInfo.getValueByString(Link).isNull()) {\n          const linkListInfo: Value = partInfo.getValueByString(Link);\n          const linkCount: number = linkListInfo.getSize();\n\n          for (let linkIndex = 0; linkIndex < linkCount; ++linkIndex) {\n            const linkPart: PartData = new PartData();\n            const linkId: CubismIdHandle = CubismFramework.getIdManager().getId(\n              linkListInfo.getValueByIndex(linkIndex).getString()\n            );\n\n            linkPart.partId = linkId;\n\n            partData.link.pushBack(linkPart);\n          }\n        }\n\n        ret._partGroups.pushBack(partData.clone());\n\n        ++groupCount;\n      }\n\n      ret._partGroupCounts.pushBack(groupCount);\n    }\n\n    CubismJson.delete(json);\n\n    return ret;\n  }\n\n  /**\n   * インスタンスを破棄する\n   * @param pose 対象のCubismPose\n   */\n  public static delete(pose: CubismPose): void {\n    if (pose != null) {\n      pose = null;\n    }\n  }\n\n  /**\n   * モデルのパラメータの更新\n   * @param model 対象のモデル\n   * @param deltaTimeSeconds デルタ時間[秒]\n   */\n  public updateParameters(model: CubismModel, deltaTimeSeconds: number): void {\n    // 前回のモデルと同じでない場合は初期化が必要\n    if (model != this._lastModel) {\n      // パラメータインデックスの初期化\n      this.reset(model);\n    }\n\n    this._lastModel = model;\n\n    // 設定から時間を変更すると、経過時間がマイナスになる事があるので、経過時間0として対応\n    if (deltaTimeSeconds < 0.0) {\n      deltaTimeSeconds = 0.0;\n    }\n\n    let beginIndex = 0;\n\n    for (let i = 0; i < this._partGroupCounts.getSize(); i++) {\n      const partGroupCount: number = this._partGroupCounts.at(i);\n\n      this.doFade(model, deltaTimeSeconds, beginIndex, partGroupCount);\n\n      beginIndex += partGroupCount;\n    }\n\n    this.copyPartOpacities(model);\n  }\n\n  /**\n   * 表示を初期化\n   * @param model 対象のモデル\n   * @note 不透明度の初期値が0でないパラメータは、不透明度を１に設定する\n   */\n  public reset(model: CubismModel): void {\n    let beginIndex = 0;\n\n    for (let i = 0; i < this._partGroupCounts.getSize(); ++i) {\n      const groupCount: number = this._partGroupCounts.at(i);\n\n      for (let j: number = beginIndex; j < beginIndex + groupCount; ++j) {\n        this._partGroups.at(j).initialize(model);\n\n        const partsIndex: number = this._partGroups.at(j).partIndex;\n        const paramIndex: number = this._partGroups.at(j).parameterIndex;\n\n        if (partsIndex < 0) {\n          continue;\n        }\n\n        model.setPartOpacityByIndex(partsIndex, j == beginIndex ? 1.0 : 0.0);\n        model.setParameterValueByIndex(paramIndex, j == beginIndex ? 1.0 : 0.0);\n\n        for (let k = 0; k < this._partGroups.at(j).link.getSize(); ++k) {\n          this._partGroups.at(j).link.at(k).initialize(model);\n        }\n      }\n\n      beginIndex += groupCount;\n    }\n  }\n\n  /**\n   * パーツの不透明度をコピー\n   *\n   * @param model 対象のモデル\n   */\n  public copyPartOpacities(model: CubismModel): void {\n    for (\n      let groupIndex = 0;\n      groupIndex < this._partGroups.getSize();\n      ++groupIndex\n    ) {\n      const partData: PartData = this._partGroups.at(groupIndex);\n\n      if (partData.link.getSize() == 0) {\n        continue; // 連動するパラメータはない\n      }\n\n      const partIndex: number = this._partGroups.at(groupIndex).partIndex;\n      const opacity: number = model.getPartOpacityByIndex(partIndex);\n\n      for (\n        let linkIndex = 0;\n        linkIndex < partData.link.getSize();\n        ++linkIndex\n      ) {\n        const linkPart: PartData = partData.link.at(linkIndex);\n        const linkPartIndex: number = linkPart.partIndex;\n\n        if (linkPartIndex < 0) {\n          continue;\n        }\n\n        model.setPartOpacityByIndex(linkPartIndex, opacity);\n      }\n    }\n  }\n\n  /**\n   * パーツのフェード操作を行う。\n   * @param model 対象のモデル\n   * @param deltaTimeSeconds デルタ時間[秒]\n   * @param beginIndex フェード操作を行うパーツグループの先頭インデックス\n   * @param partGroupCount フェード操作を行うパーツグループの個数\n   */\n  public doFade(\n    model: CubismModel,\n    deltaTimeSeconds: number,\n    beginIndex: number,\n    partGroupCount: number\n  ): void {\n    let visiblePartIndex = -1;\n    let newOpacity = 1.0;\n\n    const phi = 0.5;\n    const backOpacityThreshold = 0.15;\n\n    // 現在、表示状態になっているパーツを取得\n    for (let i: number = beginIndex; i < beginIndex + partGroupCount; ++i) {\n      const partIndex: number = this._partGroups.at(i).partIndex;\n      const paramIndex: number = this._partGroups.at(i).parameterIndex;\n\n      if (model.getParameterValueByIndex(paramIndex) > Epsilon) {\n        if (visiblePartIndex >= 0) {\n          break;\n        }\n\n        visiblePartIndex = i;\n        newOpacity = model.getPartOpacityByIndex(partIndex);\n\n        // 新しい不透明度を計算\n        newOpacity += deltaTimeSeconds / this._fadeTimeSeconds;\n\n        if (newOpacity > 1.0) {\n          newOpacity = 1.0;\n        }\n      }\n    }\n\n    if (visiblePartIndex < 0) {\n      visiblePartIndex = 0;\n      newOpacity = 1.0;\n    }\n\n    // 表示パーツ、非表示パーツの不透明度を設定する\n    for (let i: number = beginIndex; i < beginIndex + partGroupCount; ++i) {\n      const partsIndex: number = this._partGroups.at(i).partIndex;\n\n      // 表示パーツの設定\n      if (visiblePartIndex == i) {\n        model.setPartOpacityByIndex(partsIndex, newOpacity); // 先に設定\n      }\n      // 非表示パーツの設定\n      else {\n        let opacity: number = model.getPartOpacityByIndex(partsIndex);\n        let a1: number; // 計算によって求められる不透明度\n\n        if (newOpacity < phi) {\n          a1 = (newOpacity * (phi - 1)) / phi + 1.0; // (0,1),(phi,phi)を通る直線式\n        } else {\n          a1 = ((1 - newOpacity) * phi) / (1.0 - phi); // (1,0),(phi,phi)を通る直線式\n        }\n\n        // 背景の見える割合を制限する場合\n        const backOpacity: number = (1.0 - a1) * (1.0 - newOpacity);\n\n        if (backOpacity > backOpacityThreshold) {\n          a1 = 1.0 - backOpacityThreshold / (1.0 - newOpacity);\n        }\n\n        if (opacity > a1) {\n          opacity = a1; // 計算の不透明度よりも大きければ（濃ければ）不透明度を上げる\n        }\n\n        model.setPartOpacityByIndex(partsIndex, opacity);\n      }\n    }\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._fadeTimeSeconds = DefaultFadeInSeconds;\n    this._lastModel = null;\n    this._partGroups = new csmVector<PartData>();\n    this._partGroupCounts = new csmVector<number>();\n  }\n\n  _partGroups: csmVector<PartData>; // パーツグループ\n  _partGroupCounts: csmVector<number>; // それぞれのパーツグループの個数\n  _fadeTimeSeconds: number; // フェード時間[秒]\n  _lastModel: CubismModel; // 前回操作したモデル\n}\n\n/**\n * パーツにまつわるデータを管理\n */\nexport class PartData {\n  /**\n   * コンストラクタ\n   */\n  constructor(v?: PartData) {\n    this.parameterIndex = 0;\n    this.partIndex = 0;\n    this.link = new csmVector<PartData>();\n\n    if (v != undefined) {\n      this.partId = v.partId;\n\n      for (\n        const ite: iterator<PartData> = v.link.begin();\n        ite.notEqual(v.link.end());\n        ite.preIncrement()\n      ) {\n        this.link.pushBack(ite.ptr().clone());\n      }\n    }\n  }\n\n  /**\n   * =演算子のオーバーロード\n   */\n  public assignment(v: PartData): PartData {\n    this.partId = v.partId;\n\n    for (\n      const ite: iterator<PartData> = v.link.begin();\n      ite.notEqual(v.link.end());\n      ite.preIncrement()\n    ) {\n      this.link.pushBack(ite.ptr().clone());\n    }\n\n    return this;\n  }\n\n  /**\n   * 初期化\n   * @param model 初期化に使用するモデル\n   */\n  public initialize(model: CubismModel): void {\n    this.parameterIndex = model.getParameterIndex(this.partId);\n    this.partIndex = model.getPartIndex(this.partId);\n\n    model.setParameterValueByIndex(this.parameterIndex, 1);\n  }\n\n  /**\n   * オブジェクトのコピーを生成する\n   */\n  public clone(): PartData {\n    const clonePartData: PartData = new PartData();\n\n    clonePartData.partId = this.partId;\n    clonePartData.parameterIndex = this.parameterIndex;\n    clonePartData.partIndex = this.partIndex;\n    clonePartData.link = new csmVector<PartData>();\n\n    for (\n      let ite: iterator<PartData> = this.link.begin();\n      ite.notEqual(this.link.end());\n      ite.increment()\n    ) {\n      clonePartData.link.pushBack(ite.ptr().clone());\n    }\n\n    return clonePartData;\n  }\n\n  partId: CubismIdHandle; // パーツID\n  parameterIndex: number; // パラメータのインデックス\n  partIndex: number; // パーツのインデックス\n  link: csmVector<PartData>; // 連動するパラメータ\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismpose';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismPose = $.CubismPose;\n  export type CubismPose = $.CubismPose;\n  export const PartData = $.PartData;\n  export type PartData = $.PartData;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from './id/cubismid';\nimport { csmMap } from './type/csmmap';\n\n/**\n * モデル設定情報を取り扱う関数を宣言した純粋仮想クラス。\n *\n * このクラスを継承することで、モデル設定情報を取り扱うクラスになる。\n */\nexport abstract class ICubismModelSetting {\n  /**\n   * Mocファイルの名前を取得する\n   * @return Mocファイルの名前\n   */\n  public abstract getModelFileName(): string;\n\n  /**\n   * モデルが使用するテクスチャの数を取得する\n   * テクスチャの数\n   */\n  public abstract getTextureCount(): number;\n\n  /**\n   * テクスチャが配置されたディレクトリの名前を取得する\n   * @return テクスチャが配置されたディレクトリの名前\n   */\n  public abstract getTextureDirectory(): string;\n\n  /**\n   * モデルが使用するテクスチャの名前を取得する\n   * @param index 配列のインデックス値\n   * @return テクスチャの名前\n   */\n  public abstract getTextureFileName(index: number): string;\n\n  /**\n   * モデルに設定された当たり判定の数を取得する\n   * @return モデルに設定された当たり判定の数\n   */\n  public abstract getHitAreasCount(): number;\n\n  /**\n   * 当たり判定に設定されたIDを取得する\n   *\n   * @param index 配列のindex\n   * @return 当たり判定に設定されたID\n   */\n  public abstract getHitAreaId(index: number): CubismIdHandle;\n\n  /**\n   * 当たり判定に設定された名前を取得する\n   * @param index 配列のインデックス値\n   * @return 当たり判定に設定された名前\n   */\n  public abstract getHitAreaName(index: number): string;\n\n  /**\n   * 物理演算設定ファイルの名前を取得する\n   * @return 物理演算設定ファイルの名前\n   */\n  public abstract getPhysicsFileName(): string;\n\n  /**\n   * パーツ切り替え設定ファイルの名前を取得する\n   * @return パーツ切り替え設定ファイルの名前\n   */\n  public abstract getPoseFileName(): string;\n\n  /**\n   * 表情設定ファイルの数を取得する\n   * @return 表情設定ファイルの数\n   */\n  public abstract getExpressionCount(): number;\n\n  /**\n   * 表情設定ファイルを識別する名前（別名）を取得する\n   * @param index 配列のインデックス値\n   * @return 表情の名前\n   */\n  public abstract getExpressionName(index: number): string;\n\n  /**\n   * 表情設定ファイルの名前を取得する\n   * @param index 配列のインデックス値\n   * @return 表情設定ファイルの名前\n   */\n  public abstract getExpressionFileName(index: number): string;\n\n  /**\n   * モーショングループの数を取得する\n   * @return モーショングループの数\n   */\n  public abstract getMotionGroupCount(): number;\n\n  /**\n   * モーショングループの名前を取得する\n   * @param index 配列のインデックス値\n   * @return モーショングループの名前\n   */\n  public abstract getMotionGroupName(index: number): string;\n\n  /**\n   * モーショングループに含まれるモーションの数を取得する\n   * @param groupName モーショングループの名前\n   * @return モーショングループの数\n   */\n  public abstract getMotionCount(groupName: string): number;\n\n  /**\n   * グループ名とインデックス値からモーションファイル名を取得する\n   * @param groupName モーショングループの名前\n   * @param index     配列のインデックス値\n   * @return モーションファイルの名前\n   */\n  public abstract getMotionFileName(groupName: string, index: number): string;\n\n  /**\n   * モーションに対応するサウンドファイルの名前を取得する\n   * @param groupName モーショングループの名前\n   * @param index 配列のインデックス値\n   * @return サウンドファイルの名前\n   */\n  public abstract getMotionSoundFileName(\n    groupName: string,\n    index: number\n  ): string;\n\n  /**\n   * モーション開始時のフェードイン処理時間を取得する\n   * @param groupName モーショングループの名前\n   * @param index 配列のインデックス値\n   * @return フェードイン処理時間[秒]\n   */\n  public abstract getMotionFadeInTimeValue(\n    groupName: string,\n    index: number\n  ): number;\n\n  /**\n   * モーション終了時のフェードアウト処理時間を取得する\n   * @param groupName モーショングループの名前\n   * @param index 配列のインデックス値\n   * @return フェードアウト処理時間[秒]\n   */\n  public abstract getMotionFadeOutTimeValue(\n    groupName: string,\n    index: number\n  ): number;\n\n  /**\n   * ユーザーデータのファイル名を取得する\n   * @return ユーザーデータのファイル名\n   */\n  public abstract getUserDataFile(): string;\n\n  /**\n   * レイアウト情報を取得する\n   * @param outLayoutMap csmMapクラスのインスタンス\n   * @return true レイアウト情報が存在する\n   * @return false レイアウト情報が存在しない\n   */\n  public abstract getLayoutMap(outLayoutMap: csmMap<string, number>): boolean;\n\n  /**\n   * 目パチに関連付けられたパラメータの数を取得する\n   * @return 目パチに関連付けられたパラメータの数\n   */\n  public abstract getEyeBlinkParameterCount(): number;\n\n  /**\n   * 目パチに関連付けられたパラメータのIDを取得する\n   * @param index 配列のインデックス値\n   * @return パラメータID\n   */\n  public abstract getEyeBlinkParameterId(index: number): CubismIdHandle;\n\n  /**\n   * リップシンクに関連付けられたパラメータの数を取得する\n   * @return リップシンクに関連付けられたパラメータの数\n   */\n  public abstract getLipSyncParameterCount(): number;\n\n  /**\n   * リップシンクに関連付けられたパラメータの数を取得する\n   * @param index 配列のインデックス値\n   * @return パラメータID\n   */\n  public abstract getLipSyncParameterId(index: number): CubismIdHandle;\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './icubismmodelsetting';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const ICubismModelSetting = $.ICubismModelSetting;\n  export type ICubismModelSetting = $.ICubismModelSetting;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { csmString } from '../type/csmstring';\n\n/**\n * パラメータ名・パーツ名・Drawable名を保持\n *\n * パラメータ名・パーツ名・Drawable名を保持するクラス。\n */\nexport class CubismId {\n  /**\n   * ID名を取得する\n   */\n  public getString(): csmString {\n    return this._id;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor(id: string | csmString) {\n    if (typeof id === 'string') {\n      this._id = new csmString(id);\n      return;\n    }\n\n    this._id = id;\n  }\n\n  /**\n   * idを比較\n   * @param c 比較するid\n   * @return 同じならばtrue,異なっていればfalseを返す\n   */\n  public isEqual(c: string | csmString | CubismId): boolean {\n    if (typeof c === 'string') {\n      return this._id.isEqual(c);\n    } else if (c instanceof csmString) {\n      return this._id.isEqual(c.s);\n    } else if (c instanceof CubismId) {\n      return this._id.isEqual(c._id.s);\n    }\n    return false;\n  }\n\n  /**\n   * idを比較\n   * @param c 比較するid\n   * @return 同じならばtrue,異なっていればfalseを返す\n   */\n  public isNotEqual(c: string | csmString | CubismId): boolean {\n    if (typeof c == 'string') {\n      return !this._id.isEqual(c);\n    } else if (c instanceof csmString) {\n      return !this._id.isEqual(c.s);\n    } else if (c instanceof CubismId) {\n      return !this._id.isEqual(c._id.s);\n    }\n    return false;\n  }\n\n  private _id: csmString; // ID名\n}\n\nexport declare type CubismIdHandle = CubismId;\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismid';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismId = $.CubismId;\n  export type CubismId = $.CubismId;\n  export type CubismIdHandle = $.CubismIdHandle;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { csmString } from '../type/csmstring';\nimport { csmVector } from '../type/csmvector';\nimport { CubismId } from './cubismid';\n\n/**\n * ID名の管理\n *\n * ID名を管理する。\n */\nexport class CubismIdManager {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._ids = new csmVector<CubismId>();\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    for (let i = 0; i < this._ids.getSize(); ++i) {\n      this._ids.set(i, void 0);\n    }\n    this._ids = null;\n  }\n\n  /**\n   * ID名をリストから登録\n   *\n   * @param ids ID名リスト\n   * @param count IDの個数\n   */\n  public registerIds(ids: string[] | csmString[]): void {\n    for (let i = 0; i < ids.length; i++) {\n      this.registerId(ids[i]);\n    }\n  }\n\n  /**\n   * ID名を登録\n   *\n   * @param id ID名\n   */\n  public registerId(id: string | csmString): CubismId {\n    let result: CubismId = null;\n\n    if ('string' == typeof id) {\n      if ((result = this.findId(id)) != null) {\n        return result;\n      }\n\n      result = new CubismId(id);\n      this._ids.pushBack(result);\n    } else {\n      return this.registerId(id.s);\n    }\n\n    return result;\n  }\n\n  /**\n   * ID名からIDを取得する\n   *\n   * @param id ID名\n   */\n  public getId(id: csmString | string): CubismId {\n    return this.registerId(id);\n  }\n\n  /**\n   * ID名からIDの確認\n   *\n   * @return true 存在する\n   * @return false 存在しない\n   */\n  public isExist(id: csmString | string): boolean {\n    if ('string' == typeof id) {\n      return this.findId(id) != null;\n    }\n    return this.isExist(id.s);\n  }\n\n  /**\n   * ID名からIDを検索する。\n   *\n   * @param id ID名\n   * @return 登録されているID。なければNULL。\n   */\n  private findId(id: string): CubismId {\n    for (let i = 0; i < this._ids.getSize(); ++i) {\n      if (this._ids.at(i).getString().isEqual(id)) {\n        return this._ids.at(i);\n      }\n    }\n\n    return null;\n  }\n\n  private _ids: csmVector<CubismId>; // 登録されているIDのリスト\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismidmanager';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismIdManager = $.CubismIdManager;\n  export type CubismIdManager = $.CubismIdManager;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdManager } from './id/cubismidmanager';\nimport { CubismRenderer } from './rendering/cubismrenderer';\nimport {\n  CSM_ASSERT,\n  CubismLogInfo,\n  CubismLogWarning,\n} from './utils/cubismdebug';\nimport { Value } from './utils/cubismjson';\n\nexport function strtod(s: string, endPtr: string[]): number {\n  let index = 0;\n  for (let i = 1; ; i++) {\n    const testC: string = s.slice(i - 1, i);\n\n    // 指数・マイナスの可能性があるのでスキップする\n    if (testC == 'e' || testC == '-' || testC == 'E') {\n      continue;\n    } // 文字列の範囲を広げていく\n\n    const test: string = s.substring(0, i);\n    const number = Number(test);\n    if (isNaN(number)) {\n      // 数値として認識できなくなったので終了\n      break;\n    } // 最後に数値としてできたindexを格納しておく\n\n    index = i;\n  }\n  let d = parseFloat(s); // パースした数値\n\n  if (isNaN(d)) {\n    // 数値として認識できなくなったので終了\n    d = NaN;\n  }\n\n  endPtr[0] = s.slice(index); // 後続の文字列\n  return d;\n}\n\n// ファイルスコープの変数を初期化\n\nlet s_isStarted = false;\nlet s_isInitialized = false;\nlet s_option: Option = null;\nlet s_cubismIdManager: CubismIdManager = null;\n\n/**\n * Framework内で使う定数の宣言\n */\nexport const Constant = Object.freeze<Record<string, number>>({\n  vertexOffset: 0, // メッシュ頂点のオフセット値\n  vertexStep: 2, // メッシュ頂点のステップ値\n});\n\nexport function csmDelete<T>(address: T): void {\n  if (!address) {\n    return;\n  }\n\n  address = void 0;\n}\n\n/**\n * Live2D Cubism SDK Original Workflow SDKのエントリポイント\n * 利用開始時はCubismFramework.initialize()を呼び、CubismFramework.dispose()で終了する。\n */\nexport class CubismFramework {\n  /**\n   * Cubism FrameworkのAPIを使用可能にする。\n   *  APIを実行する前に必ずこの関数を実行すること。\n   *  一度準備が完了して以降は、再び実行しても内部処理がスキップされます。\n   *\n   * @param    option      Optionクラスのインスタンス\n   *\n   * @return   準備処理が完了したらtrueが返ります。\n   */\n  public static startUp(option: Option = null): boolean {\n    if (s_isStarted) {\n      CubismLogInfo('CubismFramework.startUp() is already done.');\n      return s_isStarted;\n    }\n\n    s_option = option;\n\n    if (s_option != null) {\n      Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction);\n    }\n\n    s_isStarted = true;\n\n    // Live2D Cubism Coreバージョン情報を表示\n    if (s_isStarted) {\n      const version: number = Live2DCubismCore.Version.csmGetVersion();\n      const major: number = (version & 0xff000000) >> 24;\n      const minor: number = (version & 0x00ff0000) >> 16;\n      const patch: number = version & 0x0000ffff;\n      const versionNumber: number = version;\n\n      CubismLogInfo(\n        `Live2D Cubism Core version: {0}.{1}.{2} ({3})`,\n        ('00' + major).slice(-2),\n        ('00' + minor).slice(-2),\n        ('0000' + patch).slice(-4),\n        versionNumber\n      );\n    }\n\n    CubismLogInfo('CubismFramework.startUp() is complete.');\n\n    return s_isStarted;\n  }\n\n  /**\n   * StartUp()で初期化したCubismFrameworkの各パラメータをクリアします。\n   * Dispose()したCubismFrameworkを再利用する際に利用してください。\n   */\n  public static cleanUp(): void {\n    s_isStarted = false;\n    s_isInitialized = false;\n    s_option = null;\n    s_cubismIdManager = null;\n  }\n\n  /**\n   * Cubism Framework内のリソースを初期化してモデルを表示可能な状態にします。<br>\n   *     再度Initialize()するには先にDispose()を実行する必要があります。\n   *\n   * @param memorySize 初期化時メモリ量 [byte(s)]\n   *    複数モデル表示時などにモデルが更新されない際に使用してください。\n   *    指定する際は必ず1024*1024*16 byte(16MB)以上の値を指定してください。\n   *    それ以外はすべて1024*1024*16 byteに丸めます。\n   */\n  public static initialize(memorySize = 0): void {\n    CSM_ASSERT(s_isStarted);\n    if (!s_isStarted) {\n      CubismLogWarning('CubismFramework is not started.');\n      return;\n    }\n\n    // --- s_isInitializedによる連続初期化ガード ---\n    // 連続してリソース確保が行われないようにする。\n    // 再度Initialize()するには先にDispose()を実行する必要がある。\n    if (s_isInitialized) {\n      CubismLogWarning(\n        'CubismFramework.initialize() skipped, already initialized.'\n      );\n      return;\n    }\n\n    //---- static 初期化 ----\n    Value.staticInitializeNotForClientCall();\n\n    s_cubismIdManager = new CubismIdManager();\n\n    // --- HACK: 初期化時メモリ量の拡張(単位byte) ---\n    // 複数モデル表示時などにモデルが更新されない際に使用してください。\n    // 指定する際は必ず1024*1024*16 byte(16MB)以上の値を指定してください。\n    // それ以外はすべて1024*1024*16 byteに丸めます。\n    Live2DCubismCore.Memory.initializeAmountOfMemory(memorySize);\n\n    s_isInitialized = true;\n\n    CubismLogInfo('CubismFramework.initialize() is complete.');\n  }\n\n  /**\n   * Cubism Framework内の全てのリソースを解放します。\n   *      ただし、外部で確保されたリソースについては解放しません。\n   *      外部で適切に破棄する必要があります。\n   */\n  public static dispose(): void {\n    CSM_ASSERT(s_isStarted);\n    if (!s_isStarted) {\n      CubismLogWarning('CubismFramework is not started.');\n      return;\n    }\n\n    // --- s_isInitializedによる未初期化解放ガード ---\n    // dispose()するには先にinitialize()を実行する必要がある。\n    if (!s_isInitialized) {\n      // false...リソース未確保の場合\n      CubismLogWarning('CubismFramework.dispose() skipped, not initialized.');\n      return;\n    }\n\n    Value.staticReleaseNotForClientCall();\n\n    s_cubismIdManager.release();\n    s_cubismIdManager = null;\n\n    // レンダラの静的リソース（シェーダプログラム他）を解放する\n    CubismRenderer.staticRelease();\n\n    s_isInitialized = false;\n\n    CubismLogInfo('CubismFramework.dispose() is complete.');\n  }\n\n  /**\n   * Cubism FrameworkのAPIを使用する準備が完了したかどうか\n   * @return APIを使用する準備が完了していればtrueが返ります。\n   */\n  public static isStarted(): boolean {\n    return s_isStarted;\n  }\n\n  /**\n   * Cubism Frameworkのリソース初期化がすでに行われているかどうか\n   * @return リソース確保が完了していればtrueが返ります\n   */\n  public static isInitialized(): boolean {\n    return s_isInitialized;\n  }\n\n  /**\n   * Core APIにバインドしたログ関数を実行する\n   *\n   * @praram message ログメッセージ\n   */\n  public static coreLogFunction(message: string): void {\n    // Return if logging not possible.\n    if (!Live2DCubismCore.Logging.csmGetLogFunction()) {\n      return;\n    }\n\n    Live2DCubismCore.Logging.csmGetLogFunction()(message);\n  }\n\n  /**\n   * 現在のログ出力レベル設定の値を返す。\n   *\n   * @return  現在のログ出力レベル設定の値\n   */\n  public static getLoggingLevel(): LogLevel {\n    if (s_option != null) {\n      return s_option.loggingLevel;\n    }\n    return LogLevel.LogLevel_Off;\n  }\n\n  /**\n   * IDマネージャのインスタンスを取得する\n   * @return CubismManagerクラスのインスタンス\n   */\n  public static getIdManager(): CubismIdManager {\n    return s_cubismIdManager;\n  }\n\n  /**\n   * 静的クラスとして使用する\n   * インスタンス化させない\n   */\n  private constructor() {}\n}\n\nexport class Option {\n  logFunction: Live2DCubismCore.csmLogFunction; // ログ出力の関数オブジェクト\n  loggingLevel: LogLevel; // ログ出力レベルの設定\n}\n\n/**\n * ログ出力のレベル\n */\nexport enum LogLevel {\n  LogLevel_Verbose = 0, // 詳細ログ\n  LogLevel_Debug, // デバッグログ\n  LogLevel_Info, // Infoログ\n  LogLevel_Warning, // 警告ログ\n  LogLevel_Error, // エラーログ\n  LogLevel_Off, // ログ出力無効\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './live2dcubismframework';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const Constant = $.Constant;\n  export const csmDelete = $.csmDelete;\n  export const CubismFramework = $.CubismFramework;\n  export type CubismFramework = $.CubismFramework;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismVector2 } from './cubismvector2';\n\n/**\n * 数値計算などに使用するユーティリティクラス\n */\nexport class CubismMath {\n  static readonly Epsilon: number = 0.00001;\n\n  /**\n   * 第一引数の値を最小値と最大値の範囲に収めた値を返す\n   *\n   * @param value 収められる値\n   * @param min   範囲の最小値\n   * @param max   範囲の最大値\n   * @return 最小値と最大値の範囲に収めた値\n   */\n  static range(value: number, min: number, max: number): number {\n    if (value < min) {\n      value = min;\n    } else if (value > max) {\n      value = max;\n    }\n\n    return value;\n  }\n\n  /**\n   * サイン関数の値を求める\n   *\n   * @param x 角度値（ラジアン）\n   * @return サイン関数sin(x)の値\n   */\n  static sin(x: number): number {\n    return Math.sin(x);\n  }\n\n  /**\n   * コサイン関数の値を求める\n   *\n   * @param x 角度値(ラジアン)\n   * @return コサイン関数cos(x)の値\n   */\n  static cos(x: number): number {\n    return Math.cos(x);\n  }\n\n  /**\n   * 値の絶対値を求める\n   *\n   * @param x 絶対値を求める値\n   * @return 値の絶対値\n   */\n  static abs(x: number): number {\n    return Math.abs(x);\n  }\n\n  /**\n   * 平方根(ルート)を求める\n   * @param x -> 平方根を求める値\n   * @return 値の平方根\n   */\n  static sqrt(x: number): number {\n    return Math.sqrt(x);\n  }\n\n  /**\n   * 立方根を求める\n   * @param x -> 立方根を求める値\n   * @return 値の立方根\n   */\n  static cbrt(x: number): number {\n    if (x === 0) {\n      return x;\n    }\n\n    let cx: number = x;\n    const isNegativeNumber: boolean = cx < 0;\n\n    if (isNegativeNumber) {\n      cx = -cx;\n    }\n\n    let ret: number;\n    if (cx === Infinity) {\n      ret = Infinity;\n    } else {\n      ret = Math.exp(Math.log(cx) / 3);\n      ret = (cx / (ret * ret) + 2 * ret) / 3;\n    }\n    return isNegativeNumber ? -ret : ret;\n  }\n\n  /**\n   * イージング処理されたサインを求める\n   * フェードイン・アウト時のイージングに利用できる\n   *\n   * @param value イージングを行う値\n   * @return イージング処理されたサイン値\n   */\n  static getEasingSine(value: number): number {\n    if (value < 0.0) {\n      return 0.0;\n    } else if (value > 1.0) {\n      return 1.0;\n    }\n\n    return 0.5 - 0.5 * this.cos(value * Math.PI);\n  }\n\n  /**\n   * 大きい方の値を返す\n   *\n   * @param left 左辺の値\n   * @param right 右辺の値\n   * @return 大きい方の値\n   */\n  static max(left: number, right: number): number {\n    return left > right ? left : right;\n  }\n\n  /**\n   * 小さい方の値を返す\n   *\n   * @param left  左辺の値\n   * @param right 右辺の値\n   * @return 小さい方の値\n   */\n  static min(left: number, right: number): number {\n    return left > right ? right : left;\n  }\n\n  /**\n   * 角度値をラジアン値に変換する\n   *\n   * @param degrees   角度値\n   * @return 角度値から変換したラジアン値\n   */\n  static degreesToRadian(degrees: number): number {\n    return (degrees / 180.0) * Math.PI;\n  }\n\n  /**\n   * ラジアン値を角度値に変換する\n   *\n   * @param radian    ラジアン値\n   * @return ラジアン値から変換した角度値\n   */\n  static radianToDegrees(radian: number): number {\n    return (radian * 180.0) / Math.PI;\n  }\n\n  /**\n   * ２つのベクトルからラジアン値を求める\n   *\n   * @param from  始点ベクトル\n   * @param to    終点ベクトル\n   * @return ラジアン値から求めた方向ベクトル\n   */\n  static directionToRadian(from: CubismVector2, to: CubismVector2): number {\n    const q1: number = Math.atan2(to.y, to.x);\n    const q2: number = Math.atan2(from.y, from.x);\n\n    let ret: number = q1 - q2;\n\n    while (ret < -Math.PI) {\n      ret += Math.PI * 2.0;\n    }\n\n    while (ret > Math.PI) {\n      ret -= Math.PI * 2.0;\n    }\n\n    return ret;\n  }\n\n  /**\n   * ２つのベクトルから角度値を求める\n   *\n   * @param from  始点ベクトル\n   * @param to    終点ベクトル\n   * @return 角度値から求めた方向ベクトル\n   */\n  static directionToDegrees(from: CubismVector2, to: CubismVector2): number {\n    const radian: number = this.directionToRadian(from, to);\n    let degree: number = this.radianToDegrees(radian);\n\n    if (to.x - from.x > 0.0) {\n      degree = -degree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * ラジアン値を方向ベクトルに変換する。\n   *\n   * @param totalAngle    ラジアン値\n   * @return ラジアン値から変換した方向ベクトル\n   */\n\n  static radianToDirection(totalAngle: number): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2();\n\n    ret.x = this.sin(totalAngle);\n    ret.y = this.cos(totalAngle);\n\n    return ret;\n  }\n\n  /**\n   * 三次方程式の三次項の係数が0になったときに補欠的に二次方程式の解をもとめる。\n   * a * x^2 + b * x + c = 0\n   *\n   * @param   a -> 二次項の係数値\n   * @param   b -> 一次項の係数値\n   * @param   c -> 定数項の値\n   * @return  二次方程式の解\n   */\n  static quadraticEquation(a: number, b: number, c: number): number {\n    if (this.abs(a) < CubismMath.Epsilon) {\n      if (this.abs(b) < CubismMath.Epsilon) {\n        return -c;\n      }\n      return -c / b;\n    }\n\n    return -(b + this.sqrt(b * b - 4.0 * a * c)) / (2.0 * a);\n  }\n\n  /**\n   * カルダノの公式によってベジェのt値に該当する３次方程式の解を求める。\n   * 重解になったときには0.0～1.0の値になる解を返す。\n   *\n   * a * x^3 + b * x^2 + c * x + d = 0\n   *\n   * @param   a -> 三次項の係数値\n   * @param   b -> 二次項の係数値\n   * @param   c -> 一次項の係数値\n   * @param   d -> 定数項の値\n   * @return  0.0～1.0の間にある解\n   */\n  static cardanoAlgorithmForBezier(\n    a: number,\n    b: number,\n    c: number,\n    d: number\n  ): number {\n    if (this.sqrt(a) < CubismMath.Epsilon) {\n      return this.range(this.quadraticEquation(b, c, d), 0.0, 1.0);\n    }\n\n    const ba: number = b / a;\n    const ca: number = c / a;\n    const da: number = d / a;\n\n    const p: number = (3.0 * ca - ba * ba) / 3.0;\n    const p3: number = p / 3.0;\n    const q: number = (2.0 * ba * ba * ba - 9.0 * ba * ca + 27.0 * da) / 27.0;\n    const q2: number = q / 2.0;\n    const discriminant: number = q2 * q2 + p3 * p3 * p3;\n\n    const center = 0.5;\n    const threshold: number = center + 0.01;\n\n    if (discriminant < 0.0) {\n      const mp3: number = -p / 3.0;\n      const mp33: number = mp3 * mp3 * mp3;\n      const r: number = this.sqrt(mp33);\n      const t: number = -q / (2.0 * r);\n      const cosphi: number = this.range(t, -1.0, 1.0);\n      const phi: number = Math.acos(cosphi);\n      const crtr: number = this.cbrt(r);\n      const t1: number = 2.0 * crtr;\n\n      const root1: number = t1 * this.cos(phi / 3.0) - ba / 3.0;\n      if (this.abs(root1 - center) < threshold) {\n        return this.range(root1, 0.0, 1.0);\n      }\n\n      const root2: number =\n        t1 * this.cos((phi + 2.0 * Math.PI) / 3.0) - ba / 3.0;\n      if (this.abs(root2 - center) < threshold) {\n        return this.range(root2, 0.0, 1.0);\n      }\n\n      const root3: number =\n        t1 * this.cos((phi + 4.0 * Math.PI) / 3.0) - ba / 3.0;\n      return this.range(root3, 0.0, 1.0);\n    }\n\n    if (discriminant == 0.0) {\n      let u1: number;\n      if (q2 < 0.0) {\n        u1 = this.cbrt(-q2);\n      } else {\n        u1 = -this.cbrt(q2);\n      }\n\n      const root1: number = 2.0 * u1 - ba / 3.0;\n      if (this.abs(root1 - center) < threshold) {\n        return this.range(root1, 0.0, 1.0);\n      }\n\n      const root2: number = -u1 - ba / 3.0;\n      return this.range(root2, 0.0, 1.0);\n    }\n\n    const sd: number = this.sqrt(discriminant);\n    const u1: number = this.cbrt(sd - q2);\n    const v1: number = this.cbrt(sd + q2);\n    const root1: number = u1 - v1 - ba / 3.0;\n    return this.range(root1, 0.0, 1.0);\n  }\n\n  /**\n   * コンストラクタ\n   */\n  private constructor() {}\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmath';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMath = $.CubismMath;\n  export type CubismMath = $.CubismMath;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n/**\n * 4x4の行列\n *\n * 4x4行列の便利クラス。\n */\nexport class CubismMatrix44 {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._tr = new Float32Array(16); // 4 * 4のサイズ\n    this.loadIdentity();\n  }\n\n  /**\n   * 受け取った２つの行列の乗算を行う。\n   *\n   * @param a 行列a\n   * @param b 行列b\n   * @return 乗算結果の行列\n   */\n  public static multiply(\n    a: Float32Array,\n    b: Float32Array,\n    dst: Float32Array\n  ): void {\n    const c: Float32Array = new Float32Array([\n      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,\n      0.0,\n    ]);\n\n    const n = 4;\n\n    for (let i = 0; i < n; ++i) {\n      for (let j = 0; j < n; ++j) {\n        for (let k = 0; k < n; ++k) {\n          c[j + i * 4] += a[k + i * 4] * b[j + k * 4];\n        }\n      }\n    }\n\n    for (let i = 0; i < 16; ++i) {\n      dst[i] = c[i];\n    }\n  }\n\n  /**\n   * 単位行列に初期化する\n   */\n  public loadIdentity(): void {\n    const c: Float32Array = new Float32Array([\n      1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0,\n      1.0,\n    ]);\n\n    this.setMatrix(c);\n  }\n\n  /**\n   * 行列を設定\n   *\n   * @param tr 16個の浮動小数点数で表される4x4の行列\n   */\n  public setMatrix(tr: Float32Array): void {\n    for (let i = 0; i < 16; ++i) {\n      this._tr[i] = tr[i];\n    }\n  }\n\n  /**\n   * 行列を浮動小数点数の配列で取得\n   *\n   * @return 16個の浮動小数点数で表される4x4の行列\n   */\n  public getArray(): Float32Array {\n    return this._tr;\n  }\n\n  /**\n   * X軸の拡大率を取得\n   * @return X軸の拡大率\n   */\n  public getScaleX(): number {\n    return this._tr[0];\n  }\n\n  /**\n   * Y軸の拡大率を取得する\n   *\n   * @return Y軸の拡大率\n   */\n  public getScaleY(): number {\n    return this._tr[5];\n  }\n\n  /**\n   * X軸の移動量を取得\n   * @return X軸の移動量\n   */\n  public getTranslateX(): number {\n    return this._tr[12];\n  }\n\n  /**\n   * Y軸の移動量を取得\n   * @return Y軸の移動量\n   */\n  public getTranslateY(): number {\n    return this._tr[13];\n  }\n\n  /**\n   * X軸の値を現在の行列で計算\n   *\n   * @param src X軸の値\n   * @return 現在の行列で計算されたX軸の値\n   */\n  public transformX(src: number): number {\n    return this._tr[0] * src + this._tr[12];\n  }\n\n  /**\n   * Y軸の値を現在の行列で計算\n   *\n   * @param src Y軸の値\n   * @return 現在の行列で計算されたY軸の値\n   */\n  public transformY(src: number): number {\n    return this._tr[5] * src + this._tr[13];\n  }\n\n  /**\n   * X軸の値を現在の行列で逆計算\n   */\n  public invertTransformX(src: number): number {\n    return (src - this._tr[12]) / this._tr[0];\n  }\n\n  /**\n   * Y軸の値を現在の行列で逆計算\n   */\n  public invertTransformY(src: number): number {\n    return (src - this._tr[13]) / this._tr[5];\n  }\n\n  /**\n   * 現在の行列の位置を起点にして移動\n   *\n   * 現在の行列の位置を起点にして相対的に移動する。\n   *\n   * @param x X軸の移動量\n   * @param y Y軸の移動量\n   */\n  public translateRelative(x: number, y: number): void {\n    const tr1: Float32Array = new Float32Array([\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      x,\n      y,\n      0.0,\n      1.0,\n    ]);\n\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\n  }\n\n  /**\n   * 現在の行列の位置を移動\n   *\n   * 現在の行列の位置を指定した位置へ移動する\n   *\n   * @param x X軸の移動量\n   * @param y y軸の移動量\n   */\n  public translate(x: number, y: number): void {\n    this._tr[12] = x;\n    this._tr[13] = y;\n  }\n\n  /**\n   * 現在の行列のX軸の位置を指定した位置へ移動する\n   *\n   * @param x X軸の移動量\n   */\n  public translateX(x: number): void {\n    this._tr[12] = x;\n  }\n\n  /**\n   * 現在の行列のY軸の位置を指定した位置へ移動する\n   *\n   * @param y Y軸の移動量\n   */\n  public translateY(y: number): void {\n    this._tr[13] = y;\n  }\n\n  /**\n   * 現在の行列の拡大率を相対的に設定する\n   *\n   * @param x X軸の拡大率\n   * @param y Y軸の拡大率\n   */\n  public scaleRelative(x: number, y: number): void {\n    const tr1: Float32Array = new Float32Array([\n      x,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      y,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n    ]);\n\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\n  }\n\n  /**\n   * 現在の行列の拡大率を指定した倍率に設定する\n   *\n   * @param x X軸の拡大率\n   * @param y Y軸の拡大率\n   */\n  public scale(x: number, y: number): void {\n    this._tr[0] = x;\n    this._tr[5] = y;\n  }\n\n  /**\n   * 現在の行列に行列を乗算\n   *\n   * @param m 行列\n   */\n  public multiplyByMatrix(m: CubismMatrix44): void {\n    CubismMatrix44.multiply(m.getArray(), this._tr, this._tr);\n  }\n\n  /**\n   * オブジェクトのコピーを生成する\n   */\n  public clone(): CubismMatrix44 {\n    const cloneMatrix: CubismMatrix44 = new CubismMatrix44();\n\n    for (let i = 0; i < this._tr.length; i++) {\n      cloneMatrix._tr[i] = this._tr[i];\n    }\n\n    return cloneMatrix;\n  }\n\n  protected _tr: Float32Array; // 4x4行列データ\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmatrix44';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMatrix44 = $.CubismMatrix44;\n  export type CubismMatrix44 = $.CubismMatrix44;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { csmMap, iterator } from '../type/csmmap';\nimport { CubismMatrix44 } from './cubismmatrix44';\n\n/**\n * モデル座標設定用の4x4行列\n *\n * モデル座標設定用の4x4行列クラス\n */\nexport class CubismModelMatrix extends CubismMatrix44 {\n  /**\n   * コンストラクタ\n   *\n   * @param w 横幅\n   * @param h 縦幅\n   */\n  constructor(w?: number, h?: number) {\n    super();\n\n    this._width = w !== undefined ? w : 0.0;\n    this._height = h !== undefined ? h : 0.0;\n\n    this.setHeight(2.0);\n  }\n\n  /**\n   * 横幅を設定\n   *\n   * @param w 横幅\n   */\n  public setWidth(w: number): void {\n    const scaleX: number = w / this._width;\n    const scaleY: number = scaleX;\n    this.scale(scaleX, scaleY);\n  }\n\n  /**\n   * 縦幅を設定\n   * @param h 縦幅\n   */\n  public setHeight(h: number): void {\n    const scaleX: number = h / this._height;\n    const scaleY: number = scaleX;\n    this.scale(scaleX, scaleY);\n  }\n\n  /**\n   * 位置を設定\n   *\n   * @param x X軸の位置\n   * @param y Y軸の位置\n   */\n  public setPosition(x: number, y: number): void {\n    this.translate(x, y);\n  }\n\n  /**\n   * 中心位置を設定\n   *\n   * @param x X軸の中心位置\n   * @param y Y軸の中心位置\n   *\n   * @note widthかheightを設定したあとでないと、拡大率が正しく取得できないためずれる。\n   */\n  public setCenterPosition(x: number, y: number) {\n    this.centerX(x);\n    this.centerY(y);\n  }\n\n  /**\n   * 上辺の位置を設定する\n   *\n   * @param y 上辺のY軸位置\n   */\n  public top(y: number): void {\n    this.setY(y);\n  }\n\n  /**\n   * 下辺の位置を設定する\n   *\n   * @param y 下辺のY軸位置\n   */\n  public bottom(y: number) {\n    const h: number = this._height * this.getScaleY();\n\n    this.translateY(y - h);\n  }\n\n  /**\n   * 左辺の位置を設定\n   *\n   * @param x 左辺のX軸位置\n   */\n  public left(x: number): void {\n    this.setX(x);\n  }\n\n  /**\n   * 右辺の位置を設定\n   *\n   * @param x 右辺のX軸位置\n   */\n  public right(x: number): void {\n    const w = this._width * this.getScaleX();\n\n    this.translateX(x - w);\n  }\n\n  /**\n   * X軸の中心位置を設定\n   *\n   * @param x X軸の中心位置\n   */\n  public centerX(x: number): void {\n    const w = this._width * this.getScaleX();\n\n    this.translateX(x - w / 2.0);\n  }\n\n  /**\n   * X軸の位置を設定\n   *\n   * @param x X軸の位置\n   */\n  public setX(x: number): void {\n    this.translateX(x);\n  }\n\n  /**\n   * Y軸の中心位置を設定\n   *\n   * @param y Y軸の中心位置\n   */\n  public centerY(y: number): void {\n    const h: number = this._height * this.getScaleY();\n\n    this.translateY(y - h / 2.0);\n  }\n\n  /**\n   * Y軸の位置を設定する\n   *\n   * @param y Y軸の位置\n   */\n  public setY(y: number): void {\n    this.translateY(y);\n  }\n\n  /**\n   * レイアウト情報から位置を設定\n   *\n   * @param layout レイアウト情報\n   */\n  public setupFromLayout(layout: csmMap<string, number>): void {\n    const keyWidth = 'width';\n    const keyHeight = 'height';\n    const keyX = 'x';\n    const keyY = 'y';\n    const keyCenterX = 'center_x';\n    const keyCenterY = 'center_y';\n    const keyTop = 'top';\n    const keyBottom = 'bottom';\n    const keyLeft = 'left';\n    const keyRight = 'right';\n\n    for (\n      const ite: iterator<string, number> = layout.begin();\n      ite.notEqual(layout.end());\n      ite.preIncrement()\n    ) {\n      const key: string = ite.ptr().first;\n      const value: number = ite.ptr().second;\n\n      if (key == keyWidth) {\n        this.setWidth(value);\n      } else if (key == keyHeight) {\n        this.setHeight(value);\n      }\n    }\n\n    for (\n      const ite: iterator<string, number> = layout.begin();\n      ite.notEqual(layout.end());\n      ite.preIncrement()\n    ) {\n      const key: string = ite.ptr().first;\n      const value: number = ite.ptr().second;\n\n      if (key == keyX) {\n        this.setX(value);\n      } else if (key == keyY) {\n        this.setY(value);\n      } else if (key == keyCenterX) {\n        this.centerX(value);\n      } else if (key == keyCenterY) {\n        this.centerY(value);\n      } else if (key == keyTop) {\n        this.top(value);\n      } else if (key == keyBottom) {\n        this.bottom(value);\n      } else if (key == keyLeft) {\n        this.left(value);\n      } else if (key == keyRight) {\n        this.right(value);\n      }\n    }\n  }\n\n  private _width: number; // 横幅\n  private _height: number; // 縦幅\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmodelmatrix';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismModelMatrix = $.CubismModelMatrix;\n  export type CubismModelMatrix = $.CubismModelMatrix;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismMath } from './cubismmath';\n\nconst FrameRate = 30;\nconst Epsilon = 0.01;\n\n/**\n * 顔の向きの制御機能\n *\n * 顔の向きの制御機能を提供するクラス。\n */\nexport class CubismTargetPoint {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._faceTargetX = 0.0;\n    this._faceTargetY = 0.0;\n    this._faceX = 0.0;\n    this._faceY = 0.0;\n    this._faceVX = 0.0;\n    this._faceVY = 0.0;\n    this._lastTimeSeconds = 0.0;\n    this._userTimeSeconds = 0.0;\n  }\n\n  /**\n   * 更新処理\n   */\n  public update(deltaTimeSeconds: number): void {\n    // デルタ時間を加算する\n    this._userTimeSeconds += deltaTimeSeconds;\n\n    // 首を中央から左右に振るときの平均的な速さは 秒速度。加速・減速を考慮して、その２倍を最高速度とする\n    // 顔の振り具合を、中央（0.0）から、左右は（+-1.0）とする\n    const faceParamMaxV: number = 40.0 / 10.0; // 7.5秒間に40分移動(5.3/sc)\n    const maxV: number = (faceParamMaxV * 1.0) / FrameRate; // 1frameあたりに変化できる速度の上限\n\n    if (this._lastTimeSeconds == 0.0) {\n      this._lastTimeSeconds = this._userTimeSeconds;\n      return;\n    }\n\n    const deltaTimeWeight: number =\n      (this._userTimeSeconds - this._lastTimeSeconds) * FrameRate;\n    this._lastTimeSeconds = this._userTimeSeconds;\n\n    // 最高速度になるまでの時間を\n    const timeToMaxSpeed = 0.15;\n    const frameToMaxSpeed: number = timeToMaxSpeed * FrameRate; // sec * frame/sec\n    const maxA: number = (deltaTimeWeight * maxV) / frameToMaxSpeed; // 1frameあたりの加速度\n\n    // 目指す向きは、（dx, dy）方向のベクトルとなる\n    const dx: number = this._faceTargetX - this._faceX;\n    const dy: number = this._faceTargetY - this._faceY;\n\n    if (CubismMath.abs(dx) <= Epsilon && CubismMath.abs(dy) <= Epsilon) {\n      return; // 変化なし\n    }\n\n    // 速度の最大よりも大きい場合は、速度を落とす\n    const d: number = CubismMath.sqrt(dx * dx + dy * dy);\n\n    // 進行方向の最大速度ベクトル\n    const vx: number = (maxV * dx) / d;\n    const vy: number = (maxV * dy) / d;\n\n    // 現在の速度から、新規速度への変化（加速度）を求める\n    let ax: number = vx - this._faceVX;\n    let ay: number = vy - this._faceVY;\n\n    const a: number = CubismMath.sqrt(ax * ax + ay * ay);\n\n    // 加速のとき\n    if (a < -maxA || a > maxA) {\n      ax *= maxA / a;\n      ay *= maxA / a;\n    }\n\n    // 加速度を元の速度に足して、新速度とする\n    this._faceVX += ax;\n    this._faceVY += ay;\n\n    // 目的の方向に近づいたとき、滑らかに減速するための処理\n    // 設定された加速度で止まる事の出来る距離と速度の関係から\n    // 現在とりうる最高速度を計算し、それ以上の時は速度を落とす\n    // ※本来、人間は筋力で力（加速度）を調整できるため、より自由度が高いが、簡単な処理で済ませている\n    {\n      // 加速度、速度、距離の関係式。\n      //            2  6           2               3\n      //      sqrt(a  t  + 16 a h t  - 8 a h) - a t\n      // v = --------------------------------------\n      //                    2\n      //                 4 t  - 2\n      // (t=1)\n      // \t時刻tは、あらかじめ加速度、速度を1/60(フレームレート、単位なし)で\n      // \t考えているので、t＝１として消してよい（※未検証）\n\n      const maxV: number =\n        0.5 *\n        (CubismMath.sqrt(maxA * maxA + 16.0 * maxA * d - 8.0 * maxA * d) -\n          maxA);\n      const curV: number = CubismMath.sqrt(\n        this._faceVX * this._faceVX + this._faceVY * this._faceVY\n      );\n\n      if (curV > maxV) {\n        // 現在の速度 > 最高速度のとき、最高速度まで減速\n        this._faceVX *= maxV / curV;\n        this._faceVY *= maxV / curV;\n      }\n    }\n\n    this._faceX += this._faceVX;\n    this._faceY += this._faceVY;\n  }\n\n  /**\n   * X軸の顔の向きの値を取得\n   *\n   * @return X軸の顔の向きの値（-1.0 ~ 1.0）\n   */\n  public getX(): number {\n    return this._faceX;\n  }\n\n  /**\n   * Y軸の顔の向きの値を取得\n   *\n   * @return Y軸の顔の向きの値（-1.0 ~ 1.0）\n   */\n  public getY(): number {\n    return this._faceY;\n  }\n\n  /**\n   * 顔の向きの目標値を設定\n   *\n   * @param x X軸の顔の向きの値（-1.0 ~ 1.0）\n   * @param y Y軸の顔の向きの値（-1.0 ~ 1.0）\n   */\n  public set(x: number, y: number): void {\n    this._faceTargetX = x;\n    this._faceTargetY = y;\n  }\n\n  private _faceTargetX: number; // 顔の向きのX目標値（この値に近づいていく）\n  private _faceTargetY: number; // 顔の向きのY目標値（この値に近づいていく）\n  private _faceX: number; // 顔の向きX（-1.0 ~ 1.0）\n  private _faceY: number; // 顔の向きY（-1.0 ~ 1.0）\n  private _faceVX: number; // 顔の向きの変化速度X\n  private _faceVY: number; // 顔の向きの変化速度Y\n  private _lastTimeSeconds: number; // 最後の実行時間[秒]\n  private _userTimeSeconds: number; // デルタ時間の積算値[秒]\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismtargetpoint';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismTargetPoint = $.CubismTargetPoint;\n  export type CubismTargetPoint = $.CubismTargetPoint;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n/**\n * 2次元ベクトル型\n *\n * 2次元ベクトル型の機能を提供する。\n */\nexport class CubismVector2 {\n  /**\n   * コンストラクタ\n   */\n  public constructor(public x?: number, public y?: number) {\n    this.x = x == undefined ? 0.0 : x;\n\n    this.y = y == undefined ? 0.0 : y;\n  }\n\n  /**\n   * ベクトルの加算\n   *\n   * @param vector2 加算するベクトル値\n   * @return 加算結果 ベクトル値\n   */\n  public add(vector2: CubismVector2): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\n    ret.x = this.x + vector2.x;\n    ret.y = this.y + vector2.y;\n    return ret;\n  }\n\n  /**\n   * ベクトルの減算\n   *\n   * @param vector2 減算するベクトル値\n   * @return 減算結果 ベクトル値\n   */\n  public substract(vector2: CubismVector2): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\n    ret.x = this.x - vector2.x;\n    ret.y = this.y - vector2.y;\n    return ret;\n  }\n\n  /**\n   * ベクトルの乗算\n   *\n   * @param vector2 乗算するベクトル値\n   * @return 乗算結果 ベクトル値\n   */\n  public multiply(vector2: CubismVector2): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\n    ret.x = this.x * vector2.x;\n    ret.y = this.y * vector2.y;\n    return ret;\n  }\n\n  /**\n   * ベクトルの乗算(スカラー)\n   *\n   * @param scalar 乗算するスカラー値\n   * @return 乗算結果 ベクトル値\n   */\n  public multiplyByScaler(scalar: number): CubismVector2 {\n    return this.multiply(new CubismVector2(scalar, scalar));\n  }\n\n  /**\n   * ベクトルの除算\n   *\n   * @param vector2 除算するベクトル値\n   * @return 除算結果 ベクトル値\n   */\n  public division(vector2: CubismVector2): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\n    ret.x = this.x / vector2.x;\n    ret.y = this.y / vector2.y;\n    return ret;\n  }\n\n  /**\n   * ベクトルの除算(スカラー)\n   *\n   * @param scalar 除算するスカラー値\n   * @return 除算結果 ベクトル値\n   */\n  public divisionByScalar(scalar: number): CubismVector2 {\n    return this.division(new CubismVector2(scalar, scalar));\n  }\n\n  /**\n   * ベクトルの長さを取得する\n   *\n   * @return ベクトルの長さ\n   */\n  public getLength(): number {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  /**\n   * ベクトルの距離の取得\n   *\n   * @param a 点\n   * @return ベクトルの距離\n   */\n  public getDistanceWith(a: CubismVector2): number {\n    return Math.sqrt(\n      (this.x - a.x) * (this.x - a.x) + (this.y - a.y) * (this.y - a.y)\n    );\n  }\n\n  /**\n   * ドット積の計算\n   *\n   * @param a 値\n   * @return 結果\n   */\n  public dot(a: CubismVector2): number {\n    return this.x * a.x + this.y * a.y;\n  }\n\n  /**\n   * 正規化の適用\n   */\n  public normalize(): void {\n    const length: number = Math.pow(this.x * this.x + this.y * this.y, 0.5);\n\n    this.x = this.x / length;\n    this.y = this.y / length;\n  }\n\n  /**\n   * 等しさの確認（等しいか？）\n   *\n   * 値が等しいか？\n   *\n   * @param rhs 確認する値\n   * @return true 値は等しい\n   * @return false 値は等しくない\n   */\n  public isEqual(rhs: CubismVector2): boolean {\n    return this.x == rhs.x && this.y == rhs.y;\n  }\n\n  /**\n   * 等しさの確認（等しくないか？）\n   *\n   * 値が等しくないか？\n   *\n   * @param rhs 確認する値\n   * @return true 値は等しくない\n   * @return false 値は等しい\n   */\n  public isNotEqual(rhs: CubismVector2): boolean {\n    return !this.isEqual(rhs);\n  }\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismvector2';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismVector2 = $.CubismVector2;\n  export type CubismVector2 = $.CubismVector2;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismMatrix44 } from './cubismmatrix44';\n\n/**\n * カメラの位置変更に使うと便利な4x4行列\n *\n * カメラの位置変更に使うと便利な4x4行列のクラス。\n */\nexport class CubismViewMatrix extends CubismMatrix44 {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n    this._screenLeft = 0.0;\n    this._screenRight = 0.0;\n    this._screenTop = 0.0;\n    this._screenBottom = 0.0;\n    this._maxLeft = 0.0;\n    this._maxRight = 0.0;\n    this._maxTop = 0.0;\n    this._maxBottom = 0.0;\n    this._maxScale = 0.0;\n    this._minScale = 0.0;\n  }\n\n  /**\n   * 移動を調整\n   *\n   * @param x X軸の移動量\n   * @param y Y軸の移動量\n   */\n  public adjustTranslate(x: number, y: number): void {\n    if (this._tr[0] * this._maxLeft + (this._tr[12] + x) > this._screenLeft) {\n      x = this._screenLeft - this._tr[0] * this._maxLeft - this._tr[12];\n    }\n\n    if (this._tr[0] * this._maxRight + (this._tr[12] + x) < this._screenRight) {\n      x = this._screenRight - this._tr[0] * this._maxRight - this._tr[12];\n    }\n\n    if (this._tr[5] * this._maxTop + (this._tr[13] + y) < this._screenTop) {\n      y = this._screenTop - this._tr[5] * this._maxTop - this._tr[13];\n    }\n\n    if (\n      this._tr[5] * this._maxBottom + (this._tr[13] + y) >\n      this._screenBottom\n    ) {\n      y = this._screenBottom - this._tr[5] * this._maxBottom - this._tr[13];\n    }\n\n    const tr1: Float32Array = new Float32Array([\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      x,\n      y,\n      0.0,\n      1.0,\n    ]);\n\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\n  }\n\n  /**\n   * 拡大率を調整\n   *\n   * @param cx 拡大を行うX軸の中心位置\n   * @param cy 拡大を行うY軸の中心位置\n   * @param scale 拡大率\n   */\n  public adjustScale(cx: number, cy: number, scale: number): void {\n    const maxScale: number = this.getMaxScale();\n    const minScale: number = this.getMinScale();\n\n    const targetScale = scale * this._tr[0];\n\n    if (targetScale < minScale) {\n      if (this._tr[0] > 0.0) {\n        scale = minScale / this._tr[0];\n      }\n    } else if (targetScale > maxScale) {\n      if (this._tr[0] > 0.0) {\n        scale = maxScale / this._tr[0];\n      }\n    }\n\n    const tr1: Float32Array = new Float32Array([\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      cx,\n      cy,\n      0.0,\n      1.0,\n    ]);\n\n    const tr2: Float32Array = new Float32Array([\n      scale,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      scale,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n    ]);\n\n    const tr3: Float32Array = new Float32Array([\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      -cx,\n      -cy,\n      0.0,\n      1.0,\n    ]);\n\n    CubismMatrix44.multiply(tr3, this._tr, this._tr);\n    CubismMatrix44.multiply(tr2, this._tr, this._tr);\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\n  }\n\n  /**\n   * デバイスに対応する論理座養生の範囲の設定\n   *\n   * @param left      左辺のX軸の位置\n   * @param right     右辺のX軸の位置\n   * @param bottom    下辺のY軸の位置\n   * @param top       上辺のY軸の位置\n   */\n  public setScreenRect(\n    left: number,\n    right: number,\n    bottom: number,\n    top: number\n  ): void {\n    this._screenLeft = left;\n    this._screenRight = right;\n    this._screenBottom = bottom;\n    this._screenTop = top;\n  }\n\n  /**\n   * デバイスに対応する論理座標上の移動可能範囲の設定\n   * @param left      左辺のX軸の位置\n   * @param right     右辺のX軸の位置\n   * @param bottom    下辺のY軸の位置\n   * @param top       上辺のY軸の位置\n   */\n  public setMaxScreenRect(\n    left: number,\n    right: number,\n    bottom: number,\n    top: number\n  ): void {\n    this._maxLeft = left;\n    this._maxRight = right;\n    this._maxTop = top;\n    this._maxBottom = bottom;\n  }\n\n  /**\n   * 最大拡大率の設定\n   * @param maxScale 最大拡大率\n   */\n  public setMaxScale(maxScale: number): void {\n    this._maxScale = maxScale;\n  }\n\n  /**\n   * 最小拡大率の設定\n   * @param minScale 最小拡大率\n   */\n  public setMinScale(minScale: number): void {\n    this._minScale = minScale;\n  }\n\n  /**\n   * 最大拡大率の取得\n   * @return 最大拡大率\n   */\n  public getMaxScale(): number {\n    return this._maxScale;\n  }\n\n  /**\n   * 最小拡大率の取得\n   * @return 最小拡大率\n   */\n  public getMinScale(): number {\n    return this._minScale;\n  }\n\n  /**\n   * 拡大率が最大になっているかを確認する\n   *\n   * @return true 拡大率は最大\n   * @return false 拡大率は最大ではない\n   */\n  public isMaxScale(): boolean {\n    return this.getScaleX() >= this._maxScale;\n  }\n\n  /**\n   * 拡大率が最小になっているかを確認する\n   *\n   * @return true 拡大率は最小\n   * @return false 拡大率は最小ではない\n   */\n  public isMinScale(): boolean {\n    return this.getScaleX() <= this._minScale;\n  }\n\n  /**\n   * デバイスに対応する論理座標の左辺のＸ軸位置を取得する\n   * @return デバイスに対応する論理座標の左辺のX軸位置\n   */\n  public getScreenLeft(): number {\n    return this._screenLeft;\n  }\n\n  /**\n   * デバイスに対応する論理座標の右辺のＸ軸位置を取得する\n   * @return デバイスに対応する論理座標の右辺のX軸位置\n   */\n  public getScreenRight(): number {\n    return this._screenRight;\n  }\n\n  /**\n   * デバイスに対応する論理座標の下辺のY軸位置を取得する\n   * @return デバイスに対応する論理座標の下辺のY軸位置\n   */\n  public getScreenBottom(): number {\n    return this._screenBottom;\n  }\n\n  /**\n   * デバイスに対応する論理座標の上辺のY軸位置を取得する\n   * @return デバイスに対応する論理座標の上辺のY軸位置\n   */\n  public getScreenTop(): number {\n    return this._screenTop;\n  }\n\n  /**\n   * 左辺のX軸位置の最大値の取得\n   * @return 左辺のX軸位置の最大値\n   */\n  public getMaxLeft(): number {\n    return this._maxLeft;\n  }\n\n  /**\n   * 右辺のX軸位置の最大値の取得\n   * @return 右辺のX軸位置の最大値\n   */\n  public getMaxRight(): number {\n    return this._maxRight;\n  }\n\n  /**\n   * 下辺のY軸位置の最大値の取得\n   * @return 下辺のY軸位置の最大値\n   */\n  public getMaxBottom(): number {\n    return this._maxBottom;\n  }\n\n  /**\n   * 上辺のY軸位置の最大値の取得\n   * @return 上辺のY軸位置の最大値\n   */\n  public getMaxTop(): number {\n    return this._maxTop;\n  }\n\n  private _screenLeft: number; // デバイスに対応する論理座標上の範囲（左辺X軸位置）\n  private _screenRight: number; // デバイスに対応する論理座標上の範囲（右辺X軸位置）\n  private _screenTop: number; // デバイスに対応する論理座標上の範囲（上辺Y軸位置）\n  private _screenBottom: number; // デバイスに対応する論理座標上の範囲（下辺Y軸位置）\n  private _maxLeft: number; // 論理座標上の移動可能範囲（左辺X軸位置）\n  private _maxRight: number; // 論理座標上の移動可能範囲（右辺X軸位置）\n  private _maxTop: number; // 論理座標上の移動可能範囲（上辺Y軸位置）\n  private _maxBottom: number; // 論理座標上の移動可能範囲（下辺Y軸位置）\n  private _maxScale: number; // 拡大率の最大値\n  private _minScale: number; // 拡大率の最小値\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismviewmatrix';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismViewMatrix = $.CubismViewMatrix;\n  export type CubismViewMatrix = $.CubismViewMatrix;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CSM_ASSERT, CubismLogError } from '../utils/cubismdebug';\nimport { CubismModel } from './cubismmodel';\n\n/**\n * Mocデータの管理\n *\n * Mocデータの管理を行うクラス。\n */\nexport class CubismMoc {\n  /**\n   * Mocデータの作成\n   */\n  public static create(\n    mocBytes: ArrayBuffer,\n    shouldCheckMocConsistency: boolean\n  ): CubismMoc {\n    let cubismMoc: CubismMoc = null;\n\n    if (shouldCheckMocConsistency) {\n      // .moc3の整合性を確認\n      const consistency = this.hasMocConsistency(mocBytes);\n\n      if (!consistency) {\n        // 整合性が確認できなければ処理しない\n        CubismLogError(`Inconsistent MOC3.`);\n        return cubismMoc;\n      }\n    }\n\n    const moc: Live2DCubismCore.Moc =\n      Live2DCubismCore.Moc.fromArrayBuffer(mocBytes);\n\n    if (moc) {\n      cubismMoc = new CubismMoc(moc);\n      cubismMoc._mocVersion = Live2DCubismCore.Version.csmGetMocVersion(\n        moc,\n        mocBytes\n      );\n    }\n\n    return cubismMoc;\n  }\n\n  /**\n   * Mocデータを削除\n   *\n   * Mocデータを削除する\n   */\n  public static delete(moc: CubismMoc): void {\n    moc._moc._release();\n    moc._moc = null;\n    moc = null;\n  }\n\n  /**\n   * モデルを作成する\n   *\n   * @return Mocデータから作成されたモデル\n   */\n  createModel(): CubismModel {\n    let cubismModel: CubismModel = null;\n\n    const model: Live2DCubismCore.Model = Live2DCubismCore.Model.fromMoc(\n      this._moc\n    );\n\n    if (model) {\n      cubismModel = new CubismModel(model);\n      cubismModel.initialize();\n\n      ++this._modelCount;\n    }\n\n    return cubismModel;\n  }\n\n  /**\n   * モデルを削除する\n   */\n  deleteModel(model: CubismModel): void {\n    if (model != null) {\n      model.release();\n      model = null;\n      --this._modelCount;\n    }\n  }\n\n  /**\n   * コンストラクタ\n   */\n  private constructor(moc: Live2DCubismCore.Moc) {\n    this._moc = moc;\n    this._modelCount = 0;\n    this._mocVersion = 0;\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    CSM_ASSERT(this._modelCount == 0);\n\n    this._moc._release();\n    this._moc = null;\n  }\n\n  /**\n   * 最新の.moc3 Versionを取得\n   */\n  public getLatestMocVersion(): number {\n    return Live2DCubismCore.Version.csmGetLatestMocVersion();\n  }\n\n  /**\n   * 読み込んだモデルの.moc3 Versionを取得\n   */\n  public getMocVersion(): number {\n    return this._mocVersion;\n  }\n\n  /**\n   * .moc3 の整合性を検証する\n   */\n  public static hasMocConsistency(mocBytes: ArrayBuffer): boolean {\n    const isConsistent =\n      Live2DCubismCore.Moc.prototype.hasMocConsistency(mocBytes);\n    return isConsistent === 1 ? true : false;\n  }\n\n  _moc: Live2DCubismCore.Moc; // Mocデータ\n  _modelCount: number; // Mocデータから作られたモデルの個数\n  _mocVersion: number; // 読み込んだモデルの.moc3 Version\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmoc';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMoc = $.CubismMoc;\n  export type CubismMoc = $.CubismMoc;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport {\n  CubismBlendMode,\n  CubismTextureColor,\n} from '../rendering/cubismrenderer';\nimport { csmMap } from '../type/csmmap';\nimport { csmVector } from '../type/csmvector';\nimport { CSM_ASSERT } from '../utils/cubismdebug';\n\n/**\n * SDK側から与えられたDrawableの乗算色・スクリーン色上書きフラグと\n * その色を保持する構造体\n */\nexport class DrawableColorData {\n  constructor(\n    isOverwritten = false,\n    color: CubismTextureColor = new CubismTextureColor()\n  ) {\n    this.isOverwritten = isOverwritten;\n    this.Color = color;\n  }\n\n  public isOverwritten: boolean;\n  public Color: CubismTextureColor;\n}\n/**\n * @brief テクスチャの色をRGBAで扱うための構造体\n */\nexport class PartColorData {\n  constructor(\n    isOverwritten = false,\n    color: CubismTextureColor = new CubismTextureColor()\n  ) {\n    this.isOverwritten = isOverwritten;\n    this.Color = color;\n  }\n\n  public isOverwritten: boolean;\n  public Color: CubismTextureColor;\n}\n\n/**\n * テクスチャのカリング設定を管理するための構造体\n */\nexport class DrawableCullingData {\n  /**\n   * コンストラクタ\n   *\n   * @param isOverwritten\n   * @param isCulling\n   */\n  public constructor(isOverwritten = false, isCulling = false) {\n    this.isOverwritten = isOverwritten;\n    this.isCulling = isCulling;\n  }\n\n  public isOverwritten: boolean;\n  public isCulling: boolean;\n}\n\n/**\n * モデル\n *\n * Mocデータから生成されるモデルのクラス。\n */\nexport class CubismModel {\n  /**\n   * モデルのパラメータの更新\n   */\n  public update(): void {\n    // Update model\n    this._model.update();\n\n    this._model.drawables.resetDynamicFlags();\n  }\n\n  /**\n   * PixelsPerUnitを取得する\n   * @returns PixelsPerUnit\n   */\n  public getPixelsPerUnit(): number {\n    if (this._model == null) {\n      return 0.0;\n    }\n\n    return this._model.canvasinfo.PixelsPerUnit;\n  }\n\n  /**\n   * キャンバスの幅を取得する\n   */\n  public getCanvasWidth(): number {\n    if (this._model == null) {\n      return 0.0;\n    }\n\n    return (\n      this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit\n    );\n  }\n\n  /**\n   * キャンバスの高さを取得する\n   */\n  public getCanvasHeight(): number {\n    if (this._model == null) {\n      return 0.0;\n    }\n\n    return (\n      this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit\n    );\n  }\n\n  /**\n   * パラメータを保存する\n   */\n  public saveParameters(): void {\n    const parameterCount: number = this._model.parameters.count;\n    const savedParameterCount: number = this._savedParameters.getSize();\n\n    for (let i = 0; i < parameterCount; ++i) {\n      if (i < savedParameterCount) {\n        this._savedParameters.set(i, this._parameterValues[i]);\n      } else {\n        this._savedParameters.pushBack(this._parameterValues[i]);\n      }\n    }\n  }\n\n  /**\n   * 乗算色を取得する\n   * @param index Drawablesのインデックス\n   * @returns 指定したdrawableの乗算色(RGBA)\n   */\n  public getMultiplyColor(index: number): CubismTextureColor {\n    // Drawableとモデル全体の乗算色上書きフラグがどちらもtrueな場合、モデル全体の上書きフラグが優先される\n    if (\n      this.getOverwriteFlagForModelMultiplyColors() ||\n      this.getOverwriteFlagForDrawableMultiplyColors(index)\n    ) {\n      return this._userMultiplyColors.at(index).Color;\n    }\n\n    const color = this.getDrawableMultiplyColor(index);\n    return color;\n  }\n\n  /**\n   * スクリーン色を取得する\n   * @param index Drawablesのインデックス\n   * @returns 指定したdrawableのスクリーン色(RGBA)\n   */\n  public getScreenColor(index: number): CubismTextureColor {\n    // Drawableとモデル全体のスクリーン色上書きフラグがどちらもtrueな場合、モデル全体の上書きフラグが優先される\n    if (\n      this.getOverwriteFlagForModelScreenColors() ||\n      this.getOverwriteFlagForDrawableScreenColors(index)\n    ) {\n      return this._userScreenColors.at(index).Color;\n    }\n\n    const color = this.getDrawableScreenColor(index);\n    return color;\n  }\n\n  /**\n   * 乗算色をセットする\n   * @param index Drawablesのインデックス\n   * @param color 設定する乗算色(CubismTextureColor)\n   */\n  public setMultiplyColorByTextureColor(\n    index: number,\n    color: CubismTextureColor\n  ) {\n    this.setMultiplyColorByRGBA(index, color.R, color.G, color.B, color.A);\n  }\n\n  /**\n   * 乗算色をセットする\n   * @param index Drawablesのインデックス\n   * @param r 設定する乗算色のR値\n   * @param g 設定する乗算色のG値\n   * @param b 設定する乗算色のB値\n   * @param a 設定する乗算色のA値\n   */\n  public setMultiplyColorByRGBA(\n    index: number,\n    r: number,\n    g: number,\n    b: number,\n    a = 1.0\n  ) {\n    this._userMultiplyColors.at(index).Color.R = r;\n    this._userMultiplyColors.at(index).Color.G = g;\n    this._userMultiplyColors.at(index).Color.B = b;\n    this._userMultiplyColors.at(index).Color.A = a;\n  }\n\n  /**\n   * スクリーン色をセットする\n   * @param index Drawablesのインデックス\n   * @param color 設定するスクリーン色(CubismTextureColor)\n   */\n  public setScreenColorByTextureColor(\n    index: number,\n    color: CubismTextureColor\n  ) {\n    this.setScreenColorByRGBA(index, color.R, color.G, color.B, color.A);\n  }\n\n  /**\n   * スクリーン色をセットする\n   * @param index Drawablesのインデックス\n   * @param r 設定するスクリーン色のR値\n   * @param g 設定するスクリーン色のG値\n   * @param b 設定するスクリーン色のB値\n   * @param a 設定するスクリーン色のA値\n   */\n  public setScreenColorByRGBA(\n    index: number,\n    r: number,\n    g: number,\n    b: number,\n    a = 1.0\n  ) {\n    this._userScreenColors.at(index).Color.R = r;\n    this._userScreenColors.at(index).Color.G = g;\n    this._userScreenColors.at(index).Color.B = b;\n    this._userScreenColors.at(index).Color.A = a;\n  }\n  /**\n   * partの乗算色を取得する\n   * @param partIndex partのインデックス\n   * @returns 指定したpartの乗算色\n   */\n  public getPartMultiplyColor(partIndex: number): CubismTextureColor {\n    return this._userPartMultiplyColors.at(partIndex).Color;\n  }\n\n  /**\n   * partのスクリーン色を取得する\n   * @param partIndex partのインデックス\n   * @returns 指定したpartのスクリーン色\n   */\n  public getPartScreenColor(partIndex: number): CubismTextureColor {\n    return this._userPartScreenColors.at(partIndex).Color;\n  }\n\n  /**\n   * partのOverwriteColor setter関数\n   * @param partIndex partのインデックス\n   * @param r 設定する色のR値\n   * @param g 設定する色のG値\n   * @param b 設定する色のB値\n   * @param a 設定する色のA値\n   * @param partColors 設定するpartのカラーデータ配列\n   * @param drawableColors partに関連するDrawableのカラーデータ配列\n   */\n  public setPartColor(\n    partIndex: number,\n    r: number,\n    g: number,\n    b: number,\n    a: number,\n    partColors: csmVector<PartColorData>,\n    drawableColors: csmVector<DrawableColorData>\n  ) {\n    partColors.at(partIndex).Color.R = r;\n    partColors.at(partIndex).Color.G = g;\n    partColors.at(partIndex).Color.B = b;\n    partColors.at(partIndex).Color.A = a;\n\n    if (partColors.at(partIndex).isOverwritten) {\n      for (\n        let i = 0;\n        i < this._partChildDrawables.at(partIndex).getSize();\n        ++i\n      ) {\n        const drawableIndex = this._partChildDrawables.at(partIndex).at(i);\n        drawableColors.at(drawableIndex).Color.R = r;\n        drawableColors.at(drawableIndex).Color.G = g;\n        drawableColors.at(drawableIndex).Color.B = b;\n        drawableColors.at(drawableIndex).Color.A = a;\n      }\n    }\n  }\n\n  /**\n   * 乗算色をセットする\n   * @param partIndex partのインデックス\n   * @param color 設定する乗算色(CubismTextureColor)\n   */\n  public setPartMultiplyColorByTextureColor(\n    partIndex: number,\n    color: CubismTextureColor\n  ) {\n    this.setPartMultiplyColorByRGBA(\n      partIndex,\n      color.R,\n      color.G,\n      color.B,\n      color.A\n    );\n  }\n\n  /**\n   * 乗算色をセットする\n   * @param partIndex partのインデックス\n   * @param r 設定する乗算色のR値\n   * @param g 設定する乗算色のG値\n   * @param b 設定する乗算色のB値\n   * @param a 設定する乗算色のA値\n   */\n  public setPartMultiplyColorByRGBA(\n    partIndex: number,\n    r: number,\n    g: number,\n    b: number,\n    a: number\n  ) {\n    this.setPartColor(\n      partIndex,\n      r,\n      g,\n      b,\n      a,\n      this._userPartMultiplyColors,\n      this._userMultiplyColors\n    );\n  }\n\n  /**\n   * スクリーン色をセットする\n   * @param partIndex partのインデックス\n   * @param color 設定するスクリーン色(CubismTextureColor)\n   */\n  public setPartScreenColorByTextureColor(\n    partIndex: number,\n    color: CubismTextureColor\n  ) {\n    this.setPartScreenColorByRGBA(\n      partIndex,\n      color.R,\n      color.G,\n      color.B,\n      color.A\n    );\n  }\n\n  /**\n   * スクリーン色をセットする\n   * @param partIndex partのインデックス\n   * @param r 設定するスクリーン色のR値\n   * @param g 設定するスクリーン色のG値\n   * @param b 設定するスクリーン色のB値\n   * @param a 設定するスクリーン色のA値\n   */\n  public setPartScreenColorByRGBA(\n    partIndex: number,\n    r: number,\n    g: number,\n    b: number,\n    a: number\n  ) {\n    this.setPartColor(\n      partIndex,\n      r,\n      g,\n      b,\n      a,\n      this._userPartScreenColors,\n      this._userScreenColors\n    );\n  }\n\n  /**\n   * SDKから指定したモデルの乗算色を上書きするか\n   * @returns true -> SDKからの情報を優先する\n   *          false -> モデルに設定されている色情報を使用\n   */\n  public getOverwriteFlagForModelMultiplyColors(): boolean {\n    return this._isOverwrittenModelMultiplyColors;\n  }\n\n  /**\n   * SDKから指定したモデルのスクリーン色を上書きするか\n   * @returns true -> SDKからの情報を優先する\n   *          false -> モデルに設定されている色情報を使用\n   */\n  public getOverwriteFlagForModelScreenColors(): boolean {\n    return this._isOverwrittenModelScreenColors;\n  }\n\n  /**\n   * SDKから指定したモデルの乗算色を上書きするかセットする\n   * @param value true -> SDKからの情報を優先する\n   *              false -> モデルに設定されている色情報を使用\n   */\n  public setOverwriteFlagForModelMultiplyColors(value: boolean) {\n    this._isOverwrittenModelMultiplyColors = value;\n  }\n\n  /**\n   * SDKから指定したモデルのスクリーン色を上書きするかセットする\n   * @param value true -> SDKからの情報を優先する\n   *              false -> モデルに設定されている色情報を使用\n   */\n  public setOverwriteFlagForModelScreenColors(value: boolean) {\n    this._isOverwrittenModelScreenColors = value;\n  }\n\n  /**\n   * SDKから指定したDrawableIndexの乗算色を上書きするか\n   * @returns true -> SDKからの情報を優先する\n   *          false -> モデルに設定されている色情報を使用\n   */\n  public getOverwriteFlagForDrawableMultiplyColors(\n    drawableindex: number\n  ): boolean {\n    return this._userMultiplyColors.at(drawableindex).isOverwritten;\n  }\n\n  /**\n   * SDKから指定したDrawableIndexのスクリーン色を上書きするか\n   * @returns true -> SDKからの情報を優先する\n   *          false -> モデルに設定されている色情報を使用\n   */\n  public getOverwriteFlagForDrawableScreenColors(\n    drawableindex: number\n  ): boolean {\n    return this._userScreenColors.at(drawableindex).isOverwritten;\n  }\n\n  /**\n   * SDKから指定したDrawableIndexの乗算色を上書きするかセットする\n   * @param value true -> SDKからの情報を優先する\n   *              false -> モデルに設定されている色情報を使用\n   */\n  public setOverwriteFlagForDrawableMultiplyColors(\n    drawableindex: number,\n    value: boolean\n  ) {\n    this._userMultiplyColors.at(drawableindex).isOverwritten = value;\n  }\n\n  /**\n   * SDKから指定したDrawableIndexのスクリーン色を上書きするかセットする\n   * @param value true -> SDKからの情報を優先する\n   *              false -> モデルに設定されている色情報を使用\n   */\n  public setOverwriteFlagForDrawableScreenColors(\n    drawableindex: number,\n    value: boolean\n  ) {\n    this._userScreenColors.at(drawableindex).isOverwritten = value;\n  }\n\n  /**\n   * SDKからpartの乗算色を上書きするか\n   * @param partIndex partのインデックス\n   * @returns true    ->  SDKからの情報を優先する\n   *          false   ->  モデルに設定されている色情報を使用\n   */\n  public getOverwriteColorForPartMultiplyColors(partIndex: number) {\n    return this._userPartMultiplyColors.at(partIndex).isOverwritten;\n  }\n\n  /**\n   * SDKからpartのスクリーン色を上書きするか\n   * @param partIndex partのインデックス\n   * @returns true    ->  SDKからの情報を優先する\n   *          false   ->  モデルに設定されている色情報を使用\n   */\n  public getOverwriteColorForPartScreenColors(partIndex: number) {\n    return this._userPartScreenColors.at(partIndex).isOverwritten;\n  }\n\n  /**\n   * partのOverwriteFlag setter関数\n   * @param partIndex partのインデックス\n   * @param value true -> SDKからの情報を優先する\n   *              false -> モデルに設定されている色情報を使用\n   * @param partColors 設定するpartのカラーデータ配列\n   * @param drawableColors partに関連するDrawableのカラーデータ配列\n   */\n  public setOverwriteColorForPartColors(\n    partIndex: number,\n    value: boolean,\n    partColors: csmVector<PartColorData>,\n    drawableColors: csmVector<DrawableColorData>\n  ) {\n    partColors.at(partIndex).isOverwritten = value;\n\n    for (let i = 0; i < this._partChildDrawables.at(partIndex).getSize(); ++i) {\n      const drawableIndex = this._partChildDrawables.at(partIndex).at(i);\n      drawableColors.at(drawableIndex).isOverwritten = value;\n\n      if (value) {\n        drawableColors.at(drawableIndex).Color.R =\n          partColors.at(partIndex).Color.R;\n        drawableColors.at(drawableIndex).Color.G =\n          partColors.at(partIndex).Color.G;\n        drawableColors.at(drawableIndex).Color.B =\n          partColors.at(partIndex).Color.B;\n        drawableColors.at(drawableIndex).Color.A =\n          partColors.at(partIndex).Color.A;\n      }\n    }\n  }\n\n  /**\n   * SDKからpartのスクリーン色を上書きするかをセットする\n   * @param partIndex partのインデックス\n   * @param value true -> SDKからの情報を優先する\n   *              false -> モデルに設定されている色情報を使用\n   */\n  public setOverwriteColorForPartMultiplyColors(\n    partIndex: number,\n    value: boolean\n  ) {\n    this._userPartMultiplyColors.at(partIndex).isOverwritten = value;\n    this.setOverwriteColorForPartColors(\n      partIndex,\n      value,\n      this._userPartMultiplyColors,\n      this._userMultiplyColors\n    );\n  }\n\n  /**\n   * SDKからpartのスクリーン色を上書きするかをセットする\n   * @param partIndex partのインデックス\n   * @param value true -> SDKからの情報を優先する\n   *              false -> モデルに設定されている色情報を使用\n   */\n  public setOverwriteColorForPartScreenColors(\n    partIndex: number,\n    value: boolean\n  ) {\n    this._userPartScreenColors.at(partIndex).isOverwritten = value;\n    this.setOverwriteColorForPartColors(\n      partIndex,\n      value,\n      this._userPartScreenColors,\n      this._userScreenColors\n    );\n  }\n\n  /**\n   * Drawableのカリング情報を取得する。\n   *\n   * @param   drawableIndex   Drawableのインデックス\n   * @return  Drawableのカリング情報\n   */\n  public getDrawableCulling(drawableIndex: number): boolean {\n    if (\n      this.getOverwriteFlagForModelCullings() ||\n      this.getOverwriteFlagForDrawableCullings(drawableIndex)\n    ) {\n      return this._userCullings.at(drawableIndex).isCulling;\n    }\n\n    const constantFlags = this._model.drawables.constantFlags;\n    return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(\n      constantFlags[drawableIndex]\n    );\n  }\n\n  /**\n   * Drawableのカリング情報を設定する。\n   *\n   * @param drawableIndex Drawableのインデックス\n   * @param isCulling カリング情報\n   */\n  public setDrawableCulling(drawableIndex: number, isCulling: boolean): void {\n    this._userCullings.at(drawableIndex).isCulling = isCulling;\n  }\n\n  /**\n   * SDKからモデル全体のカリング設定を上書きするか。\n   *\n   * @retval  true    ->  SDK上のカリング設定を使用\n   * @retval  false   ->  モデルのカリング設定を使用\n   */\n  public getOverwriteFlagForModelCullings(): boolean {\n    return this._isOverwrittenCullings;\n  }\n\n  /**\n   * SDKからモデル全体のカリング設定を上書きするかを設定する。\n   *\n   * @param isOverwrittenCullings SDK上のカリング設定を使うならtrue、モデルのカリング設定を使うならfalse\n   */\n  public setOverwriteFlagForModelCullings(\n    isOverwrittenCullings: boolean\n  ): void {\n    this._isOverwrittenCullings = isOverwrittenCullings;\n  }\n\n  /**\n   *\n   * @param drawableIndex Drawableのインデックス\n   * @retval  true    ->  SDK上のカリング設定を使用\n   * @retval  false   ->  モデルのカリング設定を使用\n   */\n  public getOverwriteFlagForDrawableCullings(drawableIndex: number): boolean {\n    return this._userCullings.at(drawableIndex).isOverwritten;\n  }\n\n  /**\n   *\n   * @param drawableIndex Drawableのインデックス\n   * @param isOverwrittenCullings SDK上のカリング設定を使うならtrue、モデルのカリング設定を使うならfalse\n   */\n  public setOverwriteFlagForDrawableCullings(\n    drawableIndex: number,\n    isOverwrittenCullings: boolean\n  ): void {\n    this._userCullings.at(drawableIndex).isOverwritten = isOverwrittenCullings;\n  }\n\n  /**\n   * モデルの不透明度を取得する\n   *\n   * @returns 不透明度の値\n   */\n  public getModelOapcity(): number {\n    return this._modelOpacity;\n  }\n\n  /**\n   * モデルの不透明度を設定する\n   *\n   * @param value 不透明度の値\n   */\n  public setModelOapcity(value: number) {\n    this._modelOpacity = value;\n  }\n\n  /**\n   * モデルを取得\n   */\n  public getModel(): Live2DCubismCore.Model {\n    return this._model;\n  }\n\n  /**\n   * パーツのインデックスを取得\n   * @param partId パーツのID\n   * @return パーツのインデックス\n   */\n  public getPartIndex(partId: CubismIdHandle): number {\n    let partIndex: number;\n    const partCount: number = this._model.parts.count;\n\n    for (partIndex = 0; partIndex < partCount; ++partIndex) {\n      if (partId == this._partIds.at(partIndex)) {\n        return partIndex;\n      }\n    }\n\n    // モデルに存在していない場合、非存在パーツIDリスト内にあるかを検索し、そのインデックスを返す\n    if (this._notExistPartId.isExist(partId)) {\n      return this._notExistPartId.getValue(partId);\n    }\n\n    // 非存在パーツIDリストにない場合、新しく要素を追加する\n    partIndex = partCount + this._notExistPartId.getSize();\n    this._notExistPartId.setValue(partId, partIndex);\n    this._notExistPartOpacities.appendKey(partIndex);\n\n    return partIndex;\n  }\n\n  /**\n   * パーツのIDを取得する。\n   *\n   * @param partIndex 取得するパーツのインデックス\n   * @return パーツのID\n   */\n  public getPartId(partIndex: number): CubismIdHandle {\n    const partId = this._model.parts.ids[partIndex];\n    return CubismFramework.getIdManager().getId(partId);\n  }\n\n  /**\n   * パーツの個数の取得\n   * @return パーツの個数\n   */\n  public getPartCount(): number {\n    const partCount: number = this._model.parts.count;\n    return partCount;\n  }\n\n  /**\n   * パーツの不透明度の設定(Index)\n   * @param partIndex パーツのインデックス\n   * @param opacity 不透明度\n   */\n  public setPartOpacityByIndex(partIndex: number, opacity: number): void {\n    if (this._notExistPartOpacities.isExist(partIndex)) {\n      this._notExistPartOpacities.setValue(partIndex, opacity);\n      return;\n    }\n\n    // インデックスの範囲内検知\n    CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n\n    this._partOpacities[partIndex] = opacity;\n  }\n\n  /**\n   * パーツの不透明度の設定(Id)\n   * @param partId パーツのID\n   * @param opacity パーツの不透明度\n   */\n  public setPartOpacityById(partId: CubismIdHandle, opacity: number): void {\n    // 高速化のためにPartIndexを取得できる機構になっているが、外部からの設定の時は呼び出し頻度が低いため不要\n    const index: number = this.getPartIndex(partId);\n\n    if (index < 0) {\n      return; // パーツがないのでスキップ\n    }\n\n    this.setPartOpacityByIndex(index, opacity);\n  }\n\n  /**\n   * パーツの不透明度の取得(index)\n   * @param partIndex パーツのインデックス\n   * @return パーツの不透明度\n   */\n  public getPartOpacityByIndex(partIndex: number): number {\n    if (this._notExistPartOpacities.isExist(partIndex)) {\n      // モデルに存在しないパーツIDの場合、非存在パーツリストから不透明度を返す。\n      return this._notExistPartOpacities.getValue(partIndex);\n    }\n\n    // インデックスの範囲内検知\n    CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\n\n    return this._partOpacities[partIndex];\n  }\n\n  /**\n   * パーツの不透明度の取得(id)\n   * @param partId パーツのＩｄ\n   * @return パーツの不透明度\n   */\n  public getPartOpacityById(partId: CubismIdHandle): number {\n    // 高速化のためにPartIndexを取得できる機構になっているが、外部からの設定の時は呼び出し頻度が低いため不要\n    const index: number = this.getPartIndex(partId);\n\n    if (index < 0) {\n      return 0; // パーツが無いのでスキップ\n    }\n\n    return this.getPartOpacityByIndex(index);\n  }\n\n  /**\n   * パラメータのインデックスの取得\n   * @param パラメータID\n   * @return パラメータのインデックス\n   */\n  public getParameterIndex(parameterId: CubismIdHandle): number {\n    let parameterIndex: number;\n    const idCount: number = this._model.parameters.count;\n\n    for (parameterIndex = 0; parameterIndex < idCount; ++parameterIndex) {\n      if (parameterId != this._parameterIds.at(parameterIndex)) {\n        continue;\n      }\n\n      return parameterIndex;\n    }\n\n    // モデルに存在していない場合、非存在パラメータIDリスト内を検索し、そのインデックスを返す\n    if (this._notExistParameterId.isExist(parameterId)) {\n      return this._notExistParameterId.getValue(parameterId);\n    }\n\n    // 非存在パラメータIDリストにない場合新しく要素を追加する\n    parameterIndex =\n      this._model.parameters.count + this._notExistParameterId.getSize();\n\n    this._notExistParameterId.setValue(parameterId, parameterIndex);\n    this._notExistParameterValues.appendKey(parameterIndex);\n\n    return parameterIndex;\n  }\n\n  /**\n   * パラメータの個数の取得\n   * @return パラメータの個数\n   */\n  public getParameterCount(): number {\n    return this._model.parameters.count;\n  }\n\n  /**\n   * パラメータの種類の取得\n   * @param parameterIndex パラメータのインデックス\n   * @return csmParameterType_Normal -> 通常のパラメータ\n   *          csmParameterType_BlendShape -> ブレンドシェイプパラメータ\n   */\n  public getParameterType(\n    parameterIndex: number\n  ): Live2DCubismCore.csmParameterType {\n    return this._model.parameters.types[parameterIndex];\n  }\n\n  /**\n   * パラメータの最大値の取得\n   * @param parameterIndex パラメータのインデックス\n   * @return パラメータの最大値\n   */\n  public getParameterMaximumValue(parameterIndex: number): number {\n    return this._model.parameters.maximumValues[parameterIndex];\n  }\n\n  /**\n   * パラメータの最小値の取得\n   * @param parameterIndex パラメータのインデックス\n   * @return パラメータの最小値\n   */\n  public getParameterMinimumValue(parameterIndex: number): number {\n    return this._model.parameters.minimumValues[parameterIndex];\n  }\n\n  /**\n   * パラメータのデフォルト値の取得\n   * @param parameterIndex パラメータのインデックス\n   * @return パラメータのデフォルト値\n   */\n  public getParameterDefaultValue(parameterIndex: number): number {\n    return this._model.parameters.defaultValues[parameterIndex];\n  }\n\n  /**\n   * パラメータの値の取得\n   * @param parameterIndex    パラメータのインデックス\n   * @return パラメータの値\n   */\n  public getParameterValueByIndex(parameterIndex: number): number {\n    if (this._notExistParameterValues.isExist(parameterIndex)) {\n      return this._notExistParameterValues.getValue(parameterIndex);\n    }\n\n    // インデックスの範囲内検知\n    CSM_ASSERT(\n      0 <= parameterIndex && parameterIndex < this.getParameterCount()\n    );\n\n    return this._parameterValues[parameterIndex];\n  }\n\n  /**\n   * パラメータの値の取得\n   * @param parameterId    パラメータのID\n   * @return パラメータの値\n   */\n  public getParameterValueById(parameterId: CubismIdHandle): number {\n    // 高速化のためにparameterIndexを取得できる機構になっているが、外部からの設定の時は呼び出し頻度が低いため不要\n    const parameterIndex: number = this.getParameterIndex(parameterId);\n    return this.getParameterValueByIndex(parameterIndex);\n  }\n\n  /**\n   * パラメータの値の設定\n   * @param parameterIndex パラメータのインデックス\n   * @param value パラメータの値\n   * @param weight 重み\n   */\n  public setParameterValueByIndex(\n    parameterIndex: number,\n    value: number,\n    weight = 1.0\n  ): void {\n    if (this._notExistParameterValues.isExist(parameterIndex)) {\n      this._notExistParameterValues.setValue(\n        parameterIndex,\n        weight == 1\n          ? value\n          : this._notExistParameterValues.getValue(parameterIndex) *\n              (1 - weight) +\n              value * weight\n      );\n\n      return;\n    }\n\n    // インデックスの範囲内検知\n    CSM_ASSERT(\n      0 <= parameterIndex && parameterIndex < this.getParameterCount()\n    );\n\n    if (this._model.parameters.maximumValues[parameterIndex] < value) {\n      value = this._model.parameters.maximumValues[parameterIndex];\n    }\n    if (this._model.parameters.minimumValues[parameterIndex] > value) {\n      value = this._model.parameters.minimumValues[parameterIndex];\n    }\n\n    this._parameterValues[parameterIndex] =\n      weight == 1\n        ? value\n        : (this._parameterValues[parameterIndex] =\n            this._parameterValues[parameterIndex] * (1 - weight) +\n            value * weight);\n  }\n\n  /**\n   * パラメータの値の設定\n   * @param parameterId パラメータのID\n   * @param value パラメータの値\n   * @param weight 重み\n   */\n  public setParameterValueById(\n    parameterId: CubismIdHandle,\n    value: number,\n    weight = 1.0\n  ): void {\n    const index: number = this.getParameterIndex(parameterId);\n    this.setParameterValueByIndex(index, value, weight);\n  }\n\n  /**\n   * パラメータの値の加算(index)\n   * @param parameterIndex パラメータインデックス\n   * @param value 加算する値\n   * @param weight 重み\n   */\n  public addParameterValueByIndex(\n    parameterIndex: number,\n    value: number,\n    weight = 1.0\n  ): void {\n    this.setParameterValueByIndex(\n      parameterIndex,\n      this.getParameterValueByIndex(parameterIndex) + value * weight\n    );\n  }\n\n  /**\n   * パラメータの値の加算(id)\n   * @param parameterId パラメータＩＤ\n   * @param value 加算する値\n   * @param weight 重み\n   */\n  public addParameterValueById(\n    parameterId: any,\n    value: number,\n    weight = 1.0\n  ): void {\n    const index: number = this.getParameterIndex(parameterId);\n    this.addParameterValueByIndex(index, value, weight);\n  }\n\n  /**\n   * パラメータの値の乗算\n   * @param parameterId パラメータのID\n   * @param value 乗算する値\n   * @param weight 重み\n   */\n  public multiplyParameterValueById(\n    parameterId: CubismIdHandle,\n    value: number,\n    weight = 1.0\n  ): void {\n    const index: number = this.getParameterIndex(parameterId);\n    this.multiplyParameterValueByIndex(index, value, weight);\n  }\n\n  /**\n   * パラメータの値の乗算\n   * @param parameterIndex パラメータのインデックス\n   * @param value 乗算する値\n   * @param weight 重み\n   */\n  public multiplyParameterValueByIndex(\n    parameterIndex: number,\n    value: number,\n    weight = 1.0\n  ): void {\n    this.setParameterValueByIndex(\n      parameterIndex,\n      this.getParameterValueByIndex(parameterIndex) *\n        (1.0 + (value - 1.0) * weight)\n    );\n  }\n\n  /**\n   * Drawableのインデックスの取得\n   * @param drawableId DrawableのID\n   * @return Drawableのインデックス\n   */\n  public getDrawableIndex(drawableId: CubismIdHandle): number {\n    const drawableCount = this._model.drawables.count;\n\n    for (\n      let drawableIndex = 0;\n      drawableIndex < drawableCount;\n      ++drawableIndex\n    ) {\n      if (this._drawableIds.at(drawableIndex) == drawableId) {\n        return drawableIndex;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Drawableの個数の取得\n   * @return drawableの個数\n   */\n  public getDrawableCount(): number {\n    const drawableCount = this._model.drawables.count;\n    return drawableCount;\n  }\n\n  /**\n   * DrawableのIDを取得する\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableのID\n   */\n  public getDrawableId(drawableIndex: number): CubismIdHandle {\n    const parameterIds: string[] = this._model.drawables.ids;\n    return CubismFramework.getIdManager().getId(parameterIds[drawableIndex]);\n  }\n\n  /**\n   * Drawableの描画順リストの取得\n   * @return Drawableの描画順リスト\n   */\n  public getDrawableRenderOrders(): Int32Array {\n    const renderOrders: Int32Array = this._model.drawables.renderOrders;\n    return renderOrders;\n  }\n\n  /**\n   * @deprecated\n   * 関数名が誤っていたため、代替となる getDrawableTextureIndex を追加し、この関数は非推奨となりました。\n   *\n   * Drawableのテクスチャインデックスリストの取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableのテクスチャインデックスリスト\n   */\n  public getDrawableTextureIndices(drawableIndex: number): number {\n    return this.getDrawableTextureIndex(drawableIndex);\n  }\n\n  /**\n   * Drawableのテクスチャインデックスの取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableのテクスチャインデックス\n   */\n  public getDrawableTextureIndex(drawableIndex: number): number {\n    const textureIndices: Int32Array = this._model.drawables.textureIndices;\n    return textureIndices[drawableIndex];\n  }\n\n  /**\n   * DrawableのVertexPositionsの変化情報の取得\n   *\n   * 直近のCubismModel.update関数でDrawableの頂点情報が変化したかを取得する。\n   *\n   * @param   drawableIndex   Drawableのインデックス\n   * @retval  true    Drawableの頂点情報が直近のCubismModel.update関数で変化した\n   * @retval  false   Drawableの頂点情報が直近のCubismModel.update関数で変化していない\n   */\n  public getDrawableDynamicFlagVertexPositionsDidChange(\n    drawableIndex: number\n  ): boolean {\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(\n      dynamicFlags[drawableIndex]\n    );\n  }\n\n  /**\n   * Drawableの頂点インデックスの個数の取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの頂点インデックスの個数\n   */\n  public getDrawableVertexIndexCount(drawableIndex: number): number {\n    const indexCounts: Int32Array = this._model.drawables.indexCounts;\n    return indexCounts[drawableIndex];\n  }\n\n  /**\n   * Drawableの頂点の個数の取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの頂点の個数\n   */\n  public getDrawableVertexCount(drawableIndex: number): number {\n    const vertexCounts = this._model.drawables.vertexCounts;\n    return vertexCounts[drawableIndex];\n  }\n\n  /**\n   * Drawableの頂点リストの取得\n   * @param drawableIndex drawableのインデックス\n   * @return drawableの頂点リスト\n   */\n  public getDrawableVertices(drawableIndex: number): Float32Array {\n    return this.getDrawableVertexPositions(drawableIndex);\n  }\n\n  /**\n   * Drawableの頂点インデックスリストの取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの頂点インデックスリスト\n   */\n  public getDrawableVertexIndices(drawableIndex: number): Uint16Array {\n    const indicesArray: Uint16Array[] = this._model.drawables.indices;\n    return indicesArray[drawableIndex];\n  }\n\n  /**\n   * Drawableの頂点リストの取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの頂点リスト\n   */\n  public getDrawableVertexPositions(drawableIndex: number): Float32Array {\n    const verticesArray: Float32Array[] = this._model.drawables.vertexPositions;\n    return verticesArray[drawableIndex];\n  }\n\n  /**\n   * Drawableの頂点のUVリストの取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの頂点UVリスト\n   */\n  public getDrawableVertexUvs(drawableIndex: number): Float32Array {\n    const uvsArray: Float32Array[] = this._model.drawables.vertexUvs;\n    return uvsArray[drawableIndex];\n  }\n\n  /**\n   * Drawableの不透明度の取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの不透明度\n   */\n  public getDrawableOpacity(drawableIndex: number): number {\n    const opacities: Float32Array = this._model.drawables.opacities;\n    return opacities[drawableIndex];\n  }\n\n  /**\n   * Drawableの乗算色の取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの乗算色(RGBA)\n   * スクリーン色はRGBAで取得されるが、Aは必ず0\n   */\n  public getDrawableMultiplyColor(drawableIndex: number): CubismTextureColor {\n    const multiplyColors: Float32Array = this._model.drawables.multiplyColors;\n    const index = drawableIndex * 4;\n    const multiplyColor: CubismTextureColor = new CubismTextureColor();\n    multiplyColor.R = multiplyColors[index];\n    multiplyColor.G = multiplyColors[index + 1];\n    multiplyColor.B = multiplyColors[index + 2];\n    multiplyColor.A = multiplyColors[index + 3];\n    return multiplyColor;\n  }\n\n  /**\n   * Drawableのスクリーン色の取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableのスクリーン色(RGBA)\n   * スクリーン色はRGBAで取得されるが、Aは必ず0\n   */\n  public getDrawableScreenColor(drawableIndex: number): CubismTextureColor {\n    const screenColors: Float32Array = this._model.drawables.screenColors;\n    const index = drawableIndex * 4;\n    const screenColor: CubismTextureColor = new CubismTextureColor();\n    screenColor.R = screenColors[index];\n    screenColor.G = screenColors[index + 1];\n    screenColor.B = screenColors[index + 2];\n    screenColor.A = screenColors[index + 3];\n    return screenColor;\n  }\n\n  /**\n   * Drawableの親パーツのインデックスの取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableの親パーツのインデックス\n   */\n  public getDrawableParentPartIndex(drawableIndex: number): number {\n    return this._model.drawables.parentPartIndices[drawableIndex];\n  }\n\n  /**\n   * Drawableのブレンドモードを取得\n   * @param drawableIndex Drawableのインデックス\n   * @return drawableのブレンドモード\n   */\n  public getDrawableBlendMode(drawableIndex: number): CubismBlendMode {\n    const constantFlags = this._model.drawables.constantFlags;\n\n    return Live2DCubismCore.Utils.hasBlendAdditiveBit(\n      constantFlags[drawableIndex]\n    )\n      ? CubismBlendMode.CubismBlendMode_Additive\n      : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(\n          constantFlags[drawableIndex]\n        )\n      ? CubismBlendMode.CubismBlendMode_Multiplicative\n      : CubismBlendMode.CubismBlendMode_Normal;\n  }\n\n  /**\n   * Drawableのマスクの反転使用の取得\n   *\n   * Drawableのマスク使用時の反転設定を取得する。\n   * マスクを使用しない場合は無視される。\n   *\n   * @param drawableIndex Drawableのインデックス\n   * @return Drawableの反転設定\n   */\n  public getDrawableInvertedMaskBit(drawableIndex: number): boolean {\n    const constantFlags: Uint8Array = this._model.drawables.constantFlags;\n\n    return Live2DCubismCore.Utils.hasIsInvertedMaskBit(\n      constantFlags[drawableIndex]\n    );\n  }\n\n  /**\n   * Drawableのクリッピングマスクリストの取得\n   * @return Drawableのクリッピングマスクリスト\n   */\n  public getDrawableMasks(): Int32Array[] {\n    const masks: Int32Array[] = this._model.drawables.masks;\n    return masks;\n  }\n\n  /**\n   * Drawableのクリッピングマスクの個数リストの取得\n   * @return Drawableのクリッピングマスクの個数リスト\n   */\n  public getDrawableMaskCounts(): Int32Array {\n    const maskCounts: Int32Array = this._model.drawables.maskCounts;\n    return maskCounts;\n  }\n\n  /**\n   * クリッピングマスクの使用状態\n   *\n   * @return true クリッピングマスクを使用している\n   * @return false クリッピングマスクを使用していない\n   */\n  public isUsingMasking(): boolean {\n    for (let d = 0; d < this._model.drawables.count; ++d) {\n      if (this._model.drawables.maskCounts[d] <= 0) {\n        continue;\n      }\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Drawableの表示情報を取得する\n   *\n   * @param drawableIndex Drawableのインデックス\n   * @return true Drawableが表示\n   * @return false Drawableが非表示\n   */\n  public getDrawableDynamicFlagIsVisible(drawableIndex: number): boolean {\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasIsVisibleBit(dynamicFlags[drawableIndex]);\n  }\n\n  /**\n   * DrawableのDrawOrderの変化情報の取得\n   *\n   * 直近のCubismModel.update関数でdrawableのdrawOrderが変化したかを取得する。\n   * drawOrderはartMesh上で指定する0から1000の情報\n   * @param drawableIndex drawableのインデックス\n   * @return true drawableの不透明度が直近のCubismModel.update関数で変化した\n   * @return false drawableの不透明度が直近のCubismModel.update関数で変化している\n   */\n  public getDrawableDynamicFlagVisibilityDidChange(\n    drawableIndex: number\n  ): boolean {\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(\n      dynamicFlags[drawableIndex]\n    );\n  }\n\n  /**\n   * Drawableの不透明度の変化情報の取得\n   *\n   * 直近のCubismModel.update関数でdrawableの不透明度が変化したかを取得する。\n   *\n   * @param drawableIndex drawableのインデックス\n   * @return true Drawableの不透明度が直近のCubismModel.update関数で変化した\n   * @return false Drawableの不透明度が直近のCubismModel.update関数で変化してない\n   */\n  public getDrawableDynamicFlagOpacityDidChange(\n    drawableIndex: number\n  ): boolean {\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasOpacityDidChangeBit(\n      dynamicFlags[drawableIndex]\n    );\n  }\n\n  /**\n   * Drawableの描画順序の変化情報の取得\n   *\n   * 直近のCubismModel.update関数でDrawableの描画の順序が変化したかを取得する。\n   *\n   * @param drawableIndex Drawableのインデックス\n   * @return true Drawableの描画の順序が直近のCubismModel.update関数で変化した\n   * @return false Drawableの描画の順序が直近のCubismModel.update関数で変化してない\n   */\n  public getDrawableDynamicFlagRenderOrderDidChange(\n    drawableIndex: number\n  ): boolean {\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(\n      dynamicFlags[drawableIndex]\n    );\n  }\n\n  /**\n   * Drawableの乗算色・スクリーン色の変化情報の取得\n   *\n   * 直近のCubismModel.update関数でDrawableの乗算色・スクリーン色が変化したかを取得する。\n   *\n   * @param drawableIndex Drawableのインデックス\n   * @return true Drawableの乗算色・スクリーン色が直近のCubismModel.update関数で変化した\n   * @return false Drawableの乗算色・スクリーン色が直近のCubismModel.update関数で変化してない\n   */\n  public getDrawableDynamicFlagBlendColorDidChange(\n    drawableIndex: number\n  ): boolean {\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\n    return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(\n      dynamicFlags[drawableIndex]\n    );\n  }\n\n  /**\n   * 保存されたパラメータの読み込み\n   */\n  public loadParameters(): void {\n    let parameterCount: number = this._model.parameters.count;\n    const savedParameterCount: number = this._savedParameters.getSize();\n\n    if (parameterCount > savedParameterCount) {\n      parameterCount = savedParameterCount;\n    }\n\n    for (let i = 0; i < parameterCount; ++i) {\n      this._parameterValues[i] = this._savedParameters.at(i);\n    }\n  }\n\n  /**\n   * 初期化する\n   */\n  public initialize(): void {\n    CSM_ASSERT(this._model);\n\n    this._parameterValues = this._model.parameters.values;\n    this._partOpacities = this._model.parts.opacities;\n    this._parameterMaximumValues = this._model.parameters.maximumValues;\n    this._parameterMinimumValues = this._model.parameters.minimumValues;\n\n    {\n      const parameterIds: string[] = this._model.parameters.ids;\n      const parameterCount: number = this._model.parameters.count;\n\n      this._parameterIds.prepareCapacity(parameterCount);\n      for (let i = 0; i < parameterCount; ++i) {\n        this._parameterIds.pushBack(\n          CubismFramework.getIdManager().getId(parameterIds[i])\n        );\n      }\n    }\n\n    const partCount: number = this._model.parts.count;\n    {\n      const partIds: string[] = this._model.parts.ids;\n\n      this._partIds.prepareCapacity(partCount);\n      for (let i = 0; i < partCount; ++i) {\n        this._partIds.pushBack(\n          CubismFramework.getIdManager().getId(partIds[i])\n        );\n      }\n\n      this._userPartMultiplyColors.prepareCapacity(partCount);\n      this._userPartScreenColors.prepareCapacity(partCount);\n\n      this._partChildDrawables.prepareCapacity(partCount);\n    }\n\n    {\n      const drawableIds: string[] = this._model.drawables.ids;\n      const drawableCount: number = this._model.drawables.count;\n\n      this._userMultiplyColors.prepareCapacity(drawableCount);\n      this._userScreenColors.prepareCapacity(drawableCount);\n\n      // カリング設定\n      this._userCullings.prepareCapacity(drawableCount);\n      const userCulling: DrawableCullingData = new DrawableCullingData(\n        false,\n        false\n      );\n\n      // Part\n      {\n        for (let i = 0; i < partCount; ++i) {\n          const multiplyColor: CubismTextureColor = new CubismTextureColor(\n            1.0,\n            1.0,\n            1.0,\n            1.0\n          );\n          const screenColor: CubismTextureColor = new CubismTextureColor(\n            0.0,\n            0.0,\n            0.0,\n            1.0\n          );\n\n          const userMultiplyColor: PartColorData = new PartColorData(\n            false,\n            multiplyColor\n          );\n          const userScreenColor: PartColorData = new PartColorData(\n            false,\n            screenColor\n          );\n\n          this._userPartMultiplyColors.pushBack(userMultiplyColor);\n          this._userPartScreenColors.pushBack(userScreenColor);\n          this._partChildDrawables.pushBack(new csmVector<number>());\n          this._partChildDrawables.at(i).prepareCapacity(drawableCount);\n        }\n      }\n\n      // Drawables\n      {\n        for (let i = 0; i < drawableCount; ++i) {\n          const multiplyColor: CubismTextureColor = new CubismTextureColor(\n            1.0,\n            1.0,\n            1.0,\n            1.0\n          );\n          const screenColor: CubismTextureColor = new CubismTextureColor(\n            0.0,\n            0.0,\n            0.0,\n            1.0\n          );\n\n          const userMultiplyColor: DrawableColorData = new DrawableColorData(\n            false,\n            multiplyColor\n          );\n          const userScreenColor: DrawableColorData = new DrawableColorData(\n            false,\n            screenColor\n          );\n\n          this._drawableIds.pushBack(\n            CubismFramework.getIdManager().getId(drawableIds[i])\n          );\n\n          this._userMultiplyColors.pushBack(userMultiplyColor);\n          this._userScreenColors.pushBack(userScreenColor);\n\n          this._userCullings.pushBack(userCulling);\n\n          const parentIndex = this.getDrawableParentPartIndex(i);\n          if (parentIndex >= 0) {\n            this._partChildDrawables.at(parentIndex).pushBack(i);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * コンストラクタ\n   * @param model モデル\n   */\n  public constructor(model: Live2DCubismCore.Model) {\n    this._model = model;\n    this._parameterValues = null;\n    this._parameterMaximumValues = null;\n    this._parameterMinimumValues = null;\n    this._partOpacities = null;\n    this._savedParameters = new csmVector<number>();\n    this._parameterIds = new csmVector<CubismIdHandle>();\n    this._drawableIds = new csmVector<CubismIdHandle>();\n    this._partIds = new csmVector<CubismIdHandle>();\n    this._isOverwrittenModelMultiplyColors = false;\n    this._isOverwrittenModelScreenColors = false;\n    this._isOverwrittenCullings = false;\n    this._modelOpacity = 1.0;\n\n    this._userMultiplyColors = new csmVector<DrawableColorData>();\n    this._userScreenColors = new csmVector<DrawableColorData>();\n    this._userCullings = new csmVector<DrawableCullingData>();\n    this._userPartMultiplyColors = new csmVector<PartColorData>();\n    this._userPartScreenColors = new csmVector<PartColorData>();\n    this._partChildDrawables = new csmVector<csmVector<number>>();\n\n    this._notExistPartId = new csmMap<CubismIdHandle, number>();\n    this._notExistParameterId = new csmMap<CubismIdHandle, number>();\n    this._notExistParameterValues = new csmMap<number, number>();\n    this._notExistPartOpacities = new csmMap<number, number>();\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    this._model.release();\n    this._model = null;\n  }\n\n  private _notExistPartOpacities: csmMap<number, number>; // 存在していないパーツの不透明度のリスト\n  private _notExistPartId: csmMap<CubismIdHandle, number>; // 存在していないパーツIDのリスト\n\n  private _notExistParameterValues: csmMap<number, number>; // 存在していないパラメータの値のリスト\n  private _notExistParameterId: csmMap<CubismIdHandle, number>; // 存在していないパラメータIDのリスト\n\n  private _savedParameters: csmVector<number>; // 保存されたパラメータ\n\n  private _isOverwrittenModelMultiplyColors: boolean; // SDK上でモデル全体の乗算色を上書きするか判定するフラグ\n  private _isOverwrittenModelScreenColors: boolean; // SDK上でモデル全体のスクリーン色を上書きするか判定するフラグ\n  private _userMultiplyColors: csmVector<DrawableColorData>; // Drawableごとに設定する乗算色と上書きフラグを管理するリスト\n  private _userScreenColors: csmVector<DrawableColorData>; // Drawableごとに設定するスクリーン色と上書きフラグを管理するリスト\n  private _userPartScreenColors: csmVector<PartColorData>; // Part 乗算色の配列\n  private _userPartMultiplyColors: csmVector<PartColorData>; // Part スクリーン色の配列\n  private _partChildDrawables: csmVector<csmVector<number>>; // Partの子DrawableIndexの配列\n\n  private _model: Live2DCubismCore.Model; // モデル\n\n  private _parameterValues: Float32Array; // パラメータの値のリスト\n  private _parameterMaximumValues: Float32Array; // パラメータの最大値のリスト\n  private _parameterMinimumValues: Float32Array; // パラメータの最小値のリスト\n\n  private _partOpacities: Float32Array; // パーツの不透明度のリスト\n\n  private _modelOpacity: number; // モデルの不透明度\n\n  private _parameterIds: csmVector<CubismIdHandle>;\n  private _partIds: csmVector<CubismIdHandle>;\n  private _drawableIds: csmVector<CubismIdHandle>;\n\n  private _isOverwrittenCullings: boolean; // モデルのカリング設定をすべて上書きするか？\n  private _userCullings: csmVector<DrawableCullingData>; // カリング設定の配列\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmodel';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismModel = $.CubismModel;\n  export type CubismModel = $.CubismModel;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport { csmString } from '../type/csmstring';\nimport { csmVector } from '../type/csmvector';\nimport { CubismModelUserDataJson } from './cubismmodeluserdatajson';\n\nconst ArtMesh = 'ArtMesh';\n\n/**\n * ユーザーデータインターフェース\n *\n * Jsonから読み込んだユーザーデータを記録しておくための構造体\n */\nexport class CubismModelUserDataNode {\n  targetType: CubismIdHandle; // ユーザーデータターゲットタイプ\n  targetId: CubismIdHandle; // ユーザーデータターゲットのID\n  value: csmString; // ユーザーデータ\n}\n\n/**\n * ユーザデータの管理クラス\n *\n * ユーザデータをロード、管理、検索インターフェイス、解放までを行う。\n */\nexport class CubismModelUserData {\n  /**\n   * インスタンスの作成\n   *\n   * @param buffer    userdata3.jsonが読み込まれているバッファ\n   * @param size      バッファのサイズ\n   * @return 作成されたインスタンス\n   */\n  public static create(buffer: ArrayBuffer, size: number): CubismModelUserData {\n    const ret: CubismModelUserData = new CubismModelUserData();\n\n    ret.parseUserData(buffer, size);\n\n    return ret;\n  }\n\n  /**\n   * インスタンスを破棄する\n   *\n   * @param modelUserData 破棄するインスタンス\n   */\n  public static delete(modelUserData: CubismModelUserData): void {\n    if (modelUserData != null) {\n      modelUserData.release();\n      modelUserData = null;\n    }\n  }\n\n  /**\n   * ArtMeshのユーザーデータのリストの取得\n   *\n   * @return ユーザーデータリスト\n   */\n  public getArtMeshUserDatas(): csmVector<CubismModelUserDataNode> {\n    return this._artMeshUserDataNode;\n  }\n\n  /**\n   * userdata3.jsonのパース\n   *\n   * @param buffer    userdata3.jsonが読み込まれているバッファ\n   * @param size      バッファのサイズ\n   */\n  public parseUserData(buffer: ArrayBuffer, size: number): void {\n    let json: CubismModelUserDataJson = new CubismModelUserDataJson(\n      buffer,\n      size\n    );\n\n    const typeOfArtMesh = CubismFramework.getIdManager().getId(ArtMesh);\n    const nodeCount: number = json.getUserDataCount();\n\n    for (let i = 0; i < nodeCount; i++) {\n      const addNode: CubismModelUserDataNode = new CubismModelUserDataNode();\n\n      addNode.targetId = json.getUserDataId(i);\n      addNode.targetType = CubismFramework.getIdManager().getId(\n        json.getUserDataTargetType(i)\n      );\n      addNode.value = new csmString(json.getUserDataValue(i));\n      this._userDataNodes.pushBack(addNode);\n\n      if (addNode.targetType == typeOfArtMesh) {\n        this._artMeshUserDataNode.pushBack(addNode);\n      }\n    }\n\n    json.release();\n    json = void 0;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._userDataNodes = new csmVector<CubismModelUserDataNode>();\n    this._artMeshUserDataNode = new csmVector<CubismModelUserDataNode>();\n  }\n\n  /**\n   * デストラクタ相当の処理\n   *\n   * ユーザーデータ構造体配列を解放する\n   */\n  public release(): void {\n    for (let i = 0; i < this._userDataNodes.getSize(); ++i) {\n      this._userDataNodes.set(i, null);\n    }\n\n    this._userDataNodes = null;\n  }\n\n  private _userDataNodes: csmVector<CubismModelUserDataNode>; // ユーザーデータ構造体配列\n  private _artMeshUserDataNode: csmVector<CubismModelUserDataNode>; // 閲覧リストの保持\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmodeluserdata';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismModelUserData = $.CubismModelUserData;\n  export type CubismModelUserData = $.CubismModelUserData;\n  export const CubismModelUserDataNode = $.CubismModelUserDataNode;\n  export type CubismModelUserDataNode = $.CubismModelUserDataNode;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport { CubismJson } from '../utils/cubismjson';\n\nconst Meta = 'Meta';\nconst UserDataCount = 'UserDataCount';\nconst TotalUserDataSize = 'TotalUserDataSize';\nconst UserData = 'UserData';\nconst Target = 'Target';\nconst Id = 'Id';\nconst Value = 'Value';\n\nexport class CubismModelUserDataJson {\n  /**\n   * コンストラクタ\n   * @param buffer    userdata3.jsonが読み込まれているバッファ\n   * @param size      バッファのサイズ\n   */\n  public constructor(buffer: ArrayBuffer, size: number) {\n    this._json = CubismJson.create(buffer, size);\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    CubismJson.delete(this._json);\n  }\n\n  /**\n   * ユーザーデータ個数の取得\n   * @return ユーザーデータの個数\n   */\n  public getUserDataCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(UserDataCount)\n      .toInt();\n  }\n\n  /**\n   * ユーザーデータ総文字列数の取得\n   *\n   * @return ユーザーデータ総文字列数\n   */\n  public getTotalUserDataSize(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(TotalUserDataSize)\n      .toInt();\n  }\n\n  /**\n   * ユーザーデータのタイプの取得\n   *\n   * @return ユーザーデータのタイプ\n   */\n  public getUserDataTargetType(i: number): string {\n    return this._json\n      .getRoot()\n      .getValueByString(UserData)\n      .getValueByIndex(i)\n      .getValueByString(Target)\n      .getRawString();\n  }\n\n  /**\n   * ユーザーデータのターゲットIDの取得\n   *\n   * @param i インデックス\n   * @return ユーザーデータターゲットID\n   */\n  public getUserDataId(i: number): CubismIdHandle {\n    return CubismFramework.getIdManager().getId(\n      this._json\n        .getRoot()\n        .getValueByString(UserData)\n        .getValueByIndex(i)\n        .getValueByString(Id)\n        .getRawString()\n    );\n  }\n\n  /**\n   * ユーザーデータの文字列の取得\n   *\n   * @param i インデックス\n   * @return ユーザーデータ\n   */\n  public getUserDataValue(i: number): string {\n    return this._json\n      .getRoot()\n      .getValueByString(UserData)\n      .getValueByIndex(i)\n      .getValueByString(Value)\n      .getRawString();\n  }\n\n  private _json: CubismJson;\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmodeluserdatajson';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismModelUserDataJson = $.CubismModelUserDataJson;\n  export type CubismModelUserDataJson = $.CubismModelUserDataJson;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismBreath } from '../effect/cubismbreath';\nimport { CubismEyeBlink } from '../effect/cubismeyeblink';\nimport { CubismPose } from '../effect/cubismpose';\nimport { CubismIdHandle } from '../id/cubismid';\nimport { Constant } from '../live2dcubismframework';\nimport { CubismModelMatrix } from '../math/cubismmodelmatrix';\nimport { CubismTargetPoint } from '../math/cubismtargetpoint';\nimport { ACubismMotion, FinishedMotionCallback } from '../motion/acubismmotion';\nimport { CubismExpressionMotion } from '../motion/cubismexpressionmotion';\nimport { CubismMotion } from '../motion/cubismmotion';\nimport { CubismMotionManager } from '../motion/cubismmotionmanager';\nimport { CubismMotionQueueManager } from '../motion/cubismmotionqueuemanager';\nimport { CubismPhysics } from '../physics/cubismphysics';\nimport { CubismRenderer_WebGL } from '../rendering/cubismrenderer_webgl';\nimport { csmString } from '../type/csmstring';\nimport { CubismLogError, CubismLogInfo } from '../utils/cubismdebug';\nimport { CubismMoc } from './cubismmoc';\nimport { CubismModel } from './cubismmodel';\nimport { CubismModelUserData } from './cubismmodeluserdata';\n\n/**\n * ユーザーが実際に使用するモデル\n *\n * ユーザーが実際に使用するモデルの基底クラス。これを継承してユーザーが実装する。\n */\nexport class CubismUserModel {\n  /**\n   * 初期化状態の取得\n   *\n   * 初期化されている状態か？\n   *\n   * @return true     初期化されている\n   * @return false    初期化されていない\n   */\n  public isInitialized(): boolean {\n    return this._initialized;\n  }\n\n  /**\n   * 初期化状態の設定\n   *\n   * 初期化状態を設定する。\n   *\n   * @param v 初期化状態\n   */\n  public setInitialized(v: boolean): void {\n    this._initialized = v;\n  }\n\n  /**\n   * 更新状態の取得\n   *\n   * 更新されている状態か？\n   *\n   * @return true     更新されている\n   * @return false    更新されていない\n   */\n  public isUpdating(): boolean {\n    return this._updating;\n  }\n\n  /**\n   * 更新状態の設定\n   *\n   * 更新状態を設定する\n   *\n   * @param v 更新状態\n   */\n  public setUpdating(v: boolean): void {\n    this._updating = v;\n  }\n\n  /**\n   * マウスドラッグ情報の設定\n   * @param ドラッグしているカーソルのX位置\n   * @param ドラッグしているカーソルのY位置\n   */\n  public setDragging(x: number, y: number): void {\n    this._dragManager.set(x, y);\n  }\n\n  /**\n   * 加速度の情報を設定する\n   * @param x X軸方向の加速度\n   * @param y Y軸方向の加速度\n   * @param z Z軸方向の加速度\n   */\n  public setAcceleration(x: number, y: number, z: number): void {\n    this._accelerationX = x;\n    this._accelerationY = y;\n    this._accelerationZ = z;\n  }\n\n  /**\n   * モデル行列を取得する\n   * @return モデル行列\n   */\n  public getModelMatrix(): CubismModelMatrix {\n    return this._modelMatrix;\n  }\n\n  /**\n   * 不透明度の設定\n   * @param a 不透明度\n   */\n  public setOpacity(a: number): void {\n    this._opacity = a;\n  }\n\n  /**\n   * 不透明度の取得\n   * @return 不透明度\n   */\n  public getOpacity(): number {\n    return this._opacity;\n  }\n\n  /**\n   * モデルデータを読み込む\n   *\n   * @param buffer    moc3ファイルが読み込まれているバッファ\n   */\n  public loadModel(buffer: ArrayBuffer, shouldCheckMocConsistency = false) {\n    this._moc = CubismMoc.create(buffer, shouldCheckMocConsistency);\n\n    if (this._moc == null) {\n      CubismLogError('Failed to CubismMoc.create().');\n      return;\n    }\n\n    this._model = this._moc.createModel();\n\n    if (this._model == null) {\n      CubismLogError('Failed to CreateModel().');\n      return;\n    }\n\n    this._model.saveParameters();\n    this._modelMatrix = new CubismModelMatrix(\n      this._model.getCanvasWidth(),\n      this._model.getCanvasHeight()\n    );\n  }\n\n  /**\n   * モーションデータを読み込む\n   * @param buffer motion3.jsonファイルが読み込まれているバッファ\n   * @param size バッファのサイズ\n   * @param name モーションの名前\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\n   * @return モーションクラス\n   */\n  public loadMotion = (\n    buffer: ArrayBuffer,\n    size: number,\n    name: string,\n    onFinishedMotionHandler?: FinishedMotionCallback\n  ) => CubismMotion.create(buffer, size, onFinishedMotionHandler);\n\n  /**\n   * 表情データの読み込み\n   * @param buffer expファイルが読み込まれているバッファ\n   * @param size バッファのサイズ\n   * @param name 表情の名前\n   */\n  public loadExpression(\n    buffer: ArrayBuffer,\n    size: number,\n    name: string\n  ): ACubismMotion {\n    return CubismExpressionMotion.create(buffer, size);\n  }\n\n  /**\n   * ポーズデータの読み込み\n   * @param buffer pose3.jsonが読み込まれているバッファ\n   * @param size バッファのサイズ\n   */\n  public loadPose(buffer: ArrayBuffer, size: number): void {\n    this._pose = CubismPose.create(buffer, size);\n  }\n\n  /**\n   * モデルに付属するユーザーデータを読み込む\n   * @param buffer userdata3.jsonが読み込まれているバッファ\n   * @param size バッファのサイズ\n   */\n  public loadUserData(buffer: ArrayBuffer, size: number): void {\n    this._modelUserData = CubismModelUserData.create(buffer, size);\n  }\n\n  /**\n   * 物理演算データの読み込み\n   * @param buffer  physics3.jsonが読み込まれているバッファ\n   * @param size    バッファのサイズ\n   */\n  public loadPhysics(buffer: ArrayBuffer, size: number): void {\n    this._physics = CubismPhysics.create(buffer, size);\n  }\n\n  /**\n   * 当たり判定の取得\n   * @param drawableId 検証したいDrawableのID\n   * @param pointX X位置\n   * @param pointY Y位置\n   * @return true ヒットしている\n   * @return false ヒットしていない\n   */\n  public isHit(\n    drawableId: CubismIdHandle,\n    pointX: number,\n    pointY: number\n  ): boolean {\n    const drawIndex: number = this._model.getDrawableIndex(drawableId);\n\n    if (drawIndex < 0) {\n      return false; // 存在しない場合はfalse\n    }\n\n    const count: number = this._model.getDrawableVertexCount(drawIndex);\n    const vertices: Float32Array = this._model.getDrawableVertices(drawIndex);\n\n    let left: number = vertices[0];\n    let right: number = vertices[0];\n    let top: number = vertices[1];\n    let bottom: number = vertices[1];\n\n    for (let j = 1; j < count; ++j) {\n      const x = vertices[Constant.vertexOffset + j * Constant.vertexStep];\n      const y = vertices[Constant.vertexOffset + j * Constant.vertexStep + 1];\n\n      if (x < left) {\n        left = x; // Min x\n      }\n\n      if (x > right) {\n        right = x; // Max x\n      }\n\n      if (y < top) {\n        top = y; // Min y\n      }\n\n      if (y > bottom) {\n        bottom = y; // Max y\n      }\n    }\n\n    const tx: number = this._modelMatrix.invertTransformX(pointX);\n    const ty: number = this._modelMatrix.invertTransformY(pointY);\n\n    return left <= tx && tx <= right && top <= ty && ty <= bottom;\n  }\n\n  /**\n   * モデルの取得\n   * @return モデル\n   */\n  public getModel(): CubismModel {\n    return this._model;\n  }\n\n  /**\n   * レンダラの取得\n   * @return レンダラ\n   */\n  public getRenderer(): CubismRenderer_WebGL {\n    return this._renderer;\n  }\n\n  /**\n   * レンダラを作成して初期化を実行する\n   * @param maskBufferCount バッファの生成数\n   */\n  public createRenderer(maskBufferCount = 1): void {\n    if (this._renderer) {\n      this.deleteRenderer();\n    }\n\n    this._renderer = new CubismRenderer_WebGL();\n    this._renderer.initialize(this._model, maskBufferCount);\n  }\n\n  /**\n   * レンダラの解放\n   */\n  public deleteRenderer(): void {\n    if (this._renderer != null) {\n      this._renderer.release();\n      this._renderer = null;\n    }\n  }\n\n  /**\n   * イベント発火時の標準処理\n   *\n   * Eventが再生処理時にあった場合の処理をする。\n   * 継承で上書きすることを想定している。\n   * 上書きしない場合はログ出力をする。\n   *\n   * @param eventValue 発火したイベントの文字列データ\n   */\n  public motionEventFired(eventValue: csmString): void {\n    CubismLogInfo('{0}', eventValue.s);\n  }\n\n  /**\n   * イベント用のコールバック\n   *\n   * CubismMotionQueueManagerにイベント用に登録するためのCallback。\n   * CubismUserModelの継承先のEventFiredを呼ぶ。\n   *\n   * @param caller 発火したイベントを管理していたモーションマネージャー、比較用\n   * @param eventValue 発火したイベントの文字列データ\n   * @param customData CubismUserModelを継承したインスタンスを想定\n   */\n  public static cubismDefaultMotionEventCallback(\n    caller: CubismMotionQueueManager,\n    eventValue: csmString,\n    customData: CubismUserModel\n  ): void {\n    const model: CubismUserModel = customData;\n\n    if (model != null) {\n      model.motionEventFired(eventValue);\n    }\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    // 各変数初期化\n    this._moc = null;\n    this._model = null;\n    this._motionManager = null;\n    this._expressionManager = null;\n    this._eyeBlink = null;\n    this._breath = null;\n    this._modelMatrix = null;\n    this._pose = null;\n    this._dragManager = null;\n    this._physics = null;\n    this._modelUserData = null;\n    this._initialized = false;\n    this._updating = false;\n    this._opacity = 1.0;\n    this._lipsync = true;\n    this._lastLipSyncValue = 0.0;\n    this._dragX = 0.0;\n    this._dragY = 0.0;\n    this._accelerationX = 0.0;\n    this._accelerationY = 0.0;\n    this._accelerationZ = 0.0;\n    this._mocConsistency = false;\n    this._debugMode = false;\n    this._renderer = null;\n\n    // モーションマネージャーを作成\n    this._motionManager = new CubismMotionManager();\n    this._motionManager.setEventCallback(\n      CubismUserModel.cubismDefaultMotionEventCallback,\n      this\n    );\n\n    // 表情マネージャーを作成\n    this._expressionManager = new CubismMotionManager();\n\n    // ドラッグによるアニメーション\n    this._dragManager = new CubismTargetPoint();\n  }\n\n  /**\n   * デストラクタに相当する処理\n   */\n  public release() {\n    if (this._motionManager != null) {\n      this._motionManager.release();\n      this._motionManager = null;\n    }\n\n    if (this._expressionManager != null) {\n      this._expressionManager.release();\n      this._expressionManager = null;\n    }\n\n    if (this._moc != null) {\n      this._moc.deleteModel(this._model);\n      this._moc.release();\n      this._moc = null;\n    }\n\n    this._modelMatrix = null;\n\n    CubismPose.delete(this._pose);\n    CubismEyeBlink.delete(this._eyeBlink);\n    CubismBreath.delete(this._breath);\n\n    this._dragManager = null;\n\n    CubismPhysics.delete(this._physics);\n    CubismModelUserData.delete(this._modelUserData);\n\n    this.deleteRenderer();\n  }\n\n  protected _moc: CubismMoc; // Mocデータ\n  protected _model: CubismModel; // Modelインスタンス\n\n  protected _motionManager: CubismMotionManager; // モーション管理\n  protected _expressionManager: CubismMotionManager; // 表情管理\n  protected _eyeBlink: CubismEyeBlink; // 自動まばたき\n  protected _breath: CubismBreath; // 呼吸\n  protected _modelMatrix: CubismModelMatrix; // モデル行列\n  protected _pose: CubismPose; // ポーズ管理\n  protected _dragManager: CubismTargetPoint; // マウスドラッグ\n  protected _physics: CubismPhysics; // 物理演算\n  protected _modelUserData: CubismModelUserData; // ユーザーデータ\n\n  protected _initialized: boolean; // 初期化されたかどうか\n  protected _updating: boolean; // 更新されたかどうか\n  protected _opacity: number; // 不透明度\n  protected _lipsync: boolean; // リップシンクするかどうか\n  protected _lastLipSyncValue: number; // 最後のリップシンクの制御地\n  protected _dragX: number; // マウスドラッグのX位置\n  protected _dragY: number; // マウスドラッグのY位置\n  protected _accelerationX: number; // X軸方向の加速度\n  protected _accelerationY: number; // Y軸方向の加速度\n  protected _accelerationZ: number; // Z軸方向の加速度\n  protected _mocConsistency: boolean; // MOC3一貫性検証するかどうか\n  protected _debugMode: boolean; // デバッグモードかどうか\n\n  private _renderer: CubismRenderer_WebGL; // レンダラ\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismusermodel';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismUserModel = $.CubismUserModel;\n  export type CubismUserModel = $.CubismUserModel;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismMath } from '../math/cubismmath';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmString } from '../type/csmstring';\nimport { csmVector } from '../type/csmvector';\nimport { CSM_ASSERT } from '../utils/cubismdebug';\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\n\n/** モーション再生終了コールバック関数定義 */\nexport type FinishedMotionCallback = (self: ACubismMotion) => void;\n\n/**\n * モーションの抽象基底クラス\n *\n * モーションの抽象基底クラス。MotionQueueManagerによってモーションの再生を管理する。\n */\nexport abstract class ACubismMotion {\n  /**\n   * インスタンスの破棄\n   */\n  public static delete(motion: ACubismMotion): void {\n    motion.release();\n    motion = null;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._fadeInSeconds = -1.0;\n    this._fadeOutSeconds = -1.0;\n    this._weight = 1.0;\n    this._offsetSeconds = 0.0; // 再生の開始時刻\n    this._firedEventValues = new csmVector<csmString>();\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    this._weight = 0.0;\n  }\n\n  /**\n   * モデルのパラメータ\n   * @param model 対象のモデル\n   * @param motionQueueEntry CubismMotionQueueManagerで管理されているモーション\n   * @param userTimeSeconds デルタ時間の積算値[秒]\n   */\n  public updateParameters(\n    model: CubismModel,\n    motionQueueEntry: CubismMotionQueueEntry,\n    userTimeSeconds: number\n  ): void {\n    if (!motionQueueEntry.isAvailable() || motionQueueEntry.isFinished()) {\n      return;\n    }\n\n    if (!motionQueueEntry.isStarted()) {\n      motionQueueEntry.setIsStarted(true);\n      motionQueueEntry.setStartTime(userTimeSeconds - this._offsetSeconds); // モーションの開始時刻を記録\n      motionQueueEntry.setFadeInStartTime(userTimeSeconds); // フェードインの開始時刻\n\n      const duration: number = this.getDuration();\n\n      if (motionQueueEntry.getEndTime() < 0) {\n        // 開始していないうちに終了設定している場合がある。\n        motionQueueEntry.setEndTime(\n          duration <= 0 ? -1 : motionQueueEntry.getStartTime() + duration\n        );\n        // duration == -1 の場合はループする\n      }\n    }\n\n    let fadeWeight: number = this._weight; // 現在の値と掛け合わせる割合\n\n    //---- フェードイン・アウトの処理 ----\n    // 単純なサイン関数でイージングする\n    const fadeIn: number =\n      this._fadeInSeconds == 0.0\n        ? 1.0\n        : CubismMath.getEasingSine(\n            (userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n              this._fadeInSeconds\n          );\n\n    const fadeOut: number =\n      this._fadeOutSeconds == 0.0 || motionQueueEntry.getEndTime() < 0.0\n        ? 1.0\n        : CubismMath.getEasingSine(\n            (motionQueueEntry.getEndTime() - userTimeSeconds) /\n              this._fadeOutSeconds\n          );\n\n    fadeWeight = fadeWeight * fadeIn * fadeOut;\n\n    motionQueueEntry.setState(userTimeSeconds, fadeWeight);\n\n    CSM_ASSERT(0.0 <= fadeWeight && fadeWeight <= 1.0);\n\n    //---- 全てのパラメータIDをループする ----\n    this.doUpdateParameters(\n      model,\n      userTimeSeconds,\n      fadeWeight,\n      motionQueueEntry\n    );\n\n    // 後処理\n    // 終了時刻を過ぎたら終了フラグを立てる(CubismMotionQueueManager)\n    if (\n      motionQueueEntry.getEndTime() > 0 &&\n      motionQueueEntry.getEndTime() < userTimeSeconds\n    ) {\n      motionQueueEntry.setIsFinished(true); // 終了\n    }\n  }\n\n  /**\n   * フェードインの時間を設定する\n   * @param fadeInSeconds フェードインにかかる時間[秒]\n   */\n  public setFadeInTime(fadeInSeconds: number): void {\n    this._fadeInSeconds = fadeInSeconds;\n  }\n\n  /**\n   * フェードアウトの時間を設定する\n   * @param fadeOutSeconds フェードアウトにかかる時間[秒]\n   */\n  public setFadeOutTime(fadeOutSeconds: number): void {\n    this._fadeOutSeconds = fadeOutSeconds;\n  }\n\n  /**\n   * フェードアウトにかかる時間の取得\n   * @return フェードアウトにかかる時間[秒]\n   */\n  public getFadeOutTime(): number {\n    return this._fadeOutSeconds;\n  }\n\n  /**\n   * フェードインにかかる時間の取得\n   * @return フェードインにかかる時間[秒]\n   */\n  public getFadeInTime(): number {\n    return this._fadeInSeconds;\n  }\n\n  /**\n   * モーション適用の重みの設定\n   * @param weight 重み（0.0 - 1.0）\n   */\n  public setWeight(weight: number): void {\n    this._weight = weight;\n  }\n\n  /**\n   * モーション適用の重みの取得\n   * @return 重み（0.0 - 1.0）\n   */\n  public getWeight(): number {\n    return this._weight;\n  }\n\n  /**\n   * モーションの長さの取得\n   * @return モーションの長さ[秒]\n   *\n   * @note ループの時は「-1」。\n   *       ループでない場合は、オーバーライドする。\n   *       正の値の時は取得される時間で終了する。\n   *       「-1」の時は外部から停止命令がない限り終わらない処理となる。\n   */\n  public getDuration(): number {\n    return -1.0;\n  }\n\n  /**\n   * モーションのループ1回分の長さの取得\n   * @return モーションのループ一回分の長さ[秒]\n   *\n   * @note ループしない場合は、getDuration()と同じ値を返す\n   *       ループ一回分の長さが定義できない場合(プログラム的に動き続けるサブクラスなど)の場合は「-1」を返す\n   */\n  public getLoopDuration(): number {\n    return -1.0;\n  }\n\n  /**\n   * モーション再生の開始時刻の設定\n   * @param offsetSeconds モーション再生の開始時刻[秒]\n   */\n  public setOffsetTime(offsetSeconds: number): void {\n    this._offsetSeconds = offsetSeconds;\n  }\n\n  /**\n   * モデルのパラメータ更新\n   *\n   * イベント発火のチェック。\n   * 入力する時間は呼ばれるモーションタイミングを０とした秒数で行う。\n   *\n   * @param beforeCheckTimeSeconds 前回のイベントチェック時間[秒]\n   * @param motionTimeSeconds 今回の再生時間[秒]\n   */\n  public getFiredEvent(\n    beforeCheckTimeSeconds: number,\n    motionTimeSeconds: number\n  ): csmVector<csmString> {\n    return this._firedEventValues;\n  }\n\n  /**\n   * モーションを更新して、モデルにパラメータ値を反映する\n   * @param model 対象のモデル\n   * @param userTimeSeconds デルタ時間の積算値[秒]\n   * @param weight モーションの重み\n   * @param motionQueueEntry CubismMotionQueueManagerで管理されているモーション\n   * @return true モデルへパラメータ値の反映あり\n   * @return false モデルへのパラメータ値の反映なし（モーションの変化なし）\n   */\n  public abstract doUpdateParameters(\n    model: CubismModel,\n    userTimeSeconds: number,\n    weight: number,\n    motionQueueEntry: CubismMotionQueueEntry\n  ): void;\n\n  /**\n   * モーション再生終了コールバックの登録\n   *\n   * モーション再生終了コールバックを登録する。\n   * isFinishedフラグを設定するタイミングで呼び出される。\n   * 以下の状態の際には呼び出されない:\n   *   1. 再生中のモーションが「ループ」として設定されているとき\n   *   2. コールバックが登録されていない時\n   *\n   * @param onFinishedMotionHandler モーション再生終了コールバック関数\n   */\n  public setFinishedMotionHandler = (\n    onFinishedMotionHandler: FinishedMotionCallback\n  ) => (this._onFinishedMotion = onFinishedMotionHandler);\n\n  /**\n   * モーション再生終了コールバックの取得\n   *\n   * モーション再生終了コールバックを取得する。\n   *\n   * @return 登録されているモーション再生終了コールバック関数\n   */\n  public getFinishedMotionHandler = () => this._onFinishedMotion;\n\n  /**\n   * 透明度のカーブが存在するかどうかを確認する\n   *\n   * @returns true  -> キーが存在する\n   *          false -> キーが存在しない\n   */\n  public isExistModelOpacity(): boolean {\n    return false;\n  }\n\n  /**\n   * 透明度のカーブのインデックスを返す\n   *\n   * @returns success:透明度のカーブのインデックス\n   */\n  public getModelOpacityIndex(): number {\n    return -1;\n  }\n\n  /**\n   * 透明度のIdを返す\n   *\n   * @param index モーションカーブのインデックス\n   * @returns success:透明度のId\n   */\n  public getModelOpacityId(index: number): CubismIdHandle {\n    return null;\n  }\n\n  /**\n   * 指定時間の透明度の値を返す\n   *\n   * @returns success:モーションの現在時間におけるOpacityの値\n   *\n   * @note  更新後の値を取るにはUpdateParameters() の後に呼び出す。\n   */\n  protected getModelOpacityValue(): number {\n    return 1.0;\n  }\n\n  public _fadeInSeconds: number; // フェードインにかかる時間[秒]\n  public _fadeOutSeconds: number; // フェードアウトにかかる時間[秒]\n  public _weight: number; // モーションの重み\n  public _offsetSeconds: number; // モーション再生の開始時間[秒]\n\n  public _firedEventValues: csmVector<csmString>;\n\n  // モーション再生終了コールバック関数\n  public _onFinishedMotion?: FinishedMotionCallback;\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './acubismmotion';\nimport { CubismIdHandle } from '../id/cubismid';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const ACubismMotion = $.ACubismMotion;\n  export type ACubismMotion = $.ACubismMotion;\n  export type FinishedMotionCallback = $.FinishedMotionCallback;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmVector } from '../type/csmvector';\nimport { CubismJson, Value } from '../utils/cubismjson';\nimport { ACubismMotion } from './acubismmotion';\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\n\n// exp3.jsonのキーとデフォルト\nconst ExpressionKeyFadeIn = 'FadeInTime';\nconst ExpressionKeyFadeOut = 'FadeOutTime';\nconst ExpressionKeyParameters = 'Parameters';\nconst ExpressionKeyId = 'Id';\nconst ExpressionKeyValue = 'Value';\nconst ExpressionKeyBlend = 'Blend';\nconst BlendValueAdd = 'Add';\nconst BlendValueMultiply = 'Multiply';\nconst BlendValueOverwrite = 'Overwrite';\nconst DefaultFadeTime = 1.0;\n\n/**\n * 表情のモーション\n *\n * 表情のモーションクラス。\n */\nexport class CubismExpressionMotion extends ACubismMotion {\n  /**\n   * インスタンスを作成する。\n   * @param buffer expファイルが読み込まれているバッファ\n   * @param size バッファのサイズ\n   * @return 作成されたインスタンス\n   */\n  public static create(\n    buffer: ArrayBuffer,\n    size: number\n  ): CubismExpressionMotion {\n    const expression: CubismExpressionMotion = new CubismExpressionMotion();\n    expression.parse(buffer, size);\n    return expression;\n  }\n\n  /**\n   * モデルのパラメータの更新の実行\n   * @param model 対象のモデル\n   * @param userTimeSeconds デルタ時間の積算値[秒]\n   * @param weight モーションの重み\n   * @param motionQueueEntry CubismMotionQueueManagerで管理されているモーション\n   */\n  public doUpdateParameters(\n    model: CubismModel,\n    userTimeSeconds: number,\n    weight: number,\n    motionQueueEntry: CubismMotionQueueEntry\n  ): void {\n    for (let i = 0; i < this._parameters.getSize(); ++i) {\n      const parameter: ExpressionParameter = this._parameters.at(i);\n\n      switch (parameter.blendType) {\n        case ExpressionBlendType.ExpressionBlendType_Add: {\n          model.addParameterValueById(\n            parameter.parameterId,\n            parameter.value,\n            weight\n          );\n          break;\n        }\n        case ExpressionBlendType.ExpressionBlendType_Multiply: {\n          model.multiplyParameterValueById(\n            parameter.parameterId,\n            parameter.value,\n            weight\n          );\n          break;\n        }\n        case ExpressionBlendType.ExpressionBlendType_Overwrite: {\n          model.setParameterValueById(\n            parameter.parameterId,\n            parameter.value,\n            weight\n          );\n          break;\n        }\n        default:\n          // 仕様にない値を設定した時はすでに加算モードになっている\n          break;\n      }\n    }\n  }\n\n  protected parse(buffer: ArrayBuffer, size: number) {\n    const json: CubismJson = CubismJson.create(buffer, size);\n    const root: Value = json.getRoot();\n\n    this.setFadeInTime(\n      root.getValueByString(ExpressionKeyFadeIn).toFloat(DefaultFadeTime)\n    ); // フェードイン\n    this.setFadeOutTime(\n      root.getValueByString(ExpressionKeyFadeOut).toFloat(DefaultFadeTime)\n    ); // フェードアウト\n\n    // 各パラメータについて\n    const parameterCount = root\n      .getValueByString(ExpressionKeyParameters)\n      .getSize();\n    this._parameters.prepareCapacity(parameterCount);\n\n    for (let i = 0; i < parameterCount; ++i) {\n      const param: Value = root\n        .getValueByString(ExpressionKeyParameters)\n        .getValueByIndex(i);\n      const parameterId: CubismIdHandle = CubismFramework.getIdManager().getId(\n        param.getValueByString(ExpressionKeyId).getRawString()\n      ); // パラメータID\n\n      const value: number = param\n        .getValueByString(ExpressionKeyValue)\n        .toFloat(); // 値\n\n      // 計算方法の設定\n      let blendType: ExpressionBlendType;\n\n      if (\n        param.getValueByString(ExpressionKeyBlend).isNull() ||\n        param.getValueByString(ExpressionKeyBlend).getString() == BlendValueAdd\n      ) {\n        blendType = ExpressionBlendType.ExpressionBlendType_Add;\n      } else if (\n        param.getValueByString(ExpressionKeyBlend).getString() ==\n        BlendValueMultiply\n      ) {\n        blendType = ExpressionBlendType.ExpressionBlendType_Multiply;\n      } else if (\n        param.getValueByString(ExpressionKeyBlend).getString() ==\n        BlendValueOverwrite\n      ) {\n        blendType = ExpressionBlendType.ExpressionBlendType_Overwrite;\n      } else {\n        // その他 仕様にない値を設定した時は加算モードにすることで復旧\n        blendType = ExpressionBlendType.ExpressionBlendType_Add;\n      }\n\n      // 設定オブジェクトを作成してリストに追加する\n      const item: ExpressionParameter = new ExpressionParameter();\n\n      item.parameterId = parameterId;\n      item.blendType = blendType;\n      item.value = value;\n\n      this._parameters.pushBack(item);\n    }\n\n    CubismJson.delete(json); // JSONデータは不要になったら削除する\n  }\n\n  /**\n   * コンストラクタ\n   */\n  protected constructor() {\n    super();\n\n    this._parameters = new csmVector<ExpressionParameter>();\n  }\n\n  _parameters: csmVector<ExpressionParameter>; // 表情のパラメータ情報リスト\n}\n\n/**\n * 表情パラメータ値の計算方式\n */\nexport enum ExpressionBlendType {\n  ExpressionBlendType_Add = 0, // 加算\n  ExpressionBlendType_Multiply = 1, // 乗算\n  ExpressionBlendType_Overwrite = 2, // 上書き\n}\n\n/**\n * 表情のパラメータ情報\n */\nexport class ExpressionParameter {\n  parameterId: CubismIdHandle; // パラメータID\n  blendType: ExpressionBlendType; // パラメータの演算種類\n  value: number; // 値\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismexpressionmotion';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismExpressionMotion = $.CubismExpressionMotion;\n  export type CubismExpressionMotion = $.CubismExpressionMotion;\n  export const ExpressionBlendType = $.ExpressionBlendType;\n  export type ExpressionBlendType = $.ExpressionBlendType;\n  export const ExpressionParameter = $.ExpressionParameter;\n  export type ExpressionParameter = $.ExpressionParameter;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport { CubismMath } from '../math/cubismmath';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmString } from '../type/csmstring';\nimport { csmVector } from '../type/csmvector';\nimport {\n  CSM_ASSERT,\n  CubismLogDebug,\n  CubismLogWarning,\n} from '../utils/cubismdebug';\nimport { ACubismMotion, FinishedMotionCallback } from './acubismmotion';\nimport {\n  CubismMotionCurve,\n  CubismMotionCurveTarget,\n  CubismMotionData,\n  CubismMotionEvent,\n  CubismMotionPoint,\n  CubismMotionSegment,\n  CubismMotionSegmentType,\n} from './cubismmotioninternal';\nimport { CubismMotionJson, EvaluationOptionFlag } from './cubismmotionjson';\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\n\nconst EffectNameEyeBlink = 'EyeBlink';\nconst EffectNameLipSync = 'LipSync';\nconst TargetNameModel = 'Model';\nconst TargetNameParameter = 'Parameter';\nconst TargetNamePartOpacity = 'PartOpacity';\n\n// Id\nconst IdNameOpacity = 'Opacity';\n\n/**\n * Cubism SDK R2 以前のモーションを再現させるなら true 、アニメータのモーションを正しく再現するなら false 。\n */\nconst UseOldBeziersCurveMotion = false;\n\nfunction lerpPoints(\n  a: CubismMotionPoint,\n  b: CubismMotionPoint,\n  t: number\n): CubismMotionPoint {\n  const result: CubismMotionPoint = new CubismMotionPoint();\n\n  result.time = a.time + (b.time - a.time) * t;\n  result.value = a.value + (b.value - a.value) * t;\n\n  return result;\n}\n\nfunction linearEvaluate(points: CubismMotionPoint[], time: number): number {\n  let t: number = (time - points[0].time) / (points[1].time - points[0].time);\n\n  if (t < 0.0) {\n    t = 0.0;\n  }\n\n  return points[0].value + (points[1].value - points[0].value) * t;\n}\n\nfunction bezierEvaluate(points: CubismMotionPoint[], time: number): number {\n  let t: number = (time - points[0].time) / (points[3].time - points[0].time);\n\n  if (t < 0.0) {\n    t = 0.0;\n  }\n\n  const p01: CubismMotionPoint = lerpPoints(points[0], points[1], t);\n  const p12: CubismMotionPoint = lerpPoints(points[1], points[2], t);\n  const p23: CubismMotionPoint = lerpPoints(points[2], points[3], t);\n\n  const p012: CubismMotionPoint = lerpPoints(p01, p12, t);\n  const p123: CubismMotionPoint = lerpPoints(p12, p23, t);\n\n  return lerpPoints(p012, p123, t).value;\n}\n\nfunction bezierEvaluateBinarySearch(\n  points: CubismMotionPoint[],\n  time: number\n): number {\n  const x_error = 0.01;\n\n  const x: number = time;\n  let x1: number = points[0].time;\n  let x2: number = points[3].time;\n  let cx1: number = points[1].time;\n  let cx2: number = points[2].time;\n\n  let ta = 0.0;\n  let tb = 1.0;\n  let t = 0.0;\n  let i = 0;\n\n  for (let var33 = true; i < 20; ++i) {\n    if (x < x1 + x_error) {\n      t = ta;\n      break;\n    }\n\n    if (x2 - x_error < x) {\n      t = tb;\n      break;\n    }\n\n    let centerx: number = (cx1 + cx2) * 0.5;\n    cx1 = (x1 + cx1) * 0.5;\n    cx2 = (x2 + cx2) * 0.5;\n    const ctrlx12: number = (cx1 + centerx) * 0.5;\n    const ctrlx21: number = (cx2 + centerx) * 0.5;\n    centerx = (ctrlx12 + ctrlx21) * 0.5;\n    if (x < centerx) {\n      tb = (ta + tb) * 0.5;\n      if (centerx - x_error < x) {\n        t = tb;\n        break;\n      }\n\n      x2 = centerx;\n      cx2 = ctrlx12;\n    } else {\n      ta = (ta + tb) * 0.5;\n      if (x < centerx + x_error) {\n        t = ta;\n        break;\n      }\n\n      x1 = centerx;\n      cx1 = ctrlx21;\n    }\n  }\n\n  if (i == 20) {\n    t = (ta + tb) * 0.5;\n  }\n\n  if (t < 0.0) {\n    t = 0.0;\n  }\n  if (t > 1.0) {\n    t = 1.0;\n  }\n\n  const p01: CubismMotionPoint = lerpPoints(points[0], points[1], t);\n  const p12: CubismMotionPoint = lerpPoints(points[1], points[2], t);\n  const p23: CubismMotionPoint = lerpPoints(points[2], points[3], t);\n\n  const p012: CubismMotionPoint = lerpPoints(p01, p12, t);\n  const p123: CubismMotionPoint = lerpPoints(p12, p23, t);\n\n  return lerpPoints(p012, p123, t).value;\n}\n\nfunction bezierEvaluateCardanoInterpretation(\n  points: CubismMotionPoint[],\n  time: number\n): number {\n  const x: number = time;\n  const x1: number = points[0].time;\n  const x2: number = points[3].time;\n  const cx1: number = points[1].time;\n  const cx2: number = points[2].time;\n\n  const a: number = x2 - 3.0 * cx2 + 3.0 * cx1 - x1;\n  const b: number = 3.0 * cx2 - 6.0 * cx1 + 3.0 * x1;\n  const c: number = 3.0 * cx1 - 3.0 * x1;\n  const d: number = x1 - x;\n\n  const t: number = CubismMath.cardanoAlgorithmForBezier(a, b, c, d);\n\n  const p01: CubismMotionPoint = lerpPoints(points[0], points[1], t);\n  const p12: CubismMotionPoint = lerpPoints(points[1], points[2], t);\n  const p23: CubismMotionPoint = lerpPoints(points[2], points[3], t);\n\n  const p012: CubismMotionPoint = lerpPoints(p01, p12, t);\n  const p123: CubismMotionPoint = lerpPoints(p12, p23, t);\n\n  return lerpPoints(p012, p123, t).value;\n}\n\nfunction steppedEvaluate(points: CubismMotionPoint[], time: number): number {\n  return points[0].value;\n}\n\nfunction inverseSteppedEvaluate(\n  points: CubismMotionPoint[],\n  time: number\n): number {\n  return points[1].value;\n}\n\nfunction evaluateCurve(\n  motionData: CubismMotionData,\n  index: number,\n  time: number\n): number {\n  // Find segment to evaluate.\n  const curve: CubismMotionCurve = motionData.curves.at(index);\n\n  let target = -1;\n  const totalSegmentCount: number = curve.baseSegmentIndex + curve.segmentCount;\n  let pointPosition = 0;\n  for (let i: number = curve.baseSegmentIndex; i < totalSegmentCount; ++i) {\n    // Get first point of next segment.\n    pointPosition =\n      motionData.segments.at(i).basePointIndex +\n      (motionData.segments.at(i).segmentType ==\n      CubismMotionSegmentType.CubismMotionSegmentType_Bezier\n        ? 3\n        : 1);\n\n    // Break if time lies within current segment.\n    if (motionData.points.at(pointPosition).time > time) {\n      target = i;\n      break;\n    }\n  }\n\n  if (target == -1) {\n    return motionData.points.at(pointPosition).value;\n  }\n\n  const segment: CubismMotionSegment = motionData.segments.at(target);\n\n  return segment.evaluate(motionData.points.get(segment.basePointIndex), time);\n}\n\n/**\n * モーションクラス\n *\n * モーションのクラス。\n */\nexport class CubismMotion extends ACubismMotion {\n  /**\n   * インスタンスを作成する\n   *\n   * @param buffer motion3.jsonが読み込まれているバッファ\n   * @param size バッファのサイズ\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\n   * @return 作成されたインスタンス\n   */\n  public static create(\n    buffer: ArrayBuffer,\n    size: number,\n    onFinishedMotionHandler?: FinishedMotionCallback\n  ): CubismMotion {\n    const ret = new CubismMotion();\n\n    ret.parse(buffer, size);\n    ret._sourceFrameRate = ret._motionData.fps;\n    ret._loopDurationSeconds = ret._motionData.duration;\n    ret._onFinishedMotion = onFinishedMotionHandler;\n\n    // NOTE: Editorではループありのモーション書き出しは非対応\n    // ret->_loop = (ret->_motionData->Loop > 0);\n    return ret;\n  }\n\n  /**\n   * モデルのパラメータの更新の実行\n   * @param model             対象のモデル\n   * @param userTimeSeconds   現在の時刻[秒]\n   * @param fadeWeight        モーションの重み\n   * @param motionQueueEntry  CubismMotionQueueManagerで管理されているモーション\n   */\n  public doUpdateParameters(\n    model: CubismModel,\n    userTimeSeconds: number,\n    fadeWeight: number,\n    motionQueueEntry: CubismMotionQueueEntry\n  ): void {\n    if (this._modelCurveIdEyeBlink == null) {\n      this._modelCurveIdEyeBlink =\n        CubismFramework.getIdManager().getId(EffectNameEyeBlink);\n    }\n\n    if (this._modelCurveIdLipSync == null) {\n      this._modelCurveIdLipSync =\n        CubismFramework.getIdManager().getId(EffectNameLipSync);\n    }\n\n    if (this._modelCurveIdOpacity == null) {\n      this._modelCurveIdOpacity =\n        CubismFramework.getIdManager().getId(IdNameOpacity);\n    }\n\n    let timeOffsetSeconds: number =\n      userTimeSeconds - motionQueueEntry.getStartTime();\n\n    if (timeOffsetSeconds < 0.0) {\n      timeOffsetSeconds = 0.0; // エラー回避\n    }\n\n    let lipSyncValue: number = Number.MAX_VALUE;\n    let eyeBlinkValue: number = Number.MAX_VALUE;\n\n    //まばたき、リップシンクのうちモーションの適用を検出するためのビット（maxFlagCount個まで\n    const MaxTargetSize = 64;\n    let lipSyncFlags = 0;\n    let eyeBlinkFlags = 0;\n\n    //瞬き、リップシンクのターゲット数が上限を超えている場合\n    if (this._eyeBlinkParameterIds.getSize() > MaxTargetSize) {\n      CubismLogDebug(\n        'too many eye blink targets : {0}',\n        this._eyeBlinkParameterIds.getSize()\n      );\n    }\n    if (this._lipSyncParameterIds.getSize() > MaxTargetSize) {\n      CubismLogDebug(\n        'too many lip sync targets : {0}',\n        this._lipSyncParameterIds.getSize()\n      );\n    }\n\n    const tmpFadeIn: number =\n      this._fadeInSeconds <= 0.0\n        ? 1.0\n        : CubismMath.getEasingSine(\n            (userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n              this._fadeInSeconds\n          );\n\n    const tmpFadeOut: number =\n      this._fadeOutSeconds <= 0.0 || motionQueueEntry.getEndTime() < 0.0\n        ? 1.0\n        : CubismMath.getEasingSine(\n            (motionQueueEntry.getEndTime() - userTimeSeconds) /\n              this._fadeOutSeconds\n          );\n    let value: number;\n    let c: number, parameterIndex: number;\n\n    // 'Repeat' time as necessary.\n    let time: number = timeOffsetSeconds;\n\n    if (this._isLoop) {\n      while (time > this._motionData.duration) {\n        time -= this._motionData.duration;\n      }\n    }\n\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\n\n    // Evaluate model curves.\n    for (\n      c = 0;\n      c < this._motionData.curveCount &&\n      curves.at(c).type ==\n        CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n      ++c\n    ) {\n      // Evaluate curve and call handler.\n      value = evaluateCurve(this._motionData, c, time);\n\n      if (curves.at(c).id == this._modelCurveIdEyeBlink) {\n        eyeBlinkValue = value;\n      } else if (curves.at(c).id == this._modelCurveIdLipSync) {\n        lipSyncValue = value;\n      } else if (curves.at(c).id == this._modelCurveIdOpacity) {\n        this._modelOpacity = value;\n        model.setModelOapcity(this.getModelOpacityValue());\n      }\n    }\n\n    let parameterMotionCurveCount = 0;\n\n    for (\n      ;\n      c < this._motionData.curveCount &&\n      curves.at(c).type ==\n        CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\n      ++c\n    ) {\n      parameterMotionCurveCount++;\n\n      // Find parameter index.\n      parameterIndex = model.getParameterIndex(curves.at(c).id);\n\n      // Skip curve evaluation if no value in sink.\n      if (parameterIndex == -1) {\n        continue;\n      }\n\n      const sourceValue: number =\n        model.getParameterValueByIndex(parameterIndex);\n\n      // Evaluate curve and apply value.\n      value = evaluateCurve(this._motionData, c, time);\n\n      if (eyeBlinkValue != Number.MAX_VALUE) {\n        for (\n          let i = 0;\n          i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize;\n          ++i\n        ) {\n          if (this._eyeBlinkParameterIds.at(i) == curves.at(c).id) {\n            value *= eyeBlinkValue;\n            eyeBlinkFlags |= 1 << i;\n            break;\n          }\n        }\n      }\n\n      if (lipSyncValue != Number.MAX_VALUE) {\n        for (\n          let i = 0;\n          i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize;\n          ++i\n        ) {\n          if (this._lipSyncParameterIds.at(i) == curves.at(c).id) {\n            value += lipSyncValue;\n            lipSyncFlags |= 1 << i;\n            break;\n          }\n        }\n      }\n\n      let v: number;\n\n      // パラメータごとのフェード\n      if (curves.at(c).fadeInTime < 0.0 && curves.at(c).fadeOutTime < 0.0) {\n        // モーションのフェードを適用\n        v = sourceValue + (value - sourceValue) * fadeWeight;\n      } else {\n        // パラメータに対してフェードインかフェードアウトが設定してある場合はそちらを適用\n        let fin: number;\n        let fout: number;\n\n        if (curves.at(c).fadeInTime < 0.0) {\n          fin = tmpFadeIn;\n        } else {\n          fin =\n            curves.at(c).fadeInTime == 0.0\n              ? 1.0\n              : CubismMath.getEasingSine(\n                  (userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\n                    curves.at(c).fadeInTime\n                );\n        }\n\n        if (curves.at(c).fadeOutTime < 0.0) {\n          fout = tmpFadeOut;\n        } else {\n          fout =\n            curves.at(c).fadeOutTime == 0.0 ||\n            motionQueueEntry.getEndTime() < 0.0\n              ? 1.0\n              : CubismMath.getEasingSine(\n                  (motionQueueEntry.getEndTime() - userTimeSeconds) /\n                    curves.at(c).fadeOutTime\n                );\n        }\n\n        const paramWeight: number = this._weight * fin * fout;\n\n        // パラメータごとのフェードを適用\n        v = sourceValue + (value - sourceValue) * paramWeight;\n      }\n\n      model.setParameterValueByIndex(parameterIndex, v, 1.0);\n    }\n\n    {\n      if (eyeBlinkValue != Number.MAX_VALUE) {\n        for (\n          let i = 0;\n          i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize;\n          ++i\n        ) {\n          const sourceValue: number = model.getParameterValueById(\n            this._eyeBlinkParameterIds.at(i)\n          );\n\n          // モーションでの上書きがあった時にはまばたきは適用しない\n          if ((eyeBlinkFlags >> i) & 0x01) {\n            continue;\n          }\n\n          const v: number =\n            sourceValue + (eyeBlinkValue - sourceValue) * fadeWeight;\n\n          model.setParameterValueById(this._eyeBlinkParameterIds.at(i), v);\n        }\n      }\n\n      if (lipSyncValue != Number.MAX_VALUE) {\n        for (\n          let i = 0;\n          i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize;\n          ++i\n        ) {\n          const sourceValue: number = model.getParameterValueById(\n            this._lipSyncParameterIds.at(i)\n          );\n\n          // モーションでの上書きがあった時にはリップシンクは適用しない\n          if ((lipSyncFlags >> i) & 0x01) {\n            continue;\n          }\n\n          const v: number =\n            sourceValue + (lipSyncValue - sourceValue) * fadeWeight;\n\n          model.setParameterValueById(this._lipSyncParameterIds.at(i), v);\n        }\n      }\n    }\n\n    for (\n      ;\n      c < this._motionData.curveCount &&\n      curves.at(c).type ==\n        CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\n      ++c\n    ) {\n      // Find parameter index.\n      parameterIndex = model.getParameterIndex(curves.at(c).id);\n\n      // Skip curve evaluation if no value in sink.\n      if (parameterIndex == -1) {\n        continue;\n      }\n\n      // Evaluate curve and apply value.\n      value = evaluateCurve(this._motionData, c, time);\n\n      model.setParameterValueByIndex(parameterIndex, value);\n    }\n\n    if (timeOffsetSeconds >= this._motionData.duration) {\n      if (this._isLoop) {\n        motionQueueEntry.setStartTime(userTimeSeconds); // 最初の状態へ\n        if (this._isLoopFadeIn) {\n          // ループ内でループ用フェードインが有効の時は、フェードイン設定し直し\n          motionQueueEntry.setFadeInStartTime(userTimeSeconds);\n        }\n      } else {\n        if (this._onFinishedMotion) {\n          this._onFinishedMotion(this);\n        }\n\n        motionQueueEntry.setIsFinished(true);\n      }\n    }\n    this._lastWeight = fadeWeight;\n  }\n\n  /**\n   * ループ情報の設定\n   * @param loop ループ情報\n   */\n  public setIsLoop(loop: boolean): void {\n    this._isLoop = loop;\n  }\n\n  /**\n   * ループ情報の取得\n   * @return true ループする\n   * @return false ループしない\n   */\n  public isLoop(): boolean {\n    return this._isLoop;\n  }\n\n  /**\n   * ループ時のフェードイン情報の設定\n   * @param loopFadeIn  ループ時のフェードイン情報\n   */\n  public setIsLoopFadeIn(loopFadeIn: boolean): void {\n    this._isLoopFadeIn = loopFadeIn;\n  }\n\n  /**\n   * ループ時のフェードイン情報の取得\n   *\n   * @return  true    する\n   * @return  false   しない\n   */\n  public isLoopFadeIn(): boolean {\n    return this._isLoopFadeIn;\n  }\n\n  /**\n   * モーションの長さを取得する。\n   *\n   * @return  モーションの長さ[秒]\n   */\n  public getDuration(): number {\n    return this._isLoop ? -1.0 : this._loopDurationSeconds;\n  }\n\n  /**\n   * モーションのループ時の長さを取得する。\n   *\n   * @return  モーションのループ時の長さ[秒]\n   */\n  public getLoopDuration(): number {\n    return this._loopDurationSeconds;\n  }\n\n  /**\n   * パラメータに対するフェードインの時間を設定する。\n   *\n   * @param parameterId     パラメータID\n   * @param value           フェードインにかかる時間[秒]\n   */\n  public setParameterFadeInTime(\n    parameterId: CubismIdHandle,\n    value: number\n  ): void {\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\n\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves.at(i).id) {\n        curves.at(i).fadeInTime = value;\n        return;\n      }\n    }\n  }\n\n  /**\n   * パラメータに対するフェードアウトの時間の設定\n   * @param parameterId     パラメータID\n   * @param value           フェードアウトにかかる時間[秒]\n   */\n  public setParameterFadeOutTime(\n    parameterId: CubismIdHandle,\n    value: number\n  ): void {\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\n\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves.at(i).id) {\n        curves.at(i).fadeOutTime = value;\n        return;\n      }\n    }\n  }\n\n  /**\n   * パラメータに対するフェードインの時間の取得\n   * @param    parameterId     パラメータID\n   * @return   フェードインにかかる時間[秒]\n   */\n  public getParameterFadeInTime(parameterId: CubismIdHandle): number {\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\n\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves.at(i).id) {\n        return curves.at(i).fadeInTime;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * パラメータに対するフェードアウトの時間を取得\n   *\n   * @param   parameterId     パラメータID\n   * @return   フェードアウトにかかる時間[秒]\n   */\n  public getParameterFadeOutTime(parameterId: CubismIdHandle): number {\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\n\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\n      if (parameterId == curves.at(i).id) {\n        return curves.at(i).fadeOutTime;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * 自動エフェクトがかかっているパラメータIDリストの設定\n   * @param eyeBlinkParameterIds    自動まばたきがかかっているパラメータIDのリスト\n   * @param lipSyncParameterIds     リップシンクがかかっているパラメータIDのリスト\n   */\n  public setEffectIds(\n    eyeBlinkParameterIds: csmVector<CubismIdHandle>,\n    lipSyncParameterIds: csmVector<CubismIdHandle>\n  ): void {\n    this._eyeBlinkParameterIds = eyeBlinkParameterIds;\n    this._lipSyncParameterIds = lipSyncParameterIds;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n    this._sourceFrameRate = 30.0;\n    this._loopDurationSeconds = -1.0;\n    this._isLoop = false; // trueから false へデフォルトを変更\n    this._isLoopFadeIn = true; // ループ時にフェードインが有効かどうかのフラグ\n    this._lastWeight = 0.0;\n    this._motionData = null;\n    this._modelCurveIdEyeBlink = null;\n    this._modelCurveIdLipSync = null;\n    this._modelCurveIdOpacity = null;\n    this._eyeBlinkParameterIds = null;\n    this._lipSyncParameterIds = null;\n    this._modelOpacity = 1.0;\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    this._motionData = void 0;\n    this._motionData = null;\n  }\n\n  /**\n   * motion3.jsonをパースする。\n   *\n   * @param motionJson  motion3.jsonが読み込まれているバッファ\n   * @param size        バッファのサイズ\n   */\n  public parse(motionJson: ArrayBuffer, size: number): void {\n    this._motionData = new CubismMotionData();\n\n    let json: CubismMotionJson = new CubismMotionJson(motionJson, size);\n\n    this._motionData.duration = json.getMotionDuration();\n    this._motionData.loop = json.isMotionLoop();\n    this._motionData.curveCount = json.getMotionCurveCount();\n    this._motionData.fps = json.getMotionFps();\n    this._motionData.eventCount = json.getEventCount();\n\n    const areBeziersRestructed: boolean = json.getEvaluationOptionFlag(\n      EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted\n    );\n\n    if (json.isExistMotionFadeInTime()) {\n      this._fadeInSeconds =\n        json.getMotionFadeInTime() < 0.0 ? 1.0 : json.getMotionFadeInTime();\n    } else {\n      this._fadeInSeconds = 1.0;\n    }\n\n    if (json.isExistMotionFadeOutTime()) {\n      this._fadeOutSeconds =\n        json.getMotionFadeOutTime() < 0.0 ? 1.0 : json.getMotionFadeOutTime();\n    } else {\n      this._fadeOutSeconds = 1.0;\n    }\n\n    this._motionData.curves.updateSize(\n      this._motionData.curveCount,\n      CubismMotionCurve,\n      true\n    );\n    this._motionData.segments.updateSize(\n      json.getMotionTotalSegmentCount(),\n      CubismMotionSegment,\n      true\n    );\n    this._motionData.points.updateSize(\n      json.getMotionTotalPointCount(),\n      CubismMotionPoint,\n      true\n    );\n    this._motionData.events.updateSize(\n      this._motionData.eventCount,\n      CubismMotionEvent,\n      true\n    );\n\n    let totalPointCount = 0;\n    let totalSegmentCount = 0;\n\n    // Curves\n    for (\n      let curveCount = 0;\n      curveCount < this._motionData.curveCount;\n      ++curveCount\n    ) {\n      if (json.getMotionCurveTarget(curveCount) == TargetNameModel) {\n        this._motionData.curves.at(curveCount).type =\n          CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n      } else if (json.getMotionCurveTarget(curveCount) == TargetNameParameter) {\n        this._motionData.curves.at(curveCount).type =\n          CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\n      } else if (\n        json.getMotionCurveTarget(curveCount) == TargetNamePartOpacity\n      ) {\n        this._motionData.curves.at(curveCount).type =\n          CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\n      } else {\n        CubismLogWarning(\n          'Warning : Unable to get segment type from Curve! The number of \"CurveCount\" may be incorrect!'\n        );\n      }\n\n      this._motionData.curves.at(curveCount).id =\n        json.getMotionCurveId(curveCount);\n\n      this._motionData.curves.at(curveCount).baseSegmentIndex =\n        totalSegmentCount;\n\n      this._motionData.curves.at(curveCount).fadeInTime =\n        json.isExistMotionCurveFadeInTime(curveCount)\n          ? json.getMotionCurveFadeInTime(curveCount)\n          : -1.0;\n      this._motionData.curves.at(curveCount).fadeOutTime =\n        json.isExistMotionCurveFadeOutTime(curveCount)\n          ? json.getMotionCurveFadeOutTime(curveCount)\n          : -1.0;\n\n      // Segments\n      for (\n        let segmentPosition = 0;\n        segmentPosition < json.getMotionCurveSegmentCount(curveCount);\n\n      ) {\n        if (segmentPosition == 0) {\n          this._motionData.segments.at(totalSegmentCount).basePointIndex =\n            totalPointCount;\n\n          this._motionData.points.at(totalPointCount).time =\n            json.getMotionCurveSegment(curveCount, segmentPosition);\n          this._motionData.points.at(totalPointCount).value =\n            json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n\n          totalPointCount += 1;\n          segmentPosition += 2;\n        } else {\n          this._motionData.segments.at(totalSegmentCount).basePointIndex =\n            totalPointCount - 1;\n        }\n\n        const segment: number = json.getMotionCurveSegment(\n          curveCount,\n          segmentPosition\n        );\n        switch (segment) {\n          case CubismMotionSegmentType.CubismMotionSegmentType_Linear: {\n            this._motionData.segments.at(totalSegmentCount).segmentType =\n              CubismMotionSegmentType.CubismMotionSegmentType_Linear;\n            this._motionData.segments.at(totalSegmentCount).evaluate =\n              linearEvaluate;\n\n            this._motionData.points.at(totalPointCount).time =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n            this._motionData.points.at(totalPointCount).value =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n\n            totalPointCount += 1;\n            segmentPosition += 3;\n\n            break;\n          }\n          case CubismMotionSegmentType.CubismMotionSegmentType_Bezier: {\n            this._motionData.segments.at(totalSegmentCount).segmentType =\n              CubismMotionSegmentType.CubismMotionSegmentType_Bezier;\n\n            if (areBeziersRestructed || UseOldBeziersCurveMotion) {\n              this._motionData.segments.at(totalSegmentCount).evaluate =\n                bezierEvaluate;\n            } else {\n              this._motionData.segments.at(totalSegmentCount).evaluate =\n                bezierEvaluateCardanoInterpretation;\n            }\n\n            this._motionData.points.at(totalPointCount).time =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n            this._motionData.points.at(totalPointCount).value =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n\n            this._motionData.points.at(totalPointCount + 1).time =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 3);\n            this._motionData.points.at(totalPointCount + 1).value =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 4);\n\n            this._motionData.points.at(totalPointCount + 2).time =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 5);\n            this._motionData.points.at(totalPointCount + 2).value =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 6);\n\n            totalPointCount += 3;\n            segmentPosition += 7;\n\n            break;\n          }\n\n          case CubismMotionSegmentType.CubismMotionSegmentType_Stepped: {\n            this._motionData.segments.at(totalSegmentCount).segmentType =\n              CubismMotionSegmentType.CubismMotionSegmentType_Stepped;\n            this._motionData.segments.at(totalSegmentCount).evaluate =\n              steppedEvaluate;\n\n            this._motionData.points.at(totalPointCount).time =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n            this._motionData.points.at(totalPointCount).value =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n\n            totalPointCount += 1;\n            segmentPosition += 3;\n\n            break;\n          }\n\n          case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped: {\n            this._motionData.segments.at(totalSegmentCount).segmentType =\n              CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;\n            this._motionData.segments.at(totalSegmentCount).evaluate =\n              inverseSteppedEvaluate;\n\n            this._motionData.points.at(totalPointCount).time =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\n            this._motionData.points.at(totalPointCount).value =\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\n\n            totalPointCount += 1;\n            segmentPosition += 3;\n\n            break;\n          }\n          default: {\n            CSM_ASSERT(0);\n            break;\n          }\n        }\n\n        ++this._motionData.curves.at(curveCount).segmentCount;\n        ++totalSegmentCount;\n      }\n    }\n\n    for (\n      let userdatacount = 0;\n      userdatacount < json.getEventCount();\n      ++userdatacount\n    ) {\n      this._motionData.events.at(userdatacount).fireTime =\n        json.getEventTime(userdatacount);\n      this._motionData.events.at(userdatacount).value =\n        json.getEventValue(userdatacount);\n    }\n\n    json.release();\n    json = void 0;\n    json = null;\n  }\n\n  /**\n   * モデルのパラメータ更新\n   *\n   * イベント発火のチェック。\n   * 入力する時間は呼ばれるモーションタイミングを０とした秒数で行う。\n   *\n   * @param beforeCheckTimeSeconds   前回のイベントチェック時間[秒]\n   * @param motionTimeSeconds        今回の再生時間[秒]\n   */\n  public getFiredEvent(\n    beforeCheckTimeSeconds: number,\n    motionTimeSeconds: number\n  ): csmVector<csmString> {\n    this._firedEventValues.updateSize(0);\n\n    // イベントの発火チェック\n    for (let u = 0; u < this._motionData.eventCount; ++u) {\n      if (\n        this._motionData.events.at(u).fireTime > beforeCheckTimeSeconds &&\n        this._motionData.events.at(u).fireTime <= motionTimeSeconds\n      ) {\n        this._firedEventValues.pushBack(\n          new csmString(this._motionData.events.at(u).value.s)\n        );\n      }\n    }\n\n    return this._firedEventValues;\n  }\n\n  /**\n   * 透明度のカーブが存在するかどうかを確認する\n   *\n   * @returns true  -> キーが存在する\n   *          false -> キーが存在しない\n   */\n  public isExistModelOpacity(): boolean {\n    for (let i = 0; i < this._motionData.curveCount; i++) {\n      const curve: CubismMotionCurve = this._motionData.curves.at(i);\n\n      if (curve.type != CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n        continue;\n      }\n\n      if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * 透明度のカーブのインデックスを返す\n   *\n   * @returns success:透明度のカーブのインデックス\n   */\n  public getModelOpacityIndex(): number {\n    if (this.isExistModelOpacity()) {\n      for (let i = 0; i < this._motionData.curveCount; i++) {\n        const curve: CubismMotionCurve = this._motionData.curves.at(i);\n\n        if (\n          curve.type != CubismMotionCurveTarget.CubismMotionCurveTarget_Model\n        ) {\n          continue;\n        }\n\n        if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * 透明度のIdを返す\n   *\n   * @param index モーションカーブのインデックス\n   * @returns success:透明度のカーブのインデックス\n   */\n  public getModelOpacityId(index: number): CubismIdHandle {\n    if (index != -1) {\n      const curve: CubismMotionCurve = this._motionData.curves.at(index);\n\n      if (curve.type == CubismMotionCurveTarget.CubismMotionCurveTarget_Model) {\n        if (curve.id.getString().s.localeCompare(IdNameOpacity) == 0) {\n          return CubismFramework.getIdManager().getId(curve.id.getString().s);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * 現在時間の透明度の値を返す\n   *\n   * @returns success:モーションの当該時間におけるOpacityの値\n   */\n  public getModelOpacityValue(): number {\n    return this._modelOpacity;\n  }\n\n  public _sourceFrameRate: number; // ロードしたファイルのFPS。記述が無ければデフォルト値15fpsとなる\n  public _loopDurationSeconds: number; // mtnファイルで定義される一連のモーションの長さ\n  public _isLoop: boolean; // ループするか?\n  public _isLoopFadeIn: boolean; // ループ時にフェードインが有効かどうかのフラグ。初期値では有効。\n  public _lastWeight: number; // 最後に設定された重み\n\n  public _motionData: CubismMotionData; // 実際のモーションデータ本体\n\n  public _eyeBlinkParameterIds: csmVector<CubismIdHandle>; // 自動まばたきを適用するパラメータIDハンドルのリスト。  モデル（モデルセッティング）とパラメータを対応付ける。\n  public _lipSyncParameterIds: csmVector<CubismIdHandle>; // リップシンクを適用するパラメータIDハンドルのリスト。  モデル（モデルセッティング）とパラメータを対応付ける。\n\n  public _modelCurveIdEyeBlink: CubismIdHandle; // モデルが持つ自動まばたき用パラメータIDのハンドル。  モデルとモーションを対応付ける。\n  public _modelCurveIdLipSync: CubismIdHandle; // モデルが持つリップシンク用パラメータIDのハンドル。  モデルとモーションを対応付ける。\n  public _modelCurveIdOpacity: CubismIdHandle; // モデルが持つ不透明度用パラメータIDのハンドル。  モデルとモーションを対応付ける。\n\n  public _modelOpacity: number; // モーションから取得した不透明度\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmotion';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMotion = $.CubismMotion;\n  export type CubismMotion = $.CubismMotion;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { csmString } from '../type/csmstring';\nimport { csmVector } from '../type/csmvector';\n\n/**\n * @brief モーションカーブの種類\n *\n * モーションカーブの種類。\n */\nexport enum CubismMotionCurveTarget {\n  CubismMotionCurveTarget_Model, // モデルに対して\n  CubismMotionCurveTarget_Parameter, // パラメータに対して\n  CubismMotionCurveTarget_PartOpacity, // パーツの不透明度に対して\n}\n\n/**\n * @brief モーションカーブのセグメントの種類\n *\n * モーションカーブのセグメントの種類。\n */\nexport enum CubismMotionSegmentType {\n  CubismMotionSegmentType_Linear = 0, // リニア\n  CubismMotionSegmentType_Bezier = 1, // ベジェ曲線\n  CubismMotionSegmentType_Stepped = 2, // ステップ\n  CubismMotionSegmentType_InverseStepped = 3, // インバースステップ\n}\n\n/**\n * @brief モーションカーブの制御点\n *\n * モーションカーブの制御点。\n */\nexport class CubismMotionPoint {\n  time = 0.0; // 時間[秒]\n  value = 0.0; // 値\n}\n\n/**\n * モーションカーブのセグメントの評価関数\n *\n * @param   points      モーションカーブの制御点リスト\n * @param   time        評価する時間[秒]\n */\nexport interface csmMotionSegmentEvaluationFunction {\n  (points: CubismMotionPoint[], time: number): number;\n}\n\n/**\n * @brief モーションカーブのセグメント\n *\n * モーションカーブのセグメント。\n */\nexport class CubismMotionSegment {\n  /**\n   * @brief コンストラクタ\n   *\n   * コンストラクタ。\n   */\n  public constructor() {\n    this.evaluate = null;\n    this.basePointIndex = 0;\n    this.segmentType = 0;\n  }\n\n  evaluate: csmMotionSegmentEvaluationFunction; // 使用する評価関数\n  basePointIndex: number; // 最初のセグメントへのインデックス\n  segmentType: number; // セグメントの種類\n}\n\n/**\n * @brief モーションカーブ\n *\n * モーションカーブ。\n */\nexport class CubismMotionCurve {\n  public constructor() {\n    this.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\n    this.segmentCount = 0;\n    this.baseSegmentIndex = 0;\n    this.fadeInTime = 0.0;\n    this.fadeOutTime = 0.0;\n  }\n\n  type: CubismMotionCurveTarget; // カーブの種類\n  id: CubismIdHandle; // カーブのID\n  segmentCount: number; // セグメントの個数\n  baseSegmentIndex: number; // 最初のセグメントのインデックス\n  fadeInTime: number; // フェードインにかかる時間[秒]\n  fadeOutTime: number; // フェードアウトにかかる時間[秒]\n}\n\n/**\n * イベント。\n */\nexport class CubismMotionEvent {\n  fireTime = 0.0;\n  value: csmString;\n}\n\n/**\n * @brief モーションデータ\n *\n * モーションデータ。\n */\nexport class CubismMotionData {\n  public constructor() {\n    this.duration = 0.0;\n    this.loop = false;\n    this.curveCount = 0;\n    this.eventCount = 0;\n    this.fps = 0.0;\n\n    this.curves = new csmVector<CubismMotionCurve>();\n    this.segments = new csmVector<CubismMotionSegment>();\n    this.points = new csmVector<CubismMotionPoint>();\n    this.events = new csmVector<CubismMotionEvent>();\n  }\n\n  duration: number; // モーションの長さ[秒]\n  loop: boolean; // ループするかどうか\n  curveCount: number; // カーブの個数\n  eventCount: number; // UserDataの個数\n  fps: number; // フレームレート\n  curves: csmVector<CubismMotionCurve>; // カーブのリスト\n  segments: csmVector<CubismMotionSegment>; // セグメントのリスト\n  points: csmVector<CubismMotionPoint>; // ポイントのリスト\n  events: csmVector<CubismMotionEvent>; // イベントのリスト\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmotioninternal';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMotionCurve = $.CubismMotionCurve;\n  export type CubismMotionCurve = $.CubismMotionCurve;\n  export const CubismMotionCurveTarget = $.CubismMotionCurveTarget;\n  export type CubismMotionCurveTarget = $.CubismMotionCurveTarget;\n  export const CubismMotionData = $.CubismMotionData;\n  export type CubismMotionData = $.CubismMotionData;\n  export const CubismMotionEvent = $.CubismMotionEvent;\n  export type CubismMotionEvent = $.CubismMotionEvent;\n  export const CubismMotionPoint = $.CubismMotionPoint;\n  export type CubismMotionPoint = $.CubismMotionPoint;\n  export const CubismMotionSegment = $.CubismMotionSegment;\n  export type CubismMotionSegment = $.CubismMotionSegment;\n  export const CubismMotionSegmentType = $.CubismMotionSegmentType;\n  export type CubismMotionSegmentType = $.CubismMotionSegmentType;\n  export type csmMotionSegmentEvaluationFunction =\n    $.csmMotionSegmentEvaluationFunction;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport { csmString } from '../type/csmstring';\nimport { CubismJson, JsonMap } from '../utils/cubismjson';\n\n// JSON keys\nconst Meta = 'Meta';\nconst Duration = 'Duration';\nconst Loop = 'Loop';\nconst AreBeziersRestricted = 'AreBeziersRestricted';\nconst CurveCount = 'CurveCount';\nconst Fps = 'Fps';\nconst TotalSegmentCount = 'TotalSegmentCount';\nconst TotalPointCount = 'TotalPointCount';\nconst Curves = 'Curves';\nconst Target = 'Target';\nconst Id = 'Id';\nconst FadeInTime = 'FadeInTime';\nconst FadeOutTime = 'FadeOutTime';\nconst Segments = 'Segments';\nconst UserData = 'UserData';\nconst UserDataCount = 'UserDataCount';\nconst TotalUserDataSize = 'TotalUserDataSize';\nconst Time = 'Time';\nconst Value = 'Value';\n\n/**\n * motion3.jsonのコンテナ。\n */\nexport class CubismMotionJson {\n  /**\n   * コンストラクタ\n   * @param buffer motion3.jsonが読み込まれているバッファ\n   * @param size バッファのサイズ\n   */\n  public constructor(buffer: ArrayBuffer, size: number) {\n    this._json = CubismJson.create(buffer, size);\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    CubismJson.delete(this._json);\n  }\n\n  /**\n   * モーションの長さを取得する\n   * @return モーションの長さ[秒]\n   */\n  public getMotionDuration(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(Duration)\n      .toFloat();\n  }\n\n  /**\n   * モーションのループ情報の取得\n   * @return true ループする\n   * @return false ループしない\n   */\n  public isMotionLoop(): boolean {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(Loop)\n      .toBoolean();\n  }\n\n  public getEvaluationOptionFlag(flagType: number): boolean {\n    if (\n      EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted == flagType\n    ) {\n      return this._json\n        .getRoot()\n        .getValueByString(Meta)\n        .getValueByString(AreBeziersRestricted)\n        .toBoolean();\n    }\n\n    return false;\n  }\n\n  /**\n   * モーションカーブの個数の取得\n   * @return モーションカーブの個数\n   */\n  public getMotionCurveCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(CurveCount)\n      .toInt();\n  }\n\n  /**\n   * モーションのフレームレートの取得\n   * @return フレームレート[FPS]\n   */\n  public getMotionFps(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(Fps)\n      .toFloat();\n  }\n\n  /**\n   * モーションのセグメントの総合計の取得\n   * @return モーションのセグメントの取得\n   */\n  public getMotionTotalSegmentCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(TotalSegmentCount)\n      .toInt();\n  }\n\n  /**\n   * モーションのカーブの制御店の総合計の取得\n   * @return モーションのカーブの制御点の総合計\n   */\n  public getMotionTotalPointCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(TotalPointCount)\n      .toInt();\n  }\n\n  /**\n   * モーションのフェードイン時間の存在\n   * @return true 存在する\n   * @return false 存在しない\n   */\n  public isExistMotionFadeInTime(): boolean {\n    return !this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(FadeInTime)\n      .isNull();\n  }\n\n  /**\n   * モーションのフェードアウト時間の存在\n   * @return true 存在する\n   * @return false 存在しない\n   */\n  public isExistMotionFadeOutTime(): boolean {\n    return !this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(FadeOutTime)\n      .isNull();\n  }\n\n  /**\n   * モーションのフェードイン時間の取得\n   * @return フェードイン時間[秒]\n   */\n  public getMotionFadeInTime(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(FadeInTime)\n      .toFloat();\n  }\n\n  /**\n   * モーションのフェードアウト時間の取得\n   * @return フェードアウト時間[秒]\n   */\n  public getMotionFadeOutTime(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(FadeOutTime)\n      .toFloat();\n  }\n\n  /**\n   * モーションのカーブの種類の取得\n   * @param curveIndex カーブのインデックス\n   * @return カーブの種類\n   */\n  public getMotionCurveTarget(curveIndex: number): string {\n    return this._json\n      .getRoot()\n      .getValueByString(Curves)\n      .getValueByIndex(curveIndex)\n      .getValueByString(Target)\n      .getRawString();\n  }\n\n  /**\n   * モーションのカーブのIDの取得\n   * @param curveIndex カーブのインデックス\n   * @return カーブのID\n   */\n  public getMotionCurveId(curveIndex: number): CubismIdHandle {\n    return CubismFramework.getIdManager().getId(\n      this._json\n        .getRoot()\n        .getValueByString(Curves)\n        .getValueByIndex(curveIndex)\n        .getValueByString(Id)\n        .getRawString()\n    );\n  }\n\n  /**\n   * モーションのカーブのフェードイン時間の存在\n   * @param curveIndex カーブのインデックス\n   * @return true 存在する\n   * @return false 存在しない\n   */\n  public isExistMotionCurveFadeInTime(curveIndex: number): boolean {\n    return !this._json\n      .getRoot()\n      .getValueByString(Curves)\n      .getValueByIndex(curveIndex)\n      .getValueByString(FadeInTime)\n      .isNull();\n  }\n\n  /**\n   * モーションのカーブのフェードアウト時間の存在\n   * @param curveIndex カーブのインデックス\n   * @return true 存在する\n   * @return false 存在しない\n   */\n  public isExistMotionCurveFadeOutTime(curveIndex: number): boolean {\n    return !this._json\n      .getRoot()\n      .getValueByString(Curves)\n      .getValueByIndex(curveIndex)\n      .getValueByString(FadeOutTime)\n      .isNull();\n  }\n\n  /**\n   * モーションのカーブのフェードイン時間の取得\n   * @param curveIndex カーブのインデックス\n   * @return フェードイン時間[秒]\n   */\n  public getMotionCurveFadeInTime(curveIndex: number): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Curves)\n      .getValueByIndex(curveIndex)\n      .getValueByString(FadeInTime)\n      .toFloat();\n  }\n\n  /**\n   * モーションのカーブのフェードアウト時間の取得\n   * @param curveIndex カーブのインデックス\n   * @return フェードアウト時間[秒]\n   */\n  public getMotionCurveFadeOutTime(curveIndex: number): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Curves)\n      .getValueByIndex(curveIndex)\n      .getValueByString(FadeOutTime)\n      .toFloat();\n  }\n\n  /**\n   * モーションのカーブのセグメントの個数を取得する\n   * @param curveIndex カーブのインデックス\n   * @return モーションのカーブのセグメントの個数\n   */\n  public getMotionCurveSegmentCount(curveIndex: number): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Curves)\n      .getValueByIndex(curveIndex)\n      .getValueByString(Segments)\n      .getVector()\n      .getSize();\n  }\n\n  /**\n   * モーションのカーブのセグメントの値の取得\n   * @param curveIndex カーブのインデックス\n   * @param segmentIndex セグメントのインデックス\n   * @return セグメントの値\n   */\n  public getMotionCurveSegment(\n    curveIndex: number,\n    segmentIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Curves)\n      .getValueByIndex(curveIndex)\n      .getValueByString(Segments)\n      .getValueByIndex(segmentIndex)\n      .toFloat();\n  }\n\n  /**\n   * イベントの個数の取得\n   * @return イベントの個数\n   */\n  public getEventCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(UserDataCount)\n      .toInt();\n  }\n\n  /**\n   *  イベントの総文字数の取得\n   * @return イベントの総文字数\n   */\n  public getTotalEventValueSize(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(TotalUserDataSize)\n      .toInt();\n  }\n\n  /**\n   * イベントの時間の取得\n   * @param userDataIndex イベントのインデックス\n   * @return イベントの時間[秒]\n   */\n  public getEventTime(userDataIndex: number): number {\n    return this._json\n      .getRoot()\n      .getValueByString(UserData)\n      .getValueByIndex(userDataIndex)\n      .getValueByString(Time)\n      .toFloat();\n  }\n\n  /**\n   * イベントの取得\n   * @param userDataIndex イベントのインデックス\n   * @return イベントの文字列\n   */\n  public getEventValue(userDataIndex: number): csmString {\n    return new csmString(\n      this._json\n        .getRoot()\n        .getValueByString(UserData)\n        .getValueByIndex(userDataIndex)\n        .getValueByString(Value)\n        .getRawString()\n    );\n  }\n\n  _json: CubismJson; // motion3.jsonのデータ\n}\n\n/**\n * @brief ベジェカーブの解釈方法のフラグタイプ\n */\nexport enum EvaluationOptionFlag {\n  EvaluationOptionFlag_AreBeziersRistricted = 0, ///< ベジェハンドルの規制状態\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmotionjson';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMotionJson = $.CubismMotionJson;\n  export type CubismMotionJson = $.CubismMotionJson;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismModel } from '../model/cubismmodel';\nimport { ACubismMotion } from './acubismmotion';\nimport {\n  CubismMotionQueueEntryHandle,\n  CubismMotionQueueManager,\n} from './cubismmotionqueuemanager';\n\n/**\n * モーションの管理\n *\n * モーションの管理を行うクラス\n */\nexport class CubismMotionManager extends CubismMotionQueueManager {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n    this._currentPriority = 0;\n    this._reservePriority = 0;\n  }\n\n  /**\n   * 再生中のモーションの優先度の取得\n   * @return  モーションの優先度\n   */\n  public getCurrentPriority(): number {\n    return this._currentPriority;\n  }\n\n  /**\n   * 予約中のモーションの優先度を取得する。\n   * @return  モーションの優先度\n   */\n  public getReservePriority(): number {\n    return this._reservePriority;\n  }\n\n  /**\n   * 予約中のモーションの優先度を設定する。\n   * @param   val     優先度\n   */\n  public setReservePriority(val: number): void {\n    this._reservePriority = val;\n  }\n\n  /**\n   * 優先度を設定してモーションを開始する。\n   *\n   * @param motion          モーション\n   * @param autoDelete      再生が狩猟したモーションのインスタンスを削除するならtrue\n   * @param priority        優先度\n   * @return                開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するIsFinished()の引数で使用する。開始できない時は「-1」\n   */\n  public startMotionPriority(\n    motion: ACubismMotion,\n    autoDelete: boolean,\n    priority: number\n  ): CubismMotionQueueEntryHandle {\n    if (priority == this._reservePriority) {\n      this._reservePriority = 0; // 予約を解除\n    }\n\n    this._currentPriority = priority; // 再生中モーションの優先度を設定\n\n    return super.startMotion(motion, autoDelete, this._userTimeSeconds);\n  }\n\n  /**\n   * モーションを更新して、モデルにパラメータ値を反映する。\n   *\n   * @param model   対象のモデル\n   * @param deltaTimeSeconds    デルタ時間[秒]\n   * @return  true    更新されている\n   * @return  false   更新されていない\n   */\n  public updateMotion(model: CubismModel, deltaTimeSeconds: number): boolean {\n    this._userTimeSeconds += deltaTimeSeconds;\n\n    const updated: boolean = super.doUpdateMotion(model, this._userTimeSeconds);\n\n    if (this.isFinished()) {\n      this._currentPriority = 0; // 再生中のモーションの優先度を解除\n    }\n\n    return updated;\n  }\n\n  /**\n   * モーションを予約する。\n   *\n   * @param   priority    優先度\n   * @return  true    予約できた\n   * @return  false   予約できなかった\n   */\n  public reserveMotion(priority: number): boolean {\n    if (\n      priority <= this._reservePriority ||\n      priority <= this._currentPriority\n    ) {\n      return false;\n    }\n\n    this._reservePriority = priority;\n\n    return true;\n  }\n\n  _currentPriority: number; // 現在再生中のモーションの優先度\n  _reservePriority: number; // 再生予定のモーションの優先度。再生中は0になる。モーションファイルを別スレッドで読み込むときの機能。\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmotionmanager';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMotionManager = $.CubismMotionManager;\n  export type CubismMotionManager = $.CubismMotionManager;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { ACubismMotion } from './acubismmotion';\nimport { CubismMotionQueueEntryHandle } from './cubismmotionqueuemanager';\n\n/**\n * CubismMotionQueueManagerで再生している各モーションの管理クラス。\n */\nexport class CubismMotionQueueEntry {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._autoDelete = false;\n    this._motion = null;\n    this._available = true;\n    this._finished = false;\n    this._started = false;\n    this._startTimeSeconds = -1.0;\n    this._fadeInStartTimeSeconds = 0.0;\n    this._endTimeSeconds = -1.0;\n    this._stateTimeSeconds = 0.0;\n    this._stateWeight = 0.0;\n    this._lastEventCheckSeconds = 0.0;\n    this._motionQueueEntryHandle = this;\n    this._fadeOutSeconds = 0.0;\n    this._isTriggeredFadeOut = false;\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    if (this._autoDelete && this._motion) {\n      ACubismMotion.delete(this._motion); //\n    }\n  }\n\n  /**\n   * フェードアウト時間と開始判定の設定\n   * @param fadeOutSeconds フェードアウトにかかる時間[秒]\n   */\n  public setFadeOut(fadeOutSeconds: number): void {\n    this._fadeOutSeconds = fadeOutSeconds;\n    this._isTriggeredFadeOut = true;\n  }\n\n  /**\n   * フェードアウトの開始\n   * @param fadeOutSeconds フェードアウトにかかる時間[秒]\n   * @param userTimeSeconds デルタ時間の積算値[秒]\n   */\n  public startFadeOut(fadeOutSeconds: number, userTimeSeconds: number): void {\n    const newEndTimeSeconds: number = userTimeSeconds + fadeOutSeconds;\n    this._isTriggeredFadeOut = true;\n\n    if (\n      this._endTimeSeconds < 0.0 ||\n      newEndTimeSeconds < this._endTimeSeconds\n    ) {\n      this._endTimeSeconds = newEndTimeSeconds;\n    }\n  }\n\n  /**\n   * モーションの終了の確認\n   *\n   * @return true モーションが終了した\n   * @return false 終了していない\n   */\n  public isFinished(): boolean {\n    return this._finished;\n  }\n\n  /**\n   * モーションの開始の確認\n   * @return true モーションが開始した\n   * @return false 開始していない\n   */\n  public isStarted(): boolean {\n    return this._started;\n  }\n\n  /**\n   * モーションの開始時刻の取得\n   * @return モーションの開始時刻[秒]\n   */\n  public getStartTime(): number {\n    return this._startTimeSeconds;\n  }\n\n  /**\n   * フェードインの開始時刻の取得\n   * @return フェードインの開始時刻[秒]\n   */\n  public getFadeInStartTime(): number {\n    return this._fadeInStartTimeSeconds;\n  }\n\n  /**\n   * フェードインの終了時刻の取得\n   * @return フェードインの終了時刻の取得\n   */\n  public getEndTime(): number {\n    return this._endTimeSeconds;\n  }\n\n  /**\n   * モーションの開始時刻の設定\n   * @param startTime モーションの開始時刻\n   */\n  public setStartTime(startTime: number): void {\n    this._startTimeSeconds = startTime;\n  }\n\n  /**\n   * フェードインの開始時刻の設定\n   * @param startTime フェードインの開始時刻[秒]\n   */\n  public setFadeInStartTime(startTime: number): void {\n    this._fadeInStartTimeSeconds = startTime;\n  }\n\n  /**\n   * フェードインの終了時刻の設定\n   * @param endTime フェードインの終了時刻[秒]\n   */\n  public setEndTime(endTime: number): void {\n    this._endTimeSeconds = endTime;\n  }\n\n  /**\n   * モーションの終了の設定\n   * @param f trueならモーションの終了\n   */\n  public setIsFinished(f: boolean): void {\n    this._finished = f;\n  }\n\n  /**\n   * モーション開始の設定\n   * @param f trueならモーションの開始\n   */\n  public setIsStarted(f: boolean): void {\n    this._started = f;\n  }\n\n  /**\n   * モーションの有効性の確認\n   * @return true モーションは有効\n   * @return false モーションは無効\n   */\n  public isAvailable(): boolean {\n    return this._available;\n  }\n\n  /**\n   * モーションの有効性の設定\n   * @param v trueならモーションは有効\n   */\n  public setIsAvailable(v: boolean): void {\n    this._available = v;\n  }\n\n  /**\n   * モーションの状態の設定\n   * @param timeSeconds 現在時刻[秒]\n   * @param weight モーション尾重み\n   */\n  public setState(timeSeconds: number, weight: number): void {\n    this._stateTimeSeconds = timeSeconds;\n    this._stateWeight = weight;\n  }\n\n  /**\n   * モーションの現在時刻の取得\n   * @return モーションの現在時刻[秒]\n   */\n  public getStateTime(): number {\n    return this._stateTimeSeconds;\n  }\n\n  /**\n   * モーションの重みの取得\n   * @return モーションの重み\n   */\n  public getStateWeight(): number {\n    return this._stateWeight;\n  }\n\n  /**\n   * 最後にイベントの発火をチェックした時間を取得\n   *\n   * @return 最後にイベントの発火をチェックした時間[秒]\n   */\n  public getLastCheckEventSeconds(): number {\n    return this._lastEventCheckSeconds;\n  }\n\n  /**\n   * 最後にイベントをチェックした時間を設定\n   * @param checkSeconds 最後にイベントをチェックした時間[秒]\n   */\n  public setLastCheckEventSeconds(checkSeconds: number): void {\n    this._lastEventCheckSeconds = checkSeconds;\n  }\n\n  /**\n   * フェードアウト開始判定の取得\n   * @return フェードアウト開始するかどうか\n   */\n  public isTriggeredFadeOut(): boolean {\n    return this._isTriggeredFadeOut;\n  }\n\n  /**\n   * フェードアウト時間の取得\n   * @return フェードアウト時間[秒]\n   */\n  public getFadeOutSeconds(): number {\n    return this._fadeOutSeconds;\n  }\n\n  _autoDelete: boolean; // 自動削除\n  _motion: ACubismMotion; // モーション\n\n  _available: boolean; // 有効化フラグ\n  _finished: boolean; // 終了フラグ\n  _started: boolean; // 開始フラグ\n  _startTimeSeconds: number; // モーション再生開始時刻[秒]\n  _fadeInStartTimeSeconds: number; // フェードイン開始時刻（ループの時は初回のみ）[秒]\n  _endTimeSeconds: number; // 終了予定時刻[秒]\n  _stateTimeSeconds: number; // 時刻の状態[秒]\n  _stateWeight: number; // 重みの状態\n  _lastEventCheckSeconds: number; // 最終のMotion側のチェックした時間\n  private _fadeOutSeconds: number; // フェードアウト時間[秒]\n  private _isTriggeredFadeOut: boolean; // フェードアウト開始フラグ\n\n  _motionQueueEntryHandle: CubismMotionQueueEntryHandle; // インスタンスごとに一意の値を持つ識別番号\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmotionqueueentry';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMotionQueueEntry = $.CubismMotionQueueEntry;\n  export type CubismMotionQueueEntry = $.CubismMotionQueueEntry;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { ACubismMotion } from './acubismmotion';\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\nimport { csmVector, iterator } from '../type/csmvector';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmString } from '../type/csmstring';\n\n/**\n * モーション再生の管理\n *\n * モーション再生の管理用クラス。CubismMotionモーションなどACubismMotionのサブクラスを再生するために使用する。\n *\n * @note 再生中に別のモーションが StartMotion()された場合は、新しいモーションに滑らかに変化し旧モーションは中断する。\n *       表情用モーション、体用モーションなどを分けてモーション化した場合など、\n *       複数のモーションを同時に再生させる場合は、複数のCubismMotionQueueManagerインスタンスを使用する。\n */\nexport class CubismMotionQueueManager {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._userTimeSeconds = 0.0;\n    this._eventCallBack = null;\n    this._eventCustomData = null;\n    this._motions = new csmVector<CubismMotionQueueEntry>();\n  }\n\n  /**\n   * デストラクタ\n   */\n  public release(): void {\n    for (let i = 0; i < this._motions.getSize(); ++i) {\n      if (this._motions.at(i)) {\n        this._motions.at(i).release();\n        this._motions.set(i, null);\n      }\n    }\n\n    this._motions = null;\n  }\n\n  /**\n   * 指定したモーションの開始\n   *\n   * 指定したモーションを開始する。同じタイプのモーションが既にある場合は、既存のモーションに終了フラグを立て、フェードアウトを開始させる。\n   *\n   * @param   motion          開始するモーション\n   * @param   autoDelete      再生が終了したモーションのインスタンスを削除するなら true\n   * @param   userTimeSeconds デルタ時間の積算値[秒]\n   * @return                      開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するIsFinished()の引数で使用する。開始できない時は「-1」\n   */\n  public startMotion(\n    motion: ACubismMotion,\n    autoDelete: boolean,\n    userTimeSeconds: number\n  ): CubismMotionQueueEntryHandle {\n    if (motion == null) {\n      return InvalidMotionQueueEntryHandleValue;\n    }\n\n    let motionQueueEntry: CubismMotionQueueEntry = null;\n\n    // 既にモーションがあれば終了フラグを立てる\n    for (let i = 0; i < this._motions.getSize(); ++i) {\n      motionQueueEntry = this._motions.at(i);\n      if (motionQueueEntry == null) {\n        continue;\n      }\n\n      motionQueueEntry.setFadeOut(motionQueueEntry._motion.getFadeOutTime()); // フェードアウト設定\n    }\n\n    motionQueueEntry = new CubismMotionQueueEntry(); // 終了時に破棄する\n    motionQueueEntry._autoDelete = autoDelete;\n    motionQueueEntry._motion = motion;\n\n    this._motions.pushBack(motionQueueEntry);\n\n    return motionQueueEntry._motionQueueEntryHandle;\n  }\n\n  /**\n   * 全てのモーションの終了の確認\n   * @return true 全て終了している\n   * @return false 終了していない\n   */\n  public isFinished(): boolean {\n    // ------- 処理を行う -------\n    // 既にモーションがあれば終了フラグを立てる\n\n    for (\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\n      ite.notEqual(this._motions.end());\n\n    ) {\n      let motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\n\n      if (motionQueueEntry == null) {\n        ite = this._motions.erase(ite); // 削除\n        continue;\n      }\n\n      const motion: ACubismMotion = motionQueueEntry._motion;\n\n      if (motion == null) {\n        motionQueueEntry.release();\n        motionQueueEntry = null;\n        ite = this._motions.erase(ite); // 削除\n        continue;\n      }\n\n      // ----- 終了済みの処理があれば削除する ------\n      if (!motionQueueEntry.isFinished()) {\n        return false;\n      } else {\n        ite.preIncrement();\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * 指定したモーションの終了の確認\n   * @param motionQueueEntryNumber モーションの識別番号\n   * @return true 全て終了している\n   * @return false 終了していない\n   */\n  public isFinishedByHandle(\n    motionQueueEntryNumber: CubismMotionQueueEntryHandle\n  ): boolean {\n    for (\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\n      ite.notEqual(this._motions.end());\n      ite.increment()\n    ) {\n      const motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\n\n      if (motionQueueEntry == null) {\n        continue;\n      }\n\n      if (\n        motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber &&\n        !motionQueueEntry.isFinished()\n      ) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * 全てのモーションを停止する\n   */\n  public stopAllMotions(): void {\n    // ------- 処理を行う -------\n    // 既にモーションがあれば終了フラグを立てる\n\n    for (\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\n      ite.notEqual(this._motions.end());\n\n    ) {\n      let motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\n\n      if (motionQueueEntry == null) {\n        ite = this._motions.erase(ite);\n\n        continue;\n      }\n\n      // ----- 終了済みの処理があれば削除する ------\n      motionQueueEntry.release();\n      motionQueueEntry = null;\n      ite = this._motions.erase(ite); // 削除\n    }\n  }\n\n  /**\n       * 指定したCubismMotionQueueEntryの取得\n\n        * @param   motionQueueEntryNumber  モーションの識別番号\n        * @return  指定したCubismMotionQueueEntry\n        * @return  null   見つからなかった\n        */\n  public getCubismMotionQueueEntry(\n    motionQueueEntryNumber: any\n  ): CubismMotionQueueEntry {\n    //------- 処理を行う -------\n    for (\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\n      ite.notEqual(this._motions.end());\n      ite.preIncrement()\n    ) {\n      const motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\n\n      if (motionQueueEntry == null) {\n        continue;\n      }\n\n      if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber) {\n        return motionQueueEntry;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * イベントを受け取るCallbackの登録\n   *\n   * @param callback コールバック関数\n   * @param customData コールバックに返されるデータ\n   */\n  public setEventCallback(\n    callback: CubismMotionEventFunction,\n    customData: any = null\n  ): void {\n    this._eventCallBack = callback;\n    this._eventCustomData = customData;\n  }\n\n  /**\n   * モーションを更新して、モデルにパラメータ値を反映する。\n   *\n   * @param   model   対象のモデル\n   * @param   userTimeSeconds   デルタ時間の積算値[秒]\n   * @return  true    モデルへパラメータ値の反映あり\n   * @return  false   モデルへパラメータ値の反映なし(モーションの変化なし)\n   */\n  public doUpdateMotion(model: CubismModel, userTimeSeconds: number): boolean {\n    let updated = false;\n\n    // ------- 処理を行う --------\n    // 既にモーションがあれば終了フラグを立てる\n\n    for (\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\n      ite.notEqual(this._motions.end());\n\n    ) {\n      let motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\n\n      if (motionQueueEntry == null) {\n        ite = this._motions.erase(ite); // 削除\n        continue;\n      }\n\n      const motion: ACubismMotion = motionQueueEntry._motion;\n\n      if (motion == null) {\n        motionQueueEntry.release();\n        motionQueueEntry = null;\n        ite = this._motions.erase(ite); // 削除\n\n        continue;\n      }\n\n      // ------ 値を反映する ------\n      motion.updateParameters(model, motionQueueEntry, userTimeSeconds);\n      updated = true;\n\n      // ------ ユーザトリガーイベントを検査する ----\n      const firedList: csmVector<csmString> = motion.getFiredEvent(\n        motionQueueEntry.getLastCheckEventSeconds() -\n          motionQueueEntry.getStartTime(),\n        userTimeSeconds - motionQueueEntry.getStartTime()\n      );\n\n      for (let i = 0; i < firedList.getSize(); ++i) {\n        this._eventCallBack(this, firedList.at(i), this._eventCustomData);\n      }\n\n      motionQueueEntry.setLastCheckEventSeconds(userTimeSeconds);\n\n      // ------ 終了済みの処理があれば削除する ------\n      if (motionQueueEntry.isFinished()) {\n        motionQueueEntry.release();\n        motionQueueEntry = null;\n        ite = this._motions.erase(ite); // 削除\n      } else {\n        if (motionQueueEntry.isTriggeredFadeOut()) {\n          motionQueueEntry.startFadeOut(\n            motionQueueEntry.getFadeOutSeconds(),\n            userTimeSeconds\n          );\n        }\n        ite.preIncrement();\n      }\n    }\n\n    return updated;\n  }\n  _userTimeSeconds: number; // デルタ時間の積算値[秒]\n\n  _motions: csmVector<CubismMotionQueueEntry>; // モーション\n  _eventCallBack: CubismMotionEventFunction; // コールバック関数\n  _eventCustomData: any; // コールバックに戻されるデータ\n}\n\n/**\n * イベントのコールバック関数を定義\n *\n * イベントのコールバックに登録できる関数の型情報\n * @param caller        発火したイベントを再生させたCubismMotionQueueManager\n * @param eventValue    発火したイベントの文字列データ\n * @param customData   コールバックに返される登録時に指定されたデータ\n */\nexport interface CubismMotionEventFunction {\n  (\n    caller: CubismMotionQueueManager,\n    eventValue: csmString,\n    customData: any\n  ): void;\n}\n\n/**\n * モーションの識別番号\n *\n * モーションの識別番号の定義\n */\nexport declare type CubismMotionQueueEntryHandle = any;\nexport const InvalidMotionQueueEntryHandleValue: CubismMotionQueueEntryHandle =\n  -1;\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismmotionqueuemanager';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismMotionQueueManager = $.CubismMotionQueueManager;\n  export type CubismMotionQueueManager = $.CubismMotionQueueManager;\n  export const InvalidMotionQueueEntryHandleValue =\n    $.InvalidMotionQueueEntryHandleValue;\n  export type CubismMotionQueueEntryHandle = $.CubismMotionQueueEntryHandle;\n  export type CubismMotionEventFunction = $.CubismMotionEventFunction;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismMath } from '../math/cubismmath';\nimport { CubismVector2 } from '../math/cubismvector2';\nimport { csmVector } from '../type/csmvector';\nimport { CubismModel } from '../model/cubismmodel';\nimport {\n  CubismPhysicsInput,\n  CubismPhysicsNormalization,\n  CubismPhysicsOutput,\n  CubismPhysicsParticle,\n  CubismPhysicsRig,\n  CubismPhysicsSource,\n  CubismPhysicsSubRig,\n  CubismPhysicsTargetType,\n} from './cubismphysicsinternal';\nimport { CubismPhysicsJson } from './cubismphysicsjson';\n\n// physics types tags.\nconst PhysicsTypeTagX = 'X';\nconst PhysicsTypeTagY = 'Y';\nconst PhysicsTypeTagAngle = 'Angle';\n\n// Constant of air resistance.\nconst AirResistance = 5.0;\n\n// Constant of maximum weight of input and output ratio.\nconst MaximumWeight = 100.0;\n\n// Constant of threshold of movement.\nconst MovementThreshold = 0.001;\n\n// Constant of maximum allowed delta time\nconst MaxDeltaTime = 5.0;\n\n/**\n * 物理演算クラス\n */\nexport class CubismPhysics {\n  /**\n   * インスタンスの作成\n   * @param buffer    physics3.jsonが読み込まれているバッファ\n   * @param size      バッファのサイズ\n   * @return 作成されたインスタンス\n   */\n  public static create(buffer: ArrayBuffer, size: number): CubismPhysics {\n    const ret: CubismPhysics = new CubismPhysics();\n\n    ret.parse(buffer, size);\n    ret._physicsRig.gravity.y = 0;\n\n    return ret;\n  }\n\n  /**\n   * インスタンスを破棄する\n   * @param physics 破棄するインスタンス\n   */\n  public static delete(physics: CubismPhysics): void {\n    if (physics != null) {\n      physics.release();\n      physics = null;\n    }\n  }\n\n  /**\n   * physics3.jsonをパースする。\n   * @param physicsJson physics3.jsonが読み込まれているバッファ\n   * @param size バッファのサイズ\n   */\n  public parse(physicsJson: ArrayBuffer, size: number): void {\n    this._physicsRig = new CubismPhysicsRig();\n\n    let json: CubismPhysicsJson = new CubismPhysicsJson(physicsJson, size);\n\n    this._physicsRig.gravity = json.getGravity();\n    this._physicsRig.wind = json.getWind();\n    this._physicsRig.subRigCount = json.getSubRigCount();\n\n    this._physicsRig.fps = json.getFps();\n\n    this._physicsRig.settings.updateSize(\n      this._physicsRig.subRigCount,\n      CubismPhysicsSubRig,\n      true\n    );\n    this._physicsRig.inputs.updateSize(\n      json.getTotalInputCount(),\n      CubismPhysicsInput,\n      true\n    );\n    this._physicsRig.outputs.updateSize(\n      json.getTotalOutputCount(),\n      CubismPhysicsOutput,\n      true\n    );\n    this._physicsRig.particles.updateSize(\n      json.getVertexCount(),\n      CubismPhysicsParticle,\n      true\n    );\n\n    this._currentRigOutputs.clear();\n    this._previousRigOutputs.clear();\n\n    let inputIndex = 0,\n      outputIndex = 0,\n      particleIndex = 0;\n\n    for (let i = 0; i < this._physicsRig.settings.getSize(); ++i) {\n      this._physicsRig.settings.at(i).normalizationPosition.minimum =\n        json.getNormalizationPositionMinimumValue(i);\n      this._physicsRig.settings.at(i).normalizationPosition.maximum =\n        json.getNormalizationPositionMaximumValue(i);\n      this._physicsRig.settings.at(i).normalizationPosition.defalut =\n        json.getNormalizationPositionDefaultValue(i);\n\n      this._physicsRig.settings.at(i).normalizationAngle.minimum =\n        json.getNormalizationAngleMinimumValue(i);\n      this._physicsRig.settings.at(i).normalizationAngle.maximum =\n        json.getNormalizationAngleMaximumValue(i);\n      this._physicsRig.settings.at(i).normalizationAngle.defalut =\n        json.getNormalizationAngleDefaultValue(i);\n\n      // Input\n      this._physicsRig.settings.at(i).inputCount = json.getInputCount(i);\n      this._physicsRig.settings.at(i).baseInputIndex = inputIndex;\n\n      for (let j = 0; j < this._physicsRig.settings.at(i).inputCount; ++j) {\n        this._physicsRig.inputs.at(inputIndex + j).sourceParameterIndex = -1;\n        this._physicsRig.inputs.at(inputIndex + j).weight = json.getInputWeight(\n          i,\n          j\n        );\n        this._physicsRig.inputs.at(inputIndex + j).reflect =\n          json.getInputReflect(i, j);\n\n        if (json.getInputType(i, j) == PhysicsTypeTagX) {\n          this._physicsRig.inputs.at(inputIndex + j).type =\n            CubismPhysicsSource.CubismPhysicsSource_X;\n          this._physicsRig.inputs.at(\n            inputIndex + j\n          ).getNormalizedParameterValue =\n            getInputTranslationXFromNormalizedParameterValue;\n        } else if (json.getInputType(i, j) == PhysicsTypeTagY) {\n          this._physicsRig.inputs.at(inputIndex + j).type =\n            CubismPhysicsSource.CubismPhysicsSource_Y;\n          this._physicsRig.inputs.at(\n            inputIndex + j\n          ).getNormalizedParameterValue =\n            getInputTranslationYFromNormalizedParamterValue;\n        } else if (json.getInputType(i, j) == PhysicsTypeTagAngle) {\n          this._physicsRig.inputs.at(inputIndex + j).type =\n            CubismPhysicsSource.CubismPhysicsSource_Angle;\n          this._physicsRig.inputs.at(\n            inputIndex + j\n          ).getNormalizedParameterValue =\n            getInputAngleFromNormalizedParameterValue;\n        }\n\n        this._physicsRig.inputs.at(inputIndex + j).source.targetType =\n          CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n        this._physicsRig.inputs.at(inputIndex + j).source.id =\n          json.getInputSourceId(i, j);\n      }\n      inputIndex += this._physicsRig.settings.at(i).inputCount;\n\n      // Output\n      this._physicsRig.settings.at(i).outputCount = json.getOutputCount(i);\n      this._physicsRig.settings.at(i).baseOutputIndex = outputIndex;\n\n      const currentRigOutput = new PhysicsOutput();\n      currentRigOutput.outputs.resize(\n        this._physicsRig.settings.at(i).outputCount\n      );\n\n      const previousRigOutput = new PhysicsOutput();\n      previousRigOutput.outputs.resize(\n        this._physicsRig.settings.at(i).outputCount\n      );\n\n      for (let j = 0; j < this._physicsRig.settings.at(i).outputCount; ++j) {\n        // initialize\n        currentRigOutput.outputs.set(j, 0.0);\n        previousRigOutput.outputs.set(j, 0.0);\n\n        this._physicsRig.outputs.at(outputIndex + j).destinationParameterIndex =\n          -1;\n        this._physicsRig.outputs.at(outputIndex + j).vertexIndex =\n          json.getOutputVertexIndex(i, j);\n        this._physicsRig.outputs.at(outputIndex + j).angleScale =\n          json.getOutputAngleScale(i, j);\n        this._physicsRig.outputs.at(outputIndex + j).weight =\n          json.getOutputWeight(i, j);\n        this._physicsRig.outputs.at(outputIndex + j).destination.targetType =\n          CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\n\n        this._physicsRig.outputs.at(outputIndex + j).destination.id =\n          json.getOutputDestinationId(i, j);\n\n        if (json.getOutputType(i, j) == PhysicsTypeTagX) {\n          this._physicsRig.outputs.at(outputIndex + j).type =\n            CubismPhysicsSource.CubismPhysicsSource_X;\n          this._physicsRig.outputs.at(outputIndex + j).getValue =\n            getOutputTranslationX;\n          this._physicsRig.outputs.at(outputIndex + j).getScale =\n            getOutputScaleTranslationX;\n        } else if (json.getOutputType(i, j) == PhysicsTypeTagY) {\n          this._physicsRig.outputs.at(outputIndex + j).type =\n            CubismPhysicsSource.CubismPhysicsSource_Y;\n          this._physicsRig.outputs.at(outputIndex + j).getValue =\n            getOutputTranslationY;\n          this._physicsRig.outputs.at(outputIndex + j).getScale =\n            getOutputScaleTranslationY;\n        } else if (json.getOutputType(i, j) == PhysicsTypeTagAngle) {\n          this._physicsRig.outputs.at(outputIndex + j).type =\n            CubismPhysicsSource.CubismPhysicsSource_Angle;\n          this._physicsRig.outputs.at(outputIndex + j).getValue =\n            getOutputAngle;\n          this._physicsRig.outputs.at(outputIndex + j).getScale =\n            getOutputScaleAngle;\n        }\n\n        this._physicsRig.outputs.at(outputIndex + j).reflect =\n          json.getOutputReflect(i, j);\n      }\n\n      this._currentRigOutputs.pushBack(currentRigOutput);\n      this._previousRigOutputs.pushBack(previousRigOutput);\n\n      outputIndex += this._physicsRig.settings.at(i).outputCount;\n\n      // Particle\n      this._physicsRig.settings.at(i).particleCount = json.getParticleCount(i);\n      this._physicsRig.settings.at(i).baseParticleIndex = particleIndex;\n\n      for (let j = 0; j < this._physicsRig.settings.at(i).particleCount; ++j) {\n        this._physicsRig.particles.at(particleIndex + j).mobility =\n          json.getParticleMobility(i, j);\n        this._physicsRig.particles.at(particleIndex + j).delay =\n          json.getParticleDelay(i, j);\n        this._physicsRig.particles.at(particleIndex + j).acceleration =\n          json.getParticleAcceleration(i, j);\n        this._physicsRig.particles.at(particleIndex + j).radius =\n          json.getParticleRadius(i, j);\n        this._physicsRig.particles.at(particleIndex + j).position =\n          json.getParticlePosition(i, j);\n      }\n\n      particleIndex += this._physicsRig.settings.at(i).particleCount;\n    }\n\n    this.initialize();\n\n    json.release();\n    json = void 0;\n    json = null;\n  }\n\n  /**\n   * 現在のパラメータ値で物理演算が安定化する状態を演算する。\n   * @param model 物理演算の結果を適用するモデル\n   */\n  public stabilization(model: CubismModel): void {\n    let totalAngle: { angle: number };\n    let weight: number;\n    let radAngle: number;\n    let outputValue: number;\n    const totalTranslation: CubismVector2 = new CubismVector2();\n    let currentSetting: CubismPhysicsSubRig;\n    let currentInputs: CubismPhysicsInput[];\n    let currentOutputs: CubismPhysicsOutput[];\n    let currentParticles: CubismPhysicsParticle[];\n\n    let parameterValues: Float32Array;\n    let parameterMaximumValues: Float32Array;\n    let parameterMinimumValues: Float32Array;\n    let parameterDefaultValues: Float32Array;\n\n    parameterValues = model.getModel().parameters.values;\n    parameterMaximumValues = model.getModel().parameters.maximumValues;\n    parameterMinimumValues = model.getModel().parameters.minimumValues;\n    parameterDefaultValues = model.getModel().parameters.defaultValues;\n\n    if ((this._parameterCaches?.length ?? 0) < model.getParameterCount()) {\n      this._parameterCaches = new Float32Array(model.getParameterCount());\n    }\n\n    if ((this._parameterInputCaches?.length ?? 0) < model.getParameterCount()) {\n      this._parameterInputCaches = new Float32Array(model.getParameterCount());\n    }\n\n    for (let j = 0; j < model.getParameterCount(); ++j) {\n      this._parameterCaches[j] = parameterValues[j];\n      this._parameterInputCaches[j] = parameterValues[j];\n    }\n\n    for (\n      let settingIndex = 0;\n      settingIndex < this._physicsRig.subRigCount;\n      ++settingIndex\n    ) {\n      totalAngle = { angle: 0.0 };\n      totalTranslation.x = 0.0;\n      totalTranslation.y = 0.0;\n      currentSetting = this._physicsRig.settings.at(settingIndex);\n      currentInputs = this._physicsRig.inputs.get(\n        currentSetting.baseInputIndex\n      );\n      currentOutputs = this._physicsRig.outputs.get(\n        currentSetting.baseOutputIndex\n      );\n      currentParticles = this._physicsRig.particles.get(\n        currentSetting.baseParticleIndex\n      );\n\n      // Load input parameters\n      for (let i = 0; i < currentSetting.inputCount; ++i) {\n        weight = currentInputs[i].weight / MaximumWeight;\n\n        if (currentInputs[i].sourceParameterIndex == -1) {\n          currentInputs[i].sourceParameterIndex = model.getParameterIndex(\n            currentInputs[i].source.id\n          );\n        }\n\n        currentInputs[i].getNormalizedParameterValue(\n          totalTranslation,\n          totalAngle,\n          parameterValues[currentInputs[i].sourceParameterIndex],\n          parameterMinimumValues[currentInputs[i].sourceParameterIndex],\n          parameterMaximumValues[currentInputs[i].sourceParameterIndex],\n          parameterDefaultValues[currentInputs[i].sourceParameterIndex],\n          currentSetting.normalizationPosition,\n          currentSetting.normalizationAngle,\n          currentInputs[i].reflect,\n          weight\n        );\n\n        this._parameterCaches[currentInputs[i].sourceParameterIndex] =\n          parameterValues[currentInputs[i].sourceParameterIndex];\n      }\n\n      radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\n\n      totalTranslation.x =\n        totalTranslation.x * CubismMath.cos(radAngle) -\n        totalTranslation.y * CubismMath.sin(radAngle);\n      totalTranslation.y =\n        totalTranslation.x * CubismMath.sin(radAngle) +\n        totalTranslation.y * CubismMath.cos(radAngle);\n\n      // Calculate particles position.\n      updateParticlesForStabilization(\n        currentParticles,\n        currentSetting.particleCount,\n        totalTranslation,\n        totalAngle.angle,\n        this._options.wind,\n        MovementThreshold * currentSetting.normalizationPosition.maximum\n      );\n\n      // Update output parameters.\n      for (let i = 0; i < currentSetting.outputCount; ++i) {\n        const particleIndex = currentOutputs[i].vertexIndex;\n\n        if (currentOutputs[i].destinationParameterIndex == -1) {\n          currentOutputs[i].destinationParameterIndex = model.getParameterIndex(\n            currentOutputs[i].destination.id\n          );\n        }\n\n        if (\n          particleIndex < 1 ||\n          particleIndex >= currentSetting.particleCount\n        ) {\n          continue;\n        }\n\n        let translation: CubismVector2 = new CubismVector2();\n        translation = currentParticles[particleIndex].position.substract(\n          currentParticles[particleIndex - 1].position\n        );\n\n        outputValue = currentOutputs[i].getValue(\n          translation,\n          currentParticles,\n          particleIndex,\n          currentOutputs[i].reflect,\n          this._options.gravity\n        );\n\n        this._currentRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n        this._previousRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n\n        const destinationParameterIndex: number =\n          currentOutputs[i].destinationParameterIndex;\n\n        const outParameterCaches: Float32Array =\n          !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype\n            ? JSON.parse(\n                JSON.stringify(\n                  parameterValues.subarray(destinationParameterIndex)\n                )\n              ) // 値渡しするため、JSON.parse, JSON.stringify\n            : parameterValues.slice(destinationParameterIndex);\n\n        updateOutputParameterValue(\n          outParameterCaches,\n          parameterMinimumValues[destinationParameterIndex],\n          parameterMaximumValues[destinationParameterIndex],\n          outputValue,\n          currentOutputs[i]\n        );\n\n        // 値を反映\n        for (\n          let offset: number = destinationParameterIndex, outParamIndex = 0;\n          offset < this._parameterCaches.length;\n          offset++, outParamIndex++\n        ) {\n          parameterValues[offset] = this._parameterCaches[offset] =\n            outParameterCaches[outParamIndex];\n        }\n      }\n    }\n  }\n\n  /**\n   * 物理演算の評価\n   *\n   * Pendulum interpolation weights\n   *\n   * 振り子の計算結果は保存され、パラメータへの出力は保存された前回の結果で補間されます。\n   * The result of the pendulum calculation is saved and\n   * the output to the parameters is interpolated with the saved previous result of the pendulum calculation.\n   *\n   * 図で示すと[1]と[2]で補間されます。\n   * The figure shows the interpolation between [1] and [2].\n   *\n   * 補間の重みは最新の振り子計算タイミングと次回のタイミングの間で見た現在時間で決定する。\n   * The weight of the interpolation are determined by the current time seen between\n   * the latest pendulum calculation timing and the next timing.\n   *\n   * 図で示すと[2]と[4]の間でみた(3)の位置の重みになる。\n   * Figure shows the weight of position (3) as seen between [2] and [4].\n   *\n   * 解釈として振り子計算のタイミングと重み計算のタイミングがズレる。\n   * As an interpretation, the pendulum calculation and weights are misaligned.\n   *\n   * physics3.jsonにFPS情報が存在しない場合は常に前の振り子状態で設定される。\n   * If there is no FPS information in physics3.json, it is always set in the previous pendulum state.\n   *\n   * この仕様は補間範囲を逸脱したことが原因の震えたような見た目を回避を目的にしている。\n   * The purpose of this specification is to avoid the quivering appearance caused by deviations from the interpolation range.\n   *\n   * ------------ time -------------->\n   *\n   *                 |+++++|------| <- weight\n   * ==[1]====#=====[2]---(3)----(4)\n   *          ^ output contents\n   *\n   * 1:_previousRigOutputs\n   * 2:_currentRigOutputs\n   * 3:_currentRemainTime (now rendering)\n   * 4:next particles timing\n   * @param model 物理演算の結果を適用するモデル\n   * @param deltaTimeSeconds デルタ時間[秒]\n   */\n  public evaluate(model: CubismModel, deltaTimeSeconds: number): void {\n    let totalAngle: { angle: number };\n    let weight: number;\n    let radAngle: number;\n    let outputValue: number;\n    const totalTranslation: CubismVector2 = new CubismVector2();\n    let currentSetting: CubismPhysicsSubRig;\n    let currentInputs: CubismPhysicsInput[];\n    let currentOutputs: CubismPhysicsOutput[];\n    let currentParticles: CubismPhysicsParticle[];\n\n    if (0.0 >= deltaTimeSeconds) {\n      return;\n    }\n\n    let parameterValues: Float32Array;\n    let parameterMaximumValues: Float32Array;\n    let parameterMinimumValues: Float32Array;\n    let parameterDefaultValues: Float32Array;\n\n    let physicsDeltaTime: number;\n    this._currentRemainTime += deltaTimeSeconds;\n    if (this._currentRemainTime > MaxDeltaTime) {\n      this._currentRemainTime = 0.0;\n    }\n\n    parameterValues = model.getModel().parameters.values;\n    parameterMaximumValues = model.getModel().parameters.maximumValues;\n    parameterMinimumValues = model.getModel().parameters.minimumValues;\n    parameterDefaultValues = model.getModel().parameters.defaultValues;\n\n    if ((this._parameterCaches?.length ?? 0) < model.getParameterCount()) {\n      this._parameterCaches = new Float32Array(model.getParameterCount());\n    }\n\n    if ((this._parameterInputCaches?.length ?? 0) < model.getParameterCount()) {\n      this._parameterInputCaches = new Float32Array(model.getParameterCount());\n      for (let j = 0; j < model.getParameterCount(); ++j) {\n        this._parameterInputCaches[j] = parameterValues[j];\n      }\n    }\n\n    if (this._physicsRig.fps > 0.0) {\n      physicsDeltaTime = 1.0 / this._physicsRig.fps;\n    } else {\n      physicsDeltaTime = deltaTimeSeconds;\n    }\n\n    while (this._currentRemainTime >= physicsDeltaTime) {\n      // copyRigOutputs _currentRigOutputs to _previousRigOutputs\n      for (\n        let settingIndex = 0;\n        settingIndex < this._physicsRig.subRigCount;\n        ++settingIndex\n      ) {\n        currentSetting = this._physicsRig.settings.at(settingIndex);\n        currentOutputs = this._physicsRig.outputs.get(\n          currentSetting.baseOutputIndex\n        );\n        for (let i = 0; i < currentSetting.outputCount; ++i) {\n          this._previousRigOutputs\n            .at(settingIndex)\n            .outputs.set(\n              i,\n              this._currentRigOutputs.at(settingIndex).outputs.at(i)\n            );\n        }\n      }\n\n      // 入力キャッシュとパラメータで線形補間してUpdateParticlesするタイミングでの入力を計算する。\n      // Calculate the input at the timing to UpdateParticles by linear interpolation with the _parameterInputCache and parameterValue.\n      // _parameterCacheはグループ間での値の伝搬の役割があるので_parameterInputCacheとの分離が必要。\n      // _parameterCache needs to be separated from _parameterInputCache because of its role in propagating values between groups.\n      const inputWeight = physicsDeltaTime / this._currentRemainTime;\n      for (let j = 0; j < model.getParameterCount(); ++j) {\n        this._parameterCaches[j] =\n          this._parameterInputCaches[j] * (1.0 - inputWeight) +\n          parameterValues[j] * inputWeight;\n        this._parameterInputCaches[j] = this._parameterCaches[j];\n      }\n\n      for (\n        let settingIndex = 0;\n        settingIndex < this._physicsRig.subRigCount;\n        ++settingIndex\n      ) {\n        totalAngle = { angle: 0.0 };\n        totalTranslation.x = 0.0;\n        totalTranslation.y = 0.0;\n        currentSetting = this._physicsRig.settings.at(settingIndex);\n        currentInputs = this._physicsRig.inputs.get(\n          currentSetting.baseInputIndex\n        );\n        currentOutputs = this._physicsRig.outputs.get(\n          currentSetting.baseOutputIndex\n        );\n        currentParticles = this._physicsRig.particles.get(\n          currentSetting.baseParticleIndex\n        );\n\n        // Load input parameters\n        for (let i = 0; i < currentSetting.inputCount; ++i) {\n          weight = currentInputs[i].weight / MaximumWeight;\n\n          if (currentInputs[i].sourceParameterIndex == -1) {\n            currentInputs[i].sourceParameterIndex = model.getParameterIndex(\n              currentInputs[i].source.id\n            );\n          }\n\n          currentInputs[i].getNormalizedParameterValue(\n            totalTranslation,\n            totalAngle,\n            this._parameterCaches[currentInputs[i].sourceParameterIndex],\n            parameterMinimumValues[currentInputs[i].sourceParameterIndex],\n            parameterMaximumValues[currentInputs[i].sourceParameterIndex],\n            parameterDefaultValues[currentInputs[i].sourceParameterIndex],\n            currentSetting.normalizationPosition,\n            currentSetting.normalizationAngle,\n            currentInputs[i].reflect,\n            weight\n          );\n        }\n\n        radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\n\n        totalTranslation.x =\n          totalTranslation.x * CubismMath.cos(radAngle) -\n          totalTranslation.y * CubismMath.sin(radAngle);\n        totalTranslation.y =\n          totalTranslation.x * CubismMath.sin(radAngle) +\n          totalTranslation.y * CubismMath.cos(radAngle);\n\n        // Calculate particles position.\n        updateParticles(\n          currentParticles,\n          currentSetting.particleCount,\n          totalTranslation,\n          totalAngle.angle,\n          this._options.wind,\n          MovementThreshold * currentSetting.normalizationPosition.maximum,\n          physicsDeltaTime,\n          AirResistance\n        );\n\n        // Update output parameters.\n        for (let i = 0; i < currentSetting.outputCount; ++i) {\n          const particleIndex = currentOutputs[i].vertexIndex;\n\n          if (currentOutputs[i].destinationParameterIndex == -1) {\n            currentOutputs[i].destinationParameterIndex =\n              model.getParameterIndex(currentOutputs[i].destination.id);\n          }\n\n          if (\n            particleIndex < 1 ||\n            particleIndex >= currentSetting.particleCount\n          ) {\n            continue;\n          }\n\n          const translation: CubismVector2 = new CubismVector2();\n          translation.x =\n            currentParticles[particleIndex].position.x -\n            currentParticles[particleIndex - 1].position.x;\n          translation.y =\n            currentParticles[particleIndex].position.y -\n            currentParticles[particleIndex - 1].position.y;\n\n          outputValue = currentOutputs[i].getValue(\n            translation,\n            currentParticles,\n            particleIndex,\n            currentOutputs[i].reflect,\n            this._options.gravity\n          );\n\n          this._currentRigOutputs.at(settingIndex).outputs.set(i, outputValue);\n\n          const destinationParameterIndex: number =\n            currentOutputs[i].destinationParameterIndex;\n          const outParameterCaches: Float32Array =\n            !Float32Array.prototype.slice &&\n            'subarray' in Float32Array.prototype\n              ? JSON.parse(\n                  JSON.stringify(\n                    this._parameterCaches.subarray(destinationParameterIndex)\n                  )\n                ) // 値渡しするため、JSON.parse, JSON.stringify\n              : this._parameterCaches.slice(destinationParameterIndex);\n\n          updateOutputParameterValue(\n            outParameterCaches,\n            parameterMinimumValues[destinationParameterIndex],\n            parameterMaximumValues[destinationParameterIndex],\n            outputValue,\n            currentOutputs[i]\n          );\n\n          // 値を反映\n          for (\n            let offset: number = destinationParameterIndex, outParamIndex = 0;\n            offset < this._parameterCaches.length;\n            offset++, outParamIndex++\n          ) {\n            this._parameterCaches[offset] = outParameterCaches[outParamIndex];\n          }\n        }\n      }\n      this._currentRemainTime -= physicsDeltaTime;\n    }\n\n    const alpha: number = this._currentRemainTime / physicsDeltaTime;\n    this.interpolate(model, alpha);\n  }\n\n  /**\n   * 物理演算結果の適用\n   * 振り子演算の最新の結果と一つ前の結果から指定した重みで適用する。\n   * @param model 物理演算の結果を適用するモデル\n   * @param weight 最新結果の重み\n   */\n  public interpolate(model: CubismModel, weight: number): void {\n    let currentOutputs: CubismPhysicsOutput[];\n    let currentSetting: CubismPhysicsSubRig;\n    let parameterValues: Float32Array;\n    let parameterMaximumValues: Float32Array;\n    let parameterMinimumValues: Float32Array;\n\n    parameterValues = model.getModel().parameters.values;\n    parameterMaximumValues = model.getModel().parameters.maximumValues;\n    parameterMinimumValues = model.getModel().parameters.minimumValues;\n\n    for (\n      let settingIndex = 0;\n      settingIndex < this._physicsRig.subRigCount;\n      ++settingIndex\n    ) {\n      currentSetting = this._physicsRig.settings.at(settingIndex);\n      currentOutputs = this._physicsRig.outputs.get(\n        currentSetting.baseOutputIndex\n      );\n\n      // Load input parameters.\n      for (let i = 0; i < currentSetting.outputCount; ++i) {\n        if (currentOutputs[i].destinationParameterIndex == -1) {\n          continue;\n        }\n\n        const destinationParameterIndex: number =\n          currentOutputs[i].destinationParameterIndex;\n        const outParameterValues: Float32Array =\n          !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype\n            ? JSON.parse(\n                JSON.stringify(\n                  parameterValues.subarray(destinationParameterIndex)\n                )\n              ) // 値渡しするため、JSON.parse, JSON.stringify\n            : parameterValues.slice(destinationParameterIndex);\n\n        updateOutputParameterValue(\n          outParameterValues,\n          parameterMinimumValues[destinationParameterIndex],\n          parameterMaximumValues[destinationParameterIndex],\n          this._previousRigOutputs.at(settingIndex).outputs.at(i) *\n            (1 - weight) +\n            this._currentRigOutputs.at(settingIndex).outputs.at(i) * weight,\n          currentOutputs[i]\n        );\n\n        // 値を反映\n        for (\n          let offset: number = destinationParameterIndex, outParamIndex = 0;\n          offset < parameterValues.length;\n          offset++, outParamIndex++\n        ) {\n          parameterValues[offset] = outParameterValues[outParamIndex];\n        }\n      }\n    }\n  }\n\n  /**\n   * オプションの設定\n   * @param options オプション\n   */\n  public setOptions(options: Options): void {\n    this._options = options;\n  }\n\n  /**\n   * オプションの取得\n   * @return オプション\n   */\n  public getOption(): Options {\n    return this._options;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._physicsRig = null;\n\n    // set default options\n    this._options = new Options();\n    this._options.gravity.y = -1.0;\n    this._options.gravity.x = 0.0;\n    this._options.wind.x = 0.0;\n    this._options.wind.y = 0.0;\n    this._currentRigOutputs = new csmVector<PhysicsOutput>();\n    this._previousRigOutputs = new csmVector<PhysicsOutput>();\n    this._currentRemainTime = 0.0;\n    this._parameterCaches = null;\n    this._parameterInputCaches = null;\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    this._physicsRig = void 0;\n    this._physicsRig = null;\n  }\n\n  /**\n   * 初期化する\n   */\n  public initialize(): void {\n    let strand: CubismPhysicsParticle[];\n    let currentSetting: CubismPhysicsSubRig;\n    let radius: CubismVector2;\n\n    for (\n      let settingIndex = 0;\n      settingIndex < this._physicsRig.subRigCount;\n      ++settingIndex\n    ) {\n      currentSetting = this._physicsRig.settings.at(settingIndex);\n      strand = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\n\n      // Initialize the top of particle.\n      strand[0].initialPosition = new CubismVector2(0.0, 0.0);\n      strand[0].lastPosition = new CubismVector2(\n        strand[0].initialPosition.x,\n        strand[0].initialPosition.y\n      );\n      strand[0].lastGravity = new CubismVector2(0.0, -1.0);\n      strand[0].lastGravity.y *= -1.0;\n      strand[0].velocity = new CubismVector2(0.0, 0.0);\n      strand[0].force = new CubismVector2(0.0, 0.0);\n\n      // Initialize particles.\n      for (let i = 1; i < currentSetting.particleCount; ++i) {\n        radius = new CubismVector2(0.0, 0.0);\n        radius.y = strand[i].radius;\n        strand[i].initialPosition = new CubismVector2(\n          strand[i - 1].initialPosition.x + radius.x,\n          strand[i - 1].initialPosition.y + radius.y\n        );\n        strand[i].position = new CubismVector2(\n          strand[i].initialPosition.x,\n          strand[i].initialPosition.y\n        );\n        strand[i].lastPosition = new CubismVector2(\n          strand[i].initialPosition.x,\n          strand[i].initialPosition.y\n        );\n        strand[i].lastGravity = new CubismVector2(0.0, -1.0);\n        strand[i].lastGravity.y *= -1.0;\n        strand[i].velocity = new CubismVector2(0.0, 0.0);\n        strand[i].force = new CubismVector2(0.0, 0.0);\n      }\n    }\n  }\n\n  _physicsRig: CubismPhysicsRig; // 物理演算のデータ\n  _options: Options; // オプション\n\n  _currentRigOutputs: csmVector<PhysicsOutput>; ///< 最新の振り子計算の結果\n  _previousRigOutputs: csmVector<PhysicsOutput>; ///< 一つ前の振り子計算の結果\n\n  _currentRemainTime: number; ///< 物理演算が処理していない時間\n\n  _parameterCaches: Float32Array; ///< Evaluateで利用するパラメータのキャッシュ\n  _parameterInputCaches: Float32Array; ///< UpdateParticlesが動くときの入力をキャッシュ\n}\n\n/**\n * 物理演算のオプション\n */\nexport class Options {\n  constructor() {\n    this.gravity = new CubismVector2(0, 0);\n    this.wind = new CubismVector2(0, 0);\n  }\n\n  gravity: CubismVector2; // 重力方向\n  wind: CubismVector2; // 風の方向\n}\n\n/**\n * パラメータに適用する前の物理演算の出力結果\n */\nexport class PhysicsOutput {\n  constructor() {\n    this.outputs = new csmVector<number>(0);\n  }\n\n  outputs: csmVector<number>; // 物理演算出力結果\n}\n\n/**\n * Gets sign.\n *\n * @param value Evaluation target value.\n *\n * @return Sign of value.\n */\nfunction sign(value: number): number {\n  let ret = 0;\n\n  if (value > 0.0) {\n    ret = 1;\n  } else if (value < 0.0) {\n    ret = -1;\n  }\n\n  return ret;\n}\n\nfunction getInputTranslationXFromNormalizedParameterValue(\n  targetTranslation: CubismVector2,\n  targetAngle: { angle: number },\n  value: number,\n  parameterMinimumValue: number,\n  parameterMaximumValue: number,\n  parameterDefaultValue: number,\n  normalizationPosition: CubismPhysicsNormalization,\n  normalizationAngle: CubismPhysicsNormalization,\n  isInverted: boolean,\n  weight: number\n): void {\n  targetTranslation.x +=\n    normalizeParameterValue(\n      value,\n      parameterMinimumValue,\n      parameterMaximumValue,\n      parameterDefaultValue,\n      normalizationPosition.minimum,\n      normalizationPosition.maximum,\n      normalizationPosition.defalut,\n      isInverted\n    ) * weight;\n}\n\nfunction getInputTranslationYFromNormalizedParamterValue(\n  targetTranslation: CubismVector2,\n  targetAngle: { angle: number },\n  value: number,\n  parameterMinimumValue: number,\n  parameterMaximumValue: number,\n  parameterDefaultValue: number,\n  normalizationPosition: CubismPhysicsNormalization,\n  normalizationAngle: CubismPhysicsNormalization,\n  isInverted: boolean,\n  weight: number\n): void {\n  targetTranslation.y +=\n    normalizeParameterValue(\n      value,\n      parameterMinimumValue,\n      parameterMaximumValue,\n      parameterDefaultValue,\n      normalizationPosition.minimum,\n      normalizationPosition.maximum,\n      normalizationPosition.defalut,\n      isInverted\n    ) * weight;\n}\n\nfunction getInputAngleFromNormalizedParameterValue(\n  targetTranslation: CubismVector2,\n  targetAngle: { angle: number },\n  value: number,\n  parameterMinimumValue: number,\n  parameterMaximumValue: number,\n  parameterDefaultValue: number,\n  normalizaitionPosition: CubismPhysicsNormalization,\n  normalizationAngle: CubismPhysicsNormalization,\n  isInverted: boolean,\n  weight: number\n): void {\n  targetAngle.angle +=\n    normalizeParameterValue(\n      value,\n      parameterMinimumValue,\n      parameterMaximumValue,\n      parameterDefaultValue,\n      normalizationAngle.minimum,\n      normalizationAngle.maximum,\n      normalizationAngle.defalut,\n      isInverted\n    ) * weight;\n}\n\nfunction getOutputTranslationX(\n  translation: CubismVector2,\n  particles: CubismPhysicsParticle[],\n  particleIndex: number,\n  isInverted: boolean,\n  parentGravity: CubismVector2\n): number {\n  let outputValue: number = translation.x;\n\n  if (isInverted) {\n    outputValue *= -1.0;\n  }\n\n  return outputValue;\n}\n\nfunction getOutputTranslationY(\n  translation: CubismVector2,\n  particles: CubismPhysicsParticle[],\n  particleIndex: number,\n  isInverted: boolean,\n  parentGravity: CubismVector2\n): number {\n  let outputValue: number = translation.y;\n\n  if (isInverted) {\n    outputValue *= -1.0;\n  }\n  return outputValue;\n}\n\nfunction getOutputAngle(\n  translation: CubismVector2,\n  particles: CubismPhysicsParticle[],\n  particleIndex: number,\n  isInverted: boolean,\n  parentGravity: CubismVector2\n): number {\n  let outputValue: number;\n\n  if (particleIndex >= 2) {\n    parentGravity = particles[particleIndex - 1].position.substract(\n      particles[particleIndex - 2].position\n    );\n  } else {\n    parentGravity = parentGravity.multiplyByScaler(-1.0);\n  }\n\n  outputValue = CubismMath.directionToRadian(parentGravity, translation);\n\n  if (isInverted) {\n    outputValue *= -1.0;\n  }\n\n  return outputValue;\n}\n\nfunction getRangeValue(min: number, max: number): number {\n  const maxValue: number = CubismMath.max(min, max);\n  const minValue: number = CubismMath.min(min, max);\n\n  return CubismMath.abs(maxValue - minValue);\n}\n\nfunction getDefaultValue(min: number, max: number): number {\n  const minValue: number = CubismMath.min(min, max);\n  return minValue + getRangeValue(min, max) / 2.0;\n}\n\nfunction getOutputScaleTranslationX(\n  translationScale: CubismVector2,\n  angleScale: number\n): number {\n  return JSON.parse(JSON.stringify(translationScale.x));\n}\n\nfunction getOutputScaleTranslationY(\n  translationScale: CubismVector2,\n  angleScale: number\n): number {\n  return JSON.parse(JSON.stringify(translationScale.y));\n}\n\nfunction getOutputScaleAngle(\n  translationScale: CubismVector2,\n  angleScale: number\n): number {\n  return JSON.parse(JSON.stringify(angleScale));\n}\n\n/**\n * Updates particles.\n *\n * @param strand                Target array of particle.\n * @param strandCount           Count of particle.\n * @param totalTranslation      Total translation value.\n * @param totalAngle            Total angle.\n * @param windDirection         Direction of Wind.\n * @param thresholdValue        Threshold of movement.\n * @param deltaTimeSeconds      Delta time.\n * @param airResistance         Air resistance.\n */\nfunction updateParticles(\n  strand: CubismPhysicsParticle[],\n  strandCount: number,\n  totalTranslation: CubismVector2,\n  totalAngle: number,\n  windDirection: CubismVector2,\n  thresholdValue: number,\n  deltaTimeSeconds: number,\n  airResistance: number\n) {\n  let totalRadian: number;\n  let delay: number;\n  let radian: number;\n  let currentGravity: CubismVector2;\n  let direction: CubismVector2 = new CubismVector2(0.0, 0.0);\n  let velocity: CubismVector2 = new CubismVector2(0.0, 0.0);\n  let force: CubismVector2 = new CubismVector2(0.0, 0.0);\n  let newDirection: CubismVector2 = new CubismVector2(0.0, 0.0);\n\n  strand[0].position = new CubismVector2(\n    totalTranslation.x,\n    totalTranslation.y\n  );\n\n  totalRadian = CubismMath.degreesToRadian(totalAngle);\n  currentGravity = CubismMath.radianToDirection(totalRadian);\n  currentGravity.normalize();\n\n  for (let i = 1; i < strandCount; ++i) {\n    strand[i].force = currentGravity\n      .multiplyByScaler(strand[i].acceleration)\n      .add(windDirection);\n\n    strand[i].lastPosition = new CubismVector2(\n      strand[i].position.x,\n      strand[i].position.y\n    );\n\n    delay = strand[i].delay * deltaTimeSeconds * 30.0;\n\n    direction = strand[i].position.substract(strand[i - 1].position);\n\n    radian =\n      CubismMath.directionToRadian(strand[i].lastGravity, currentGravity) /\n      airResistance;\n\n    direction.x =\n      CubismMath.cos(radian) * direction.x -\n      direction.y * CubismMath.sin(radian);\n    direction.y =\n      CubismMath.sin(radian) * direction.x +\n      direction.y * CubismMath.cos(radian);\n\n    strand[i].position = strand[i - 1].position.add(direction);\n\n    velocity = strand[i].velocity.multiplyByScaler(delay);\n    force = strand[i].force.multiplyByScaler(delay).multiplyByScaler(delay);\n\n    strand[i].position = strand[i].position.add(velocity).add(force);\n\n    newDirection = strand[i].position.substract(strand[i - 1].position);\n    newDirection.normalize();\n\n    strand[i].position = strand[i - 1].position.add(\n      newDirection.multiplyByScaler(strand[i].radius)\n    );\n\n    if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\n      strand[i].position.x = 0.0;\n    }\n\n    if (delay != 0.0) {\n      strand[i].velocity = strand[i].position.substract(strand[i].lastPosition);\n      strand[i].velocity = strand[i].velocity.divisionByScalar(delay);\n      strand[i].velocity = strand[i].velocity.multiplyByScaler(\n        strand[i].mobility\n      );\n    }\n\n    strand[i].force = new CubismVector2(0.0, 0.0);\n    strand[i].lastGravity = new CubismVector2(\n      currentGravity.x,\n      currentGravity.y\n    );\n  }\n}\n\n/**\n * Updates particles for stabilization.\n *\n * @param strand                Target array of particle.\n * @param strandCount           Count of particle.\n * @param totalTranslation      Total translation value.\n * @param totalAngle            Total angle.\n * @param windDirection         Direction of Wind.\n * @param thresholdValue        Threshold of movement.\n */\nfunction updateParticlesForStabilization(\n  strand: CubismPhysicsParticle[],\n  strandCount: number,\n  totalTranslation: CubismVector2,\n  totalAngle: number,\n  windDirection: CubismVector2,\n  thresholdValue: number\n) {\n  let totalRadian: number;\n  let currentGravity: CubismVector2;\n  let force: CubismVector2 = new CubismVector2(0.0, 0.0);\n\n  strand[0].position = new CubismVector2(\n    totalTranslation.x,\n    totalTranslation.y\n  );\n\n  totalRadian = CubismMath.degreesToRadian(totalAngle);\n  currentGravity = CubismMath.radianToDirection(totalRadian);\n  currentGravity.normalize();\n\n  for (let i = 1; i < strandCount; ++i) {\n    strand[i].force = currentGravity\n      .multiplyByScaler(strand[i].acceleration)\n      .add(windDirection);\n\n    strand[i].lastPosition = new CubismVector2(\n      strand[i].position.x,\n      strand[i].position.y\n    );\n\n    strand[i].velocity = new CubismVector2(0.0, 0.0);\n    force = strand[i].force;\n    force.normalize();\n\n    force = force.multiplyByScaler(strand[i].radius);\n    strand[i].position = strand[i - 1].position.add(force);\n\n    if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\n      strand[i].position.x = 0.0;\n    }\n\n    strand[i].force = new CubismVector2(0.0, 0.0);\n    strand[i].lastGravity = new CubismVector2(\n      currentGravity.x,\n      currentGravity.y\n    );\n  }\n}\n\n/**\n * Updates output parameter value.\n * @param parameterValue            Target parameter value.\n * @param parameterValueMinimum     Minimum of parameter value.\n * @param parameterValueMaximum     Maximum of parameter value.\n * @param translation               Translation value.\n */\nfunction updateOutputParameterValue(\n  parameterValue: Float32Array,\n  parameterValueMinimum: number,\n  parameterValueMaximum: number,\n  translation: number,\n  output: CubismPhysicsOutput\n): void {\n  let outputScale: number;\n  let value: number;\n  let weight: number;\n\n  outputScale = output.getScale(output.translationScale, output.angleScale);\n\n  value = translation * outputScale;\n\n  if (value < parameterValueMinimum) {\n    if (value < output.valueBelowMinimum) {\n      output.valueBelowMinimum = value;\n    }\n\n    value = parameterValueMinimum;\n  } else if (value > parameterValueMaximum) {\n    if (value > output.valueExceededMaximum) {\n      output.valueExceededMaximum = value;\n    }\n\n    value = parameterValueMaximum;\n  }\n\n  weight = output.weight / MaximumWeight;\n\n  if (weight >= 1.0) {\n    parameterValue[0] = value;\n  } else {\n    value = parameterValue[0] * (1.0 - weight) + value * weight;\n    parameterValue[0] = value;\n  }\n}\n\nfunction normalizeParameterValue(\n  value: number,\n  parameterMinimum: number,\n  parameterMaximum: number,\n  parameterDefault: number,\n  normalizedMinimum: number,\n  normalizedMaximum: number,\n  normalizedDefault: number,\n  isInverted: boolean\n) {\n  let result = 0.0;\n\n  const maxValue: number = CubismMath.max(parameterMaximum, parameterMinimum);\n\n  if (maxValue < value) {\n    value = maxValue;\n  }\n\n  const minValue: number = CubismMath.min(parameterMaximum, parameterMinimum);\n\n  if (minValue > value) {\n    value = minValue;\n  }\n\n  const minNormValue: number = CubismMath.min(\n    normalizedMinimum,\n    normalizedMaximum\n  );\n  const maxNormValue: number = CubismMath.max(\n    normalizedMinimum,\n    normalizedMaximum\n  );\n  const middleNormValue: number = normalizedDefault;\n\n  const middleValue: number = getDefaultValue(minValue, maxValue);\n  const paramValue: number = value - middleValue;\n\n  switch (sign(paramValue)) {\n    case 1: {\n      const nLength: number = maxNormValue - middleNormValue;\n      const pLength: number = maxValue - middleValue;\n\n      if (pLength != 0.0) {\n        result = paramValue * (nLength / pLength);\n        result += middleNormValue;\n      }\n\n      break;\n    }\n    case -1: {\n      const nLength: number = minNormValue - middleNormValue;\n      const pLength: number = minValue - middleValue;\n\n      if (pLength != 0.0) {\n        result = paramValue * (nLength / pLength);\n        result += middleNormValue;\n      }\n\n      break;\n    }\n    case 0: {\n      result = middleNormValue;\n\n      break;\n    }\n    default: {\n      break;\n    }\n  }\n\n  return isInverted ? result : result * -1.0;\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismphysics';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismPhysics = $.CubismPhysics;\n  export type CubismPhysics = $.CubismPhysics;\n  export const Options = $.Options;\n  export type Options = $.Options;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismVector2 } from '../math/cubismvector2';\nimport { csmVector } from '../type/csmvector';\n\n/**\n * 物理演算の適用先の種類\n */\nexport enum CubismPhysicsTargetType {\n  CubismPhysicsTargetType_Parameter, // パラメータに対して適用\n}\n\n/**\n * 物理演算の入力の種類\n */\nexport enum CubismPhysicsSource {\n  CubismPhysicsSource_X, // X軸の位置から\n  CubismPhysicsSource_Y, // Y軸の位置から\n  CubismPhysicsSource_Angle, // 角度から\n}\n\n/**\n * @brief 物理演算で使用する外部の力\n *\n * 物理演算で使用する外部の力。\n */\nexport class PhysicsJsonEffectiveForces {\n  constructor() {\n    this.gravity = new CubismVector2(0, 0);\n    this.wind = new CubismVector2(0, 0);\n  }\n  gravity: CubismVector2; // 重力\n  wind: CubismVector2; // 風\n}\n\n/**\n * 物理演算のパラメータ情報\n */\nexport class CubismPhysicsParameter {\n  id: CubismIdHandle; // パラメータ\n  targetType: CubismPhysicsTargetType; // 適用先の種類\n}\n\n/**\n * 物理演算の正規化情報\n */\nexport class CubismPhysicsNormalization {\n  minimum: number; // 最大値\n  maximum: number; // 最小値\n  defalut: number; // デフォルト値\n}\n\n/**\n * 物理演算の演算委使用する物理点の情報\n */\nexport class CubismPhysicsParticle {\n  constructor() {\n    this.initialPosition = new CubismVector2(0, 0);\n    this.position = new CubismVector2(0, 0);\n    this.lastPosition = new CubismVector2(0, 0);\n    this.lastGravity = new CubismVector2(0, 0);\n    this.force = new CubismVector2(0, 0);\n    this.velocity = new CubismVector2(0, 0);\n  }\n\n  initialPosition: CubismVector2; // 初期位置\n  mobility: number; // 動きやすさ\n  delay: number; // 遅れ\n  acceleration: number; // 加速度\n  radius: number; // 距離\n  position: CubismVector2; // 現在の位置\n  lastPosition: CubismVector2; // 最後の位置\n  lastGravity: CubismVector2; // 最後の重力\n  force: CubismVector2; // 現在かかっている力\n  velocity: CubismVector2; // 現在の速度\n}\n\n/**\n * 物理演算の物理点の管理\n */\nexport class CubismPhysicsSubRig {\n  constructor() {\n    this.normalizationPosition = new CubismPhysicsNormalization();\n    this.normalizationAngle = new CubismPhysicsNormalization();\n  }\n  inputCount: number; // 入力の個数\n  outputCount: number; // 出力の個数\n  particleCount: number; // 物理点の個数\n  baseInputIndex: number; // 入力の最初のインデックス\n  baseOutputIndex: number; // 出力の最初のインデックス\n  baseParticleIndex: number; // 物理点の最初のインデックス\n  normalizationPosition: CubismPhysicsNormalization; // 正規化された位置\n  normalizationAngle: CubismPhysicsNormalization; // 正規化された角度\n}\n\n/**\n * 正規化されたパラメータの取得関数の宣言\n * @param targetTranslation     // 演算結果の移動値\n * @param targetAngle           // 演算結果の角度\n * @param value                 // パラメータの値\n * @param parameterMinimunValue // パラメータの最小値\n * @param parameterMaximumValue // パラメータの最大値\n * @param parameterDefaultValue // パラメータのデフォルト値\n * @param normalizationPosition // 正規化された位置\n * @param normalizationAngle    // 正規化された角度\n * @param isInverted            // 値が反転されているか？\n * @param weight                // 重み\n */\nexport interface normalizedPhysicsParameterValueGetter {\n  (\n    targetTranslation: CubismVector2,\n    targetAngle: { angle: number },\n    value: number,\n    parameterMinimunValue: number,\n    parameterMaximumValue: number,\n    parameterDefaultValue: number,\n    normalizationPosition: CubismPhysicsNormalization,\n    normalizationAngle: CubismPhysicsNormalization,\n    isInverted: boolean,\n    weight: number\n  ): void;\n}\n\n/**\n * 物理演算の値の取得関数の宣言\n * @param translation 移動値\n * @param particles 物理点のリスト\n * @param isInverted 値が反映されているか\n * @param parentGravity 重力\n * @return 値\n */\nexport interface physicsValueGetter {\n  (\n    translation: CubismVector2,\n    particles: CubismPhysicsParticle[],\n    particleIndex: number,\n    isInverted: boolean,\n    parentGravity: CubismVector2\n  ): number;\n}\n\n/**\n * 物理演算のスケールの取得関数の宣言\n * @param translationScale 移動値のスケール\n * @param angleScale    角度のスケール\n * @return スケール値\n */\nexport interface physicsScaleGetter {\n  (translationScale: CubismVector2, angleScale: number): number;\n}\n\n/**\n * 物理演算の入力情報\n */\nexport class CubismPhysicsInput {\n  constructor() {\n    this.source = new CubismPhysicsParameter();\n  }\n  source: CubismPhysicsParameter; // 入力元のパラメータ\n  sourceParameterIndex: number; // 入力元のパラメータのインデックス\n  weight: number; // 重み\n  type: number; // 入力の種類\n  reflect: boolean; // 値が反転されているかどうか\n  getNormalizedParameterValue: normalizedPhysicsParameterValueGetter; // 正規化されたパラメータ値の取得関数\n}\n\n/**\n * @brief 物理演算の出力情報\n *\n * 物理演算の出力情報。\n */\nexport class CubismPhysicsOutput {\n  constructor() {\n    this.destination = new CubismPhysicsParameter();\n    this.translationScale = new CubismVector2(0, 0);\n  }\n\n  destination: CubismPhysicsParameter; // 出力先のパラメータ\n  destinationParameterIndex: number; // 出力先のパラメータのインデックス\n  vertexIndex: number; // 振り子のインデックス\n  translationScale: CubismVector2; // 移動値のスケール\n  angleScale: number; // 角度のスケール\n  weight: number; // 重み\n  type: CubismPhysicsSource; // 出力の種類\n  reflect: boolean; // 値が反転されているかどうか\n  valueBelowMinimum: number; // 最小値を下回った時の値\n  valueExceededMaximum: number; // 最大値をこえた時の値\n  getValue: physicsValueGetter; // 物理演算の値の取得関数\n  getScale: physicsScaleGetter; // 物理演算のスケール値の取得関数\n}\n\n/**\n * @brief 物理演算のデータ\n *\n * 物理演算のデータ。\n */\nexport class CubismPhysicsRig {\n  constructor() {\n    this.settings = new csmVector<CubismPhysicsSubRig>();\n    this.inputs = new csmVector<CubismPhysicsInput>();\n    this.outputs = new csmVector<CubismPhysicsOutput>();\n    this.particles = new csmVector<CubismPhysicsParticle>();\n    this.gravity = new CubismVector2(0, 0);\n    this.wind = new CubismVector2(0, 0);\n    this.fps = 0.0;\n  }\n\n  subRigCount: number; // 物理演算の物理点の個数\n  settings: csmVector<CubismPhysicsSubRig>; // 物理演算の物理点の管理のリスト\n  inputs: csmVector<CubismPhysicsInput>; // 物理演算の入力のリスト\n  outputs: csmVector<CubismPhysicsOutput>; // 物理演算の出力のリスト\n  particles: csmVector<CubismPhysicsParticle>; // 物理演算の物理点のリスト\n  gravity: CubismVector2; // 重力\n  wind: CubismVector2; // 風\n  fps: number; //物理演算動作FPS\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismphysicsinternal';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismPhysicsInput = $.CubismPhysicsInput;\n  export type CubismPhysicsInput = $.CubismPhysicsInput;\n  export const CubismPhysicsNormalization = $.CubismPhysicsNormalization;\n  export type CubismPhysicsNormalization = $.CubismPhysicsNormalization;\n  export const CubismPhysicsOutput = $.CubismPhysicsOutput;\n  export type CubismPhysicsOutput = $.CubismPhysicsOutput;\n  export const CubismPhysicsParameter = $.CubismPhysicsParameter;\n  export type CubismPhysicsParameter = $.CubismPhysicsParameter;\n  export const CubismPhysicsParticle = $.CubismPhysicsParticle;\n  export type CubismPhysicsParticle = $.CubismPhysicsParticle;\n  export const CubismPhysicsRig = $.CubismPhysicsRig;\n  export type CubismPhysicsRig = $.CubismPhysicsRig;\n  export const CubismPhysicsSource = $.CubismPhysicsSource;\n  export type CubismPhysicsSource = $.CubismPhysicsSource;\n  export const CubismPhysicsSubRig = $.CubismPhysicsSubRig;\n  export type CubismPhysicsSubRig = $.CubismPhysicsSubRig;\n  export const CubismPhysicsTargetType = $.CubismPhysicsTargetType;\n  export type CubismPhysicsTargetType = $.CubismPhysicsTargetType;\n  export const PhysicsJsonEffectiveForces = $.PhysicsJsonEffectiveForces;\n  export type PhysicsJsonEffectiveForces = $.PhysicsJsonEffectiveForces;\n  export type normalizedPhysicsParameterValueGetter =\n    $.normalizedPhysicsParameterValueGetter;\n  export type physicsScaleGetter = $.physicsScaleGetter;\n  export type physicsValueGetter = $.physicsValueGetter;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismIdHandle } from '../id/cubismid';\nimport { CubismFramework } from '../live2dcubismframework';\nimport { CubismVector2 } from '../math/cubismvector2';\nimport { CubismJson } from '../utils/cubismjson';\n\n// JSON keys\nconst Position = 'Position';\nconst X = 'X';\nconst Y = 'Y';\nconst Angle = 'Angle';\nconst Type = 'Type';\nconst Id = 'Id';\n\n// Meta\nconst Meta = 'Meta';\nconst EffectiveForces = 'EffectiveForces';\nconst TotalInputCount = 'TotalInputCount';\nconst TotalOutputCount = 'TotalOutputCount';\nconst PhysicsSettingCount = 'PhysicsSettingCount';\nconst Gravity = 'Gravity';\nconst Wind = 'Wind';\nconst VertexCount = 'VertexCount';\nconst Fps = 'Fps';\n\n// PhysicsSettings\nconst PhysicsSettings = 'PhysicsSettings';\nconst Normalization = 'Normalization';\nconst Minimum = 'Minimum';\nconst Maximum = 'Maximum';\nconst Default = 'Default';\nconst Reflect = 'Reflect';\nconst Weight = 'Weight';\n\n// Input\nconst Input = 'Input';\nconst Source = 'Source';\n\n// Output\nconst Output = 'Output';\nconst Scale = 'Scale';\nconst VertexIndex = 'VertexIndex';\nconst Destination = 'Destination';\n\n// Particle\nconst Vertices = 'Vertices';\nconst Mobility = 'Mobility';\nconst Delay = 'Delay';\nconst Radius = 'Radius';\nconst Acceleration = 'Acceleration';\n\n/**\n * physics3.jsonのコンテナ。\n */\nexport class CubismPhysicsJson {\n  /**\n   * コンストラクタ\n   * @param buffer physics3.jsonが読み込まれているバッファ\n   * @param size バッファのサイズ\n   */\n  public constructor(buffer: ArrayBuffer, size: number) {\n    this._json = CubismJson.create(buffer, size);\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    CubismJson.delete(this._json);\n  }\n\n  /**\n   * 重力の取得\n   * @return 重力\n   */\n  public getGravity(): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2(0, 0);\n    ret.x = this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(EffectiveForces)\n      .getValueByString(Gravity)\n      .getValueByString(X)\n      .toFloat();\n    ret.y = this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(EffectiveForces)\n      .getValueByString(Gravity)\n      .getValueByString(Y)\n      .toFloat();\n    return ret;\n  }\n\n  /**\n   * 風の取得\n   * @return 風\n   */\n  public getWind(): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2(0, 0);\n    ret.x = this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(EffectiveForces)\n      .getValueByString(Wind)\n      .getValueByString(X)\n      .toFloat();\n    ret.y = this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(EffectiveForces)\n      .getValueByString(Wind)\n      .getValueByString(Y)\n      .toFloat();\n    return ret;\n  }\n\n  /**\n   * 物理演算設定FPSの取得\n   * @return 物理演算設定FPS\n   */\n  public getFps(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(Fps)\n      .toFloat(0.0);\n  }\n\n  /**\n   * 物理店の管理の個数の取得\n   * @return 物理店の管理の個数\n   */\n  public getSubRigCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(PhysicsSettingCount)\n      .toInt();\n  }\n\n  /**\n   * 入力の総合計の取得\n   * @return 入力の総合計\n   */\n  public getTotalInputCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(TotalInputCount)\n      .toInt();\n  }\n\n  /**\n   * 出力の総合計の取得\n   * @return 出力の総合計\n   */\n  public getTotalOutputCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(TotalOutputCount)\n      .toInt();\n  }\n\n  /**\n   * 物理点の個数の取得\n   * @return 物理点の個数\n   */\n  public getVertexCount(): number {\n    return this._json\n      .getRoot()\n      .getValueByString(Meta)\n      .getValueByString(VertexCount)\n      .toInt();\n  }\n\n  /**\n   * 正規化された位置の最小値の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @return 正規化された位置の最小値\n   */\n  public getNormalizationPositionMinimumValue(\n    physicsSettingIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Normalization)\n      .getValueByString(Position)\n      .getValueByString(Minimum)\n      .toFloat();\n  }\n\n  /**\n   * 正規化された位置の最大値の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @return 正規化された位置の最大値\n   */\n  public getNormalizationPositionMaximumValue(\n    physicsSettingIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Normalization)\n      .getValueByString(Position)\n      .getValueByString(Maximum)\n      .toFloat();\n  }\n\n  /**\n   * 正規化された位置のデフォルト値の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @return 正規化された位置のデフォルト値\n   */\n  public getNormalizationPositionDefaultValue(\n    physicsSettingIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Normalization)\n      .getValueByString(Position)\n      .getValueByString(Default)\n      .toFloat();\n  }\n\n  /**\n   * 正規化された角度の最小値の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @return 正規化された角度の最小値\n   */\n  public getNormalizationAngleMinimumValue(\n    physicsSettingIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Normalization)\n      .getValueByString(Angle)\n      .getValueByString(Minimum)\n      .toFloat();\n  }\n\n  /**\n   * 正規化された角度の最大値の取得\n   * @param physicsSettingIndex\n   * @return 正規化された角度の最大値\n   */\n  public getNormalizationAngleMaximumValue(\n    physicsSettingIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Normalization)\n      .getValueByString(Angle)\n      .getValueByString(Maximum)\n      .toFloat();\n  }\n\n  /**\n   * 正規化された角度のデフォルト値の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @return 正規化された角度のデフォルト値\n   */\n  public getNormalizationAngleDefaultValue(\n    physicsSettingIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Normalization)\n      .getValueByString(Angle)\n      .getValueByString(Default)\n      .toFloat();\n  }\n\n  /**\n   * 入力の個数の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @return 入力の個数\n   */\n  public getInputCount(physicsSettingIndex: number): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Input)\n      .getVector()\n      .getSize();\n  }\n\n  /**\n   * 入力の重みの取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param inputIndex 入力のインデックス\n   * @return 入力の重み\n   */\n  public getInputWeight(\n    physicsSettingIndex: number,\n    inputIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Input)\n      .getValueByIndex(inputIndex)\n      .getValueByString(Weight)\n      .toFloat();\n  }\n\n  /**\n   * 入力の反転の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param inputIndex 入力のインデックス\n   * @return 入力の反転\n   */\n  public getInputReflect(\n    physicsSettingIndex: number,\n    inputIndex: number\n  ): boolean {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Input)\n      .getValueByIndex(inputIndex)\n      .getValueByString(Reflect)\n      .toBoolean();\n  }\n\n  /**\n   * 入力の種類の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param inputIndex 入力のインデックス\n   * @return 入力の種類\n   */\n  public getInputType(physicsSettingIndex: number, inputIndex: number): string {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Input)\n      .getValueByIndex(inputIndex)\n      .getValueByString(Type)\n      .getRawString();\n  }\n\n  /**\n   * 入力元のIDの取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param inputIndex 入力のインデックス\n   * @return 入力元のID\n   */\n  public getInputSourceId(\n    physicsSettingIndex: number,\n    inputIndex: number\n  ): CubismIdHandle {\n    return CubismFramework.getIdManager().getId(\n      this._json\n        .getRoot()\n        .getValueByString(PhysicsSettings)\n        .getValueByIndex(physicsSettingIndex)\n        .getValueByString(Input)\n        .getValueByIndex(inputIndex)\n        .getValueByString(Source)\n        .getValueByString(Id)\n        .getRawString()\n    );\n  }\n\n  /**\n   * 出力の個数の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @return 出力の個数\n   */\n  public getOutputCount(physicsSettingIndex: number): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Output)\n      .getVector()\n      .getSize();\n  }\n\n  /**\n   * 出力の物理点のインデックスの取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param outputIndex 出力のインデックス\n   * @return 出力の物理点のインデックス\n   */\n  public getOutputVertexIndex(\n    physicsSettingIndex: number,\n    outputIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Output)\n      .getValueByIndex(outputIndex)\n      .getValueByString(VertexIndex)\n      .toInt();\n  }\n\n  /**\n   * 出力の角度のスケールを取得する\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param outputIndex 出力のインデックス\n   * @return 出力の角度のスケール\n   */\n  public getOutputAngleScale(\n    physicsSettingIndex: number,\n    outputIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Output)\n      .getValueByIndex(outputIndex)\n      .getValueByString(Scale)\n      .toFloat();\n  }\n\n  /**\n   * 出力の重みの取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param outputIndex 出力のインデックス\n   * @return 出力の重み\n   */\n  public getOutputWeight(\n    physicsSettingIndex: number,\n    outputIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Output)\n      .getValueByIndex(outputIndex)\n      .getValueByString(Weight)\n      .toFloat();\n  }\n\n  /**\n   * 出力先のIDの取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param outputIndex 出力のインデックス\n   * @return 出力先のID\n   */\n  public getOutputDestinationId(\n    physicsSettingIndex: number,\n    outputIndex: number\n  ): CubismIdHandle {\n    return CubismFramework.getIdManager().getId(\n      this._json\n        .getRoot()\n        .getValueByString(PhysicsSettings)\n        .getValueByIndex(physicsSettingIndex)\n        .getValueByString(Output)\n        .getValueByIndex(outputIndex)\n        .getValueByString(Destination)\n        .getValueByString(Id)\n        .getRawString()\n    );\n  }\n\n  /**\n   * 出力の種類の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param outputIndex 出力のインデックス\n   * @return 出力の種類\n   */\n  public getOutputType(\n    physicsSettingIndex: number,\n    outputIndex: number\n  ): string {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Output)\n      .getValueByIndex(outputIndex)\n      .getValueByString(Type)\n      .getRawString();\n  }\n\n  /**\n   * 出力の反転の取得\n   * @param physicsSettingIndex 物理演算のインデックス\n   * @param outputIndex 出力のインデックス\n   * @return 出力の反転\n   */\n  public getOutputReflect(\n    physicsSettingIndex: number,\n    outputIndex: number\n  ): boolean {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Output)\n      .getValueByIndex(outputIndex)\n      .getValueByString(Reflect)\n      .toBoolean();\n  }\n\n  /**\n   * 物理点の個数の取得\n   * @param physicsSettingIndex 物理演算男設定のインデックス\n   * @return 物理点の個数\n   */\n  public getParticleCount(physicsSettingIndex: number): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Vertices)\n      .getVector()\n      .getSize();\n  }\n\n  /**\n   * 物理点の動きやすさの取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param vertexIndex 物理点のインデックス\n   * @return 物理点の動きやすさ\n   */\n  public getParticleMobility(\n    physicsSettingIndex: number,\n    vertexIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Vertices)\n      .getValueByIndex(vertexIndex)\n      .getValueByString(Mobility)\n      .toFloat();\n  }\n\n  /**\n   * 物理点の遅れの取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param vertexIndex 物理点のインデックス\n   * @return 物理点の遅れ\n   */\n  public getParticleDelay(\n    physicsSettingIndex: number,\n    vertexIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Vertices)\n      .getValueByIndex(vertexIndex)\n      .getValueByString(Delay)\n      .toFloat();\n  }\n\n  /**\n   * 物理点の加速度の取得\n   * @param physicsSettingIndex 物理演算の設定\n   * @param vertexIndex 物理点のインデックス\n   * @return 物理点の加速度\n   */\n  public getParticleAcceleration(\n    physicsSettingIndex: number,\n    vertexIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Vertices)\n      .getValueByIndex(vertexIndex)\n      .getValueByString(Acceleration)\n      .toFloat();\n  }\n\n  /**\n   * 物理点の距離の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param vertexIndex 物理点のインデックス\n   * @return 物理点の距離\n   */\n  public getParticleRadius(\n    physicsSettingIndex: number,\n    vertexIndex: number\n  ): number {\n    return this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Vertices)\n      .getValueByIndex(vertexIndex)\n      .getValueByString(Radius)\n      .toFloat();\n  }\n\n  /**\n   * 物理点の位置の取得\n   * @param physicsSettingIndex 物理演算の設定のインデックス\n   * @param vertexInde 物理点のインデックス\n   * @return 物理点の位置\n   */\n  public getParticlePosition(\n    physicsSettingIndex: number,\n    vertexIndex: number\n  ): CubismVector2 {\n    const ret: CubismVector2 = new CubismVector2(0, 0);\n    ret.x = this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Vertices)\n      .getValueByIndex(vertexIndex)\n      .getValueByString(Position)\n      .getValueByString(X)\n      .toFloat();\n    ret.y = this._json\n      .getRoot()\n      .getValueByString(PhysicsSettings)\n      .getValueByIndex(physicsSettingIndex)\n      .getValueByString(Vertices)\n      .getValueByIndex(vertexIndex)\n      .getValueByString(Position)\n      .getValueByString(Y)\n      .toFloat();\n    return ret;\n  }\n\n  _json: CubismJson; // physics3.jsonデータ\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismphysicsjson';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismPhysicsJson = $.CubismPhysicsJson;\n  export type CubismPhysicsJson = $.CubismPhysicsJson;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismMatrix44 } from '../math/cubismmatrix44';\nimport { CubismModel } from '../model/cubismmodel';\n\n/**\n * モデル描画を処理するレンダラ\n *\n * サブクラスに環境依存の描画命令を記述する。\n */\nexport abstract class CubismRenderer {\n  /**\n   * レンダラのインスタンスを生成して取得する\n   *\n   * @return レンダラのインスタンス\n   */\n  public static create(): CubismRenderer {\n    return null;\n  }\n\n  /**\n   * レンダラのインスタンスを解放する\n   */\n  public static delete(renderer: CubismRenderer): void {\n    renderer = null;\n  }\n\n  /**\n   * レンダラの初期化処理を実行する\n   * 引数に渡したモデルからレンダラの初期化処理に必要な情報を取り出すことができる\n   * @param model モデルのインスタンス\n   */\n  public initialize(model: CubismModel): void {\n    this._model = model;\n  }\n\n  /**\n   * モデルを描画する\n   */\n  public drawModel(): void {\n    if (this.getModel() == null) return;\n\n    this.saveProfile();\n\n    this.doDrawModel();\n\n    this.restoreProfile();\n  }\n\n  /**\n   * Model-View-Projection 行列をセットする\n   * 配列は複製されるので、元の配列は外で破棄して良い\n   * @param matrix44 Model-View-Projection 行列\n   */\n  public setMvpMatrix(matrix44: CubismMatrix44): void {\n    this._mvpMatrix4x4.setMatrix(matrix44.getArray());\n  }\n\n  /**\n   * Model-View-Projection 行列を取得する\n   * @return Model-View-Projection 行列\n   */\n  public getMvpMatrix(): CubismMatrix44 {\n    return this._mvpMatrix4x4;\n  }\n\n  /**\n   * モデルの色をセットする\n   * 各色0.0~1.0の間で指定する（1.0が標準の状態）\n   * @param red 赤チャンネルの値\n   * @param green 緑チャンネルの値\n   * @param blue 青チャンネルの値\n   * @param alpha αチャンネルの値\n   */\n  public setModelColor(\n    red: number,\n    green: number,\n    blue: number,\n    alpha: number\n  ): void {\n    if (red < 0.0) {\n      red = 0.0;\n    } else if (red > 1.0) {\n      red = 1.0;\n    }\n\n    if (green < 0.0) {\n      green = 0.0;\n    } else if (green > 1.0) {\n      green = 1.0;\n    }\n\n    if (blue < 0.0) {\n      blue = 0.0;\n    } else if (blue > 1.0) {\n      blue = 1.0;\n    }\n\n    if (alpha < 0.0) {\n      alpha = 0.0;\n    } else if (alpha > 1.0) {\n      alpha = 1.0;\n    }\n\n    this._modelColor.R = red;\n    this._modelColor.G = green;\n    this._modelColor.B = blue;\n    this._modelColor.A = alpha;\n  }\n\n  /**\n   * モデルの色を取得する\n   * 各色0.0~1.0の間で指定する(1.0が標準の状態)\n   *\n   * @return RGBAのカラー情報\n   */\n  public getModelColor(): CubismTextureColor {\n    return JSON.parse(JSON.stringify(this._modelColor));\n  }\n\n  /**\n   * 乗算済みαの有効・無効をセットする\n   * 有効にするならtrue、無効にするならfalseをセットする\n   */\n  public setIsPremultipliedAlpha(enable: boolean): void {\n    this._isPremultipliedAlpha = enable;\n  }\n\n  /**\n   * 乗算済みαの有効・無効を取得する\n   * @return true 乗算済みのα有効\n   * @return false 乗算済みのα無効\n   */\n  public isPremultipliedAlpha(): boolean {\n    return this._isPremultipliedAlpha;\n  }\n\n  /**\n   * カリング（片面描画）の有効・無効をセットする。\n   * 有効にするならtrue、無効にするならfalseをセットする\n   */\n  public setIsCulling(culling: boolean): void {\n    this._isCulling = culling;\n  }\n\n  /**\n   * カリング（片面描画）の有効・無効を取得する。\n   * @return true カリング有効\n   * @return false カリング無効\n   */\n  public isCulling(): boolean {\n    return this._isCulling;\n  }\n\n  /**\n   * テクスチャの異方性フィルタリングのパラメータをセットする\n   * パラメータ値の影響度はレンダラの実装に依存する\n   * @param n パラメータの値\n   */\n  public setAnisotropy(n: number): void {\n    this._anisotropy = n;\n  }\n\n  /**\n   * テクスチャの異方性フィルタリングのパラメータをセットする\n   * @return 異方性フィルタリングのパラメータ\n   */\n  public getAnisotropy(): number {\n    return this._anisotropy;\n  }\n\n  /**\n   * レンダリングするモデルを取得する\n   * @return レンダリングするモデル\n   */\n  public getModel(): CubismModel {\n    return this._model;\n  }\n\n  /**\n   * マスク描画の方式を変更する。\n   * falseの場合、マスクを1枚のテクスチャに分割してレンダリングする（デフォルト）\n   * 高速だが、マスク個数の上限が36に限定され、質も荒くなる\n   * trueの場合、パーツ描画の前にその都度必要なマスクを描き直す\n   * レンダリング品質は高いが描画処理負荷は増す\n   * @param high 高精細マスクに切り替えるか？\n   */\n  public useHighPrecisionMask(high: boolean): void {\n    this._useHighPrecisionMask = high;\n  }\n\n  /**\n   * マスクの描画方式を取得する\n   * @return true 高精細方式\n   * @return false デフォルト\n   */\n  public isUsingHighPrecisionMask(): boolean {\n    return this._useHighPrecisionMask;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  protected constructor() {\n    this._isCulling = false;\n    this._isPremultipliedAlpha = false;\n    this._anisotropy = 0.0;\n    this._model = null;\n    this._modelColor = new CubismTextureColor();\n    this._useHighPrecisionMask = false;\n\n    // 単位行列に初期化\n    this._mvpMatrix4x4 = new CubismMatrix44();\n    this._mvpMatrix4x4.loadIdentity();\n  }\n\n  /**\n   * モデル描画の実装\n   */\n  public abstract doDrawModel(): void;\n\n  /**\n   * 描画オブジェクト（アートメッシュ）を描画する\n   * ポリゴンメッシュとテクスチャ番号をセットで渡す。\n   * @param textureNo 描画するテクスチャ番号\n   * @param indexCount 描画オブジェクトのインデックス値\n   * @param vertexCount ポリゴンメッシュの頂点数\n   * @param indexArray ポリゴンメッシュ頂点のインデックス配列\n   * @param vertexArray ポリゴンメッシュの頂点配列\n   * @param uvArray uv配列\n   * @param opacity 不透明度\n   * @param colorBlendMode カラーブレンディングのタイプ\n   * @param invertedMask マスク使用時のマスクの反転使用\n   */\n  public abstract drawMesh(\n    textureNo: number,\n    indexCount: number,\n    vertexCount: number,\n    indexArray: Uint16Array,\n    vertexArray: Float32Array,\n    uvArray: Float32Array,\n    multiplyColor: CubismTextureColor,\n    screenColor: CubismTextureColor,\n    opacity: number,\n    colorBlendMode: CubismBlendMode,\n    invertedMask: boolean\n  ): void;\n\n  /**\n   * モデル描画直前のレンダラのステートを保持する\n   */\n  protected abstract saveProfile(): void;\n\n  /**\n   * モデル描画直前のレンダラのステートを復帰する\n   */\n  protected abstract restoreProfile(): void;\n\n  /**\n   * レンダラが保持する静的なリソースを開放する\n   */\n  public static staticRelease: any;\n\n  protected _mvpMatrix4x4: CubismMatrix44; // Model-View-Projection 行列\n  protected _modelColor: CubismTextureColor; // モデル自体のカラー（RGBA）\n  protected _isCulling: boolean; // カリングが有効ならtrue\n  protected _isPremultipliedAlpha: boolean; // 乗算済みαならtrue\n  protected _anisotropy: any; // テクスチャの異方性フィルタリングのパラメータ\n  protected _model: CubismModel; // レンダリング対象のモデル\n  protected _useHighPrecisionMask: boolean; // falseの場合、マスクを纏めて描画する trueの場合、マスクはパーツ描画ごとに書き直す\n}\n\nexport enum CubismBlendMode {\n  CubismBlendMode_Normal = 0, // 通常\n  CubismBlendMode_Additive = 1, // 加算\n  CubismBlendMode_Multiplicative = 2, // 乗算\n}\n\n/**\n * テクスチャの色をRGBAで扱うためのクラス\n */\nexport class CubismTextureColor {\n  /**\n   * コンストラクタ\n   */\n  constructor(r = 1.0, g = 1.0, b = 1.0, a = 1.0) {\n    this.R = r;\n    this.G = g;\n    this.B = b;\n    this.A = a;\n  }\n\n  R: number; // 赤チャンネル\n  G: number; // 緑チャンネル\n  B: number; // 青チャンネル\n  A: number; // αチャンネル\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismrenderer';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismBlendMode = $.CubismBlendMode;\n  export type CubismBlendMode = $.CubismBlendMode;\n  export const CubismRenderer = $.CubismRenderer;\n  export type CubismRenderer = $.CubismRenderer;\n  export const CubismTextureColor = $.CubismTextureColor;\n  export type CubismTextureColor = $.CubismTextureColor;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { Constant } from '../live2dcubismframework';\nimport { CubismMatrix44 } from '../math/cubismmatrix44';\nimport { CubismModel } from '../model/cubismmodel';\nimport { csmMap } from '../type/csmmap';\nimport { csmRect } from '../type/csmrectf';\nimport { csmVector } from '../type/csmvector';\nimport { CubismLogError, CubismLogWarning } from '../utils/cubismdebug';\nimport {\n  CubismBlendMode,\n  CubismRenderer,\n  CubismTextureColor,\n} from './cubismrenderer';\n\nconst ColorChannelCount = 4; // 実験時に1チャンネルの場合は1、RGBだけの場合は3、アルファも含める場合は4\nconst ClippingMaskMaxCountOnDefault = 36; // 通常のフレームバッファ一枚あたりのマスク最大数\nconst ClippingMaskMaxCountOnMultiRenderTexture = 32; // フレームバッファが2枚以上ある場合のフレームバッファ一枚あたりのマスク最大数\n\nconst ShaderCount = 10; // シェーダーの数 = マスク生成用 + (通常用 + 加算 + 乗算) * (マスク無の乗算済アルファ対応版 + マスク有の乗算済アルファ対応版 + マスク有反転の乗算済アルファ対応版)\nlet s_instance: CubismShader_WebGL;\nlet s_viewport: number[];\nlet s_fbo: WebGLFramebuffer;\n\n/**\n * クリッピングマスクの処理を実行するクラス\n */\nexport class CubismClippingManager_WebGL {\n  /**\n   * カラーチャンネル（RGBA）のフラグを取得する\n   * @param channelNo カラーチャンネル（RGBA）の番号（0:R, 1:G, 2:B, 3:A）\n   */\n  public getChannelFlagAsColor(channelNo: number): CubismTextureColor {\n    return this._channelColors.at(channelNo);\n  }\n\n  /**\n   * テンポラリのレンダーテクスチャのアドレスを取得する\n   * FrameBufferObjectが存在しない場合、新しく生成する\n   *\n   * @return レンダーテクスチャの配列\n   */\n  public getMaskRenderTexture(): csmVector<WebGLFramebuffer> {\n    // テンポラリのRenderTextureを取得する\n    if (this._maskTexture && this._maskTexture.textures != null) {\n      // 前回使ったものを返す\n      this._maskTexture.frameNo = this._currentFrameNo;\n    } else {\n      // FrameBufferObjectが存在しない場合、新しく生成する\n      if (this._maskRenderTextures != null) {\n        this._maskRenderTextures.clear();\n      }\n      this._maskRenderTextures = new csmVector<WebGLFramebuffer>();\n\n      // ColorBufferObjectが存在しない場合、新しく生成する\n      if (this._maskColorBuffers != null) {\n        this._maskColorBuffers.clear();\n      }\n      this._maskColorBuffers = new csmVector<WebGLTexture>();\n\n      // クリッピングバッファサイズを取得\n      const size: number = this._clippingMaskBufferSize;\n\n      for (let index = 0; index < this._renderTextureCount; index++) {\n        this._maskColorBuffers.pushBack(this.gl.createTexture()); // 直接代入\n        this.gl.bindTexture(\n          this.gl.TEXTURE_2D,\n          this._maskColorBuffers.at(index)\n        );\n        this.gl.texImage2D(\n          this.gl.TEXTURE_2D,\n          0,\n          this.gl.RGBA,\n          size,\n          size,\n          0,\n          this.gl.RGBA,\n          this.gl.UNSIGNED_BYTE,\n          null\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_WRAP_S,\n          this.gl.CLAMP_TO_EDGE\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_WRAP_T,\n          this.gl.CLAMP_TO_EDGE\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_MIN_FILTER,\n          this.gl.LINEAR\n        );\n        this.gl.texParameteri(\n          this.gl.TEXTURE_2D,\n          this.gl.TEXTURE_MAG_FILTER,\n          this.gl.LINEAR\n        );\n        this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n\n        this._maskRenderTextures.pushBack(this.gl.createFramebuffer());\n        this.gl.bindFramebuffer(\n          this.gl.FRAMEBUFFER,\n          this._maskRenderTextures.at(index)\n        );\n        this.gl.framebufferTexture2D(\n          this.gl.FRAMEBUFFER,\n          this.gl.COLOR_ATTACHMENT0,\n          this.gl.TEXTURE_2D,\n          this._maskColorBuffers.at(index),\n          0\n        );\n      }\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\n\n      this._maskTexture = new CubismRenderTextureResource(\n        this._currentFrameNo,\n        this._maskRenderTextures\n      );\n    }\n\n    return this._maskTexture.textures;\n  }\n\n  /**\n   * WebGLレンダリングコンテキストを設定する\n   * @param gl WebGLレンダリングコンテキスト\n   */\n  public setGL(gl: WebGLRenderingContext): void {\n    this.gl = gl;\n  }\n\n  /**\n   * マスクされる描画オブジェクト群全体を囲む矩形（モデル座標系）を計算する\n   * @param model モデルのインスタンス\n   * @param clippingContext クリッピングマスクのコンテキスト\n   */\n  public calcClippedDrawTotalBounds(\n    model: CubismModel,\n    clippingContext: CubismClippingContext\n  ): void {\n    // 被クリッピングマスク（マスクされる描画オブジェクト）の全体の矩形\n    let clippedDrawTotalMinX: number = Number.MAX_VALUE;\n    let clippedDrawTotalMinY: number = Number.MAX_VALUE;\n    let clippedDrawTotalMaxX: number = Number.MIN_VALUE;\n    let clippedDrawTotalMaxY: number = Number.MIN_VALUE;\n\n    // このマスクが実際に必要か判定する\n    // このクリッピングを利用する「描画オブジェクト」がひとつでも使用可能であればマスクを生成する必要がある\n    const clippedDrawCount: number =\n      clippingContext._clippedDrawableIndexList.length;\n\n    for (\n      let clippedDrawableIndex = 0;\n      clippedDrawableIndex < clippedDrawCount;\n      clippedDrawableIndex++\n    ) {\n      // マスクを使用する描画オブジェクトの描画される矩形を求める\n      const drawableIndex: number =\n        clippingContext._clippedDrawableIndexList[clippedDrawableIndex];\n\n      const drawableVertexCount: number =\n        model.getDrawableVertexCount(drawableIndex);\n      const drawableVertexes: Float32Array =\n        model.getDrawableVertices(drawableIndex);\n\n      let minX: number = Number.MAX_VALUE;\n      let minY: number = Number.MAX_VALUE;\n      let maxX: number = -Number.MAX_VALUE;\n      let maxY: number = -Number.MAX_VALUE;\n\n      const loop: number = drawableVertexCount * Constant.vertexStep;\n      for (\n        let pi: number = Constant.vertexOffset;\n        pi < loop;\n        pi += Constant.vertexStep\n      ) {\n        const x: number = drawableVertexes[pi];\n        const y: number = drawableVertexes[pi + 1];\n\n        if (x < minX) {\n          minX = x;\n        }\n        if (x > maxX) {\n          maxX = x;\n        }\n        if (y < minY) {\n          minY = y;\n        }\n        if (y > maxY) {\n          maxY = y;\n        }\n      }\n\n      // 有効な点が一つも取れなかったのでスキップ\n      if (minX == Number.MAX_VALUE) {\n        continue;\n      }\n\n      // 全体の矩形に反映\n      if (minX < clippedDrawTotalMinX) {\n        clippedDrawTotalMinX = minX;\n      }\n      if (minY < clippedDrawTotalMinY) {\n        clippedDrawTotalMinY = minY;\n      }\n      if (maxX > clippedDrawTotalMaxX) {\n        clippedDrawTotalMaxX = maxX;\n      }\n      if (maxY > clippedDrawTotalMaxY) {\n        clippedDrawTotalMaxY = maxY;\n      }\n\n      if (clippedDrawTotalMinX == Number.MAX_VALUE) {\n        clippingContext._allClippedDrawRect.x = 0.0;\n        clippingContext._allClippedDrawRect.y = 0.0;\n        clippingContext._allClippedDrawRect.width = 0.0;\n        clippingContext._allClippedDrawRect.height = 0.0;\n        clippingContext._isUsing = false;\n      } else {\n        clippingContext._isUsing = true;\n        const w: number = clippedDrawTotalMaxX - clippedDrawTotalMinX;\n        const h: number = clippedDrawTotalMaxY - clippedDrawTotalMinY;\n        clippingContext._allClippedDrawRect.x = clippedDrawTotalMinX;\n        clippingContext._allClippedDrawRect.y = clippedDrawTotalMinY;\n        clippingContext._allClippedDrawRect.width = w;\n        clippingContext._allClippedDrawRect.height = h;\n      }\n    }\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    this._currentMaskRenderTexture = null;\n    this._maskColorBuffers = null;\n    this._currentFrameNo = 0;\n    this._renderTextureCount = 0;\n    this._clippingMaskBufferSize = 256;\n    this._clippingContextListForMask = new csmVector<CubismClippingContext>();\n    this._clippingContextListForDraw = new csmVector<CubismClippingContext>();\n    this._channelColors = new csmVector<CubismTextureColor>();\n    this._tmpBoundsOnModel = new csmRect();\n    this._tmpMatrix = new CubismMatrix44();\n    this._tmpMatrixForMask = new CubismMatrix44();\n    this._tmpMatrixForDraw = new CubismMatrix44();\n    this._maskTexture = null;\n\n    let tmp: CubismTextureColor = new CubismTextureColor();\n    tmp.R = 1.0;\n    tmp.G = 0.0;\n    tmp.B = 0.0;\n    tmp.A = 0.0;\n    this._channelColors.pushBack(tmp);\n\n    tmp = new CubismTextureColor();\n    tmp.R = 0.0;\n    tmp.G = 1.0;\n    tmp.B = 0.0;\n    tmp.A = 0.0;\n    this._channelColors.pushBack(tmp);\n\n    tmp = new CubismTextureColor();\n    tmp.R = 0.0;\n    tmp.G = 0.0;\n    tmp.B = 1.0;\n    tmp.A = 0.0;\n    this._channelColors.pushBack(tmp);\n\n    tmp = new CubismTextureColor();\n    tmp.R = 0.0;\n    tmp.G = 0.0;\n    tmp.B = 0.0;\n    tmp.A = 1.0;\n    this._channelColors.pushBack(tmp);\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    for (let i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n      if (this._clippingContextListForMask.at(i)) {\n        this._clippingContextListForMask.at(i).release();\n        this._clippingContextListForMask.set(i, void 0);\n      }\n      this._clippingContextListForMask.set(i, null);\n    }\n    this._clippingContextListForMask = null;\n\n    // _clippingContextListForDrawは_clippingContextListForMaskにあるインスタンスを指している。上記の処理により要素ごとのDELETEは不要。\n    for (let i = 0; i < this._clippingContextListForDraw.getSize(); i++) {\n      this._clippingContextListForDraw.set(i, null);\n    }\n    this._clippingContextListForDraw = null;\n\n    if (this._maskTexture) {\n      for (let i = 0; i < this._maskTexture.textures.getSize(); i++) {\n        this.gl.deleteFramebuffer(this._maskTexture.textures.at(i));\n      }\n      this._maskTexture.textures.clear();\n      this._maskTexture.textures = null;\n      this._maskTexture = null;\n    }\n\n    for (let i = 0; i < this._channelColors.getSize(); i++) {\n      this._channelColors.set(i, null);\n    }\n\n    this._channelColors = null;\n\n    // テクスチャ解放\n    if (this._maskColorBuffers != null) {\n      for (let index = 0; index < this._maskColorBuffers.getSize(); index++) {\n        this.gl.deleteTexture(this._maskColorBuffers.at(index));\n      }\n      this._maskColorBuffers.clear();\n    }\n    this._maskColorBuffers = null;\n\n    if (this._maskRenderTextures != null) {\n      this._maskRenderTextures.clear();\n    }\n    this._maskRenderTextures = null;\n\n    if (this._clearedFrameBufferflags != null) {\n      this._clearedFrameBufferflags.clear();\n    }\n    this._clearedFrameBufferflags = null;\n  }\n\n  /**\n   * マネージャの初期化処理\n   * クリッピングマスクを使う描画オブジェクトの登録を行う\n   * @param model モデルのインスタンス\n   * @param drawableCount 描画オブジェクトの数\n   * @param drawableMasks 描画オブジェクトをマスクする描画オブジェクトのインデックスのリスト\n   * @param drawableMaskCounts 描画オブジェクトをマスクする描画オブジェクトの数\n   * @param renderTextureCount バッファの生成数\n   */\n  public initialize(\n    model: CubismModel,\n    drawableCount: number,\n    drawableMasks: Int32Array[],\n    drawableMaskCounts: Int32Array,\n    renderTextureCount: number\n  ): void {\n    // レンダーテクスチャの合計枚数の設定\n    // 1以上の整数でない場合はそれぞれ警告を出す\n    if (renderTextureCount % 1 != 0) {\n      CubismLogWarning(\n        'The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer.'\n      );\n      // 小数点以下を除去\n      renderTextureCount = ~~renderTextureCount;\n    }\n    if (renderTextureCount < 1) {\n      CubismLogWarning(\n        'The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1.'\n      );\n    }\n    // 負の値が使われている場合は強制的に1枚と設定する\n    this._renderTextureCount = renderTextureCount < 1 ? 1 : renderTextureCount;\n\n    this._clearedFrameBufferflags = new csmVector<boolean>(\n      this._renderTextureCount\n    );\n\n    // クリッピングマスクを使う描画オブジェクトをすべて登録する\n    // クリッピングマスクは、通常数個程度に限定して使うものとする\n    for (let i = 0; i < drawableCount; i++) {\n      if (drawableMaskCounts[i] <= 0) {\n        // クリッピングマスクが使用されていないアートメッシュ（多くの場合使用しない）\n        this._clippingContextListForDraw.pushBack(null);\n        continue;\n      }\n\n      // 既にあるClipContextと同じかチェックする\n      let clippingContext: CubismClippingContext = this.findSameClip(\n        drawableMasks[i],\n        drawableMaskCounts[i]\n      );\n      if (clippingContext == null) {\n        // 同一のマスクが存在していない場合は生成する\n        clippingContext = new CubismClippingContext(\n          this,\n          drawableMasks[i],\n          drawableMaskCounts[i]\n        );\n        this._clippingContextListForMask.pushBack(clippingContext);\n      }\n\n      clippingContext.addClippedDrawable(i);\n\n      this._clippingContextListForDraw.pushBack(clippingContext);\n    }\n  }\n\n  /**\n   * クリッピングコンテキストを作成する。モデル描画時に実行する。\n   * @param model モデルのインスタンス\n   * @param renderer レンダラのインスタンス\n   */\n  public setupClippingContext(\n    model: CubismModel,\n    renderer: CubismRenderer_WebGL\n  ): void {\n    this._currentFrameNo++;\n\n    // 全てのクリッピングを用意する\n    // 同じクリップ（複数の場合はまとめて一つのクリップ）を使う場合は1度だけ設定する\n    let usingClipCount = 0;\n    for (\n      let clipIndex = 0;\n      clipIndex < this._clippingContextListForMask.getSize();\n      clipIndex++\n    ) {\n      // 1つのクリッピングマスクに関して\n      const cc: CubismClippingContext =\n        this._clippingContextListForMask.at(clipIndex);\n\n      // このクリップを利用する描画オブジェクト群全体を囲む矩形を計算\n      this.calcClippedDrawTotalBounds(model, cc);\n\n      if (cc._isUsing) {\n        usingClipCount++; // 使用中としてカウント\n      }\n    }\n\n    // マスク作成処理\n    if (usingClipCount > 0) {\n      // 各マスクのレイアウトを決定していく\n      this.setupLayoutBounds(\n        renderer.isUsingHighPrecisionMask() ? 0 : usingClipCount\n      );\n\n      if (!renderer.isUsingHighPrecisionMask()) {\n        // 生成したFrameBufferと同じサイズでビューポートを設定\n        this.gl.viewport(\n          0,\n          0,\n          this._clippingMaskBufferSize,\n          this._clippingMaskBufferSize\n        );\n\n        // 後の計算のためにインデックスの最初をセット\n        this._currentMaskRenderTexture = this.getMaskRenderTexture().at(0);\n\n        renderer.preDraw(); // バッファをクリアする\n\n        // ---------- マスク描画処理 ----------\n        // マスク用RenderTextureをactiveにセット\n        this.gl.bindFramebuffer(\n          this.gl.FRAMEBUFFER,\n          this._currentMaskRenderTexture\n        );\n      }\n\n      // サイズがレンダーテクスチャの枚数と合わない場合は合わせる\n      if (this._clearedFrameBufferflags.getSize() != this._renderTextureCount) {\n        this._clearedFrameBufferflags.clear();\n        this._clearedFrameBufferflags = new csmVector<boolean>(\n          this._renderTextureCount\n        );\n      }\n\n      // マスクのクリアフラグを毎フレーム開始時に初期化\n      for (\n        let index = 0;\n        index < this._clearedFrameBufferflags.getSize();\n        index++\n      ) {\n        this._clearedFrameBufferflags.set(index, false);\n      }\n\n      // 実際にマスクを生成する\n      // 全てのマスクをどのようにレイアウトして描くかを決定し、ClipContext, ClippedDrawContextに記憶する\n      for (\n        let clipIndex = 0;\n        clipIndex < this._clippingContextListForMask.getSize();\n        clipIndex++\n      ) {\n        // --- 実際に1つのマスクを描く ---\n        const clipContext: CubismClippingContext =\n          this._clippingContextListForMask.at(clipIndex);\n        const allClipedDrawRect: csmRect = clipContext._allClippedDrawRect; // このマスクを使う、すべての描画オブジェクトの論理座標上の囲み矩形\n        const layoutBoundsOnTex01: csmRect = clipContext._layoutBounds; // この中にマスクを収める\n        const MARGIN = 0.05; // モデル座標上の矩形を、適宜マージンを付けて使う\n        let scaleX = 0;\n        let scaleY = 0;\n\n        // clipContextに設定したレンダーテクスチャをインデックスで取得\n        const clipContextRenderTexture = this.getMaskRenderTexture().at(\n          clipContext._bufferIndex\n        );\n\n        // 現在のレンダーテクスチャがclipContextのものと異なる場合\n        if (\n          this._currentMaskRenderTexture != clipContextRenderTexture &&\n          !renderer.isUsingHighPrecisionMask()\n        ) {\n          this._currentMaskRenderTexture = clipContextRenderTexture;\n          renderer.preDraw(); // バッファをクリアする\n          // マスク用RenderTextureをactiveにセット\n          this.gl.bindFramebuffer(\n            this.gl.FRAMEBUFFER,\n            this._currentMaskRenderTexture\n          );\n        }\n\n        if (renderer.isUsingHighPrecisionMask()) {\n          const ppu: number = model.getPixelsPerUnit();\n          const maskPixelSize: number =\n            clipContext.getClippingManager()._clippingMaskBufferSize;\n          const physicalMaskWidth: number =\n            layoutBoundsOnTex01.width * maskPixelSize;\n          const physicalMaskHeight: number =\n            layoutBoundsOnTex01.height * maskPixelSize;\n\n          this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n\n          if (this._tmpBoundsOnModel.width * ppu > physicalMaskWidth) {\n            this._tmpBoundsOnModel.expand(\n              allClipedDrawRect.width * MARGIN,\n              0.0\n            );\n            scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n          } else {\n            scaleX = ppu / physicalMaskWidth;\n          }\n\n          if (this._tmpBoundsOnModel.height * ppu > physicalMaskHeight) {\n            this._tmpBoundsOnModel.expand(\n              0.0,\n              allClipedDrawRect.height * MARGIN\n            );\n            scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n          } else {\n            scaleY = ppu / physicalMaskHeight;\n          }\n        } else {\n          this._tmpBoundsOnModel.setRect(allClipedDrawRect);\n          this._tmpBoundsOnModel.expand(\n            allClipedDrawRect.width * MARGIN,\n            allClipedDrawRect.height * MARGIN\n          );\n          //########## 本来は割り当てられた領域の全体を使わず必要最低限のサイズがよい\n\n          // シェーダ用の計算式を求める。回転を考慮しない場合は以下のとおり\n          // movePeriod' = movePeriod * scaleX + offX\t\t  [[ movePeriod' = (movePeriod - tmpBoundsOnModel.movePeriod)*scale + layoutBoundsOnTex01.movePeriod ]]\n          scaleX = layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\n          scaleY = layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\n        }\n\n        // マスク生成時に使う行列を求める\n        {\n          // シェーダに渡す行列を求める <<<<<<<<<<<<<<<<<<<<<<<< 要最適化（逆順に計算すればシンプルにできる）\n          this._tmpMatrix.loadIdentity();\n          {\n            // layout0..1 を -1..1に変換\n            this._tmpMatrix.translateRelative(-1.0, -1.0);\n            this._tmpMatrix.scaleRelative(2.0, 2.0);\n          }\n          {\n            // view to layout0..1\n            this._tmpMatrix.translateRelative(\n              layoutBoundsOnTex01.x,\n              layoutBoundsOnTex01.y\n            );\n            this._tmpMatrix.scaleRelative(scaleX, scaleY); // new = [translate][scale]\n            this._tmpMatrix.translateRelative(\n              -this._tmpBoundsOnModel.x,\n              -this._tmpBoundsOnModel.y\n            );\n            // new = [translate][scale][translate]\n          }\n          // tmpMatrixForMaskが計算結果\n          this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\n        }\n\n        //--------- draw時の mask 参照用行列を計算\n        {\n          // シェーダに渡す行列を求める <<<<<<<<<<<<<<<<<<<<<<<< 要最適化（逆順に計算すればシンプルにできる）\n          this._tmpMatrix.loadIdentity();\n          {\n            this._tmpMatrix.translateRelative(\n              layoutBoundsOnTex01.x,\n              layoutBoundsOnTex01.y\n            );\n            this._tmpMatrix.scaleRelative(scaleX, scaleY); // new = [translate][scale]\n            this._tmpMatrix.translateRelative(\n              -this._tmpBoundsOnModel.x,\n              -this._tmpBoundsOnModel.y\n            );\n            // new = [translate][scale][translate]\n          }\n          this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\n        }\n        clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\n        clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\n\n        if (!renderer.isUsingHighPrecisionMask()) {\n          const clipDrawCount: number = clipContext._clippingIdCount;\n          for (let i = 0; i < clipDrawCount; i++) {\n            const clipDrawIndex: number = clipContext._clippingIdList[i];\n\n            // 頂点情報が更新されておらず、信頼性がない場合は描画をパスする\n            if (\n              !model.getDrawableDynamicFlagVertexPositionsDidChange(\n                clipDrawIndex\n              )\n            ) {\n              continue;\n            }\n\n            renderer.setIsCulling(\n              model.getDrawableCulling(clipDrawIndex) != false\n            );\n\n            // マスクがクリアされていないなら処理する\n            if (!this._clearedFrameBufferflags.at(clipContext._bufferIndex)) {\n              // マスクをクリアする\n              // (仮仕様) 1が無効（描かれない）領域、0が有効（描かれる）領域。（シェーダーCd*Csで0に近い値をかけてマスクを作る。1をかけると何も起こらない）\n              this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\n              this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n              this._clearedFrameBufferflags.set(clipContext._bufferIndex, true);\n            }\n\n            // 今回専用の変換を適用して描く\n            // チャンネルも切り替える必要がある(A,R,G,B)\n            renderer.setClippingContextBufferForMask(clipContext);\n            renderer.drawMesh(\n              model.getDrawableTextureIndex(clipDrawIndex),\n              model.getDrawableVertexIndexCount(clipDrawIndex),\n              model.getDrawableVertexCount(clipDrawIndex),\n              model.getDrawableVertexIndices(clipDrawIndex),\n              model.getDrawableVertices(clipDrawIndex),\n              model.getDrawableVertexUvs(clipDrawIndex),\n              model.getMultiplyColor(clipDrawIndex),\n              model.getScreenColor(clipDrawIndex),\n              model.getDrawableOpacity(clipDrawIndex),\n              CubismBlendMode.CubismBlendMode_Normal, // クリッピングは通常描画を強制\n              false // マスク生成時はクリッピングの反転使用は全く関係がない\n            );\n          }\n        }\n      }\n\n      if (!renderer.isUsingHighPrecisionMask()) {\n        // --- 後処理 ---\n        this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo); // 描画対象を戻す\n        renderer.setClippingContextBufferForMask(null);\n\n        this.gl.viewport(\n          s_viewport[0],\n          s_viewport[1],\n          s_viewport[2],\n          s_viewport[3]\n        );\n      }\n    }\n  }\n\n  /**\n   * 既にマスクを作っているかを確認\n   * 作っている様であれば該当するクリッピングマスクのインスタンスを返す\n   * 作っていなければNULLを返す\n   * @param drawableMasks 描画オブジェクトをマスクする描画オブジェクトのリスト\n   * @param drawableMaskCounts 描画オブジェクトをマスクする描画オブジェクトの数\n   * @return 該当するクリッピングマスクが存在すればインスタンスを返し、なければNULLを返す\n   */\n  public findSameClip(\n    drawableMasks: Int32Array,\n    drawableMaskCounts: number\n  ): CubismClippingContext {\n    // 作成済みClippingContextと一致するか確認\n    for (let i = 0; i < this._clippingContextListForMask.getSize(); i++) {\n      const clippingContext: CubismClippingContext =\n        this._clippingContextListForMask.at(i);\n      const count: number = clippingContext._clippingIdCount;\n\n      // 個数が違う場合は別物\n      if (count != drawableMaskCounts) {\n        continue;\n      }\n\n      let sameCount = 0;\n\n      // 同じIDを持つか確認。配列の数が同じなので、一致した個数が同じなら同じ物を持つとする\n      for (let j = 0; j < count; j++) {\n        const clipId: number = clippingContext._clippingIdList[j];\n\n        for (let k = 0; k < count; k++) {\n          if (drawableMasks[k] == clipId) {\n            sameCount++;\n            break;\n          }\n        }\n      }\n\n      if (sameCount == count) {\n        return clippingContext;\n      }\n    }\n\n    return null; // 見つからなかった\n  }\n\n  /**\n   * クリッピングコンテキストを配置するレイアウト\n   * 指定された数のレンダーテクスチャを極力いっぱいに使ってマスクをレイアウトする\n   * マスクグループの数が4以下ならRGBA各チャンネルに一つずつマスクを配置し、5以上6以下ならRGBAを2,2,1,1と配置する。\n   *\n   * @param usingClipCount 配置するクリッピングコンテキストの数\n   */\n  public setupLayoutBounds(usingClipCount: number): void {\n    const useClippingMaskMaxCount =\n      this._renderTextureCount <= 1\n        ? ClippingMaskMaxCountOnDefault\n        : ClippingMaskMaxCountOnMultiRenderTexture * this._renderTextureCount;\n\n    if (usingClipCount <= 0 || usingClipCount > useClippingMaskMaxCount) {\n      if (usingClipCount > useClippingMaskMaxCount) {\n        // マスクの制限数の警告を出す\n        CubismLogError(\n          'not supported mask count : {0}\\n[Details] render texture count : {1}, mask count : {2}',\n          usingClipCount - useClippingMaskMaxCount,\n          this._renderTextureCount,\n          usingClipCount\n        );\n      }\n      // この場合は一つのマスクターゲットを毎回クリアして使用する\n      for (\n        let index = 0;\n        index < this._clippingContextListForMask.getSize();\n        index++\n      ) {\n        const clipContext: CubismClippingContext =\n          this._clippingContextListForMask.at(index);\n        clipContext._layoutChannelNo = 0; // どうせ毎回消すので固定\n        clipContext._layoutBounds.x = 0.0;\n        clipContext._layoutBounds.y = 0.0;\n        clipContext._layoutBounds.width = 1.0;\n        clipContext._layoutBounds.height = 1.0;\n        clipContext._bufferIndex = 0;\n      }\n      return;\n    }\n\n    // レンダーテクスチャが1枚なら9分割する（最大36枚）\n    const layoutCountMaxValue = this._renderTextureCount <= 1 ? 9 : 8;\n\n    // 指定された数のレンダーテクスチャを極力いっぱいに使ってマスクをレイアウトする（デフォルトなら1）\n    // マスクグループの数が4以下ならRGBA各チャンネルに1つずつマスクを配置し、5以上6以下ならRGBAを2,2,1,1と配置する\n    let countPerSheetDiv: number = usingClipCount / this._renderTextureCount; // レンダーテクスチャ1枚あたり何枚割り当てるか\n    let countPerSheetMod: number = usingClipCount % this._renderTextureCount; // この番号のレンダーテクスチャまでに一つずつ配分する\n\n    // 小数点は切り捨てる\n    countPerSheetDiv = ~~countPerSheetDiv;\n    countPerSheetMod = ~~countPerSheetMod;\n\n    // RGBAを順番に使っていく\n    let div: number = countPerSheetDiv / ColorChannelCount; // 1チャンネルに配置する基本のマスク\n    let mod: number = countPerSheetDiv % ColorChannelCount; // 余り、この番号のチャンネルまでに一つずつ配分する\n\n    // 小数点は切り捨てる\n    div = ~~div;\n    mod = ~~mod;\n\n    // RGBAそれぞれのチャンネルを用意していく（0:R, 1:G, 2:B, 3:A）\n    let curClipIndex = 0; // 順番に設定していく\n\n    for (\n      let renderTextureNo = 0;\n      renderTextureNo < this._renderTextureCount;\n      renderTextureNo++\n    ) {\n      for (let channelNo = 0; channelNo < ColorChannelCount; channelNo++) {\n        // このチャンネルにレイアウトする数\n        let layoutCount: number = div + (channelNo < mod ? 1 : 0);\n\n        // このレンダーテクスチャにまだ割り当てられていなければ追加する\n        const checkChannelNo = mod + 1 >= ColorChannelCount ? 0 : mod + 1;\n        if (layoutCount < layoutCountMaxValue && channelNo == checkChannelNo) {\n          layoutCount += renderTextureNo < countPerSheetMod ? 1 : 0;\n        }\n\n        // 分割方法を決定する\n        if (layoutCount == 0) {\n          // 何もしない\n        } else if (layoutCount == 1) {\n          // 全てをそのまま使う\n          const clipContext: CubismClippingContext =\n            this._clippingContextListForMask.at(curClipIndex++);\n          clipContext._layoutChannelNo = channelNo;\n          clipContext._layoutBounds.x = 0.0;\n          clipContext._layoutBounds.y = 0.0;\n          clipContext._layoutBounds.width = 1.0;\n          clipContext._layoutBounds.height = 1.0;\n          clipContext._bufferIndex = renderTextureNo;\n        } else if (layoutCount == 2) {\n          for (let i = 0; i < layoutCount; i++) {\n            let xpos: number = i % 2;\n\n            // 小数点は切り捨てる\n            xpos = ~~xpos;\n\n            const cc: CubismClippingContext =\n              this._clippingContextListForMask.at(curClipIndex++);\n            cc._layoutChannelNo = channelNo;\n\n            // UVを2つに分解して使う\n            cc._layoutBounds.x = xpos * 0.5;\n            cc._layoutBounds.y = 0.0;\n            cc._layoutBounds.width = 0.5;\n            cc._layoutBounds.height = 1.0;\n            cc._bufferIndex = renderTextureNo;\n          }\n        } else if (layoutCount <= 4) {\n          // 4分割して使う\n          for (let i = 0; i < layoutCount; i++) {\n            let xpos: number = i % 2;\n            let ypos: number = i / 2;\n\n            // 小数点は切り捨てる\n            xpos = ~~xpos;\n            ypos = ~~ypos;\n\n            const cc = this._clippingContextListForMask.at(curClipIndex++);\n            cc._layoutChannelNo = channelNo;\n\n            cc._layoutBounds.x = xpos * 0.5;\n            cc._layoutBounds.y = ypos * 0.5;\n            cc._layoutBounds.width = 0.5;\n            cc._layoutBounds.height = 0.5;\n            cc._bufferIndex = renderTextureNo;\n          }\n        } else if (layoutCount <= layoutCountMaxValue) {\n          // 9分割して使う\n          for (let i = 0; i < layoutCount; i++) {\n            let xpos = i % 3;\n            let ypos = i / 3;\n\n            // 小数点は切り捨てる\n            xpos = ~~xpos;\n            ypos = ~~ypos;\n\n            const cc: CubismClippingContext =\n              this._clippingContextListForMask.at(curClipIndex++);\n            cc._layoutChannelNo = channelNo;\n\n            cc._layoutBounds.x = xpos / 3.0;\n            cc._layoutBounds.y = ypos / 3.0;\n            cc._layoutBounds.width = 1.0 / 3.0;\n            cc._layoutBounds.height = 1.0 / 3.0;\n            cc._bufferIndex = renderTextureNo;\n          }\n        } else {\n          // マスクの制限枚数を超えた場合の処理\n          CubismLogError(\n            'not supported mask count : {0}\\n[Details] render texture count : {1}, mask count : {2}',\n            usingClipCount - useClippingMaskMaxCount,\n            this._renderTextureCount,\n            usingClipCount\n          );\n\n          // SetupShaderProgramでオーバーアクセスが発生するので仮で数値を入れる\n          // もちろん描画結果は正しいものではなくなる\n          for (let index = 0; index < layoutCount; index++) {\n            const cc: CubismClippingContext =\n              this._clippingContextListForMask.at(curClipIndex++);\n\n            cc._layoutChannelNo = 0;\n\n            cc._layoutBounds.x = 0.0;\n            cc._layoutBounds.y = 0.0;\n            cc._layoutBounds.width = 1.0;\n            cc._layoutBounds.height = 1.0;\n            cc._bufferIndex = 0;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * カラーバッファを取得する\n   * @return カラーバッファ\n   */\n  public getColorBuffer(): csmVector<WebGLTexture> {\n    return this._maskColorBuffers;\n  }\n\n  /**\n   * 画面描画に使用するクリッピングマスクのリストを取得する\n   * @return 画面描画に使用するクリッピングマスクのリスト\n   */\n  public getClippingContextListForDraw(): csmVector<CubismClippingContext> {\n    return this._clippingContextListForDraw;\n  }\n\n  /**\n   * マスクの合計数をカウント\n   * @returns\n   */\n  public getClippingMaskCount(): number {\n    return this._clippingContextListForMask.getSize();\n  }\n\n  /**\n   * クリッピングマスクバッファのサイズを設定する\n   * @param size クリッピングマスクバッファのサイズ\n   */\n  public setClippingMaskBufferSize(size: number): void {\n    this._clippingMaskBufferSize = size;\n  }\n\n  /**\n   * クリッピングマスクバッファのサイズを取得する\n   * @return クリッピングマスクバッファのサイズ\n   */\n  public getClippingMaskBufferSize(): number {\n    return this._clippingMaskBufferSize;\n  }\n\n  /**\n   * このバッファのレンダーテクスチャの枚数を取得する\n   * @return このバッファのレンダーテクスチャの枚数\n   */\n  public getRenderTextureCount(): number {\n    return this._renderTextureCount;\n  }\n\n  public _currentMaskRenderTexture: WebGLFramebuffer; // マスク用レンダーテクスチャのアドレス\n  public _maskRenderTextures: csmVector<WebGLFramebuffer>; // レンダーテクスチャのリスト\n  public _maskColorBuffers: csmVector<WebGLTexture>; // マスク用カラーバッファーのアドレスのリスト\n  public _currentFrameNo: number; // マスクテクスチャに与えるフレーム番号\n\n  public _channelColors: csmVector<CubismTextureColor>;\n  public _maskTexture: CubismRenderTextureResource; // マスク用のテクスチャリソースのリスト\n  public _clippingContextListForMask: csmVector<CubismClippingContext>; // マスク用クリッピングコンテキストのリスト\n  public _clippingContextListForDraw: csmVector<CubismClippingContext>; // 描画用クリッピングコンテキストのリスト\n  public _clippingMaskBufferSize: number; // クリッピングマスクのバッファサイズ（初期値:256）\n  public _renderTextureCount: number; // 生成するレンダーテクスチャの枚数\n\n  private _tmpMatrix: CubismMatrix44; // マスク計算用の行列\n  private _tmpMatrixForMask: CubismMatrix44; // マスク計算用の行列\n  private _tmpMatrixForDraw: CubismMatrix44; // マスク計算用の行列\n  private _tmpBoundsOnModel: csmRect; // マスク配置計算用の矩形\n  private _clearedFrameBufferflags: csmVector<boolean>; //マスクのクリアフラグの配列\n\n  gl: WebGLRenderingContext; // WebGLレンダリングコンテキスト\n}\n\n/**\n * レンダーテクスチャのリソースを定義する構造体\n * クリッピングマスクで使用する\n */\nexport class CubismRenderTextureResource {\n  /**\n   * 引数付きコンストラクタ\n   * @param frameNo レンダラーのフレーム番号\n   * @param texture テクスチャのアドレス\n   */\n  public constructor(frameNo: number, texture: csmVector<WebGLFramebuffer>) {\n    this.frameNo = frameNo;\n    this.textures = texture;\n  }\n\n  public frameNo: number; // レンダラのフレーム番号\n  public textures: csmVector<WebGLFramebuffer>; // テクスチャのアドレス\n}\n\n/**\n * クリッピングマスクのコンテキスト\n */\nexport class CubismClippingContext {\n  /**\n   * 引数付きコンストラクタ\n   */\n  public constructor(\n    manager: CubismClippingManager_WebGL,\n    clippingDrawableIndices: Int32Array,\n    clipCount: number\n  ) {\n    this._owner = manager;\n\n    // クリップしている（＝マスク用の）Drawableのインデックスリスト\n    this._clippingIdList = clippingDrawableIndices;\n\n    // マスクの数\n    this._clippingIdCount = clipCount;\n\n    this._allClippedDrawRect = new csmRect();\n    this._layoutBounds = new csmRect();\n\n    this._clippedDrawableIndexList = [];\n\n    this._matrixForMask = new CubismMatrix44();\n    this._matrixForDraw = new CubismMatrix44();\n\n    this._bufferIndex = 0;\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    if (this._layoutBounds != null) {\n      this._layoutBounds = null;\n    }\n\n    if (this._allClippedDrawRect != null) {\n      this._allClippedDrawRect = null;\n    }\n\n    if (this._clippedDrawableIndexList != null) {\n      this._clippedDrawableIndexList = null;\n    }\n  }\n\n  /**\n   * このマスクにクリップされる描画オブジェクトを追加する\n   *\n   * @param drawableIndex クリッピング対象に追加する描画オブジェクトのインデックス\n   */\n  public addClippedDrawable(drawableIndex: number) {\n    this._clippedDrawableIndexList.push(drawableIndex);\n  }\n\n  /**\n   * このマスクを管理するマネージャのインスタンスを取得する\n   * @return クリッピングマネージャのインスタンス\n   */\n  public getClippingManager(): CubismClippingManager_WebGL {\n    return this._owner;\n  }\n\n  public setGl(gl: WebGLRenderingContext): void {\n    this._owner.setGL(gl);\n  }\n\n  public _isUsing: boolean; // 現在の描画状態でマスクの準備が必要ならtrue\n  public readonly _clippingIdList: Int32Array; // クリッピングマスクのIDリスト\n  public _clippingIdCount: number; // クリッピングマスクの数\n  public _layoutChannelNo: number; // RGBAのいずれのチャンネルにこのクリップを配置するか（0:R, 1:G, 2:B, 3:A）\n  public _layoutBounds: csmRect; // マスク用チャンネルのどの領域にマスクを入れるか（View座標-1~1, UVは0~1に直す）\n  public _allClippedDrawRect: csmRect; // このクリッピングで、クリッピングされるすべての描画オブジェクトの囲み矩形（毎回更新）\n  public _matrixForMask: CubismMatrix44; // マスクの位置計算結果を保持する行列\n  public _matrixForDraw: CubismMatrix44; // 描画オブジェクトの位置計算結果を保持する行列\n  public _clippedDrawableIndexList: number[]; // このマスクにクリップされる描画オブジェクトのリスト\n  public _bufferIndex: number; // このマスクが割り当てられるレンダーテクスチャ（フレームバッファ）やカラーバッファのインデックス\n\n  private _owner: CubismClippingManager_WebGL; // このマスクを管理しているマネージャのインスタンス\n}\n\nexport class CubismRendererProfile_WebGL {\n  private setGlEnable(index: GLenum, enabled: GLboolean): void {\n    if (enabled) this.gl.enable(index);\n    else this.gl.disable(index);\n  }\n\n  private setGlEnableVertexAttribArray(\n    index: GLuint,\n    enabled: GLboolean\n  ): void {\n    if (enabled) this.gl.enableVertexAttribArray(index);\n    else this.gl.disableVertexAttribArray(index);\n  }\n\n  public save(): void {\n    if (this.gl == null) {\n      CubismLogError(\n        \"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\"\n      );\n      return;\n    }\n    //-- push state --\n    this._lastArrayBufferBinding = this.gl.getParameter(\n      this.gl.ARRAY_BUFFER_BINDING\n    );\n    this._lastArrayBufferBinding = this.gl.getParameter(\n      this.gl.ELEMENT_ARRAY_BUFFER_BINDING\n    );\n    this._lastProgram = this.gl.getParameter(this.gl.CURRENT_PROGRAM);\n\n    this._lastActiveTexture = this.gl.getParameter(this.gl.ACTIVE_TEXTURE);\n    this.gl.activeTexture(this.gl.TEXTURE1); //テクスチャユニット1をアクティブに（以後の設定対象とする）\n    this._lastTexture1Binding2D = this.gl.getParameter(\n      this.gl.TEXTURE_BINDING_2D\n    );\n\n    this.gl.activeTexture(this.gl.TEXTURE0); //テクスチャユニット0をアクティブに（以後の設定対象とする）\n    this._lastTexture0Binding2D = this.gl.getParameter(\n      this.gl.TEXTURE_BINDING_2D\n    );\n\n    this._lastVertexAttribArrayEnabled[0] = this.gl.getVertexAttrib(\n      0,\n      this.gl.VERTEX_ATTRIB_ARRAY_ENABLED\n    );\n    this._lastVertexAttribArrayEnabled[1] = this.gl.getVertexAttrib(\n      1,\n      this.gl.VERTEX_ATTRIB_ARRAY_ENABLED\n    );\n    this._lastVertexAttribArrayEnabled[2] = this.gl.getVertexAttrib(\n      2,\n      this.gl.VERTEX_ATTRIB_ARRAY_ENABLED\n    );\n    this._lastVertexAttribArrayEnabled[3] = this.gl.getVertexAttrib(\n      3,\n      this.gl.VERTEX_ATTRIB_ARRAY_ENABLED\n    );\n\n    this._lastScissorTest = this.gl.isEnabled(this.gl.SCISSOR_TEST);\n    this._lastStencilTest = this.gl.isEnabled(this.gl.STENCIL_TEST);\n    this._lastDepthTest = this.gl.isEnabled(this.gl.DEPTH_TEST);\n    this._lastCullFace = this.gl.isEnabled(this.gl.CULL_FACE);\n    this._lastBlend = this.gl.isEnabled(this.gl.BLEND);\n\n    this._lastFrontFace = this.gl.getParameter(this.gl.FRONT_FACE);\n\n    this._lastColorMask = this.gl.getParameter(this.gl.COLOR_WRITEMASK);\n\n    // backup blending\n    this._lastBlending[0] = this.gl.getParameter(this.gl.BLEND_SRC_RGB);\n    this._lastBlending[1] = this.gl.getParameter(this.gl.BLEND_DST_RGB);\n    this._lastBlending[2] = this.gl.getParameter(this.gl.BLEND_SRC_ALPHA);\n    this._lastBlending[3] = this.gl.getParameter(this.gl.BLEND_DST_ALPHA);\n\n    // モデル描画直前のFBOとビューポートを保存\n    this._lastFBO = this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING);\n    this._lastViewport = this.gl.getParameter(this.gl.VIEWPORT);\n  }\n\n  public restore(): void {\n    if (this.gl == null) {\n      CubismLogError(\n        \"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\"\n      );\n      return;\n    }\n    this.gl.useProgram(this._lastProgram);\n\n    this.setGlEnableVertexAttribArray(0, this._lastVertexAttribArrayEnabled[0]);\n    this.setGlEnableVertexAttribArray(1, this._lastVertexAttribArrayEnabled[1]);\n    this.setGlEnableVertexAttribArray(2, this._lastVertexAttribArrayEnabled[2]);\n    this.setGlEnableVertexAttribArray(3, this._lastVertexAttribArrayEnabled[3]);\n\n    this.setGlEnable(this.gl.SCISSOR_TEST, this._lastScissorTest);\n    this.setGlEnable(this.gl.STENCIL_TEST, this._lastStencilTest);\n    this.setGlEnable(this.gl.DEPTH_TEST, this._lastDepthTest);\n    this.setGlEnable(this.gl.CULL_FACE, this._lastCullFace);\n    this.setGlEnable(this.gl.BLEND, this._lastBlend);\n\n    this.gl.frontFace(this._lastFrontFace);\n\n    this.gl.colorMask(\n      this._lastColorMask[0],\n      this._lastColorMask[1],\n      this._lastColorMask[2],\n      this._lastColorMask[3]\n    );\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this._lastArrayBufferBinding); //前にバッファがバインドされていたら破棄する必要がある\n    this.gl.bindBuffer(\n      this.gl.ELEMENT_ARRAY_BUFFER,\n      this._lastElementArrayBufferBinding\n    );\n\n    this.gl.activeTexture(this.gl.TEXTURE1); //テクスチャユニット1を復元\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this._lastTexture1Binding2D);\n\n    this.gl.activeTexture(this.gl.TEXTURE0); //テクスチャユニット0を復元\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this._lastTexture0Binding2D);\n\n    this.gl.activeTexture(this._lastActiveTexture);\n\n    this.gl.blendFuncSeparate(\n      this._lastBlending[0],\n      this._lastBlending[1],\n      this._lastBlending[2],\n      this._lastBlending[3]\n    );\n  }\n\n  public setGl(gl: WebGLRenderingContext): void {\n    this.gl = gl;\n  }\n\n  constructor() {\n    this._lastVertexAttribArrayEnabled = new Array<GLboolean>(4);\n    this._lastColorMask = new Array<GLboolean>(4);\n    this._lastBlending = new Array<GLint>(4);\n    this._lastViewport = new Array<GLint>(4);\n  }\n\n  private _lastArrayBufferBinding: GLint; ///< モデル描画直前の頂点バッファ\n  private _lastElementArrayBufferBinding: GLint; ///< モデル描画直前のElementバッファ\n  private _lastProgram: GLint; ///< モデル描画直前のシェーダプログラムバッファ\n  private _lastActiveTexture: GLint; ///< モデル描画直前のアクティブなテクスチャ\n  private _lastTexture0Binding2D: GLint; ///< モデル描画直前のテクスチャユニット0\n  private _lastTexture1Binding2D: GLint; ///< モデル描画直前のテクスチャユニット1\n  private _lastVertexAttribArrayEnabled: GLboolean[]; ///< モデル描画直前のテクスチャユニット1\n  private _lastScissorTest: GLboolean; ///< モデル描画直前のGL_VERTEX_ATTRIB_ARRAY_ENABLEDパラメータ\n  private _lastBlend: GLboolean; ///< モデル描画直前のGL_SCISSOR_TESTパラメータ\n  private _lastStencilTest: GLboolean; ///< モデル描画直前のGL_STENCIL_TESTパラメータ\n  private _lastDepthTest: GLboolean; ///< モデル描画直前のGL_DEPTH_TESTパラメータ\n  private _lastCullFace: GLboolean; ///< モデル描画直前のGL_CULL_FACEパラメータ\n  private _lastFrontFace: GLint; ///< モデル描画直前のGL_CULL_FACEパラメータ\n  private _lastColorMask: GLboolean[]; ///< モデル描画直前のGL_COLOR_WRITEMASKパラメータ\n  private _lastBlending: GLint[]; ///< モデル描画直前のカラーブレンディングパラメータ\n  private _lastFBO: GLint; ///< モデル描画直前のフレームバッファ\n  private _lastViewport: GLint[]; ///< モデル描画直前のビューポート\n\n  gl: WebGLRenderingContext;\n}\n\n/**\n * WebGL用のシェーダープログラムを生成・破棄するクラス\n * シングルトンなクラスであり、CubismShader_WebGL.getInstanceからアクセスする。\n */\nexport class CubismShader_WebGL {\n  /**\n   * インスタンスを取得する（シングルトン）\n   * @return インスタンス\n   */\n  public static getInstance(): CubismShader_WebGL {\n    if (s_instance == null) {\n      s_instance = new CubismShader_WebGL();\n\n      return s_instance;\n    }\n    return s_instance;\n  }\n\n  /**\n   * インスタンスを開放する（シングルトン）\n   */\n  public static deleteInstance(): void {\n    if (s_instance) {\n      s_instance.release();\n      s_instance = null;\n    }\n  }\n\n  /**\n   * privateなコンストラクタ\n   */\n  private constructor() {\n    this._shaderSets = new csmVector<CubismShaderSet>();\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    this.releaseShaderProgram();\n  }\n\n  /**\n   * シェーダープログラムの一連のセットアップを実行する\n   * @param renderer レンダラのインスタンス\n   * @param textureId GPUのテクスチャID\n   * @param vertexCount ポリゴンメッシュの頂点数\n   * @param vertexArray ポリゴンメッシュの頂点配列\n   * @param indexArray インデックスバッファの頂点配列\n   * @param uvArray uv配列\n   * @param opacity 不透明度\n   * @param colorBlendMode カラーブレンディングのタイプ\n   * @param baseColor ベースカラー\n   * @param isPremultipliedAlpha 乗算済みアルファかどうか\n   * @param matrix4x4 Model-View-Projection行列\n   * @param invertedMask マスクを反転して使用するフラグ\n   */\n  public setupShaderProgram(\n    renderer: CubismRenderer_WebGL,\n    textureId: WebGLTexture,\n    vertexCount: number,\n    vertexArray: Float32Array,\n    indexArray: Uint16Array,\n    uvArray: Float32Array,\n    bufferData: {\n      vertex: WebGLBuffer;\n      uv: WebGLBuffer;\n      index: WebGLBuffer;\n    },\n    opacity: number,\n    colorBlendMode: CubismBlendMode,\n    baseColor: CubismTextureColor,\n    multiplyColor: CubismTextureColor,\n    screenColor: CubismTextureColor,\n    isPremultipliedAlpha: boolean,\n    matrix4x4: CubismMatrix44,\n    invertedMask: boolean\n  ): void {\n    if (!isPremultipliedAlpha) {\n      CubismLogError('NoPremultipliedAlpha is not allowed');\n    }\n\n    if (this._shaderSets.getSize() == 0) {\n      this.generateShaders();\n    }\n\n    // Blending\n    let SRC_COLOR: number;\n    let DST_COLOR: number;\n    let SRC_ALPHA: number;\n    let DST_ALPHA: number;\n\n    if (renderer.getClippingContextBufferForMask() != null) {\n      // マスク生成時\n      const shaderSet: CubismShaderSet = this._shaderSets.at(\n        ShaderNames.ShaderNames_SetupMask\n      );\n      this.gl.useProgram(shaderSet.shaderProgram);\n\n      // テクスチャ設定\n      this.gl.activeTexture(this.gl.TEXTURE0);\n      this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n      this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n\n      // 頂点配列の設定(VBO)\n      if (bufferData.vertex == null) {\n        bufferData.vertex = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n      this.gl.bufferData(\n        this.gl.ARRAY_BUFFER,\n        vertexArray,\n        this.gl.DYNAMIC_DRAW\n      );\n      this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n      this.gl.vertexAttribPointer(\n        shaderSet.attributePositionLocation,\n        2,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n\n      // テクスチャ頂点の設定\n      if (bufferData.uv == null) {\n        bufferData.uv = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n      this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n      this.gl.vertexAttribPointer(\n        shaderSet.attributeTexCoordLocation,\n        2,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n\n      // チャンネル\n      const channelNo: number =\n        renderer.getClippingContextBufferForMask()._layoutChannelNo;\n      const colorChannel: CubismTextureColor = renderer\n        .getClippingContextBufferForMask()\n        .getClippingManager()\n        .getChannelFlagAsColor(channelNo);\n      this.gl.uniform4f(\n        shaderSet.uniformChannelFlagLocation,\n        colorChannel.R,\n        colorChannel.G,\n        colorChannel.B,\n        colorChannel.A\n      );\n\n      this.gl.uniformMatrix4fv(\n        shaderSet.uniformClipMatrixLocation,\n        false,\n        renderer.getClippingContextBufferForMask()._matrixForMask.getArray()\n      );\n\n      const rect: csmRect =\n        renderer.getClippingContextBufferForMask()._layoutBounds;\n\n      this.gl.uniform4f(\n        shaderSet.uniformBaseColorLocation,\n        rect.x * 2.0 - 1.0,\n        rect.y * 2.0 - 1.0,\n        rect.getRight() * 2.0 - 1.0,\n        rect.getBottom() * 2.0 - 1.0\n      );\n\n      this.gl.uniform4f(\n        shaderSet.uniformMultiplyColorLocation,\n        multiplyColor.R,\n        multiplyColor.G,\n        multiplyColor.B,\n        multiplyColor.A\n      );\n\n      this.gl.uniform4f(\n        shaderSet.uniformScreenColorLocation,\n        screenColor.R,\n        screenColor.G,\n        screenColor.B,\n        screenColor.A\n      );\n\n      SRC_COLOR = this.gl.ZERO;\n      DST_COLOR = this.gl.ONE_MINUS_SRC_COLOR;\n      SRC_ALPHA = this.gl.ZERO;\n      DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n    } // マスク生成以外の場合\n    else {\n      const masked: boolean =\n        renderer.getClippingContextBufferForDraw() != null; // この描画オブジェクトはマスク対象か\n      const offset: number = masked ? (invertedMask ? 2 : 1) : 0;\n\n      let shaderSet: CubismShaderSet = new CubismShaderSet();\n\n      switch (colorBlendMode) {\n        case CubismBlendMode.CubismBlendMode_Normal:\n        default:\n          shaderSet = this._shaderSets.at(\n            ShaderNames.ShaderNames_NormalPremultipliedAlpha + offset\n          );\n          SRC_COLOR = this.gl.ONE;\n          DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n          SRC_ALPHA = this.gl.ONE;\n          DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\n          break;\n\n        case CubismBlendMode.CubismBlendMode_Additive:\n          shaderSet = this._shaderSets.at(\n            ShaderNames.ShaderNames_AddPremultipliedAlpha + offset\n          );\n          SRC_COLOR = this.gl.ONE;\n          DST_COLOR = this.gl.ONE;\n          SRC_ALPHA = this.gl.ZERO;\n          DST_ALPHA = this.gl.ONE;\n          break;\n\n        case CubismBlendMode.CubismBlendMode_Multiplicative:\n          shaderSet = this._shaderSets.at(\n            ShaderNames.ShaderNames_MultPremultipliedAlpha + offset\n          );\n          SRC_COLOR = this.gl.DST_COLOR;\n          DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\n          SRC_ALPHA = this.gl.ZERO;\n          DST_ALPHA = this.gl.ONE;\n          break;\n      }\n\n      this.gl.useProgram(shaderSet.shaderProgram);\n\n      // 頂点配列の設定\n      if (bufferData.vertex == null) {\n        bufferData.vertex = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\n      this.gl.bufferData(\n        this.gl.ARRAY_BUFFER,\n        vertexArray,\n        this.gl.DYNAMIC_DRAW\n      );\n      this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\n      this.gl.vertexAttribPointer(\n        shaderSet.attributePositionLocation,\n        2,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n\n      // テクスチャ頂点の設定\n      if (bufferData.uv == null) {\n        bufferData.uv = this.gl.createBuffer();\n      }\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\n      this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\n      this.gl.vertexAttribPointer(\n        shaderSet.attributeTexCoordLocation,\n        2,\n        this.gl.FLOAT,\n        false,\n        0,\n        0\n      );\n\n      if (masked) {\n        this.gl.activeTexture(this.gl.TEXTURE1);\n        const tex: WebGLTexture = renderer\n          .getClippingContextBufferForDraw()\n          .getClippingManager()\n          .getColorBuffer()\n          .at(renderer.getClippingContextBufferForDraw()._bufferIndex);\n        this.gl.bindTexture(this.gl.TEXTURE_2D, tex);\n        this.gl.uniform1i(shaderSet.samplerTexture1Location, 1);\n\n        // view座標をClippingContextの座標に変換するための行列を設定\n        this.gl.uniformMatrix4fv(\n          shaderSet.uniformClipMatrixLocation,\n          false,\n          renderer.getClippingContextBufferForDraw()._matrixForDraw.getArray()\n        );\n\n        // 使用するカラーチャンネルを設定\n        const channelNo: number =\n          renderer.getClippingContextBufferForDraw()._layoutChannelNo;\n        const colorChannel: CubismTextureColor = renderer\n          .getClippingContextBufferForDraw()\n          .getClippingManager()\n          .getChannelFlagAsColor(channelNo);\n        this.gl.uniform4f(\n          shaderSet.uniformChannelFlagLocation,\n          colorChannel.R,\n          colorChannel.G,\n          colorChannel.B,\n          colorChannel.A\n        );\n      }\n\n      // テクスチャ設定\n      this.gl.activeTexture(this.gl.TEXTURE0);\n      this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\n      this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\n\n      // 座標変換\n      this.gl.uniformMatrix4fv(\n        shaderSet.uniformMatrixLocation,\n        false,\n        matrix4x4.getArray()\n      );\n\n      this.gl.uniform4f(\n        shaderSet.uniformBaseColorLocation,\n        baseColor.R,\n        baseColor.G,\n        baseColor.B,\n        baseColor.A\n      );\n\n      this.gl.uniform4f(\n        shaderSet.uniformMultiplyColorLocation,\n        multiplyColor.R,\n        multiplyColor.G,\n        multiplyColor.B,\n        multiplyColor.A\n      );\n\n      this.gl.uniform4f(\n        shaderSet.uniformScreenColorLocation,\n        screenColor.R,\n        screenColor.G,\n        screenColor.B,\n        screenColor.A\n      );\n    }\n\n    // IBOを作成し、データを転送\n    if (bufferData.index == null) {\n      bufferData.index = this.gl.createBuffer();\n    }\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, bufferData.index);\n    this.gl.bufferData(\n      this.gl.ELEMENT_ARRAY_BUFFER,\n      indexArray,\n      this.gl.DYNAMIC_DRAW\n    );\n    this.gl.blendFuncSeparate(SRC_COLOR, DST_COLOR, SRC_ALPHA, DST_ALPHA);\n  }\n\n  /**\n   * シェーダープログラムを解放する\n   */\n  public releaseShaderProgram(): void {\n    for (let i = 0; i < this._shaderSets.getSize(); i++) {\n      this.gl.deleteProgram(this._shaderSets.at(i).shaderProgram);\n      this._shaderSets.at(i).shaderProgram = 0;\n      this._shaderSets.set(i, void 0);\n      this._shaderSets.set(i, null);\n    }\n  }\n\n  /**\n   * シェーダープログラムを初期化する\n   * @param vertShaderSrc 頂点シェーダのソース\n   * @param fragShaderSrc フラグメントシェーダのソース\n   */\n  public generateShaders(): void {\n    for (let i = 0; i < ShaderCount; i++) {\n      this._shaderSets.pushBack(new CubismShaderSet());\n    }\n\n    this._shaderSets.at(0).shaderProgram = this.loadShaderProgram(\n      vertexShaderSrcSetupMask,\n      fragmentShaderSrcsetupMask\n    );\n\n    this._shaderSets.at(1).shaderProgram = this.loadShaderProgram(\n      vertexShaderSrc,\n      fragmentShaderSrcPremultipliedAlpha\n    );\n    this._shaderSets.at(2).shaderProgram = this.loadShaderProgram(\n      vertexShaderSrcMasked,\n      fragmentShaderSrcMaskPremultipliedAlpha\n    );\n    this._shaderSets.at(3).shaderProgram = this.loadShaderProgram(\n      vertexShaderSrcMasked,\n      fragmentShaderSrcMaskInvertedPremultipliedAlpha\n    );\n\n    // 加算も通常と同じシェーダーを利用する\n    this._shaderSets.at(4).shaderProgram = this._shaderSets.at(1).shaderProgram;\n    this._shaderSets.at(5).shaderProgram = this._shaderSets.at(2).shaderProgram;\n    this._shaderSets.at(6).shaderProgram = this._shaderSets.at(3).shaderProgram;\n\n    // 乗算も通常と同じシェーダーを利用する\n    this._shaderSets.at(7).shaderProgram = this._shaderSets.at(1).shaderProgram;\n    this._shaderSets.at(8).shaderProgram = this._shaderSets.at(2).shaderProgram;\n    this._shaderSets.at(9).shaderProgram = this._shaderSets.at(3).shaderProgram;\n\n    // SetupMask\n    this._shaderSets.at(0).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(0).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(0).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(0).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(0).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(0).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(0).uniformClipMatrixLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(0).shaderProgram,\n        'u_clipMatrix'\n      );\n    this._shaderSets.at(0).uniformChannelFlagLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(0).shaderProgram,\n        'u_channelFlag'\n      );\n    this._shaderSets.at(0).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(0).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(0).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(0).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(0).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(0).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 通常（PremultipliedAlpha）\n    this._shaderSets.at(1).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(1).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(1).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(1).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(1).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(1).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(1).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(1).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(1).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(1).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(1).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(1).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(1).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(1).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 通常（クリッピング、PremultipliedAlpha）\n    this._shaderSets.at(2).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(2).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(2).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(2).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(2).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(2).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(2).samplerTexture1Location = this.gl.getUniformLocation(\n      this._shaderSets.at(2).shaderProgram,\n      's_texture1'\n    );\n    this._shaderSets.at(2).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(2).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(2).uniformClipMatrixLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(2).shaderProgram,\n        'u_clipMatrix'\n      );\n    this._shaderSets.at(2).uniformChannelFlagLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(2).shaderProgram,\n        'u_channelFlag'\n      );\n    this._shaderSets.at(2).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(2).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(2).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(2).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(2).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(2).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 通常（クリッピング・反転, PremultipliedAlpha）\n    this._shaderSets.at(3).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(3).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(3).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(3).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(3).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(3).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(3).samplerTexture1Location = this.gl.getUniformLocation(\n      this._shaderSets.at(3).shaderProgram,\n      's_texture1'\n    );\n    this._shaderSets.at(3).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(3).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(3).uniformClipMatrixLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(3).shaderProgram,\n        'u_clipMatrix'\n      );\n    this._shaderSets.at(3).uniformChannelFlagLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(3).shaderProgram,\n        'u_channelFlag'\n      );\n    this._shaderSets.at(3).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(3).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(3).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(3).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(3).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(3).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 加算（PremultipliedAlpha）\n    this._shaderSets.at(4).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(4).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(4).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(4).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(4).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(4).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(4).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(4).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(4).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(4).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(4).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(4).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(4).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(4).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 加算（クリッピング、PremultipliedAlpha）\n    this._shaderSets.at(5).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(5).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(5).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(5).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(5).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(5).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(5).samplerTexture1Location = this.gl.getUniformLocation(\n      this._shaderSets.at(5).shaderProgram,\n      's_texture1'\n    );\n    this._shaderSets.at(5).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(5).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(5).uniformClipMatrixLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(5).shaderProgram,\n        'u_clipMatrix'\n      );\n    this._shaderSets.at(5).uniformChannelFlagLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(5).shaderProgram,\n        'u_channelFlag'\n      );\n    this._shaderSets.at(5).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(5).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(5).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(5).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(5).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(5).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 加算（クリッピング・反転、PremultipliedAlpha）\n    this._shaderSets.at(6).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(6).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(6).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(6).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(6).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(6).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(6).samplerTexture1Location = this.gl.getUniformLocation(\n      this._shaderSets.at(6).shaderProgram,\n      's_texture1'\n    );\n    this._shaderSets.at(6).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(6).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(6).uniformClipMatrixLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(6).shaderProgram,\n        'u_clipMatrix'\n      );\n    this._shaderSets.at(6).uniformChannelFlagLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(6).shaderProgram,\n        'u_channelFlag'\n      );\n    this._shaderSets.at(6).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(6).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(6).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(6).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(6).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(6).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 乗算（PremultipliedAlpha）\n    this._shaderSets.at(7).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(7).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(7).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(7).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(7).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(7).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(7).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(7).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(7).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(7).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(7).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(7).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(7).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(7).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 乗算（クリッピング、PremultipliedAlpha）\n    this._shaderSets.at(8).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(8).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(8).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(8).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(8).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(8).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(8).samplerTexture1Location = this.gl.getUniformLocation(\n      this._shaderSets.at(8).shaderProgram,\n      's_texture1'\n    );\n    this._shaderSets.at(8).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(8).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(8).uniformClipMatrixLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(8).shaderProgram,\n        'u_clipMatrix'\n      );\n    this._shaderSets.at(8).uniformChannelFlagLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(8).shaderProgram,\n        'u_channelFlag'\n      );\n    this._shaderSets.at(8).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(8).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(8).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(8).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(8).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(8).shaderProgram,\n        'u_screenColor'\n      );\n\n    // 乗算（クリッピング・反転、PremultipliedAlpha）\n    this._shaderSets.at(9).attributePositionLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(9).shaderProgram,\n        'a_position'\n      );\n    this._shaderSets.at(9).attributeTexCoordLocation =\n      this.gl.getAttribLocation(\n        this._shaderSets.at(9).shaderProgram,\n        'a_texCoord'\n      );\n    this._shaderSets.at(9).samplerTexture0Location = this.gl.getUniformLocation(\n      this._shaderSets.at(9).shaderProgram,\n      's_texture0'\n    );\n    this._shaderSets.at(9).samplerTexture1Location = this.gl.getUniformLocation(\n      this._shaderSets.at(9).shaderProgram,\n      's_texture1'\n    );\n    this._shaderSets.at(9).uniformMatrixLocation = this.gl.getUniformLocation(\n      this._shaderSets.at(9).shaderProgram,\n      'u_matrix'\n    );\n    this._shaderSets.at(9).uniformClipMatrixLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(9).shaderProgram,\n        'u_clipMatrix'\n      );\n    this._shaderSets.at(9).uniformChannelFlagLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(9).shaderProgram,\n        'u_channelFlag'\n      );\n    this._shaderSets.at(9).uniformBaseColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(9).shaderProgram,\n        'u_baseColor'\n      );\n    this._shaderSets.at(9).uniformMultiplyColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(9).shaderProgram,\n        'u_multiplyColor'\n      );\n    this._shaderSets.at(9).uniformScreenColorLocation =\n      this.gl.getUniformLocation(\n        this._shaderSets.at(9).shaderProgram,\n        'u_screenColor'\n      );\n  }\n\n  /**\n   * シェーダプログラムをロードしてアドレスを返す\n   * @param vertexShaderSource    頂点シェーダのソース\n   * @param fragmentShaderSource  フラグメントシェーダのソース\n   * @return シェーダプログラムのアドレス\n   */\n  public loadShaderProgram(\n    vertexShaderSource: string,\n    fragmentShaderSource: string\n  ): WebGLProgram {\n    // Create Shader Program\n    let shaderProgram: WebGLProgram = this.gl.createProgram();\n\n    let vertShader = this.compileShaderSource(\n      this.gl.VERTEX_SHADER,\n      vertexShaderSource\n    );\n\n    if (!vertShader) {\n      CubismLogError('Vertex shader compile error!');\n      return 0;\n    }\n\n    let fragShader = this.compileShaderSource(\n      this.gl.FRAGMENT_SHADER,\n      fragmentShaderSource\n    );\n    if (!fragShader) {\n      CubismLogError('Vertex shader compile error!');\n      return 0;\n    }\n\n    // Attach vertex shader to program\n    this.gl.attachShader(shaderProgram, vertShader);\n\n    // Attach fragment shader to program\n    this.gl.attachShader(shaderProgram, fragShader);\n\n    // link program\n    this.gl.linkProgram(shaderProgram);\n    const linkStatus = this.gl.getProgramParameter(\n      shaderProgram,\n      this.gl.LINK_STATUS\n    );\n\n    // リンクに失敗したらシェーダーを削除\n    if (!linkStatus) {\n      CubismLogError('Failed to link program: {0}', shaderProgram);\n\n      this.gl.deleteShader(vertShader);\n      vertShader = 0;\n\n      this.gl.deleteShader(fragShader);\n      fragShader = 0;\n\n      if (shaderProgram) {\n        this.gl.deleteProgram(shaderProgram);\n        shaderProgram = 0;\n      }\n\n      return 0;\n    }\n\n    // Release vertex and fragment shaders.\n    this.gl.deleteShader(vertShader);\n    this.gl.deleteShader(fragShader);\n\n    return shaderProgram;\n  }\n\n  /**\n   * シェーダープログラムをコンパイルする\n   * @param shaderType シェーダタイプ(Vertex/Fragment)\n   * @param shaderSource シェーダソースコード\n   *\n   * @return コンパイルされたシェーダープログラム\n   */\n  public compileShaderSource(\n    shaderType: GLenum,\n    shaderSource: string\n  ): WebGLProgram {\n    const source: string = shaderSource;\n\n    const shader: WebGLProgram = this.gl.createShader(shaderType);\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n\n    if (!shader) {\n      const log: string = this.gl.getShaderInfoLog(shader);\n      CubismLogError('Shader compile log: {0} ', log);\n    }\n\n    const status: any = this.gl.getShaderParameter(\n      shader,\n      this.gl.COMPILE_STATUS\n    );\n    if (!status) {\n      this.gl.deleteShader(shader);\n      return null;\n    }\n\n    return shader;\n  }\n\n  public setGl(gl: WebGLRenderingContext): void {\n    this.gl = gl;\n  }\n\n  _shaderSets: csmVector<CubismShaderSet>; // ロードしたシェーダープログラムを保持する変数\n  gl: WebGLRenderingContext; // webglコンテキスト\n}\n\n/**\n * CubismShader_WebGLのインナークラス\n */\nexport class CubismShaderSet {\n  shaderProgram: WebGLProgram; // シェーダープログラムのアドレス\n  attributePositionLocation: GLuint; // シェーダープログラムに渡す変数のアドレス（Position）\n  attributeTexCoordLocation: GLuint; // シェーダープログラムに渡す変数のアドレス（TexCoord）\n  uniformMatrixLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（Matrix）\n  uniformClipMatrixLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（ClipMatrix）\n  samplerTexture0Location: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（Texture0）\n  samplerTexture1Location: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（Texture1）\n  uniformBaseColorLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（BaseColor）\n  uniformChannelFlagLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（ChannelFlag）\n  uniformMultiplyColorLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（MultiplyColor）\n  uniformScreenColorLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（ScreenColor）\n}\n\nexport enum ShaderNames {\n  // SetupMask\n  ShaderNames_SetupMask,\n\n  // Normal\n  ShaderNames_NormalPremultipliedAlpha,\n  ShaderNames_NormalMaskedPremultipliedAlpha,\n  ShaderNames_NomralMaskedInvertedPremultipliedAlpha,\n\n  // Add\n  ShaderNames_AddPremultipliedAlpha,\n  ShaderNames_AddMaskedPremultipliedAlpha,\n  ShaderNames_AddMaskedPremultipliedAlphaInverted,\n\n  // Mult\n  ShaderNames_MultPremultipliedAlpha,\n  ShaderNames_MultMaskedPremultipliedAlpha,\n  ShaderNames_MultMaskedPremultipliedAlphaInverted,\n}\n\nexport const vertexShaderSrcSetupMask =\n  'attribute vec4     a_position;' +\n  'attribute vec2     a_texCoord;' +\n  'varying vec2       v_texCoord;' +\n  'varying vec4       v_myPos;' +\n  'uniform mat4       u_clipMatrix;' +\n  'void main()' +\n  '{' +\n  '   gl_Position = u_clipMatrix * a_position;' +\n  '   v_myPos = u_clipMatrix * a_position;' +\n  '   v_texCoord = a_texCoord;' +\n  '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n  '}';\nexport const fragmentShaderSrcsetupMask =\n  'precision mediump float;' +\n  'varying vec2       v_texCoord;' +\n  'varying vec4       v_myPos;' +\n  'uniform vec4       u_baseColor;' +\n  'uniform vec4       u_channelFlag;' +\n  'uniform sampler2D  s_texture0;' +\n  'void main()' +\n  '{' +\n  '   float isInside = ' +\n  '       step(u_baseColor.x, v_myPos.x/v_myPos.w)' +\n  '       * step(u_baseColor.y, v_myPos.y/v_myPos.w)' +\n  '       * step(v_myPos.x/v_myPos.w, u_baseColor.z)' +\n  '       * step(v_myPos.y/v_myPos.w, u_baseColor.w);' +\n  '   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;' +\n  '}';\n\n//----- バーテックスシェーダプログラム -----\n// Normal & Add & Mult 共通\nexport const vertexShaderSrc =\n  'attribute vec4     a_position;' + //v.vertex\n  'attribute vec2     a_texCoord;' + //v.texcoord\n  'varying vec2       v_texCoord;' + //v2f.texcoord\n  'uniform mat4       u_matrix;' +\n  'void main()' +\n  '{' +\n  '   gl_Position = u_matrix * a_position;' +\n  '   v_texCoord = a_texCoord;' +\n  '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n  '}';\n\n// Normal & Add & Mult 共通（クリッピングされたものの描画用）\nexport const vertexShaderSrcMasked =\n  'attribute vec4     a_position;' +\n  'attribute vec2     a_texCoord;' +\n  'varying vec2       v_texCoord;' +\n  'varying vec4       v_clipPos;' +\n  'uniform mat4       u_matrix;' +\n  'uniform mat4       u_clipMatrix;' +\n  'void main()' +\n  '{' +\n  '   gl_Position = u_matrix * a_position;' +\n  '   v_clipPos = u_clipMatrix * a_position;' +\n  '   v_texCoord = a_texCoord;' +\n  '   v_texCoord.y = 1.0 - v_texCoord.y;' +\n  '}';\n\n//----- フラグメントシェーダプログラム -----\n// Normal & Add & Mult 共通 （PremultipliedAlpha）\nexport const fragmentShaderSrcPremultipliedAlpha =\n  'precision mediump float;' +\n  'varying vec2       v_texCoord;' + //v2f.texcoord\n  'uniform vec4       u_baseColor;' +\n  'uniform sampler2D  s_texture0;' + //_MainTex\n  'uniform vec4       u_multiplyColor;' +\n  'uniform vec4       u_screenColor;' +\n  'void main()' +\n  '{' +\n  '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\n  '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\n  '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\n  '   vec4 color = texColor * u_baseColor;' +\n  '   gl_FragColor = vec4(color.rgb, color.a);' +\n  '}';\n\n// Normal （クリッピングされたものの描画用、PremultipliedAlpha兼用）\nexport const fragmentShaderSrcMaskPremultipliedAlpha =\n  'precision mediump float;' +\n  'varying vec2       v_texCoord;' +\n  'varying vec4       v_clipPos;' +\n  'uniform vec4       u_baseColor;' +\n  'uniform vec4       u_channelFlag;' +\n  'uniform sampler2D  s_texture0;' +\n  'uniform sampler2D  s_texture1;' +\n  'uniform vec4       u_multiplyColor;' +\n  'uniform vec4       u_screenColor;' +\n  'void main()' +\n  '{' +\n  '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\n  '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\n  '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\n  '   vec4 col_formask = texColor * u_baseColor;' +\n  '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\n  '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\n  '   col_formask = col_formask * maskVal;' +\n  '   gl_FragColor = col_formask;' +\n  '}';\n\n// Normal & Add & Mult 共通（クリッピングされて反転使用の描画用、PremultipliedAlphaの場合）\nexport const fragmentShaderSrcMaskInvertedPremultipliedAlpha =\n  'precision mediump float;' +\n  'varying vec2      v_texCoord;' +\n  'varying vec4      v_clipPos;' +\n  'uniform sampler2D s_texture0;' +\n  'uniform sampler2D s_texture1;' +\n  'uniform vec4      u_channelFlag;' +\n  'uniform vec4      u_baseColor;' +\n  'uniform vec4      u_multiplyColor;' +\n  'uniform vec4      u_screenColor;' +\n  'void main()' +\n  '{' +\n  '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\n  '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\n  '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\n  '   vec4 col_formask = texColor * u_baseColor;' +\n  '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\n  '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\n  '   col_formask = col_formask * (1.0 - maskVal);' +\n  '   gl_FragColor = col_formask;' +\n  '}';\n\n/**\n * WebGL用の描画命令を実装したクラス\n */\nexport class CubismRenderer_WebGL extends CubismRenderer {\n  /**\n   * レンダラの初期化処理を実行する\n   * 引数に渡したモデルからレンダラの初期化処理に必要な情報を取り出すことができる\n   *\n   * @param model モデルのインスタンス\n   * @param maskBufferCount バッファの生成数\n   */\n  public initialize(model: CubismModel, maskBufferCount = 1): void {\n    if (model.isUsingMasking()) {\n      this._clippingManager = new CubismClippingManager_WebGL(); // クリッピングマスク・バッファ前処理方式を初期化\n      this._clippingManager.initialize(\n        model,\n        model.getDrawableCount(),\n        model.getDrawableMasks(),\n        model.getDrawableMaskCounts(),\n        maskBufferCount\n      );\n    }\n\n    this._sortedDrawableIndexList.resize(model.getDrawableCount(), 0);\n\n    super.initialize(model); // 親クラスの処理を呼ぶ\n  }\n\n  /**\n   * WebGLテクスチャのバインド処理\n   * CubismRendererにテクスチャを設定し、CubismRenderer内でその画像を参照するためのIndex値を戻り値とする\n   * @param modelTextureNo セットするモデルテクスチャの番号\n   * @param glTextureNo WebGLテクスチャの番号\n   */\n  public bindTexture(modelTextureNo: number, glTexture: WebGLTexture): void {\n    this._textures.setValue(modelTextureNo, glTexture);\n  }\n\n  /**\n   * WebGLにバインドされたテクスチャのリストを取得する\n   * @return テクスチャのリスト\n   */\n  public getBindedTextures(): csmMap<number, WebGLTexture> {\n    return this._textures;\n  }\n\n  /**\n   * クリッピングマスクバッファのサイズを設定する\n   * マスク用のFrameBufferを破棄、再作成する為処理コストは高い\n   * @param size クリッピングマスクバッファのサイズ\n   */\n  public setClippingMaskBufferSize(size: number) {\n    // クリッピングマスクを利用しない場合は早期リターン\n    if (!this._model.isUsingMasking()) {\n      return;\n    }\n\n    // インスタンス破棄前にレンダーテクスチャの数を保存\n    const renderTextureCount: number =\n      this._clippingManager.getRenderTextureCount();\n\n    // FrameBufferのサイズを変更するためにインスタンスを破棄・再作成する\n    this._clippingManager.release();\n    this._clippingManager = void 0;\n    this._clippingManager = null;\n\n    this._clippingManager = new CubismClippingManager_WebGL();\n\n    this._clippingManager.setClippingMaskBufferSize(size);\n\n    this._clippingManager.initialize(\n      this.getModel(),\n      this.getModel().getDrawableCount(),\n      this.getModel().getDrawableMasks(),\n      this.getModel().getDrawableMaskCounts(),\n      renderTextureCount // インスタンス破棄前に保存したレンダーテクスチャの数\n    );\n  }\n\n  /**\n   * クリッピングマスクバッファのサイズを取得する\n   * @return クリッピングマスクバッファのサイズ\n   */\n  public getClippingMaskBufferSize(): number {\n    return this._model.isUsingMasking()\n      ? this._clippingManager.getClippingMaskBufferSize()\n      : -1;\n  }\n\n  /**\n   * レンダーテクスチャの枚数を取得する\n   * @return レンダーテクスチャの枚数\n   */\n  public getRenderTextureCount(): number {\n    return this._model.isUsingMasking()\n      ? this._clippingManager.getRenderTextureCount()\n      : -1;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n    this._clippingContextBufferForMask = null;\n    this._clippingContextBufferForDraw = null;\n    this._rendererProfile = new CubismRendererProfile_WebGL();\n    this.firstDraw = true;\n    this._textures = new csmMap<number, number>();\n    this._sortedDrawableIndexList = new csmVector<number>();\n    this._bufferData = {\n      vertex: (WebGLBuffer = null),\n      uv: (WebGLBuffer = null),\n      index: (WebGLBuffer = null),\n    };\n\n    // テクスチャ対応マップの容量を確保しておく\n    this._textures.prepareCapacity(32, true);\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    if (this._clippingManager) {\n      this._clippingManager.release();\n      this._clippingManager = void 0;\n      this._clippingManager = null;\n    }\n\n    if (this.gl == null) {\n      return;\n    }\n    this.gl.deleteBuffer(this._bufferData.vertex);\n    this._bufferData.vertex = null;\n    this.gl.deleteBuffer(this._bufferData.uv);\n    this._bufferData.uv = null;\n    this.gl.deleteBuffer(this._bufferData.index);\n    this._bufferData.index = null;\n    this._bufferData = null;\n\n    this._textures = null;\n  }\n\n  /**\n   * モデルを描画する実際の処理\n   */\n  public doDrawModel(): void {\n    if (this.gl == null) {\n      CubismLogError(\n        \"'gl' is null. WebGLRenderingContext is required.\\nPlease call 'CubimRenderer_WebGL.startUp' function.\"\n      );\n      return;\n    }\n\n    //------------ クリッピングマスク・バッファ前処理方式の場合 ------------\n    if (this._clippingManager != null) {\n      this.preDraw();\n      this._clippingManager.setupClippingContext(this.getModel(), this);\n    }\n\n    // 上記クリッピング処理内でも一度PreDrawを呼ぶので注意!!\n    this.preDraw();\n\n    const drawableCount: number = this.getModel().getDrawableCount();\n    const renderOrder: Int32Array = this.getModel().getDrawableRenderOrders();\n\n    // インデックスを描画順でソート\n    for (let i = 0; i < drawableCount; ++i) {\n      const order: number = renderOrder[i];\n      this._sortedDrawableIndexList.set(order, i);\n    }\n\n    // 描画\n    for (let i = 0; i < drawableCount; ++i) {\n      const drawableIndex: number = this._sortedDrawableIndexList.at(i);\n\n      // Drawableが表示状態でなければ処理をパスする\n      if (!this.getModel().getDrawableDynamicFlagIsVisible(drawableIndex)) {\n        continue;\n      }\n\n      const clipContext =\n        this._clippingManager != null\n          ? this._clippingManager\n              .getClippingContextListForDraw()\n              .at(drawableIndex)\n          : null;\n\n      if (clipContext != null && this.isUsingHighPrecisionMask()) {\n        // 描くことになっていた\n        if (clipContext._isUsing) {\n          // 生成したFrameBufferと同じサイズでビューポートを設定\n          this.gl.viewport(\n            0,\n            0,\n            this._clippingManager.getClippingMaskBufferSize(),\n            this._clippingManager.getClippingMaskBufferSize()\n          );\n\n          this.preDraw(); // バッファをクリアする\n\n          // ---------- マスク描画処理 ----------\n          // マスク用RenderTextureをactiveにセット\n          this.gl.bindFramebuffer(\n            this.gl.FRAMEBUFFER,\n            clipContext\n              .getClippingManager()\n              .getMaskRenderTexture()\n              .at(clipContext._bufferIndex)\n          );\n\n          // マスクをクリアする\n          // (仮仕様) 1が無効（描かれない）領域、0が有効（描かれる）領域。（シェーダーCd*Csで0に近い値をかけてマスクを作る。1をかけると何も起こらない）\n          this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\n          this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n        }\n\n        {\n          const clipDrawCount: number = clipContext._clippingIdCount;\n\n          for (let index = 0; index < clipDrawCount; index++) {\n            const clipDrawIndex: number = clipContext._clippingIdList[index];\n\n            // 頂点情報が更新されておらず、信頼性がない場合は描画をパスする\n            if (\n              !this._model.getDrawableDynamicFlagVertexPositionsDidChange(\n                clipDrawIndex\n              )\n            ) {\n              continue;\n            }\n\n            this.setIsCulling(\n              this._model.getDrawableCulling(clipDrawIndex) != false\n            );\n\n            // 今回専用の変換を適用して描く\n            // チャンネルも切り替える必要がある(A,R,G,B)\n            this.setClippingContextBufferForMask(clipContext);\n\n            this.drawMesh(\n              this.getModel().getDrawableTextureIndex(clipDrawIndex),\n              this.getModel().getDrawableVertexIndexCount(clipDrawIndex),\n              this.getModel().getDrawableVertexCount(clipDrawIndex),\n              this.getModel().getDrawableVertexIndices(clipDrawIndex),\n              this.getModel().getDrawableVertices(clipDrawIndex),\n              this.getModel().getDrawableVertexUvs(clipDrawIndex),\n              this.getModel().getMultiplyColor(clipDrawIndex),\n              this.getModel().getScreenColor(clipDrawIndex),\n              this.getModel().getDrawableOpacity(clipDrawIndex),\n              CubismBlendMode.CubismBlendMode_Normal, // クリッピングは通常描画を強制\n              false // マスク生成時はクリッピングの反転使用は全く関係がない\n            );\n          }\n        }\n\n        {\n          // --- 後処理 ---\n          this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo); // 描画対象を戻す\n          this.setClippingContextBufferForMask(null);\n\n          this.gl.viewport(\n            s_viewport[0],\n            s_viewport[1],\n            s_viewport[2],\n            s_viewport[3]\n          );\n\n          this.preDraw(); // バッファをクリアする\n        }\n      }\n\n      // クリッピングマスクをセットする\n      this.setClippingContextBufferForDraw(clipContext);\n\n      this.setIsCulling(this.getModel().getDrawableCulling(drawableIndex));\n\n      this.drawMesh(\n        this.getModel().getDrawableTextureIndex(drawableIndex),\n        this.getModel().getDrawableVertexIndexCount(drawableIndex),\n        this.getModel().getDrawableVertexCount(drawableIndex),\n        this.getModel().getDrawableVertexIndices(drawableIndex),\n        this.getModel().getDrawableVertices(drawableIndex),\n        this.getModel().getDrawableVertexUvs(drawableIndex),\n        this.getModel().getMultiplyColor(drawableIndex),\n        this.getModel().getScreenColor(drawableIndex),\n        this.getModel().getDrawableOpacity(drawableIndex),\n        this.getModel().getDrawableBlendMode(drawableIndex),\n        this.getModel().getDrawableInvertedMaskBit(drawableIndex)\n      );\n    }\n  }\n\n  /**\n   * [オーバーライド]\n   * 描画オブジェクト（アートメッシュ）を描画する。\n   * ポリゴンメッシュとテクスチャ番号をセットで渡す。\n   * @param textureNo 描画するテクスチャ番号\n   * @param indexCount 描画オブジェクトのインデックス値\n   * @param vertexCount ポリゴンメッシュの頂点数\n   * @param indexArray ポリゴンメッシュのインデックス配列\n   * @param vertexArray ポリゴンメッシュの頂点配列\n   * @param uvArray uv配列\n   * @param opacity 不透明度\n   * @param colorBlendMode カラー合成タイプ\n   * @param invertedMask マスク使用時のマスクの反転使用\n   */\n  public drawMesh(\n    textureNo: number,\n    indexCount: number,\n    vertexCount: number,\n    indexArray: Uint16Array,\n    vertexArray: Float32Array,\n    uvArray: Float32Array,\n    multiplyColor: CubismTextureColor,\n    screenColor: CubismTextureColor,\n    opacity: number,\n    colorBlendMode: CubismBlendMode,\n    invertedMask: boolean\n  ): void {\n    // 裏面描画の有効・無効\n    if (this.isCulling()) {\n      this.gl.enable(this.gl.CULL_FACE);\n    } else {\n      this.gl.disable(this.gl.CULL_FACE);\n    }\n\n    this.gl.frontFace(this.gl.CCW); // Cubism SDK OpenGLはマスク・アートメッシュ共にCCWが表面\n\n    const modelColorRGBA: CubismTextureColor = this.getModelColor();\n\n    if (this.getClippingContextBufferForMask() == null) {\n      // マスク生成時以外\n      modelColorRGBA.A *= opacity;\n      if (this.isPremultipliedAlpha()) {\n        modelColorRGBA.R *= modelColorRGBA.A;\n        modelColorRGBA.G *= modelColorRGBA.A;\n        modelColorRGBA.B *= modelColorRGBA.A;\n      }\n    }\n\n    let drawtexture: WebGLTexture; // シェーダに渡すテクスチャ\n\n    // テクスチャマップからバインド済みテクスチャＩＤを取得\n    // バインドされていなければダミーのテクスチャIDをセットする\n    if (this._textures.getValue(textureNo) != null) {\n      drawtexture = this._textures.getValue(textureNo);\n    } else {\n      drawtexture = null;\n    }\n\n    CubismShader_WebGL.getInstance().setupShaderProgram(\n      this,\n      drawtexture,\n      vertexCount,\n      vertexArray,\n      indexArray,\n      uvArray,\n      this._bufferData,\n      opacity,\n      colorBlendMode,\n      modelColorRGBA,\n      multiplyColor,\n      screenColor,\n      this.isPremultipliedAlpha(),\n      this.getMvpMatrix(),\n      invertedMask\n    );\n\n    // ポリゴンメッシュを描画する\n    this.gl.drawElements(\n      this.gl.TRIANGLES,\n      indexCount,\n      this.gl.UNSIGNED_SHORT,\n      0\n    );\n\n    // 後処理\n    this.gl.useProgram(null);\n    this.setClippingContextBufferForDraw(null);\n    this.setClippingContextBufferForMask(null);\n  }\n\n  protected saveProfile(): void {\n    this._rendererProfile.save();\n  }\n\n  protected restoreProfile(): void {\n    this._rendererProfile.restore();\n  }\n\n  /**\n   * レンダラが保持する静的なリソースを解放する\n   * WebGLの静的なシェーダープログラムを解放する\n   */\n  public static doStaticRelease(): void {\n    CubismShader_WebGL.deleteInstance();\n  }\n\n  /**\n   * レンダーステートを設定する\n   * @param fbo アプリケーション側で指定しているフレームバッファ\n   * @param viewport ビューポート\n   */\n  public setRenderState(fbo: WebGLFramebuffer, viewport: number[]): void {\n    s_fbo = fbo;\n    s_viewport = viewport;\n  }\n\n  /**\n   * 描画開始時の追加処理\n   * モデルを描画する前にクリッピングマスクに必要な処理を実装している\n   */\n  public preDraw(): void {\n    if (this.firstDraw) {\n      this.firstDraw = false;\n    }\n\n    this.gl.disable(this.gl.SCISSOR_TEST);\n    this.gl.disable(this.gl.STENCIL_TEST);\n    this.gl.disable(this.gl.DEPTH_TEST);\n\n    // カリング（1.0beta3）\n    this.gl.frontFace(this.gl.CW);\n\n    this.gl.enable(this.gl.BLEND);\n    this.gl.colorMask(true, true, true, true);\n\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null); // 前にバッファがバインドされていたら破棄する必要がある\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\n\n    // 異方性フィルタリングを適用する\n    if (this.getAnisotropy() > 0.0 && this._extension) {\n      for (let i = 0; i < this._textures.getSize(); ++i) {\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this._textures.getValue(i));\n        this.gl.texParameterf(\n          this.gl.TEXTURE_2D,\n          this._extension.TEXTURE_MAX_ANISOTROPY_EXT,\n          this.getAnisotropy()\n        );\n      }\n    }\n  }\n\n  /**\n   * マスクテクスチャに描画するクリッピングコンテキストをセットする\n   */\n  public setClippingContextBufferForMask(clip: CubismClippingContext) {\n    this._clippingContextBufferForMask = clip;\n  }\n\n  /**\n   * マスクテクスチャに描画するクリッピングコンテキストを取得する\n   * @return マスクテクスチャに描画するクリッピングコンテキスト\n   */\n  public getClippingContextBufferForMask(): CubismClippingContext {\n    return this._clippingContextBufferForMask;\n  }\n\n  /**\n   * 画面上に描画するクリッピングコンテキストをセットする\n   */\n  public setClippingContextBufferForDraw(clip: CubismClippingContext): void {\n    this._clippingContextBufferForDraw = clip;\n  }\n\n  /**\n   * 画面上に描画するクリッピングコンテキストを取得する\n   * @return 画面上に描画するクリッピングコンテキスト\n   */\n  public getClippingContextBufferForDraw(): CubismClippingContext {\n    return this._clippingContextBufferForDraw;\n  }\n\n  /**\n   * glの設定\n   */\n  public startUp(gl: WebGLRenderingContext): void {\n    this.gl = gl;\n\n    if (this._clippingManager) {\n      this._clippingManager.setGL(gl);\n    }\n\n    CubismShader_WebGL.getInstance().setGl(gl);\n    this._rendererProfile.setGl(gl);\n\n    // 異方性フィルタリングが使用できるかチェック\n    this._extension =\n      this.gl.getExtension('EXT_texture_filter_anisotropic') ||\n      this.gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic') ||\n      this.gl.getExtension('MOZ_EXT_texture_filter_anisotropic');\n  }\n\n  _textures: csmMap<number, WebGLTexture>; // モデルが参照するテクスチャとレンダラでバインドしているテクスチャとのマップ\n  _sortedDrawableIndexList: csmVector<number>; // 描画オブジェクトのインデックスを描画順に並べたリスト\n  _clippingManager: CubismClippingManager_WebGL; // クリッピングマスク管理オブジェクト\n  _clippingContextBufferForMask: CubismClippingContext; // マスクテクスチャに描画するためのクリッピングコンテキスト\n  _clippingContextBufferForDraw: CubismClippingContext; // 画面上描画するためのクリッピングコンテキスト\n  _rendererProfile: CubismRendererProfile_WebGL;\n  firstDraw: boolean;\n  _bufferData: {\n    vertex: WebGLBuffer;\n    uv: WebGLBuffer;\n    index: WebGLBuffer;\n  }; // 頂点バッファデータ\n  _extension: any; // 拡張機能\n  gl: WebGLRenderingContext; // webglコンテキスト\n}\n\n/**\n * レンダラが保持する静的なリソースを開放する\n */\nCubismRenderer.staticRelease = (): void => {\n  CubismRenderer_WebGL.doStaticRelease();\n};\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismrenderer_webgl';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismClippingContext = $.CubismClippingContext;\n  export type CubismClippingContext = $.CubismClippingContext;\n  export const CubismClippingManager_WebGL = $.CubismClippingManager_WebGL;\n  export type CubismClippingManager_WebGL = $.CubismClippingManager_WebGL;\n  export const CubismRenderTextureResource = $.CubismRenderTextureResource;\n  export type CubismRenderTextureResource = $.CubismRenderTextureResource;\n  export const CubismRenderer_WebGL = $.CubismRenderer_WebGL;\n  export type CubismRenderer_WebGL = $.CubismRenderer_WebGL;\n  export const CubismShaderSet = $.CubismShaderSet;\n  export type CubismShaderSet = $.CubismShaderSet;\n  export const CubismShader_WebGL = $.CubismShader_WebGL;\n  export type CubismShader_WebGL = $.CubismShader_WebGL;\n  export const ShaderNames = $.ShaderNames;\n  export type ShaderNames = $.ShaderNames;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismLogDebug } from '../utils/cubismdebug';\n\n/**\n * Key-Valueのペアを定義するクラス\n * csmMapクラスの内部データで使用する。\n */\nexport class csmPair<_KeyT, _ValT> {\n  /**\n   * コンストラクタ\n   * @param key Keyとしてセットする値\n   * @param value Valueとしてセットする値\n   */\n  public constructor(key?: _KeyT, value?: _ValT) {\n    this.first = key == undefined ? null : key;\n\n    this.second = value == undefined ? null : value;\n  }\n\n  public first: _KeyT; // keyとして用いる変数\n  public second: _ValT; // valueとして用いる変数\n}\n\n/**\n * マップ型\n */\nexport class csmMap<_KeyT, _ValT> {\n  /**\n   * 引数付きコンストラクタ\n   * @param size 初期化時点で確保するサイズ\n   */\n  public constructor(size?: number) {\n    if (size != undefined) {\n      if (size < 1) {\n        this._keyValues = [];\n        this._dummyValue = null;\n        this._size = 0;\n      } else {\n        this._keyValues = new Array(size);\n        this._size = size;\n      }\n    } else {\n      this._keyValues = [];\n      this._dummyValue = null;\n      this._size = 0;\n    }\n  }\n\n  /**\n   * デストラクタ\n   */\n  public release() {\n    this.clear();\n  }\n\n  /**\n   * キーを追加する\n   * @param key 新たに追加するキー\n   */\n  public appendKey(key: _KeyT): void {\n    // 新しくKey/Valueのペアを作る\n    this.prepareCapacity(this._size + 1, false); // 1つ以上入る隙間を作る\n    // 新しいkey/valueのインデックスは_size\n\n    this._keyValues[this._size] = new csmPair<_KeyT, _ValT>(key);\n    this._size += 1;\n  }\n\n  /**\n   * 添字演算子[key]のオーバーロード(get)\n   * @param key 添字から特定されるValue値\n   */\n  public getValue(key: _KeyT): _ValT {\n    let found = -1;\n\n    for (let i = 0; i < this._size; i++) {\n      if (this._keyValues[i].first == key) {\n        found = i;\n        break;\n      }\n    }\n\n    if (found >= 0) {\n      return this._keyValues[found].second;\n    } else {\n      this.appendKey(key); // 新規キーを追加\n      return this._keyValues[this._size - 1].second;\n    }\n  }\n\n  /**\n   * 添字演算子[key]のオーバーロード(set)\n   * @param key 添字から特定されるValue値\n   * @param value 代入するValue値\n   */\n  public setValue(key: _KeyT, value: _ValT): void {\n    let found = -1;\n\n    for (let i = 0; i < this._size; i++) {\n      if (this._keyValues[i].first == key) {\n        found = i;\n        break;\n      }\n    }\n\n    if (found >= 0) {\n      this._keyValues[found].second = value;\n    } else {\n      this.appendKey(key); // 新規キーを追加\n      this._keyValues[this._size - 1].second = value;\n    }\n  }\n\n  /**\n   * 引数で渡したKeyを持つ要素が存在するか\n   * @param key 存在を確認するkey\n   * @return true 引数で渡したkeyを持つ要素が存在する\n   * @return false 引数で渡したkeyを持つ要素が存在しない\n   */\n  public isExist(key: _KeyT): boolean {\n    for (let i = 0; i < this._size; i++) {\n      if (this._keyValues[i].first == key) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * keyValueのポインタを全て解放する\n   */\n  public clear(): void {\n    this._keyValues = void 0;\n    this._keyValues = null;\n    this._keyValues = [];\n\n    this._size = 0;\n  }\n\n  /**\n   * コンテナのサイズを取得する\n   *\n   * @return コンテナのサイズ\n   */\n  public getSize(): number {\n    return this._size;\n  }\n\n  /**\n   * コンテナのキャパシティを確保する\n   * @param newSize 新たなキャパシティ。引数の値が現在のサイズ未満の場合は何もしない。\n   * @param fitToSize trueなら指定したサイズに合わせる。falseならサイズを2倍確保しておく。\n   */\n  public prepareCapacity(newSize: number, fitToSize: boolean): void {\n    if (newSize > this._keyValues.length) {\n      if (this._keyValues.length == 0) {\n        if (!fitToSize && newSize < csmMap.DefaultSize)\n          newSize = csmMap.DefaultSize;\n        this._keyValues.length = newSize;\n      } else {\n        if (!fitToSize && newSize < this._keyValues.length * 2)\n          newSize = this._keyValues.length * 2;\n        this._keyValues.length = newSize;\n      }\n    }\n  }\n\n  /**\n   * コンテナの先頭要素を返す\n   */\n  public begin(): iterator<_KeyT, _ValT> {\n    const ite: iterator<_KeyT, _ValT> = new iterator<_KeyT, _ValT>(this, 0);\n    return ite;\n  }\n\n  /**\n   * コンテナの終端要素を返す\n   */\n  public end(): iterator<_KeyT, _ValT> {\n    const ite: iterator<_KeyT, _ValT> = new iterator<_KeyT, _ValT>(\n      this,\n      this._size\n    ); // 終了\n    return ite;\n  }\n\n  /**\n   * コンテナから要素を削除する\n   *\n   * @param ite 削除する要素\n   */\n  public erase(ite: iterator<_KeyT, _ValT>): iterator<_KeyT, _ValT> {\n    const index: number = ite._index;\n    if (index < 0 || this._size <= index) {\n      return ite; // 削除範囲外\n    }\n\n    // 削除\n    this._keyValues.splice(index, 1);\n    --this._size;\n\n    const ite2: iterator<_KeyT, _ValT> = new iterator<_KeyT, _ValT>(\n      this,\n      index\n    ); // 終了\n    return ite2;\n  }\n\n  /**\n   * コンテナの値を32ビット符号付き整数型でダンプする\n   */\n  public dumpAsInt() {\n    for (let i = 0; i < this._size; i++) {\n      CubismLogDebug('{0} ,', this._keyValues[i]);\n      CubismLogDebug('\\n');\n    }\n  }\n\n  public static readonly DefaultSize = 10; // コンテナの初期化のデフォルトサイズ\n  public _keyValues: csmPair<_KeyT, _ValT>[]; // key-valueペアの配列\n  public _dummyValue: _ValT; // 空の値を返す為のダミー\n  public _size: number; // コンテナの要素数\n}\n\n/**\n * csmMap<T>のイテレータ\n */\nexport class iterator<_KeyT, _ValT> {\n  /**\n   * コンストラクタ\n   */\n  constructor(v?: csmMap<_KeyT, _ValT>, idx?: number) {\n    this._map = v != undefined ? v : new csmMap<_KeyT, _ValT>();\n\n    this._index = idx != undefined ? idx : 0;\n  }\n\n  /**\n   * =演算子のオーバーロード\n   */\n  public set(ite: iterator<_KeyT, _ValT>): iterator<_KeyT, _ValT> {\n    this._index = ite._index;\n    this._map = ite._map;\n    return this;\n  }\n\n  /**\n   * 前置き++演算子のオーバーロード\n   */\n  public preIncrement(): iterator<_KeyT, _ValT> {\n    ++this._index;\n    return this;\n  }\n\n  /**\n   * 前置き--演算子のオーバーロード\n   */\n  public preDecrement(): iterator<_KeyT, _ValT> {\n    --this._index;\n    return this;\n  }\n\n  /**\n   * 後置き++演算子のオーバーロード\n   */\n  public increment(): iterator<_KeyT, _ValT> {\n    const iteold = new iterator<_KeyT, _ValT>(this._map, this._index++); // 古い値を保存\n    return iteold;\n  }\n\n  /**\n   * 後置き--演算子のオーバーロード\n   */\n  public decrement(): iterator<_KeyT, _ValT> {\n    const iteold = new iterator<_KeyT, _ValT>(this._map, this._index); // 古い値を保存\n    this._map = iteold._map;\n    this._index = iteold._index;\n    return this;\n  }\n\n  /**\n   * *演算子のオーバーロード\n   */\n  public ptr(): csmPair<_KeyT, _ValT> {\n    return this._map._keyValues[this._index];\n  }\n\n  /**\n   * !=演算\n   */\n  public notEqual(ite: iterator<_KeyT, _ValT>): boolean {\n    return this._index != ite._index || this._map != ite._map;\n  }\n\n  _index: number; // コンテナのインデックス値\n  _map: csmMap<_KeyT, _ValT>; // コンテナ\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './csmmap';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const csmMap = $.csmMap;\n  export type csmMap<K, V> = $.csmMap<K, V>;\n  export const csmPair = $.csmPair;\n  export type csmPair<K, V> = $.csmPair<K, V>;\n  export const iterator = $.iterator;\n  export type iterator<K, V> = $.iterator<K, V>;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n/**\n * 矩形形状（座標・長さはfloat値）を定義するクラス\n */\nexport class csmRect {\n  /**\n   * コンストラクタ\n   * @param x 左端X座標\n   * @param y 上端Y座標\n   * @param w 幅\n   * @param h 高さ\n   */\n  public constructor(x?: number, y?: number, w?: number, h?: number) {\n    this.x = x;\n    this.y = y;\n    this.width = w;\n    this.height = h;\n  }\n\n  /**\n   * 矩形中央のX座標を取得する\n   */\n  public getCenterX(): number {\n    return this.x + 0.5 * this.width;\n  }\n\n  /**\n   * 矩形中央のY座標を取得する\n   */\n  public getCenterY(): number {\n    return this.y + 0.5 * this.height;\n  }\n\n  /**\n   * 右側のX座標を取得する\n   */\n  public getRight(): number {\n    return this.x + this.width;\n  }\n\n  /**\n   * 下端のY座標を取得する\n   */\n  public getBottom(): number {\n    return this.y + this.height;\n  }\n\n  /**\n   * 矩形に値をセットする\n   * @param r 矩形のインスタンス\n   */\n  public setRect(r: csmRect): void {\n    this.x = r.x;\n    this.y = r.y;\n    this.width = r.width;\n    this.height = r.height;\n  }\n\n  /**\n   * 矩形中央を軸にして縦横を拡縮する\n   * @param w 幅方向に拡縮する量\n   * @param h 高さ方向に拡縮する量\n   */\n  public expand(w: number, h: number) {\n    this.x -= w;\n    this.y -= h;\n    this.width += w * 2.0;\n    this.height += h * 2.0;\n  }\n\n  public x: number; // 左端X座標\n  public y: number; // 上端Y座標\n  public width: number; // 幅\n  public height: number; // 高さ\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './csmrectf';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const csmRect = $.csmRect;\n  export type csmRect = $.csmRect;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n/**\n * 文字列クラス。\n */\nexport class csmString {\n  /**\n   * 文字列を後方に追加する\n   *\n   * @param c 追加する文字列\n   * @return 更新された文字列\n   */\n  public append(c: string, length?: number): csmString {\n    this.s += length !== undefined ? c.substr(0, length) : c;\n\n    return this;\n  }\n\n  /**\n   * 文字サイズを拡張して文字を埋める\n   * @param length    拡張する文字数\n   * @param v         埋める文字\n   * @return 更新された文字列\n   */\n  public expansion(length: number, v: string): csmString {\n    for (let i = 0; i < length; i++) {\n      this.append(v);\n    }\n\n    return this;\n  }\n\n  /**\n   * 文字列の長さをバイト数で取得する\n   */\n  public getBytes(): number {\n    return encodeURIComponent(this.s).replace(/%../g, 'x').length;\n  }\n\n  /**\n   * 文字列の長さを返す\n   */\n  public getLength(): number {\n    return this.s.length;\n  }\n\n  /**\n   * 文字列比較 <\n   * @param s 比較する文字列\n   * @return true:    比較する文字列より小さい\n   * @return false:   比較する文字列より大きい\n   */\n  public isLess(s: csmString): boolean {\n    return this.s < s.s;\n  }\n\n  /**\n   * 文字列比較 >\n   * @param s 比較する文字列\n   * @return true:    比較する文字列より大きい\n   * @return false:   比較する文字列より小さい\n   */\n  public isGreat(s: csmString): boolean {\n    return this.s > s.s;\n  }\n\n  /**\n   * 文字列比較 ==\n   * @param s 比較する文字列\n   * @return true:    比較する文字列と等しい\n   * @return false:   比較する文字列と異なる\n   */\n  public isEqual(s: string): boolean {\n    return this.s == s;\n  }\n\n  /**\n   * 文字列が空かどうか\n   * @return true: 空の文字列\n   * @return false: 値が設定されている\n   */\n  public isEmpty(): boolean {\n    return this.s.length == 0;\n  }\n\n  /**\n   * 引数付きコンストラクタ\n   */\n  public constructor(s: string) {\n    this.s = s;\n  }\n\n  s: string;\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './csmstring';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const csmString = $.csmString;\n  export type csmString = $.csmString;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n/**\n * ベクター型（可変配列型）\n */\nexport class csmVector<T> {\n  /**\n   * 引数付きコンストラクタ\n   * @param iniitalCapacity 初期化後のキャパシティ。データサイズは_capacity * sizeof(T)\n   * @param zeroClear trueなら初期化時に確保した領域を0で埋める\n   */\n  constructor(initialCapacity = 0) {\n    if (initialCapacity < 1) {\n      this._ptr = [];\n      this._capacity = 0;\n      this._size = 0;\n    } else {\n      this._ptr = new Array(initialCapacity);\n      this._capacity = initialCapacity;\n      this._size = 0;\n    }\n  }\n\n  /**\n   * インデックスで指定した要素を返す\n   */\n  public at(index: number): T {\n    return this._ptr[index];\n  }\n\n  /**\n   * 要素をセット\n   * @param index 要素をセットするインデックス\n   * @param value セットする要素\n   */\n  public set(index: number, value: T): void {\n    this._ptr[index] = value;\n  }\n\n  /**\n   * コンテナを取得する\n   */\n  public get(offset = 0): T[] {\n    const ret: T[] = new Array<T>();\n    for (let i = offset; i < this._size; i++) {\n      ret.push(this._ptr[i]);\n    }\n    return ret;\n  }\n\n  /**\n   * pushBack処理、コンテナに新たな要素を追加する\n   * @param value PushBack処理で追加する値\n   */\n  public pushBack(value: T): void {\n    if (this._size >= this._capacity) {\n      this.prepareCapacity(\n        this._capacity == 0 ? csmVector.s_defaultSize : this._capacity * 2\n      );\n    }\n\n    this._ptr[this._size++] = value;\n  }\n\n  /**\n   * コンテナの全要素を解放する\n   */\n  public clear(): void {\n    this._ptr.length = 0;\n    this._size = 0;\n  }\n\n  /**\n   * コンテナの要素数を返す\n   * @return コンテナの要素数\n   */\n  public getSize(): number {\n    return this._size;\n  }\n\n  /**\n   * コンテナの全要素に対して代入処理を行う\n   * @param newSize 代入処理後のサイズ\n   * @param value 要素に代入する値\n   */\n  public assign(newSize: number, value: T): void {\n    const curSize = this._size;\n\n    if (curSize < newSize) {\n      this.prepareCapacity(newSize); // capacity更新\n    }\n\n    for (let i = 0; i < newSize; i++) {\n      this._ptr[i] = value;\n    }\n\n    this._size = newSize;\n  }\n\n  /**\n   * サイズ変更\n   */\n  public resize(newSize: number, value: T = null): void {\n    this.updateSize(newSize, value, true);\n  }\n\n  /**\n   * サイズ変更\n   */\n  public updateSize(\n    newSize: number,\n    value: any = null,\n    callPlacementNew = true\n  ): void {\n    const curSize: number = this._size;\n\n    if (curSize < newSize) {\n      this.prepareCapacity(newSize); // capacity更新\n\n      if (callPlacementNew) {\n        for (let i: number = this._size; i < newSize; i++) {\n          if (typeof value == 'function') {\n            // new\n            this._ptr[i] = JSON.parse(JSON.stringify(new value()));\n          } // プリミティブ型なので値渡し\n          else {\n            this._ptr[i] = value;\n          }\n        }\n      } else {\n        for (let i: number = this._size; i < newSize; i++) {\n          this._ptr[i] = value;\n        }\n      }\n    } else {\n      // newSize <= this._size\n      //---\n      const sub = this._size - newSize;\n      this._ptr.splice(this._size - sub, sub); // 不要なので破棄する\n    }\n    this._size = newSize;\n  }\n\n  /**\n   * コンテナにコンテナ要素を挿入する\n   * @param position 挿入する位置\n   * @param begin 挿入するコンテナの開始位置\n   * @param end 挿入するコンテナの終端位置\n   */\n  public insert(\n    position: iterator<T>,\n    begin: iterator<T>,\n    end: iterator<T>\n  ): void {\n    let dstSi: number = position._index;\n    const srcSi: number = begin._index;\n    const srcEi: number = end._index;\n\n    const addCount: number = srcEi - srcSi;\n\n    this.prepareCapacity(this._size + addCount);\n\n    // 挿入用の既存データをシフトして隙間を作る\n    const addSize = this._size - dstSi;\n    if (addSize > 0) {\n      for (let i = 0; i < addSize; i++) {\n        this._ptr.splice(dstSi + i, 0, null);\n      }\n    }\n\n    for (let i: number = srcSi; i < srcEi; i++, dstSi++) {\n      this._ptr[dstSi] = begin._vector._ptr[i];\n    }\n\n    this._size = this._size + addCount;\n  }\n\n  /**\n   * コンテナからインデックスで指定した要素を削除する\n   * @param index インデックス値\n   * @return true 削除実行\n   * @return false 削除範囲外\n   */\n  public remove(index: number): boolean {\n    if (index < 0 || this._size <= index) {\n      return false; // 削除範囲外\n    }\n\n    this._ptr.splice(index, 1);\n    --this._size;\n\n    return true;\n  }\n\n  /**\n   * コンテナから要素を削除して他の要素をシフトする\n   * @param ite 削除する要素\n   */\n  public erase(ite: iterator<T>): iterator<T> {\n    const index: number = ite._index;\n    if (index < 0 || this._size <= index) {\n      return ite; // 削除範囲外\n    }\n\n    // 削除\n    this._ptr.splice(index, 1);\n    --this._size;\n\n    const ite2: iterator<T> = new iterator<T>(this, index); // 終了\n    return ite2;\n  }\n\n  /**\n   * コンテナのキャパシティを確保する\n   * @param newSize 新たなキャパシティ。引数の値が現在のサイズ未満の場合は何もしない.\n   */\n  public prepareCapacity(newSize: number): void {\n    if (newSize > this._capacity) {\n      if (this._capacity == 0) {\n        this._ptr = new Array(newSize);\n        this._capacity = newSize;\n      } else {\n        this._ptr.length = newSize;\n        this._capacity = newSize;\n      }\n    }\n  }\n\n  /**\n   * コンテナの先頭要素を返す\n   */\n  public begin(): iterator<T> {\n    const ite: iterator<T> =\n      this._size == 0 ? this.end() : new iterator<T>(this, 0);\n    return ite;\n  }\n\n  /**\n   * コンテナの終端要素を返す\n   */\n  public end(): iterator<T> {\n    const ite: iterator<T> = new iterator<T>(this, this._size);\n    return ite;\n  }\n\n  public getOffset(offset: number): csmVector<T> {\n    const newVector = new csmVector<T>();\n    newVector._ptr = this.get(offset);\n    newVector._size = this.get(offset).length;\n    newVector._capacity = this.get(offset).length;\n\n    return newVector;\n  }\n\n  _ptr: T[]; // コンテナの先頭アドレス\n  _size: number; // コンテナの要素数\n  _capacity: number; // コンテナのキャパシティ\n\n  static readonly s_defaultSize = 10; // コンテナ初期化のデフォルトサイズ\n}\n\nexport class iterator<T> {\n  /**\n   * コンストラクタ\n   */\n  public constructor(v?: csmVector<T>, index?: number) {\n    this._vector = v != undefined ? v : null;\n    this._index = index != undefined ? index : 0;\n  }\n\n  /**\n   * 代入\n   */\n  public set(ite: iterator<T>): iterator<T> {\n    this._index = ite._index;\n    this._vector = ite._vector;\n    return this;\n  }\n\n  /**\n   * 前置き++演算\n   */\n  public preIncrement(): iterator<T> {\n    ++this._index;\n    return this;\n  }\n\n  /**\n   * 前置き--演算\n   */\n  public preDecrement(): iterator<T> {\n    --this._index;\n    return this;\n  }\n\n  /**\n   * 後置き++演算子\n   */\n  public increment(): iterator<T> {\n    const iteold = new iterator<T>(this._vector, this._index++); // 古い値を保存\n    return iteold;\n  }\n\n  /**\n   * 後置き--演算子\n   */\n  public decrement(): iterator<T> {\n    const iteold = new iterator<T>(this._vector, this._index--); // 古い値を保存\n    return iteold;\n  }\n\n  /**\n   * ptr\n   */\n  public ptr(): T {\n    return this._vector._ptr[this._index];\n  }\n\n  /**\n   * =演算子のオーバーロード\n   */\n  public substitution(ite: iterator<T>): iterator<T> {\n    this._index = ite._index;\n    this._vector = ite._vector;\n    return this;\n  }\n\n  /**\n   * !=演算子のオーバーロード\n   */\n  public notEqual(ite: iterator<T>): boolean {\n    return this._index != ite._index || this._vector != ite._vector;\n  }\n\n  _index: number; // コンテナのインデックス値\n  _vector: csmVector<T>; // コンテナ\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './csmvector';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const csmVector = $.csmVector;\n  export type csmVector<T> = $.csmVector<T>;\n  export const iterator = $.iterator;\n  export type iterator<T> = $.iterator<T>;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport {\n  CSM_LOG_LEVEL,\n  CSM_LOG_LEVEL_DEBUG,\n  CSM_LOG_LEVEL_ERROR,\n  CSM_LOG_LEVEL_INFO,\n  CSM_LOG_LEVEL_VERBOSE,\n  CSM_LOG_LEVEL_WARNING,\n} from '../cubismframeworkconfig';\nimport { CubismFramework, LogLevel } from '../live2dcubismframework';\n\nexport const CubismLogPrint = (level: LogLevel, fmt: string, args: any[]) => {\n  CubismDebug.print(level, '[CSM]' + fmt, args);\n};\n\nexport const CubismLogPrintIn = (level: LogLevel, fmt: string, args: any[]) => {\n  CubismLogPrint(level, fmt + '\\n', args);\n};\n\nexport const CSM_ASSERT = (expr: any) => {\n  console.assert(expr);\n};\n\nexport let CubismLogVerbose: (fmt: string, ...args: any[]) => void;\nexport let CubismLogDebug: (fmt: string, ...args: any[]) => void;\nexport let CubismLogInfo: (fmt: string, ...args: any[]) => void;\nexport let CubismLogWarning: (fmt: string, ...args: any[]) => void;\nexport let CubismLogError: (fmt: string, ...args: any[]) => void;\n\nif (CSM_LOG_LEVEL <= CSM_LOG_LEVEL_VERBOSE) {\n  CubismLogVerbose = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Verbose, '[V]' + fmt, args);\n  };\n\n  CubismLogDebug = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n  };\n\n  CubismLogInfo = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\n  };\n\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n  };\n\n  CubismLogError = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n  };\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_DEBUG) {\n  CubismLogDebug = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Debug, '[D]' + fmt, args);\n  };\n\n  CubismLogInfo = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\n  };\n\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n  };\n\n  CubismLogError = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n  };\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_INFO) {\n  CubismLogInfo = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\n  };\n\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n  };\n\n  CubismLogError = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n  };\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_WARNING) {\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\n  };\n\n  CubismLogError = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n  };\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_ERROR) {\n  CubismLogError = (fmt: string, ...args: any[]) => {\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\n  };\n}\n\n/**\n * デバッグ用のユーティリティクラス。\n * ログの出力、バイトのダンプなど\n */\nexport class CubismDebug {\n  /**\n   * ログを出力する。第一引数にログレベルを設定する。\n   * CubismFramework.initialize()時にオプションで設定されたログ出力レベルを下回る場合はログに出さない。\n   *\n   * @param logLevel ログレベルの設定\n   * @param format 書式付き文字列\n   * @param args 可変長引数\n   */\n  public static print(logLevel: LogLevel, format: string, args?: any[]): void {\n    // オプションで設定されたログ出力レベルを下回る場合はログに出さない\n    if (logLevel < CubismFramework.getLoggingLevel()) {\n      return;\n    }\n\n    const logPrint: Live2DCubismCore.csmLogFunction =\n      CubismFramework.coreLogFunction;\n\n    if (!logPrint) return;\n\n    const buffer: string = format.replace(/\\{(\\d+)\\}/g, (m, k) => {\n      return args[k];\n    });\n    logPrint(buffer);\n  }\n\n  /**\n   * データから指定した長さだけダンプ出力する。\n   * CubismFramework.initialize()時にオプションで設定されたログ出力レベルを下回る場合はログに出さない。\n   *\n   * @param logLevel ログレベルの設定\n   * @param data ダンプするデータ\n   * @param length ダンプする長さ\n   */\n  public static dumpBytes(\n    logLevel: LogLevel,\n    data: Uint8Array,\n    length: number\n  ): void {\n    for (let i = 0; i < length; i++) {\n      if (i % 16 == 0 && i > 0) this.print(logLevel, '\\n');\n      else if (i % 8 == 0 && i > 0) this.print(logLevel, '  ');\n      this.print(logLevel, '{0} ', [data[i] & 0xff]);\n    }\n\n    this.print(logLevel, '\\n');\n  }\n\n  /**\n   * private コンストラクタ\n   */\n  private constructor() {}\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismdebug';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismDebug = $.CubismDebug;\n  export type CubismDebug = $.CubismDebug;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { strtod } from '../live2dcubismframework';\nimport { csmMap, iterator as csmMap_iterator } from '../type/csmmap';\nimport { csmString } from '../type/csmstring';\nimport { csmVector, iterator as csmVector_iterator } from '../type/csmvector';\nimport { CubismLogInfo } from './cubismdebug';\n\n// StaticInitializeNotForClientCall()で初期化する\nconst CSM_JSON_ERROR_TYPE_MISMATCH = 'Error: type mismatch';\nconst CSM_JSON_ERROR_INDEX_OF_BOUNDS = 'Error: index out of bounds';\n\n/**\n * パースしたJSONエレメントの要素の基底クラス。\n */\nexport abstract class Value {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {}\n\n  /**\n   * 要素を文字列型で返す(csmString型)\n   */\n  public abstract getString(defaultValue?: string, indent?: string): string;\n\n  /**\n   * 要素を文字列型で返す(string)\n   */\n  public getRawString(defaultValue?: string, indent?: string): string {\n    return this.getString(defaultValue, indent);\n  }\n\n  /**\n   * 要素を数値型で返す(number)\n   */\n  public toInt(defaultValue = 0): number {\n    return defaultValue;\n  }\n\n  /**\n   * 要素を数値型で返す(number)\n   */\n  public toFloat(defaultValue = 0): number {\n    return defaultValue;\n  }\n\n  /**\n   * 要素を真偽値で返す(boolean)\n   */\n  public toBoolean(defaultValue = false): boolean {\n    return defaultValue;\n  }\n\n  /**\n   * サイズを返す\n   */\n  public getSize(): number {\n    return 0;\n  }\n\n  /**\n   * 要素を配列で返す(Value[])\n   */\n  public getArray(defaultValue: Value[] = null): Value[] {\n    return defaultValue;\n  }\n\n  /**\n   * 要素をコンテナで返す(array)\n   */\n  public getVector(defaultValue = new csmVector<Value>()): csmVector<Value> {\n    return defaultValue;\n  }\n\n  /**\n   * 要素をマップで返す(csmMap<csmString, Value>)\n   */\n  public getMap(defaultValue?: csmMap<string, Value>): csmMap<string, Value> {\n    return defaultValue;\n  }\n\n  /**\n   * 添字演算子[index]\n   */\n  public getValueByIndex(index: number): Value {\n    return Value.errorValue.setErrorNotForClientCall(\n      CSM_JSON_ERROR_TYPE_MISMATCH\n    );\n  }\n\n  /**\n   * 添字演算子[string | csmString]\n   */\n  public getValueByString(s: string | csmString): Value {\n    return Value.nullValue.setErrorNotForClientCall(\n      CSM_JSON_ERROR_TYPE_MISMATCH\n    );\n  }\n\n  /**\n   * マップのキー一覧をコンテナで返す\n   *\n   * @return マップのキーの一覧\n   */\n  public getKeys(): csmVector<string> {\n    return Value.s_dummyKeys;\n  }\n\n  /**\n   * Valueの種類がエラー値ならtrue\n   */\n  public isError(): boolean {\n    return false;\n  }\n\n  /**\n   * Valueの種類がnullならtrue\n   */\n  public isNull(): boolean {\n    return false;\n  }\n\n  /**\n   * Valueの種類が真偽値ならtrue\n   */\n  public isBool(): boolean {\n    return false;\n  }\n\n  /**\n   * Valueの種類が数値型ならtrue\n   */\n  public isFloat(): boolean {\n    return false;\n  }\n\n  /**\n   * Valueの種類が文字列ならtrue\n   */\n  public isString(): boolean {\n    return false;\n  }\n\n  /**\n   * Valueの種類が配列ならtrue\n   */\n  public isArray(): boolean {\n    return false;\n  }\n\n  /**\n   * Valueの種類がマップ型ならtrue\n   */\n  public isMap(): boolean {\n    return false;\n  }\n\n  /**\n   * 引数の値と等しければtrue\n   */\n  public equals(value: csmString): boolean;\n  public equals(value: string): boolean;\n  public equals(value: number): boolean;\n  public equals(value: boolean): boolean;\n  public equals(value: any): boolean {\n    return false;\n  }\n\n  /**\n   * Valueの値が静的ならtrue、静的なら解放しない\n   */\n  public isStatic(): boolean {\n    return false;\n  }\n\n  /**\n   * Valueにエラー値をセットする\n   */\n  public setErrorNotForClientCall(errorStr: string): Value {\n    return JsonError.errorValue;\n  }\n\n  /**\n   * 初期化用メソッド\n   */\n  public static staticInitializeNotForClientCall(): void {\n    JsonBoolean.trueValue = new JsonBoolean(true);\n    JsonBoolean.falseValue = new JsonBoolean(false);\n    Value.errorValue = new JsonError('ERROR', true);\n    Value.nullValue = new JsonNullvalue();\n    Value.s_dummyKeys = new csmVector<string>();\n  }\n\n  /**\n   * リリース用メソッド\n   */\n  public static staticReleaseNotForClientCall(): void {\n    JsonBoolean.trueValue = null;\n    JsonBoolean.falseValue = null;\n    Value.errorValue = null;\n    Value.nullValue = null;\n    Value.s_dummyKeys = null;\n  }\n\n  protected _stringBuffer: string; // 文字列バッファ\n\n  private static s_dummyKeys: csmVector<string>; // ダミーキー\n\n  public static errorValue: Value; // 一時的な返り値として返すエラー。 CubismFramework::Disposeするまではdeleteしない\n  public static nullValue: Value; // 一時的な返り値として返すNULL。   CubismFramework::Disposeするまではdeleteしない\n\n  [key: string]: any; // 明示的に連想配列をany型で指定\n}\n\n/**\n * Ascii文字のみ対応した最小限の軽量JSONパーサ。\n * 仕様はJSONのサブセットとなる。\n * 設定ファイル(model3.json)などのロード用\n *\n * [未対応項目]\n * ・日本語などの非ASCII文字\n * ・eによる指数表現\n */\nexport class CubismJson {\n  /**\n   * コンストラクタ\n   */\n  public constructor(buffer?: ArrayBuffer, length?: number) {\n    this._error = null;\n    this._lineCount = 0;\n    this._root = null;\n\n    if (buffer != undefined) {\n      this.parseBytes(buffer, length, this._parseCallback);\n    }\n  }\n\n  /**\n   * バイトデータから直接ロードしてパースする\n   *\n   * @param buffer バッファ\n   * @param size バッファサイズ\n   * @return CubismJsonクラスのインスタンス。失敗したらNULL\n   */\n  public static create(buffer: ArrayBuffer, size: number) {\n    const json = new CubismJson();\n    const succeeded: boolean = json.parseBytes(\n      buffer,\n      size,\n      json._parseCallback\n    );\n\n    if (!succeeded) {\n      CubismJson.delete(json);\n      return null;\n    } else {\n      return json;\n    }\n  }\n\n  /**\n   * パースしたJSONオブジェクトの解放処理\n   *\n   * @param instance CubismJsonクラスのインスタンス\n   */\n  public static delete(instance: CubismJson) {\n    instance = null;\n  }\n\n  /**\n   * パースしたJSONのルート要素を返す\n   */\n  public getRoot(): Value {\n    return this._root;\n  }\n\n  /**\n   *  UnicodeのバイナリをStringに変換\n   *\n   * @param buffer 変換するバイナリデータ\n   * @return 変換後の文字列\n   */\n  public static arrayBufferToString(buffer: ArrayBuffer): string {\n    const uint8Array: Uint8Array = new Uint8Array(buffer);\n    let str = '';\n\n    for (let i = 0, len: number = uint8Array.length; i < len; ++i) {\n      str += '%' + this.pad(uint8Array[i].toString(16));\n    }\n\n    str = decodeURIComponent(str);\n    return str;\n  }\n\n  /**\n   * エンコード、パディング\n   */\n  private static pad(n: string): string {\n    return n.length < 2 ? '0' + n : n;\n  }\n\n  /**\n   * JSONのパースを実行する\n   * @param buffer    パース対象のデータバイト\n   * @param size      データバイトのサイズ\n   * return true : 成功\n   * return false: 失敗\n   */\n  public parseBytes(\n    buffer: ArrayBuffer,\n    size: number,\n    parseCallback?: parseJsonObject\n  ): boolean {\n    const endPos: number[] = new Array<number>(1); // 参照渡しにするため配列\n    const decodeBuffer: string = CubismJson.arrayBufferToString(buffer);\n\n    if (parseCallback == undefined) {\n      this._root = this.parseValue(decodeBuffer, size, 0, endPos);\n    } else {\n      // TypeScript標準のJSONパーサを使う\n      this._root = parseCallback(JSON.parse(decodeBuffer), new JsonMap());\n    }\n\n    if (this._error) {\n      let strbuf = '\\0';\n      strbuf = 'Json parse error : @line ' + (this._lineCount + 1) + '\\n';\n      this._root = new JsonString(strbuf);\n\n      CubismLogInfo('{0}', this._root.getRawString());\n      return false;\n    } else if (this._root == null) {\n      this._root = new JsonError(new csmString(this._error), false); // rootは解放されるのでエラーオブジェクトを別途作成する\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * パース時のエラー値を返す\n   */\n  public getParseError(): string {\n    return this._error;\n  }\n\n  /**\n   * ルート要素の次の要素がファイルの終端だったらtrueを返す\n   */\n  public checkEndOfFile(): boolean {\n    return this._root.getArray()[1].equals('EOF');\n  }\n\n  /**\n   * JSONエレメントからValue(float,String,Value*,Array,null,true,false)をパースする\n   * エレメントの書式に応じて内部でParseString(), ParseObject(), ParseArray()を呼ぶ\n   *\n   * @param   buffer      JSONエレメントのバッファ\n   * @param   length      パースする長さ\n   * @param   begin       パースを開始する位置\n   * @param   outEndPos   パース終了時の位置\n   * @return      パースから取得したValueオブジェクト\n   */\n  protected parseValue(\n    buffer: string,\n    length: number,\n    begin: number,\n    outEndPos: number[]\n  ) {\n    if (this._error) return null;\n\n    let o: Value = null;\n    let i: number = begin;\n    let f: number;\n\n    for (; i < length; i++) {\n      const c: string = buffer[i];\n      switch (c) {\n        case '-':\n        case '.':\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case '4':\n        case '5':\n        case '6':\n        case '7':\n        case '8':\n        case '9': {\n          const afterString: string[] = new Array(1); // 参照渡しにするため\n          f = strtod(buffer.slice(i), afterString);\n          outEndPos[0] = buffer.indexOf(afterString[0]);\n          return new JsonFloat(f);\n        }\n        case '\"':\n          return new JsonString(\n            this.parseString(buffer, length, i + 1, outEndPos)\n          ); // \\\"の次の文字から\n        case '[':\n          o = this.parseArray(buffer, length, i + 1, outEndPos);\n          return o;\n        case '{':\n          o = this.parseObject(buffer, length, i + 1, outEndPos);\n          return o;\n        case 'n': // null以外にない\n          if (i + 3 < length) {\n            o = new JsonNullvalue(); // 解放できるようにする\n            outEndPos[0] = i + 4;\n          } else {\n            this._error = 'parse null';\n          }\n          return o;\n        case 't': // true以外にない\n          if (i + 3 < length) {\n            o = JsonBoolean.trueValue;\n            outEndPos[0] = i + 4;\n          } else {\n            this._error = 'parse true';\n          }\n          return o;\n        case 'f': // false以外にない\n          if (i + 4 < length) {\n            o = JsonBoolean.falseValue;\n            outEndPos[0] = i + 5;\n          } else {\n            this._error = \"illegal ',' position\";\n          }\n          return o;\n        case ',': // Array separator\n          this._error = \"illegal ',' position\";\n          return null;\n        case ']': // 不正な｝だがスキップする。配列の最後に不要な , があると思われる\n          outEndPos[0] = i; // 同じ文字を再処理\n          return null;\n        case '\\n':\n          this._lineCount++;\n        case ' ':\n        case '\\t':\n        case '\\r':\n        default:\n          // スキップ\n          break;\n      }\n    }\n\n    this._error = 'illegal end of value';\n    return null;\n  }\n\n  /**\n   * 次の「\"」までの文字列をパースする。\n   *\n   * @param   string  ->  パース対象の文字列\n   * @param   length  ->  パースする長さ\n   * @param   begin   ->  パースを開始する位置\n   * @param  outEndPos   ->  パース終了時の位置\n   * @return      パースした文F字列要素\n   */\n  protected parseString(\n    string: string,\n    length: number,\n    begin: number,\n    outEndPos: number[]\n  ): string {\n    if (this._error) return null;\n\n    let i = begin;\n    let c: string, c2: string;\n    const ret: csmString = new csmString('');\n    let bufStart: number = begin; // sbufに登録されていない文字の開始位置\n\n    for (; i < length; i++) {\n      c = string[i];\n\n      switch (c) {\n        case '\"': {\n          // 終端の”、エスケープ文字は別に処理されるのでここに来ない\n          outEndPos[0] = i + 1; // ”の次の文字\n          ret.append(string.slice(bufStart), i - bufStart); // 前の文字までを登録する\n          return ret.s;\n        }\n        case '//': {\n          // エスケープの場合\n          i++; // ２文字をセットで扱う\n\n          if (i - 1 > bufStart) {\n            ret.append(string.slice(bufStart), i - bufStart); // 前の文字までを登録する\n          }\n          bufStart = i + 1; // エスケープ（２文字)の次の文字から\n\n          if (i < length) {\n            c2 = string[i];\n\n            switch (c2) {\n              case '\\\\':\n                ret.expansion(1, '\\\\');\n                break;\n              case '\"':\n                ret.expansion(1, '\"');\n                break;\n              case '/':\n                ret.expansion(1, '/');\n                break;\n              case 'b':\n                ret.expansion(1, '\\b');\n                break;\n              case 'f':\n                ret.expansion(1, '\\f');\n                break;\n              case 'n':\n                ret.expansion(1, '\\n');\n                break;\n              case 'r':\n                ret.expansion(1, '\\r');\n                break;\n              case 't':\n                ret.expansion(1, '\\t');\n                break;\n              case 'u':\n                this._error = 'parse string/unicord escape not supported';\n                break;\n              default:\n                break;\n            }\n          } else {\n            this._error = 'parse string/escape error';\n          }\n        }\n        default: {\n          break;\n        }\n      }\n    }\n\n    this._error = 'parse string/illegal end';\n    return null;\n  }\n\n  /**\n   * JSONのオブジェクトエレメントをパースしてValueオブジェクトを返す\n   *\n   * @param buffer    JSONエレメントのバッファ\n   * @param length    パースする長さ\n   * @param begin     パースを開始する位置\n   * @param outEndPos パース終了時の位置\n   * @return パースから取得したValueオブジェクト\n   */\n  protected parseObject(\n    buffer: string,\n    length: number,\n    begin: number,\n    outEndPos: number[]\n  ): Value {\n    if (this._error) return null;\n    const ret: JsonMap = new JsonMap();\n\n    // Key: Value\n    let key = '';\n    let i: number = begin;\n    let c = '';\n    const localRetEndPos2: number[] = Array(1);\n    let ok = false;\n\n    // , が続く限りループ\n    for (; i < length; i++) {\n      FOR_LOOP: for (; i < length; i++) {\n        c = buffer[i];\n\n        switch (c) {\n          case '\"':\n            key = this.parseString(buffer, length, i + 1, localRetEndPos2);\n            if (this._error) {\n              return null;\n            }\n\n            i = localRetEndPos2[0];\n            ok = true;\n            break FOR_LOOP; //-- loopから出る\n          case '}': // 閉じカッコ\n            outEndPos[0] = i + 1;\n            return ret; // 空\n          case ':':\n            this._error = \"illegal ':' position\";\n            break;\n          case '\\n':\n            this._lineCount++;\n          default:\n            break; // スキップする文字\n        }\n      }\n      if (!ok) {\n        this._error = 'key not found';\n        return null;\n      }\n\n      ok = false;\n\n      // : をチェック\n      FOR_LOOP2: for (; i < length; i++) {\n        c = buffer[i];\n\n        switch (c) {\n          case ':':\n            ok = true;\n            i++;\n            break FOR_LOOP2;\n          case '}':\n            this._error = \"illegal '}' position\";\n            break;\n          case '\\n':\n            this._lineCount++;\n          // case ' ': case '\\t' : case '\\r':\n          default:\n            break; // スキップする文字\n        }\n      }\n\n      if (!ok) {\n        this._error = \"':' not found\";\n        return null;\n      }\n\n      // 値をチェック\n      const value: Value = this.parseValue(buffer, length, i, localRetEndPos2);\n      if (this._error) {\n        return null;\n      }\n\n      i = localRetEndPos2[0];\n\n      // ret.put(key, value);\n      ret.put(key, value);\n\n      FOR_LOOP3: for (; i < length; i++) {\n        c = buffer[i];\n\n        switch (c) {\n          case ',':\n            break FOR_LOOP3;\n          case '}':\n            outEndPos[0] = i + 1;\n            return ret; // 正常終了\n          case '\\n':\n            this._lineCount++;\n          default:\n            break; // スキップ\n        }\n      }\n    }\n\n    this._error = 'illegal end of perseObject';\n    return null;\n  }\n\n  /**\n   * 次の「\"」までの文字列をパースする。\n   * @param buffer    JSONエレメントのバッファ\n   * @param length    パースする長さ\n   * @param begin     パースを開始する位置\n   * @param outEndPos パース終了時の位置\n   * @return パースから取得したValueオブジェクト\n   */\n  protected parseArray(\n    buffer: string,\n    length: number,\n    begin: number,\n    outEndPos: number[]\n  ): Value {\n    if (this._error) return null;\n    let ret: JsonArray = new JsonArray();\n\n    // key : value\n    let i: number = begin;\n    let c: string;\n    const localRetEndpos2: number[] = new Array(1);\n\n    // , が続く限りループ\n    for (; i < length; i++) {\n      // : をチェック\n      const value: Value = this.parseValue(buffer, length, i, localRetEndpos2);\n\n      if (this._error) {\n        return null;\n      }\n      i = localRetEndpos2[0];\n\n      if (value) {\n        ret.add(value);\n      }\n\n      // FOR_LOOP3:\n      // boolean breakflag = false;\n      FOR_LOOP: for (; i < length; i++) {\n        c = buffer[i];\n\n        switch (c) {\n          case ',':\n            // breakflag = true;\n            // break; // 次のKEY, VAlUEへ\n            break FOR_LOOP;\n          case ']':\n            outEndPos[0] = i + 1;\n            return ret; // 終了\n          case '\\n':\n            ++this._lineCount;\n          //case ' ': case '\\t': case '\\r':\n          default:\n            break; // スキップ\n        }\n      }\n    }\n\n    ret = void 0;\n    this._error = 'illegal end of parseObject';\n    return null;\n  }\n\n  _parseCallback: parseJsonObject = CubismJsonExtension.parseJsonObject; // パース時に使う処理のコールバック関数\n\n  _error: string; // パース時のエラー\n  _lineCount: number; // エラー報告に用いる行数カウント\n  _root: Value; // パースされたルート要素\n}\n\ninterface parseJsonObject {\n  (obj: Value, map: JsonMap): JsonMap;\n}\n\n/**\n * パースしたJSONの要素をfloat値として扱う\n */\nexport class JsonFloat extends Value {\n  /**\n   * コンストラクタ\n   */\n  constructor(v: number) {\n    super();\n\n    this._value = v;\n  }\n\n  /**\n   * Valueの種類が数値型ならtrue\n   */\n  public isFloat(): boolean {\n    return true;\n  }\n\n  /**\n   * 要素を文字列で返す(csmString型)\n   */\n  public getString(defaultValue: string, indent: string): string {\n    const strbuf = '\\0';\n    this._value = parseFloat(strbuf);\n    this._stringBuffer = strbuf;\n\n    return this._stringBuffer;\n  }\n\n  /**\n   * 要素を数値型で返す(number)\n   */\n  public toInt(defaultValue = 0): number {\n    return parseInt(this._value.toString());\n  }\n\n  /**\n   * 要素を数値型で返す(number)\n   */\n  public toFloat(defaultValue = 0.0): number {\n    return this._value;\n  }\n\n  /**\n   * 引数の値と等しければtrue\n   */\n  public equals(value: csmString): boolean;\n  public equals(value: string): boolean;\n  public equals(value: number): boolean;\n  public equals(value: boolean): boolean;\n  public equals(value: any): boolean {\n    if ('number' === typeof value) {\n      // int\n      if (Math.round(value)) {\n        return false;\n      }\n      // float\n      else {\n        return value == this._value;\n      }\n    }\n    return false;\n  }\n\n  private _value: number; // JSON要素の値\n}\n\n/**\n * パースしたJSONの要素を真偽値として扱う\n */\nexport class JsonBoolean extends Value {\n  /**\n   * Valueの種類が真偽値ならtrue\n   */\n  public isBool(): boolean {\n    return true;\n  }\n\n  /**\n   * 要素を真偽値で返す(boolean)\n   */\n  public toBoolean(defaultValue = false): boolean {\n    return this._boolValue;\n  }\n\n  /**\n   * 要素を文字列で返す(csmString型)\n   */\n  public getString(defaultValue: string, indent: string): string {\n    this._stringBuffer = this._boolValue ? 'true' : 'false';\n\n    return this._stringBuffer;\n  }\n\n  /**\n   * 引数の値と等しければtrue\n   */\n  public equals(value: csmString): boolean;\n  public equals(value: string): boolean;\n  public equals(value: number): boolean;\n  public equals(value: boolean): boolean;\n  public equals(value: any): boolean {\n    if ('boolean' === typeof value) {\n      return value == this._boolValue;\n    }\n    return false;\n  }\n\n  /**\n   * Valueの値が静的ならtrue, 静的なら解放しない\n   */\n  public isStatic(): boolean {\n    return true;\n  }\n\n  /**\n   * 引数付きコンストラクタ\n   */\n  public constructor(v: boolean) {\n    super();\n\n    this._boolValue = v;\n  }\n\n  static trueValue: JsonBoolean; // true\n  static falseValue: JsonBoolean; // false\n\n  private _boolValue: boolean; // JSON要素の値\n}\n\n/**\n * パースしたJSONの要素を文字列として扱う\n */\nexport class JsonString extends Value {\n  /**\n   * 引数付きコンストラクタ\n   */\n  public constructor(s: string);\n  public constructor(s: csmString);\n  public constructor(s: any) {\n    super();\n\n    if ('string' === typeof s) {\n      this._stringBuffer = s;\n    }\n\n    if (s instanceof csmString) {\n      this._stringBuffer = s.s;\n    }\n  }\n\n  /**\n   * Valueの種類が文字列ならtrue\n   */\n  public isString(): boolean {\n    return true;\n  }\n\n  /**\n   * 要素を文字列で返す(csmString型)\n   */\n  public getString(defaultValue: string, indent: string): string {\n    return this._stringBuffer;\n  }\n\n  /**\n   * 引数の値と等しければtrue\n   */\n  public equals(value: csmString): boolean;\n  public equals(value: string): boolean;\n  public equals(value: number): boolean;\n  public equals(value: boolean): boolean;\n  public equals(value: any): boolean {\n    if ('string' === typeof value) {\n      return this._stringBuffer == value;\n    }\n\n    if (value instanceof csmString) {\n      return this._stringBuffer == value.s;\n    }\n\n    return false;\n  }\n}\n\n/**\n * JSONパース時のエラー結果。文字列型のようにふるまう\n */\nexport class JsonError extends JsonString {\n  /**\n   * Valueの値が静的ならtrue、静的なら解放しない\n   */\n  public isStatic(): boolean {\n    return this._isStatic;\n  }\n\n  /**\n   * エラー情報をセットする\n   */\n  public setErrorNotForClientCall(s: string): Value {\n    this._stringBuffer = s;\n    return this;\n  }\n\n  /**\n   * 引数付きコンストラクタ\n   */\n  public constructor(s: csmString | string, isStatic: boolean) {\n    if ('string' === typeof s) {\n      super(s);\n    } else {\n      super(s);\n    }\n    this._isStatic = isStatic;\n  }\n\n  /**\n   * Valueの種類がエラー値ならtrue\n   */\n  public isError(): boolean {\n    return true;\n  }\n\n  protected _isStatic: boolean; // 静的なValueかどうか\n}\n\n/**\n * パースしたJSONの要素をNULL値として持つ\n */\nexport class JsonNullvalue extends Value {\n  /**\n   * Valueの種類がNULL値ならtrue\n   */\n  public isNull(): boolean {\n    return true;\n  }\n\n  /**\n   * 要素を文字列で返す(csmString型)\n   */\n  public getString(defaultValue: string, indent: string): string {\n    return this._stringBuffer;\n  }\n\n  /**\n   * Valueの値が静的ならtrue, 静的なら解放しない\n   */\n  public isStatic(): boolean {\n    return true;\n  }\n\n  /**\n   * Valueにエラー値をセットする\n   */\n  public setErrorNotForClientCall(s: string): Value {\n    this._stringBuffer = s;\n    return JsonError.nullValue;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n\n    this._stringBuffer = 'NullValue';\n  }\n}\n\n/**\n * パースしたJSONの要素を配列として持つ\n */\nexport class JsonArray extends Value {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n    this._array = new csmVector<Value>();\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    for (\n      let ite: csmVector_iterator<Value> = this._array.begin();\n      ite.notEqual(this._array.end());\n      ite.preIncrement()\n    ) {\n      let v: Value = ite.ptr();\n\n      if (v && !v.isStatic()) {\n        v = void 0;\n        v = null;\n      }\n    }\n  }\n\n  /**\n   * Valueの種類が配列ならtrue\n   */\n  public isArray(): boolean {\n    return true;\n  }\n\n  /**\n   * 添字演算子[index]\n   */\n  public getValueByIndex(index: number): Value {\n    if (index < 0 || this._array.getSize() <= index) {\n      return Value.errorValue.setErrorNotForClientCall(\n        CSM_JSON_ERROR_INDEX_OF_BOUNDS\n      );\n    }\n\n    const v: Value = this._array.at(index);\n\n    if (v == null) {\n      return Value.nullValue;\n    }\n\n    return v;\n  }\n\n  /**\n   * 添字演算子[string | csmString]\n   */\n  public getValueByString(s: string | csmString): Value {\n    return Value.errorValue.setErrorNotForClientCall(\n      CSM_JSON_ERROR_TYPE_MISMATCH\n    );\n  }\n\n  /**\n   * 要素を文字列で返す(csmString型)\n   */\n  public getString(defaultValue: string, indent: string): string {\n    const stringBuffer: string = indent + '[\\n';\n\n    for (\n      let ite: csmVector_iterator<Value> = this._array.begin();\n      ite.notEqual(this._array.end());\n      ite.increment()\n    ) {\n      const v: Value = ite.ptr();\n      this._stringBuffer += indent + '' + v.getString(indent + ' ') + '\\n';\n    }\n\n    this._stringBuffer = stringBuffer + indent + ']\\n';\n\n    return this._stringBuffer;\n  }\n\n  /**\n   * 配列要素を追加する\n   * @param v 追加する要素\n   */\n  public add(v: Value): void {\n    this._array.pushBack(v);\n  }\n\n  /**\n   * 要素をコンテナで返す(csmVector<Value>)\n   */\n  public getVector(defaultValue: csmVector<Value> = null): csmVector<Value> {\n    return this._array;\n  }\n\n  /**\n   * 要素の数を返す\n   */\n  public getSize(): number {\n    return this._array.getSize();\n  }\n\n  private _array: csmVector<Value>; // JSON要素の値\n}\n\n/**\n * パースしたJSONの要素をマップとして持つ\n */\nexport class JsonMap extends Value {\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n    this._map = new csmMap<string, Value>();\n  }\n\n  /**\n   * デストラクタ相当の処理\n   */\n  public release(): void {\n    const ite: csmMap_iterator<string, Value> = this._map.begin();\n\n    while (ite.notEqual(this._map.end())) {\n      let v: Value = ite.ptr().second;\n\n      if (v && !v.isStatic()) {\n        v = void 0;\n        v = null;\n      }\n\n      ite.preIncrement();\n    }\n  }\n\n  /**\n   * Valueの値がMap型ならtrue\n   */\n  public isMap(): boolean {\n    return true;\n  }\n\n  /**\n   * 添字演算子[string | csmString]\n   */\n  public getValueByString(s: string | csmString): Value {\n    if (s instanceof csmString) {\n      const ret: Value = this._map.getValue(s.s);\n      if (ret == null) {\n        return Value.nullValue;\n      }\n      return ret;\n    }\n\n    for (\n      let iter: csmMap_iterator<string, Value> = this._map.begin();\n      iter.notEqual(this._map.end());\n      iter.preIncrement()\n    ) {\n      if (iter.ptr().first == s) {\n        if (iter.ptr().second == null) {\n          return Value.nullValue;\n        }\n        return iter.ptr().second;\n      }\n    }\n\n    return Value.nullValue;\n  }\n\n  /**\n   * 添字演算子[index]\n   */\n  public getValueByIndex(index: number): Value {\n    return Value.errorValue.setErrorNotForClientCall(\n      CSM_JSON_ERROR_TYPE_MISMATCH\n    );\n  }\n\n  /**\n   * 要素を文字列で返す(csmString型)\n   */\n  public getString(defaultValue: string, indent: string) {\n    this._stringBuffer = indent + '{\\n';\n\n    const ite: csmMap_iterator<string, Value> = this._map.begin();\n    while (ite.notEqual(this._map.end())) {\n      const key = ite.ptr().first;\n      const v: Value = ite.ptr().second;\n\n      this._stringBuffer +=\n        indent + ' ' + key + ' : ' + v.getString(indent + '   ') + ' \\n';\n      ite.preIncrement();\n    }\n\n    this._stringBuffer += indent + '}\\n';\n\n    return this._stringBuffer;\n  }\n\n  /**\n   * 要素をMap型で返す\n   */\n  public getMap(defaultValue?: csmMap<string, Value>): csmMap<string, Value> {\n    return this._map;\n  }\n\n  /**\n   * Mapに要素を追加する\n   */\n  public put(key: string, v: Value): void {\n    this._map.setValue(key, v);\n  }\n\n  /**\n   * Mapからキーのリストを取得する\n   */\n  public getKeys(): csmVector<string> {\n    if (!this._keys) {\n      this._keys = new csmVector<string>();\n\n      const ite: csmMap_iterator<string, Value> = this._map.begin();\n\n      while (ite.notEqual(this._map.end())) {\n        const key: string = ite.ptr().first;\n        this._keys.pushBack(key);\n        ite.preIncrement();\n      }\n    }\n    return this._keys;\n  }\n\n  /**\n   * Mapの要素数を取得する\n   */\n  public getSize(): number {\n    return this._keys.getSize();\n  }\n\n  private _map: csmMap<string, Value>; // JSON要素の値\n  private _keys: csmVector<string>; // JSON要素の値\n}\n\n// Namespace definition for compatibility.\nimport * as $ from './cubismjson';\nimport { CubismJsonExtension } from './cubismjsonextension';\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Live2DCubismFramework {\n  export const CubismJson = $.CubismJson;\n  export type CubismJson = $.CubismJson;\n  export const JsonArray = $.JsonArray;\n  export type JsonArray = $.JsonArray;\n  export const JsonBoolean = $.JsonBoolean;\n  export type JsonBoolean = $.JsonBoolean;\n  export const JsonError = $.JsonError;\n  export type JsonError = $.JsonError;\n  export const JsonFloat = $.JsonFloat;\n  export type JsonFloat = $.JsonFloat;\n  export const JsonMap = $.JsonMap;\n  export type JsonMap = $.JsonMap;\n  export const JsonNullvalue = $.JsonNullvalue;\n  export type JsonNullvalue = $.JsonNullvalue;\n  export const JsonString = $.JsonString;\n  export type JsonString = $.JsonString;\n  export const Value = $.Value;\n  export type Value = $.Value;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport {\n  JsonArray,\n  JsonBoolean,\n  JsonFloat,\n  JsonMap,\n  JsonNullvalue,\n  JsonString,\n  Value,\n} from './cubismjson';\n\n/**\n * CubismJsonで実装されているJsonパーサを使用せず、\n * TypeScript標準のJsonパーサなどを使用し出力された結果を\n * Cubism SDKで定義されているJSONエレメントの要素に\n * 置き換える処理をするクラス。\n */\nexport class CubismJsonExtension {\n  static parseJsonObject(obj: Value, map: JsonMap) {\n    Object.keys(obj).forEach((key) => {\n      if (typeof obj[key] == 'boolean') {\n        const convValue = Boolean(obj[key]);\n        map.put(key, new JsonBoolean(convValue));\n      } else if (typeof obj[key] == 'string') {\n        const convValue = String(obj[key]);\n        map.put(key, new JsonString(convValue));\n      } else if (typeof obj[key] == 'number') {\n        const convValue = Number(obj[key]);\n        map.put(key, new JsonFloat(convValue));\n      } else if (obj[key] instanceof Array) {\n        map.put(key, CubismJsonExtension.parseJsonArray(obj[key]));\n      } else if (obj[key] instanceof Object) {\n        map.put(\n          key,\n          CubismJsonExtension.parseJsonObject(obj[key], new JsonMap())\n        );\n      } else if (obj[key] == null) {\n        map.put(key, new JsonNullvalue());\n      } else {\n        // どれにも当てはまらない場合でも処理する\n        map.put(key, obj[key]);\n      }\n    });\n    return map;\n  }\n\n  protected static parseJsonArray(obj: Value) {\n    const arr = new JsonArray();\n    Object.keys(obj).forEach((key) => {\n      const convKey = Number(key);\n      if (typeof convKey == 'number') {\n        if (typeof obj[key] == 'boolean') {\n          const convValue = Boolean(obj[key]);\n          arr.add(new JsonBoolean(convValue));\n        } else if (typeof obj[key] == 'string') {\n          const convValue = String(obj[key]);\n          arr.add(new JsonString(convValue));\n        } else if (typeof obj[key] == 'number') {\n          const convValue = Number(obj[key]);\n          arr.add(new JsonFloat(convValue));\n        } else if (obj[key] instanceof Array) {\n          arr.add(this.parseJsonArray(obj[key]));\n        } else if (obj[key] instanceof Object) {\n          arr.add(this.parseJsonObject(obj[key], new JsonMap()));\n        } else if (obj[key] == null) {\n          arr.add(new JsonNullvalue());\n        } else {\n          // どれにも当てはまらない場合でも処理する\n          arr.add(obj[key]);\n        }\n      } else if (obj[key] instanceof Array) {\n        arr.add(this.parseJsonArray(obj[key]));\n      } else if (obj[key] instanceof Object) {\n        arr.add(this.parseJsonObject(obj[key], new JsonMap()));\n      } else if (obj[key] == null) {\n        arr.add(new JsonNullvalue());\n      } else {\n        const convValue = Array(obj[key]);\n        // 配列ともObjectとも判定できなかった場合でも処理する\n        for (let i = 0; i < convValue.length; i++) {\n          arr.add(convValue[i]);\n        }\n      }\n    });\n    return arr;\n  }\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { LogLevel } from '@framework/live2dcubismframework';\n\n/**\n * Sample Appで使用する定数\n */\n\n// Canvas width and height pixel values, or dynamic screen size ('auto').\nexport const CanvasSize: { width: number; height: number } | 'auto' = 'auto';\n\n// 画面\nexport const ViewScale = 1.0;\nexport const ViewMaxScale = 2.0;\nexport const ViewMinScale = 0.8;\n\nexport const ViewLogicalLeft = -1.0;\nexport const ViewLogicalRight = 1.0;\nexport const ViewLogicalBottom = -1.0;\nexport const ViewLogicalTop = 1.0;\n\nexport const ViewLogicalMaxLeft = -2.0;\nexport const ViewLogicalMaxRight = 2.0;\nexport const ViewLogicalMaxBottom = -2.0;\nexport const ViewLogicalMaxTop = 2.0;\n\n// 相対パス\nexport const ResourcesPath = '../../Resources/';\n\n// モデルの後ろにある背景の画像ファイル\nexport const BackImageName = 'back_class_normal.png'; \n\n// 歯車\nexport const GearImageName = 'icon_gear.png';\n\n// 終了ボタン\nexport const PowerImageName = 'CloseNormal.png';\n\n// モデル定義---------------------------------------------\n// モデルを配置したディレクトリ名の配列\n// ディレクトリ名とmodel3.jsonの名前を一致させておくこと\nexport const ModelDir: string[] = [\n  'Mao'\n];\nexport const ModelDirSize: number = ModelDir.length;\n\n// 外部定義ファイル（json）と合わせる\nexport const MotionGroupIdle = 'Idle'; // アイドリング\nexport const MotionGroupTapBody = 'TapBody'; // 体をタップしたとき\n\n// 外部定義ファイル（json）と合わせる\nexport const HitAreaNameHead = 'Head';\nexport const HitAreaNameBody = 'Body';\n\n// モーションの優先度定数\nexport const PriorityNone = 0;\nexport const PriorityIdle = 1;\nexport const PriorityNormal = 2;\nexport const PriorityForce = 3;\n\n// MOC3の一貫性検証オプション\nexport const MOCConsistencyValidationEnable = true;\n\n// デバッグ用ログの表示オプション\nexport const DebugLogEnable = true;\nexport const DebugTouchLogEnable = false;\n\n// Frameworkから出力するログのレベル設定\nexport const CubismLoggingLevel: LogLevel = LogLevel.LogLevel_Verbose;\n\n// デフォルトのレンダーターゲットサイズ\nexport const RenderTargetWidth = 1900;\nexport const RenderTargetHeight = 1000;\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismFramework, Option } from '@framework/live2dcubismframework';\n\nimport * as LAppDefine from './lappdefine';\nimport { LAppLive2DManager } from './lapplive2dmanager';\nimport { LAppPal } from './lapppal';\nimport { LAppTextureManager } from './lapptexturemanager';\nimport { LAppView } from './lappview';\n\nexport let canvas: HTMLCanvasElement = null;\nexport let s_instance: LAppDelegate = null;\nexport let gl: WebGLRenderingContext = null;\nexport let frameBuffer: WebGLFramebuffer = null;\n\n/**\n * アプリケーションクラス。\n * Cubism SDKの管理を行う。\n */\nexport class LAppDelegate {\n  /**\n   * クラスのインスタンス（シングルトン）を返す。\n   * インスタンスが生成されていない場合は内部でインスタンスを生成する。\n   *\n   * @return クラスのインスタンス\n   */\n  public static getInstance(): LAppDelegate {\n    if (s_instance == null) {\n      s_instance = new LAppDelegate();\n    }\n\n    return s_instance;\n  }\n\n  /**\n   * クラスのインスタンス（シングルトン）を解放する。\n   */\n  public static releaseInstance(): void {\n    if (s_instance != null) {\n      s_instance.release();\n    }\n\n    s_instance = null;\n  }\n\n  /**\n   * APPに必要な物を初期化する。\n   */\n  public initialize(): boolean {\n    // キャンバスの作成\n    canvas = document.createElement('canvas');\n    if (LAppDefine.CanvasSize === 'auto') {\n      this._resizeCanvas();\n    } else {\n      canvas.width = LAppDefine.CanvasSize.width;\n      canvas.height = LAppDefine.CanvasSize.height;\n    }\n\n    // glコンテキストを初期化\n    // @ts-ignore\n    gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n\n    if (!gl) {\n      alert('Cannot initialize WebGL. This browser does not support.');\n      gl = null;\n\n      document.body.innerHTML =\n        'This browser does not support the <code>&lt;canvas&gt;</code> element.';\n\n      // gl初期化失敗\n      return false;\n    }\n\n    // キャンバスを DOM に追加\n    document.body.appendChild(canvas);\n\n    if (!frameBuffer) {\n      frameBuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n    }\n\n    // 透過設定\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    const supportTouch: boolean = 'ontouchend' in canvas;\n\n    if (supportTouch) {\n      // タッチ関連コールバック関数登録\n      canvas.ontouchstart = onTouchBegan;\n      canvas.ontouchmove = onTouchMoved;\n      canvas.ontouchend = onTouchEnded;\n      canvas.ontouchcancel = onTouchCancel;\n    } else {\n      // マウス関連コールバック関数登録\n      canvas.onmousedown = onClickBegan;\n      canvas.onmousemove = onMouseMoved;\n      canvas.onmouseup = onClickEnded;\n    }\n\n    // AppViewの初期化\n    this._view.initialize();\n\n    // Cubism SDKの初期化\n    this.initializeCubism();\n\n    return true;\n  }\n\n  /**\n   * Resize canvas and re-initialize view.\n   */\n  public onResize(): void {\n    this._resizeCanvas();\n    this._view.initialize();\n    this._view.initializeSprite();\n\n    // キャンバスサイズを渡す\n    const viewport: number[] = [0, 0, canvas.width, canvas.height];\n\n    gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n  }\n\n  /**\n   * 解放する。\n   */\n  public release(): void {\n    this._textureManager.release();\n    this._textureManager = null;\n\n    this._view.release();\n    this._view = null;\n\n    // リソースを解放\n    LAppLive2DManager.releaseInstance();\n\n    // Cubism SDKの解放\n    CubismFramework.dispose();\n  }\n\n  /**\n   * 実行処理。\n   */\n  public run(): void {\n    // メインループ\n    const loop = (): void => {\n      // インスタンスの有無の確認\n      if (s_instance == null) {\n        return;\n      }\n\n      // 時間更新\n      LAppPal.updateTime();\n\n      // 画面の初期化\n      gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\n      // 深度テストを有効化\n      gl.enable(gl.DEPTH_TEST);\n\n      // 近くにある物体は、遠くにある物体を覆い隠す\n      gl.depthFunc(gl.LEQUAL);\n\n      // カラーバッファや深度バッファをクリアする\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n      gl.clearDepth(1.0);\n\n      // 透過設定\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n      // 描画更新\n      this._view.render();\n\n      // ループのために再帰呼び出し\n      requestAnimationFrame(loop);\n    };\n    loop();\n  }\n\n  /**\n   * シェーダーを登録する。\n   */\n  public createShader(): WebGLProgram {\n    // バーテックスシェーダーのコンパイル\n    const vertexShaderId = gl.createShader(gl.VERTEX_SHADER);\n\n    if (vertexShaderId == null) {\n      LAppPal.printMessage('failed to create vertexShader');\n      return null;\n    }\n\n    const vertexShader: string =\n      'precision mediump float;' +\n      'attribute vec3 position;' +\n      'attribute vec2 uv;' +\n      'varying vec2 vuv;' +\n      'void main(void)' +\n      '{' +\n      '   gl_Position = vec4(position, 1.0);' +\n      '   vuv = uv;' +\n      '}';\n\n    gl.shaderSource(vertexShaderId, vertexShader);\n    gl.compileShader(vertexShaderId);\n\n    // フラグメントシェーダのコンパイル\n    const fragmentShaderId = gl.createShader(gl.FRAGMENT_SHADER);\n\n    if (fragmentShaderId == null) {\n      LAppPal.printMessage('failed to create fragmentShader');\n      return null;\n    }\n\n    const fragmentShader: string =\n      'precision mediump float;' +\n      'varying vec2 vuv;' +\n      'uniform sampler2D texture;' +\n      'void main(void)' +\n      '{' +\n      '   gl_FragColor = texture2D(texture, vuv);' +\n      '}';\n\n    gl.shaderSource(fragmentShaderId, fragmentShader);\n    gl.compileShader(fragmentShaderId);\n\n    // プログラムオブジェクトの作成\n    const programId = gl.createProgram();\n    gl.attachShader(programId, vertexShaderId);\n    gl.attachShader(programId, fragmentShaderId);\n\n    gl.deleteShader(vertexShaderId);\n    gl.deleteShader(fragmentShaderId);\n\n    // リンク\n    gl.linkProgram(programId);\n\n    gl.useProgram(programId);\n\n    return programId;\n  }\n\n  /**\n   * View情報を取得する。\n   */\n  public getView(): LAppView {\n    return this._view;\n  }\n\n  public getTextureManager(): LAppTextureManager {\n    return this._textureManager;\n  }\n\n  /**\n   * コンストラクタ\n   */\n  constructor() {\n    this._captured = false;\n    this._mouseX = 0.0;\n    this._mouseY = 0.0;\n    this._isEnd = false;\n\n    this._cubismOption = new Option();\n    this._view = new LAppView();\n    this._textureManager = new LAppTextureManager();\n  }\n\n  /**\n   * Cubism SDKの初期化\n   */\n  public initializeCubism(): void {\n    // setup cubism\n    this._cubismOption.logFunction = LAppPal.printMessage;\n    this._cubismOption.loggingLevel = LAppDefine.CubismLoggingLevel;\n    CubismFramework.startUp(this._cubismOption);\n\n    // initialize cubism\n    CubismFramework.initialize();\n\n    // load model\n    LAppLive2DManager.getInstance();\n\n    LAppPal.updateTime();\n\n    this._view.initializeSprite();\n  }\n\n  /**\n   * Resize the canvas to fill the screen.\n   */\n  private _resizeCanvas(): void {\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n  }\n\n  _cubismOption: Option; // Cubism SDK Option\n  _view: LAppView; // View情報\n  _captured: boolean; // クリックしているか\n  _mouseX: number; // マウスX座標\n  _mouseY: number; // マウスY座標\n  _isEnd: boolean; // APP終了しているか\n  _textureManager: LAppTextureManager; // テクスチャマネージャー\n}\n\n/**\n * クリックしたときに呼ばれる。\n */\nfunction onClickBegan(e: MouseEvent): void {\n  if (!LAppDelegate.getInstance()._view) {\n    LAppPal.printMessage('view notfound');\n    return;\n  }\n  LAppDelegate.getInstance()._captured = true;\n\n  const posX: number = e.pageX;\n  const posY: number = e.pageY;\n\n  LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\n}\n\n/**\n * マウスポインタが動いたら呼ばれる。\n */\nfunction onMouseMoved(e: MouseEvent): void {\n  if (!LAppDelegate.getInstance()._captured) {\n    return;\n  }\n\n  if (!LAppDelegate.getInstance()._view) {\n    LAppPal.printMessage('view notfound');\n    return;\n  }\n\n  const rect = (e.target as Element).getBoundingClientRect();\n  const posX: number = e.clientX - rect.left;\n  const posY: number = e.clientY - rect.top;\n\n  LAppDelegate.getInstance()._view.onTouchesMoved(posX, posY);\n}\n\n/**\n * クリックが終了したら呼ばれる。\n */\nfunction onClickEnded(e: MouseEvent): void {\n  LAppDelegate.getInstance()._captured = false;\n  if (!LAppDelegate.getInstance()._view) {\n    LAppPal.printMessage('view notfound');\n    return;\n  }\n\n  const rect = (e.target as Element).getBoundingClientRect();\n  const posX: number = e.clientX - rect.left;\n  const posY: number = e.clientY - rect.top;\n\n  LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n}\n\n/**\n * タッチしたときに呼ばれる。\n */\nfunction onTouchBegan(e: TouchEvent): void {\n  if (!LAppDelegate.getInstance()._view) {\n    LAppPal.printMessage('view notfound');\n    return;\n  }\n\n  LAppDelegate.getInstance()._captured = true;\n\n  const posX = e.changedTouches[0].pageX;\n  const posY = e.changedTouches[0].pageY;\n\n  LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\n}\n\n/**\n * スワイプすると呼ばれる。\n */\nfunction onTouchMoved(e: TouchEvent): void {\n  if (!LAppDelegate.getInstance()._captured) {\n    return;\n  }\n\n  if (!LAppDelegate.getInstance()._view) {\n    LAppPal.printMessage('view notfound');\n    return;\n  }\n\n  const rect = (e.target as Element).getBoundingClientRect();\n\n  const posX = e.changedTouches[0].clientX - rect.left;\n  const posY = e.changedTouches[0].clientY - rect.top;\n\n  LAppDelegate.getInstance()._view.onTouchesMoved(posX, posY);\n}\n\n/**\n * タッチが終了したら呼ばれる。\n */\nfunction onTouchEnded(e: TouchEvent): void {\n  LAppDelegate.getInstance()._captured = false;\n\n  if (!LAppDelegate.getInstance()._view) {\n    LAppPal.printMessage('view notfound');\n    return;\n  }\n\n  const rect = (e.target as Element).getBoundingClientRect();\n\n  const posX = e.changedTouches[0].clientX - rect.left;\n  const posY = e.changedTouches[0].clientY - rect.top;\n\n  LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n}\n\n/**\n * タッチがキャンセルされると呼ばれる。\n */\nfunction onTouchCancel(e: TouchEvent): void {\n  LAppDelegate.getInstance()._captured = false;\n\n  if (!LAppDelegate.getInstance()._view) {\n    LAppPal.printMessage('view notfound');\n    return;\n  }\n\n  const rect = (e.target as Element).getBoundingClientRect();\n\n  const posX = e.changedTouches[0].clientX - rect.left;\n  const posY = e.changedTouches[0].clientY - rect.top;\n\n  LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismMatrix44 } from '@framework/math/cubismmatrix44';\nimport { ACubismMotion } from '@framework/motion/acubismmotion';\nimport { csmVector } from '@framework/type/csmvector';\n\nimport * as LAppDefine from './lappdefine';\nimport { canvas } from './lappdelegate';\nimport { LAppModel } from './lappmodel';\nimport { LAppPal } from './lapppal';\n\nexport let s_instance: LAppLive2DManager = null;\n\n/**\n * サンプルアプリケーションにおいてCubismModelを管理するクラス\n * モデル生成と破棄、タップイベントの処理、モデル切り替えを行う。\n */\nexport class LAppLive2DManager {\n  /**\n   * クラスのインスタンス（シングルトン）を返す。\n   * インスタンスが生成されていない場合は内部でインスタンスを生成する。\n   *\n   * @return クラスのインスタンス\n   */\n  public static getInstance(): LAppLive2DManager {\n    if (s_instance == null) {\n      s_instance = new LAppLive2DManager();\n    }\n\n    return s_instance;\n  }\n\n  /**\n   * クラスのインスタンス（シングルトン）を解放する。\n   */\n  public static releaseInstance(): void {\n    if (s_instance != null) {\n      s_instance = void 0;\n    }\n\n    s_instance = null;\n  }\n\n  /**\n   * 現在のシーンで保持しているモデルを返す。\n   *\n   * @param no モデルリストのインデックス値\n   * @return モデルのインスタンスを返す。インデックス値が範囲外の場合はNULLを返す。\n   */\n  public getModel(no: number): LAppModel {\n    if (no < this._models.getSize()) {\n      return this._models.at(no);\n    }\n\n    return null;\n  }\n\n  /**\n   * 現在のシーンで保持しているすべてのモデルを解放する\n   */\n  public releaseAllModel(): void {\n    for (let i = 0; i < this._models.getSize(); i++) {\n      this._models.at(i).release();\n      this._models.set(i, null);\n    }\n\n    this._models.clear();\n  }\n\n  /**\n   * 画面をドラッグした時の処理\n   *\n   * @param x 画面のX座標\n   * @param y 画面のY座標\n   */\n  public onDrag(x: number, y: number): void {\n    for (let i = 0; i < this._models.getSize(); i++) {\n      const model: LAppModel = this.getModel(i);\n\n      if (model) {\n        model.setDragging(x, y);\n      }\n    }\n  }\n\n  /**\n   * 画面をタップした時の処理\n   *\n   * @param x 画面のX座標\n   * @param y 画面のY座標\n   */\n\n  public ExpressionSet(x: string): void {\n    for (let i = 0; i < this._models.getSize(); i++) {\n        this._models.at(i).setExpression(x)\n      }\n    }\n  \n  \n\n\n  public onTap(x: number, y: number): void {\n    if (LAppDefine.DebugLogEnable) {\n      LAppPal.printMessage(\n        `[APP]tap point: {x: ${x.toFixed(2)} y: ${y.toFixed(2)}}`\n      );\n    }\n/** \n    for (let i = 0; i < this._models.getSize(); i++) {\n      if (this._models.at(i).hitTest(LAppDefine.HitAreaNameHead, x, y)) {\n        if (LAppDefine.DebugLogEnable) {\n          LAppPal.printMessage(\n            `[APP]hit area: [${LAppDefine.HitAreaNameHead}]`\n          );\n        }\n        this._models.at(i).setRandomExpression();   \n        //! This is where they set the expression \n      } else if (this._models.at(i).hitTest(LAppDefine.HitAreaNameBody, x, y)) {\n        if (LAppDefine.DebugLogEnable) {\n          LAppPal.printMessage(\n            `[APP]hit area: [${LAppDefine.HitAreaNameBody}]`\n          );\n        }\n        \n        this._models\n          .at(i)\n          .startRandomMotion(\n            LAppDefine.MotionGroupTapBody,\n            LAppDefine.PriorityNormal,\n            this._finishedMotion\n          );\n         \n          //! THIS IS WHERE YOU SET THE MOTION \n      }\n\n    }\n   */\n  }\n\n  /**\n   * 画面を更新するときの処理\n   * モデルの更新処理及び描画処理を行う\n   */\n  public onUpdate(): void {\n    const { width, height } = canvas;\n\n    const modelCount: number = this._models.getSize();\n\n    for (let i = 0; i < modelCount; ++i) {\n      const projection: CubismMatrix44 = new CubismMatrix44();\n      const model: LAppModel = this.getModel(i);\n\n      if (model.getModel()) {\n        if (model.getModel().getCanvasWidth() > 1.0 && width < height) {\n          // 横に長いモデルを縦長ウィンドウに表示する際モデルの横サイズでscaleを算出する\n          model.getModelMatrix().setWidth(2.0);\n          projection.scale(1.0, width / height);\n        } else {\n          projection.scale(height / width, 1.0);\n        }\n\n        // 必要があればここで乗算\n        if (this._viewMatrix != null) {\n          projection.multiplyByMatrix(this._viewMatrix);\n        }\n      }\n\n      model.update();\n      model.draw(projection); // 参照渡しなのでprojectionは変質する。\n    }\n  }\n\n  /**\n   * 次のシーンに切りかえる\n   * サンプルアプリケーションではモデルセットの切り替えを行う。\n   */\n  public nextScene(): void {\n    const no: number = (this._sceneIndex + 1) % LAppDefine.ModelDirSize;\n    this.changeScene(no);\n  }\n\n  /**\n   * シーンを切り替える\n   * サンプルアプリケーションではモデルセットの切り替えを行う。\n   */\n  public changeScene(index: number): void {\n    this._sceneIndex = index;\n    if (LAppDefine.DebugLogEnable) {\n      LAppPal.printMessage(`[APP]model index: ${this._sceneIndex}`);\n    }\n\n    // ModelDir[]に保持したディレクトリ名から\n    // model3.jsonのパスを決定する。\n    // ディレクトリ名とmodel3.jsonの名前を一致させておくこと。\n    const model: string = LAppDefine.ModelDir[index];\n    const modelPath: string = LAppDefine.ResourcesPath + model + '/';\n    let modelJsonName: string = LAppDefine.ModelDir[index];\n    modelJsonName += '.model3.json';\n\n    this.releaseAllModel();\n    this._models.pushBack(new LAppModel());\n    this._models.at(0).loadAssets(modelPath, modelJsonName);\n  }\n\n  public setViewMatrix(m: CubismMatrix44) {\n    for (let i = 0; i < 16; i++) {\n      this._viewMatrix.getArray()[i] = m.getArray()[i];\n    }\n  }\n\n  /**\n   * コンストラクタ\n   */\n  constructor() {\n    this._viewMatrix = new CubismMatrix44();\n    this._models = new csmVector<LAppModel>();\n    this._sceneIndex = 0;\n    this.changeScene(this._sceneIndex);\n  }\n\n  _viewMatrix: CubismMatrix44; // モデル描画に用いるview行列\n  _models: csmVector<LAppModel>; // モデルインスタンスのコンテナ\n  _sceneIndex: number; // 表示するシーンのインデックス値\n  // モーション再生終了のコールバック関数\n  _finishedMotion = (self: ACubismMotion): void => {\n    LAppPal.printMessage('Motion Finished:');\n    console.log(self);\n  };\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport 'whatwg-fetch';\n\nimport { CubismDefaultParameterId } from '@framework/cubismdefaultparameterid';\nimport { CubismModelSettingJson } from '@framework/cubismmodelsettingjson';\nimport {\n  BreathParameterData,\n  CubismBreath\n} from '@framework/effect/cubismbreath';\nimport { CubismEyeBlink } from '@framework/effect/cubismeyeblink';\nimport { ICubismModelSetting } from '@framework/icubismmodelsetting';\nimport { CubismIdHandle } from '@framework/id/cubismid';\nimport { CubismFramework } from '@framework/live2dcubismframework';\nimport { CubismMatrix44 } from '@framework/math/cubismmatrix44';\nimport { CubismUserModel } from '@framework/model/cubismusermodel';\nimport {\n  ACubismMotion,\n  FinishedMotionCallback\n} from '@framework/motion/acubismmotion';\nimport { CubismMotion } from '@framework/motion/cubismmotion';\nimport {\n  CubismMotionQueueEntryHandle,\n  InvalidMotionQueueEntryHandleValue\n} from '@framework/motion/cubismmotionqueuemanager';\nimport { csmMap } from '@framework/type/csmmap';\nimport { csmRect } from '@framework/type/csmrectf';\nimport { csmString } from '@framework/type/csmstring';\nimport { csmVector } from '@framework/type/csmvector';\nimport {\n  CSM_ASSERT,\n  CubismLogError,\n  CubismLogInfo\n} from '@framework/utils/cubismdebug';\n\nimport * as LAppDefine from './lappdefine';\nimport { canvas, frameBuffer, gl, LAppDelegate } from './lappdelegate';\nimport { LAppPal } from './lapppal';\nimport { TextureInfo } from './lapptexturemanager';\nimport { LAppWavFileHandler } from './lappwavfilehandler';\nimport { CubismMoc } from '@framework/model/cubismmoc';\n\nenum LoadStep {\n  LoadAssets,\n  LoadModel,\n  WaitLoadModel,\n  LoadExpression,\n  WaitLoadExpression,\n  LoadPhysics,\n  WaitLoadPhysics,\n  LoadPose,\n  WaitLoadPose,\n  SetupEyeBlink,\n  SetupBreath,\n  LoadUserData,\n  WaitLoadUserData,\n  SetupEyeBlinkIds,\n  SetupLipSyncIds,\n  SetupLayout,\n  LoadMotion,\n  WaitLoadMotion,\n  CompleteInitialize,\n  CompleteSetupModel,\n  LoadTexture,\n  WaitLoadTexture,\n  CompleteSetup\n}\n\n/**\n * ユーザーが実際に使用するモデルの実装クラス<br>\n * モデル生成、機能コンポーネント生成、更新処理とレンダリングの呼び出しを行う。\n */\nexport class LAppModel extends CubismUserModel {\n  /**\n   * model3.jsonが置かれたディレクトリとファイルパスからモデルを生成する\n   * @param dir\n   * @param fileName\n   */\n  public loadAssets(dir: string, fileName: string): void {\n    this._modelHomeDir = dir;\n\n    fetch(`${this._modelHomeDir}${fileName}`)\n      .then(response => response.arrayBuffer())\n      .then(arrayBuffer => {\n        const setting: ICubismModelSetting = new CubismModelSettingJson(\n          arrayBuffer,\n          arrayBuffer.byteLength\n        );\n\n        // ステートを更新\n        this._state = LoadStep.LoadModel;\n\n        // 結果を保存\n        this.setupModel(setting);\n      });\n  }\n\n  /**\n   * model3.jsonからモデルを生成する。\n   * model3.jsonの記述に従ってモデル生成、モーション、物理演算などのコンポーネント生成を行う。\n   *\n   * @param setting ICubismModelSettingのインスタンス\n   */\n  private setupModel(setting: ICubismModelSetting): void {\n    this._updating = true;\n    this._initialized = false;\n\n    this._modelSetting = setting;\n\n    // CubismModel\n    if (this._modelSetting.getModelFileName() != '') {\n      const modelFileName = this._modelSetting.getModelFileName();\n\n      fetch(`${this._modelHomeDir}${modelFileName}`)\n        .then(response => response.arrayBuffer())\n        .then(arrayBuffer => {\n          this.loadModel(arrayBuffer, this._mocConsistency);\n          this._state = LoadStep.LoadExpression;\n\n          // callback\n          loadCubismExpression();\n        });\n\n      this._state = LoadStep.WaitLoadModel;\n    } else {\n      LAppPal.printMessage('Model data does not exist.');\n    }\n\n    // Expression\n    const loadCubismExpression = (): void => {\n      if (this._modelSetting.getExpressionCount() > 0) {\n        const count: number = this._modelSetting.getExpressionCount();\n\n        for (let i = 0; i < count; i++) {\n          const expressionName = this._modelSetting.getExpressionName(i);\n          const expressionFileName =\n            this._modelSetting.getExpressionFileName(i);\n\n          fetch(`${this._modelHomeDir}${expressionFileName}`)\n            .then(response => response.arrayBuffer())\n            .then(arrayBuffer => {\n              const motion: ACubismMotion = this.loadExpression(\n                arrayBuffer,\n                arrayBuffer.byteLength,\n                expressionName\n              );\n\n              if (this._expressions.getValue(expressionName) != null) {\n                ACubismMotion.delete(\n                  this._expressions.getValue(expressionName)\n                );\n                this._expressions.setValue(expressionName, null);\n              }\n\n              this._expressions.setValue(expressionName, motion);\n\n              this._expressionCount++;\n\n              if (this._expressionCount >= count) {\n                this._state = LoadStep.LoadPhysics;\n\n                // callback\n                loadCubismPhysics();\n              }\n            });\n        }\n        this._state = LoadStep.WaitLoadExpression;\n      } else {\n        this._state = LoadStep.LoadPhysics;\n\n        // callback\n        loadCubismPhysics();\n      }\n    };\n\n    // Physics\n    const loadCubismPhysics = (): void => {\n      if (this._modelSetting.getPhysicsFileName() != '') {\n        const physicsFileName = this._modelSetting.getPhysicsFileName();\n\n        fetch(`${this._modelHomeDir}${physicsFileName}`)\n          .then(response => response.arrayBuffer())\n          .then(arrayBuffer => {\n            this.loadPhysics(arrayBuffer, arrayBuffer.byteLength);\n\n            this._state = LoadStep.LoadPose;\n\n            // callback\n            loadCubismPose();\n          });\n        this._state = LoadStep.WaitLoadPhysics;\n      } else {\n        this._state = LoadStep.LoadPose;\n\n        // callback\n        loadCubismPose();\n      }\n    };\n\n    // Pose\n    const loadCubismPose = (): void => {\n      if (this._modelSetting.getPoseFileName() != '') {\n        const poseFileName = this._modelSetting.getPoseFileName();\n\n        fetch(`${this._modelHomeDir}${poseFileName}`)\n          .then(response => response.arrayBuffer())\n          .then(arrayBuffer => {\n            this.loadPose(arrayBuffer, arrayBuffer.byteLength);\n\n            this._state = LoadStep.SetupEyeBlink;\n\n            // callback\n            setupEyeBlink();\n          });\n        this._state = LoadStep.WaitLoadPose;\n      } else {\n        this._state = LoadStep.SetupEyeBlink;\n\n        // callback\n        setupEyeBlink();\n      }\n    };\n\n    // EyeBlink\n    const setupEyeBlink = (): void => {\n      if (this._modelSetting.getEyeBlinkParameterCount() > 0) {\n        this._eyeBlink = CubismEyeBlink.create(this._modelSetting);\n        this._state = LoadStep.SetupBreath;\n      }\n\n      // callback\n      setupBreath();\n    };\n\n    // Breath\n    const setupBreath = (): void => {\n      this._breath = CubismBreath.create();\n\n      const breathParameters: csmVector<BreathParameterData> = new csmVector();\n      breathParameters.pushBack(\n        new BreathParameterData(this._idParamAngleX, 0.0, 15.0, 6.5345, 0.5)\n      );\n      breathParameters.pushBack(\n        new BreathParameterData(this._idParamAngleY, 0.0, 8.0, 3.5345, 0.5)\n      );\n      breathParameters.pushBack(\n        new BreathParameterData(this._idParamAngleZ, 0.0, 10.0, 5.5345, 0.5)\n      );\n      breathParameters.pushBack(\n        new BreathParameterData(this._idParamBodyAngleX, 0.0, 4.0, 15.5345, 0.5)\n      );\n      breathParameters.pushBack(\n        new BreathParameterData(\n          CubismFramework.getIdManager().getId(\n            CubismDefaultParameterId.ParamBreath\n          ),\n          0.5,\n          0.5,\n          3.2345,\n          1\n        )\n      );\n\n      this._breath.setParameters(breathParameters);\n      this._state = LoadStep.LoadUserData;\n\n      // callback\n      loadUserData();\n    };\n\n    // UserData\n    const loadUserData = (): void => {\n      if (this._modelSetting.getUserDataFile() != '') {\n        const userDataFile = this._modelSetting.getUserDataFile();\n\n        fetch(`${this._modelHomeDir}${userDataFile}`)\n          .then(response => response.arrayBuffer())\n          .then(arrayBuffer => {\n            this.loadUserData(arrayBuffer, arrayBuffer.byteLength);\n\n            this._state = LoadStep.SetupEyeBlinkIds;\n\n            // callback\n            setupEyeBlinkIds();\n          });\n\n        this._state = LoadStep.WaitLoadUserData;\n      } else {\n        this._state = LoadStep.SetupEyeBlinkIds;\n\n        // callback\n        setupEyeBlinkIds();\n      }\n    };\n\n    // EyeBlinkIds\n    const setupEyeBlinkIds = (): void => {\n      const eyeBlinkIdCount: number =\n        this._modelSetting.getEyeBlinkParameterCount();\n\n      for (let i = 0; i < eyeBlinkIdCount; ++i) {\n        this._eyeBlinkIds.pushBack(\n          this._modelSetting.getEyeBlinkParameterId(i)\n        );\n      }\n\n      this._state = LoadStep.SetupLipSyncIds;\n\n      // callback\n      setupLipSyncIds();\n    };\n\n    // LipSyncIds\n    const setupLipSyncIds = (): void => {\n      const lipSyncIdCount = this._modelSetting.getLipSyncParameterCount();\n\n      for (let i = 0; i < lipSyncIdCount; ++i) {\n        this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(i));\n      }\n      this._state = LoadStep.SetupLayout;\n\n      // callback\n      setupLayout();\n    };\n\n    // Layout\n    const setupLayout = (): void => {\n      const layout: csmMap<string, number> = new csmMap<string, number>();\n\n      if (this._modelSetting == null || this._modelMatrix == null) {\n        CubismLogError('Failed to setupLayout().');\n        return;\n      }\n\n      this._modelSetting.getLayoutMap(layout);\n      this._modelMatrix.setupFromLayout(layout);\n      this._state = LoadStep.LoadMotion;\n\n      // callback\n      loadCubismMotion();\n    };\n\n    // Motion\n    const loadCubismMotion = (): void => {\n      this._state = LoadStep.WaitLoadMotion;\n      this._model.saveParameters();\n      this._allMotionCount = 0;\n      this._motionCount = 0;\n      const group: string[] = [];\n\n      const motionGroupCount: number = this._modelSetting.getMotionGroupCount();\n\n      // モーションの総数を求める\n      for (let i = 0; i < motionGroupCount; i++) {\n        group[i] = this._modelSetting.getMotionGroupName(i);\n        this._allMotionCount += this._modelSetting.getMotionCount(group[i]);\n      }\n\n      // モーションの読み込み\n      for (let i = 0; i < motionGroupCount; i++) {\n        this.preLoadMotionGroup(group[i]);\n      }\n\n      // モーションがない場合\n      if (motionGroupCount == 0) {\n        this._state = LoadStep.LoadTexture;\n\n        // 全てのモーションを停止する\n        this._motionManager.stopAllMotions();\n\n        this._updating = false;\n        this._initialized = true;\n\n        this.createRenderer();\n        this.setupTextures();\n        this.getRenderer().startUp(gl);\n      }\n    };\n  }\n\n  /**\n   * テクスチャユニットにテクスチャをロードする\n   */\n  private setupTextures(): void {\n    // iPhoneでのアルファ品質向上のためTypescriptではpremultipliedAlphaを採用\n    const usePremultiply = true;\n\n    if (this._state == LoadStep.LoadTexture) {\n      // テクスチャ読み込み用\n      const textureCount: number = this._modelSetting.getTextureCount();\n\n      for (\n        let modelTextureNumber = 0;\n        modelTextureNumber < textureCount;\n        modelTextureNumber++\n      ) {\n        // テクスチャ名が空文字だった場合はロード・バインド処理をスキップ\n        if (this._modelSetting.getTextureFileName(modelTextureNumber) == '') {\n          console.log('getTextureFileName null');\n          continue;\n        }\n\n        // WebGLのテクスチャユニットにテクスチャをロードする\n        let texturePath =\n          this._modelSetting.getTextureFileName(modelTextureNumber);\n        texturePath = this._modelHomeDir + texturePath;\n\n        // ロード完了時に呼び出すコールバック関数\n        const onLoad = (textureInfo: TextureInfo): void => {\n          this.getRenderer().bindTexture(modelTextureNumber, textureInfo.id);\n\n          this._textureCount++;\n\n          if (this._textureCount >= textureCount) {\n            // ロード完了\n            this._state = LoadStep.CompleteSetup;\n          }\n        };\n\n        // 読み込み\n        LAppDelegate.getInstance()\n          .getTextureManager()\n          .createTextureFromPngFile(texturePath, usePremultiply, onLoad);\n        this.getRenderer().setIsPremultipliedAlpha(usePremultiply);\n      }\n\n      this._state = LoadStep.WaitLoadTexture;\n    }\n  }\n\n  /**\n   * レンダラを再構築する\n   */\n  public reloadRenderer(): void {\n    this.deleteRenderer();\n    this.createRenderer();\n    this.setupTextures();\n  }\n\n  /**\n   * 更新\n   */\n  public update(): void {\n    if (this._state != LoadStep.CompleteSetup) return;\n\n    const deltaTimeSeconds: number = LAppPal.getDeltaTime();\n    this._userTimeSeconds += deltaTimeSeconds;\n\n    this._dragManager.update(deltaTimeSeconds);\n    this._dragX = this._dragManager.getX();\n    this._dragY = this._dragManager.getY();\n\n    // モーションによるパラメータ更新の有無\n    let motionUpdated = false;\n\n    //--------------------------------------------------------------------------\n    this._model.loadParameters(); // 前回セーブされた状態をロード\n    if (this._motionManager.isFinished()) {\n      // モーションの再生がない場合、待機モーションの中からランダムで再生する\n      this.startRandomMotion(\n        LAppDefine.MotionGroupIdle,\n        LAppDefine.PriorityIdle\n      );\n    } else {\n      motionUpdated = this._motionManager.updateMotion(\n        this._model,\n        deltaTimeSeconds\n      ); // モーションを更新\n    }\n    this._model.saveParameters(); // 状態を保存\n    //--------------------------------------------------------------------------\n\n    // まばたき\n    if (!motionUpdated) {\n      if (this._eyeBlink != null) {\n        // メインモーションの更新がないとき\n        this._eyeBlink.updateParameters(this._model, deltaTimeSeconds); // 目パチ\n      }\n    }\n\n    if (this._expressionManager != null) {\n      this._expressionManager.updateMotion(this._model, deltaTimeSeconds); // 表情でパラメータ更新（相対変化）\n    }\n\n    // ドラッグによる変化\n    // ドラッグによる顔の向きの調整\n    this._model.addParameterValueById(this._idParamAngleX, this._dragX * 30); // -30から30の値を加える\n    this._model.addParameterValueById(this._idParamAngleY, this._dragY * 30);\n    this._model.addParameterValueById(\n      this._idParamAngleZ,\n      this._dragX * this._dragY * -30\n    );\n\n    // ドラッグによる体の向きの調整\n    this._model.addParameterValueById(\n      this._idParamBodyAngleX,\n      this._dragX * 10\n    ); // -10から10の値を加える\n\n    // ドラッグによる目の向きの調整\n    this._model.addParameterValueById(this._idParamEyeBallX, this._dragX); // -1から1の値を加える\n    this._model.addParameterValueById(this._idParamEyeBallY, this._dragY);\n\n    // 呼吸など\n    if (this._breath != null) {\n      this._breath.updateParameters(this._model, deltaTimeSeconds);\n    }\n\n    // 物理演算の設定\n    if (this._physics != null) {\n      this._physics.evaluate(this._model, deltaTimeSeconds);\n    }\n\n    // リップシンクの設定\n    if (this._lipsync) {\n      let value = 0.0; // リアルタイムでリップシンクを行う場合、システムから音量を取得して、0~1の範囲で値を入力します。\n\n      this._wavFileHandler.update(deltaTimeSeconds);\n      value = this._wavFileHandler.getRms();\n\n      for (let i = 0; i < this._lipSyncIds.getSize(); ++i) {\n        this._model.addParameterValueById(this._lipSyncIds.at(i), value, 0.8);\n      }\n    }\n\n    // ポーズの設定\n    if (this._pose != null) {\n      this._pose.updateParameters(this._model, deltaTimeSeconds);\n    }\n\n    this._model.update();\n  }\n\n  /**\n   * 引数で指定したモーションの再生を開始する\n   * @param group モーショングループ名\n   * @param no グループ内の番号\n   * @param priority 優先度\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\n   * @return 開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するisFinished()の引数で使用する。開始できない時は[-1]\n   */\n  public startMotion(\n    group: string,\n    no: number,\n    priority: number,\n    onFinishedMotionHandler?: FinishedMotionCallback\n  ): CubismMotionQueueEntryHandle {\n    if (priority == LAppDefine.PriorityForce) {\n      this._motionManager.setReservePriority(priority);\n    } else if (!this._motionManager.reserveMotion(priority)) {\n      if (this._debugMode) {\n        LAppPal.printMessage(\"[APP]can't start motion.\");\n      }\n      return InvalidMotionQueueEntryHandleValue;\n    }\n\n    const motionFileName = this._modelSetting.getMotionFileName(group, no);\n\n    // ex) idle_0\n    const name = `${group}_${no}`;\n    let motion: CubismMotion = this._motions.getValue(name) as CubismMotion;\n    let autoDelete = false;\n\n    if (motion == null) {\n      fetch(`${this._modelHomeDir}${motionFileName}`)\n        .then(response => response.arrayBuffer())\n        .then(arrayBuffer => {\n          motion = this.loadMotion(\n            arrayBuffer,\n            arrayBuffer.byteLength,\n            null,\n            onFinishedMotionHandler\n          );\n          let fadeTime: number = this._modelSetting.getMotionFadeInTimeValue(\n            group,\n            no\n          );\n\n          if (fadeTime >= 0.0) {\n            motion.setFadeInTime(fadeTime);\n          }\n\n          fadeTime = this._modelSetting.getMotionFadeOutTimeValue(group, no);\n          if (fadeTime >= 0.0) {\n            motion.setFadeOutTime(fadeTime);\n          }\n\n          motion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\n          autoDelete = true; // 終了時にメモリから削除\n        });\n    } else {\n      motion.setFinishedMotionHandler(onFinishedMotionHandler);\n    }\n\n    //voice\n    const voice = this._modelSetting.getMotionSoundFileName(group, no);\n    if (voice.localeCompare('') != 0) {\n      let path = voice;\n      path = this._modelHomeDir + path;\n      this._wavFileHandler.start(path);\n    }\n\n    if (this._debugMode) {\n      LAppPal.printMessage(`[APP]start motion: [${group}_${no}`);\n    }\n    return this._motionManager.startMotionPriority(\n      motion,\n      autoDelete,\n      priority\n    );\n  }\n\n  /**\n   * ランダムに選ばれたモーションの再生を開始する。\n   * @param group モーショングループ名\n   * @param priority 優先度\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\n   * @return 開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するisFinished()の引数で使用する。開始できない時は[-1]\n   */\n  public startRandomMotion(\n    group: string,\n    priority: number,\n    onFinishedMotionHandler?: FinishedMotionCallback\n  ): CubismMotionQueueEntryHandle {\n    if (this._modelSetting.getMotionCount(group) == 0) {\n      return InvalidMotionQueueEntryHandleValue;\n    }\n\n    const no: number = Math.floor(\n      Math.random() * this._modelSetting.getMotionCount(group)\n    );\n\n    return this.startMotion(group, no, priority, onFinishedMotionHandler);\n  }\n\n  /**\n   * 引数で指定した表情モーションをセットする\n   *\n   * @param expressionId 表情モーションのID\n   */\n  public setExpression(expressionId: string): void {\n    const motion: ACubismMotion = this._expressions.getValue(expressionId);\n\n    if (this._debugMode) {\n      LAppPal.printMessage(`[APP]expression: [${expressionId}]`);\n    }\n\n    if (motion != null) {\n      this._expressionManager.startMotionPriority(\n        motion,\n        false,\n        LAppDefine.PriorityForce\n      );\n    } else {\n      if (this._debugMode) {\n        LAppPal.printMessage(`[APP]expression[${expressionId}] is null`);\n      }\n    }\n  }\n\n  /**\n   * ランダムに選ばれた表情モーションをセットする\n   */\n  public setRandomExpression(): void {\n    if (this._expressions.getSize() == 0) {\n      return;\n    }\n\n    const no: number = Math.floor(Math.random() * this._expressions.getSize());\n\n    for (let i = 0; i < this._expressions.getSize(); i++) {\n      if (i == no) {\n        const name: string = this._expressions._keyValues[i].first;\n        console.log(name)\n        this.setExpression(name);\n        return;\n      }\n    }\n  }\n\n  /**\n   * イベントの発火を受け取る\n   */\n  public motionEventFired(eventValue: csmString): void {\n    CubismLogInfo('{0} is fired on LAppModel!!', eventValue.s);\n  }\n\n  /**\n   * 当たり判定テスト\n   * 指定ＩＤの頂点リストから矩形を計算し、座標をが矩形範囲内か判定する。\n   *\n   * @param hitArenaName  当たり判定をテストする対象のID\n   * @param x             判定を行うX座標\n   * @param y             判定を行うY座標\n   */\n  public hitTest(hitArenaName: string, x: number, y: number): boolean {\n    // 透明時は当たり判定無し。\n    if (this._opacity < 1) {\n      return false;\n    }\n\n    const count: number = this._modelSetting.getHitAreasCount();\n\n    for (let i = 0; i < count; i++) {\n      if (this._modelSetting.getHitAreaName(i) == hitArenaName) {\n        const drawId: CubismIdHandle = this._modelSetting.getHitAreaId(i);\n        return this.isHit(drawId, x, y);\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * モーションデータをグループ名から一括でロードする。\n   * モーションデータの名前は内部でModelSettingから取得する。\n   *\n   * @param group モーションデータのグループ名\n   */\n  public preLoadMotionGroup(group: string): void {\n    for (let i = 0; i < this._modelSetting.getMotionCount(group); i++) {\n      const motionFileName = this._modelSetting.getMotionFileName(group, i);\n\n      // ex) idle_0\n      const name = `${group}_${i}`;\n      if (this._debugMode) {\n        LAppPal.printMessage(\n          `[APP]load motion: ${motionFileName} => [${name}]`\n        );\n      }\n\n      fetch(`${this._modelHomeDir}${motionFileName}`)\n        .then(response => response.arrayBuffer())\n        .then(arrayBuffer => {\n          const tmpMotion: CubismMotion = this.loadMotion(\n            arrayBuffer,\n            arrayBuffer.byteLength,\n            name\n          );\n\n          let fadeTime = this._modelSetting.getMotionFadeInTimeValue(group, i);\n          if (fadeTime >= 0.0) {\n            tmpMotion.setFadeInTime(fadeTime);\n          }\n\n          fadeTime = this._modelSetting.getMotionFadeOutTimeValue(group, i);\n          if (fadeTime >= 0.0) {\n            tmpMotion.setFadeOutTime(fadeTime);\n          }\n          tmpMotion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\n\n          if (this._motions.getValue(name) != null) {\n            ACubismMotion.delete(this._motions.getValue(name));\n          }\n\n          this._motions.setValue(name, tmpMotion);\n\n          this._motionCount++;\n          if (this._motionCount >= this._allMotionCount) {\n            this._state = LoadStep.LoadTexture;\n\n            // 全てのモーションを停止する\n            this._motionManager.stopAllMotions();\n\n            this._updating = false;\n            this._initialized = true;\n\n            this.createRenderer();\n            this.setupTextures();\n            this.getRenderer().startUp(gl);\n          }\n        });\n    }\n  }\n\n  /**\n   * すべてのモーションデータを解放する。\n   */\n  public releaseMotions(): void {\n    this._motions.clear();\n  }\n\n  /**\n   * 全ての表情データを解放する。\n   */\n  public releaseExpressions(): void {\n    this._expressions.clear();\n  }\n\n  /**\n   * モデルを描画する処理。モデルを描画する空間のView-Projection行列を渡す。\n   */\n  public doDraw(): void {\n    if (this._model == null) return;\n\n    // キャンバスサイズを渡す\n    const viewport: number[] = [0, 0, canvas.width, canvas.height];\n\n    this.getRenderer().setRenderState(frameBuffer, viewport);\n    this.getRenderer().drawModel();\n  }\n\n  /**\n   * モデルを描画する処理。モデルを描画する空間のView-Projection行列を渡す。\n   */\n  public draw(matrix: CubismMatrix44): void {\n    if (this._model == null) {\n      return;\n    }\n\n    // 各読み込み終了後\n    if (this._state == LoadStep.CompleteSetup) {\n      matrix.multiplyByMatrix(this._modelMatrix);\n\n      this.getRenderer().setMvpMatrix(matrix);\n\n      this.doDraw();\n    }\n  }\n\n  public async hasMocConsistencyFromFile() {\n    CSM_ASSERT(this._modelSetting.getModelFileName().localeCompare(``));\n\n    // CubismModel\n    if (this._modelSetting.getModelFileName() != '') {\n      const modelFileName = this._modelSetting.getModelFileName();\n\n      const response = await fetch(`${this._modelHomeDir}${modelFileName}`);\n      const arrayBuffer = await response.arrayBuffer();\n\n      this._consistency = CubismMoc.hasMocConsistency(arrayBuffer);\n\n      if (!this._consistency) {\n        CubismLogInfo('Inconsistent MOC3.');\n      } else {\n        CubismLogInfo('Consistent MOC3.');\n      }\n\n      return this._consistency;\n    } else {\n      LAppPal.printMessage('Model data does not exist.');\n    }\n  }\n\n  /**\n   * コンストラクタ\n   */\n  public constructor() {\n    super();\n\n    this._modelSetting = null;\n    this._modelHomeDir = null;\n    this._userTimeSeconds = 0.0;\n\n    this._eyeBlinkIds = new csmVector<CubismIdHandle>();\n    this._lipSyncIds = new csmVector<CubismIdHandle>();\n\n    this._motions = new csmMap<string, ACubismMotion>();\n    this._expressions = new csmMap<string, ACubismMotion>();\n\n    this._hitArea = new csmVector<csmRect>();\n    this._userArea = new csmVector<csmRect>();\n\n    this._idParamAngleX = CubismFramework.getIdManager().getId(\n      CubismDefaultParameterId.ParamAngleX\n    );\n    this._idParamAngleY = CubismFramework.getIdManager().getId(\n      CubismDefaultParameterId.ParamAngleY\n    );\n    this._idParamAngleZ = CubismFramework.getIdManager().getId(\n      CubismDefaultParameterId.ParamAngleZ\n    );\n    this._idParamEyeBallX = CubismFramework.getIdManager().getId(\n      CubismDefaultParameterId.ParamEyeBallX\n    );\n    this._idParamEyeBallY = CubismFramework.getIdManager().getId(\n      CubismDefaultParameterId.ParamEyeBallY\n    );\n    this._idParamBodyAngleX = CubismFramework.getIdManager().getId(\n      CubismDefaultParameterId.ParamBodyAngleX\n    );\n\n    if (LAppDefine.MOCConsistencyValidationEnable) {\n      this._mocConsistency = true;\n    }\n\n    this._state = LoadStep.LoadAssets;\n    this._expressionCount = 0;\n    this._textureCount = 0;\n    this._motionCount = 0;\n    this._allMotionCount = 0;\n    this._wavFileHandler = new LAppWavFileHandler();\n    this._consistency = false;\n  }\n\n  _modelSetting: ICubismModelSetting; // モデルセッティング情報\n  _modelHomeDir: string; // モデルセッティングが置かれたディレクトリ\n  _userTimeSeconds: number; // デルタ時間の積算値[秒]\n\n  _eyeBlinkIds: csmVector<CubismIdHandle>; // モデルに設定された瞬き機能用パラメータID\n  _lipSyncIds: csmVector<CubismIdHandle>; // モデルに設定されたリップシンク機能用パラメータID\n\n  _motions: csmMap<string, ACubismMotion>; // 読み込まれているモーションのリスト\n  _expressions: csmMap<string, ACubismMotion>; // 読み込まれている表情のリスト\n\n  _hitArea: csmVector<csmRect>;\n  _userArea: csmVector<csmRect>;\n\n  _idParamAngleX: CubismIdHandle; // パラメータID: ParamAngleX\n  _idParamAngleY: CubismIdHandle; // パラメータID: ParamAngleY\n  _idParamAngleZ: CubismIdHandle; // パラメータID: ParamAngleZ\n  _idParamEyeBallX: CubismIdHandle; // パラメータID: ParamEyeBallX\n  _idParamEyeBallY: CubismIdHandle; // パラメータID: ParamEyeBAllY\n  _idParamBodyAngleX: CubismIdHandle; // パラメータID: ParamBodyAngleX\n\n  _state: number; // 現在のステータス管理用\n  _expressionCount: number; // 表情データカウント\n  _textureCount: number; // テクスチャカウント\n  _motionCount: number; // モーションデータカウント\n  _allMotionCount: number; // モーション総数\n  _wavFileHandler: LAppWavFileHandler; //wavファイルハンドラ\n  _consistency: boolean; // MOC3一貫性チェック管理用\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\n/**\n * プラットフォーム依存機能を抽象化する Cubism Platform Abstraction Layer.\n *\n * ファイル読み込みや時刻取得等のプラットフォームに依存する関数をまとめる。\n */\nexport class LAppPal {\n  /**\n   * ファイルをバイトデータとして読みこむ\n   *\n   * @param filePath 読み込み対象ファイルのパス\n   * @return\n   * {\n   *      buffer,   読み込んだバイトデータ\n   *      size        ファイルサイズ\n   * }\n   */\n  public static loadFileAsBytes(\n    filePath: string,\n    callback: (arrayBuffer: ArrayBuffer, size: number) => void\n  ): void {\n    fetch(filePath)\n      .then(response => response.arrayBuffer())\n      .then(arrayBuffer => callback(arrayBuffer, arrayBuffer.byteLength));\n  }\n\n  /**\n   * デルタ時間（前回フレームとの差分）を取得する\n   * @return デルタ時間[ms]\n   */\n  public static getDeltaTime(): number {\n    return this.s_deltaTime;\n  }\n\n  public static updateTime(): void {\n    this.s_currentFrame = Date.now();\n    this.s_deltaTime = (this.s_currentFrame - this.s_lastFrame) / 1000;\n    this.s_lastFrame = this.s_currentFrame;\n  }\n\n  /**\n   * メッセージを出力する\n   * @param message 文字列\n   */\n  public static printMessage(message: string): void {\n    console.log(message);\n  }\n\n  static lastUpdate = Date.now();\n\n  static s_currentFrame = 0.0;\n  static s_lastFrame = 0.0;\n  static s_deltaTime = 0.0;\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { csmVector, iterator } from '@framework/type/csmvector';\n\nimport { gl } from './lappdelegate';\n\n/**\n * テクスチャ管理クラス\n * 画像読み込み、管理を行うクラス。\n */\nexport class LAppTextureManager {\n  /**\n   * コンストラクタ\n   */\n  constructor() {\n    this._textures = new csmVector<TextureInfo>();\n  }\n\n  /**\n   * 解放する。\n   */\n  public release(): void {\n    for (\n      let ite: iterator<TextureInfo> = this._textures.begin();\n      ite.notEqual(this._textures.end());\n      ite.preIncrement()\n    ) {\n      gl.deleteTexture(ite.ptr().id);\n    }\n    this._textures = null;\n  }\n\n  /**\n   * 画像読み込み\n   *\n   * @param fileName 読み込む画像ファイルパス名\n   * @param usePremultiply Premult処理を有効にするか\n   * @return 画像情報、読み込み失敗時はnullを返す\n   */\n  public createTextureFromPngFile(\n    fileName: string,\n    usePremultiply: boolean,\n    callback: (textureInfo: TextureInfo) => void\n  ): void {\n    // search loaded texture already\n    for (\n      let ite: iterator<TextureInfo> = this._textures.begin();\n      ite.notEqual(this._textures.end());\n      ite.preIncrement()\n    ) {\n      if (\n        ite.ptr().fileName == fileName &&\n        ite.ptr().usePremultply == usePremultiply\n      ) {\n        // 2回目以降はキャッシュが使用される(待ち時間なし)\n        // WebKitでは同じImageのonloadを再度呼ぶには再インスタンスが必要\n        // 詳細：https://stackoverflow.com/a/5024181\n        ite.ptr().img = new Image();\n        ite.ptr().img.onload = (): void => callback(ite.ptr());\n        ite.ptr().img.src = fileName;\n        return;\n      }\n    }\n\n    // データのオンロードをトリガーにする\n    const img = new Image();\n    img.onload = (): void => {\n      // テクスチャオブジェクトの作成\n      const tex: WebGLTexture = gl.createTexture();\n\n      // テクスチャを選択\n      gl.bindTexture(gl.TEXTURE_2D, tex);\n\n      // テクスチャにピクセルを書き込む\n      gl.texParameteri(\n        gl.TEXTURE_2D,\n        gl.TEXTURE_MIN_FILTER,\n        gl.LINEAR_MIPMAP_LINEAR\n      );\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n      // Premult処理を行わせる\n      if (usePremultiply) {\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n      }\n\n      // テクスチャにピクセルを書き込む\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n\n      // ミップマップを生成\n      gl.generateMipmap(gl.TEXTURE_2D);\n\n      // テクスチャをバインド\n      gl.bindTexture(gl.TEXTURE_2D, null);\n\n      const textureInfo: TextureInfo = new TextureInfo();\n      if (textureInfo != null) {\n        textureInfo.fileName = fileName;\n        textureInfo.width = img.width;\n        textureInfo.height = img.height;\n        textureInfo.id = tex;\n        textureInfo.img = img;\n        textureInfo.usePremultply = usePremultiply;\n        this._textures.pushBack(textureInfo);\n      }\n\n      callback(textureInfo);\n    };\n    img.src = fileName;\n  }\n\n  /**\n   * 画像の解放\n   *\n   * 配列に存在する画像全てを解放する。\n   */\n  public releaseTextures(): void {\n    for (let i = 0; i < this._textures.getSize(); i++) {\n      this._textures.set(i, null);\n    }\n\n    this._textures.clear();\n  }\n\n  /**\n   * 画像の解放\n   *\n   * 指定したテクスチャの画像を解放する。\n   * @param texture 解放するテクスチャ\n   */\n  public releaseTextureByTexture(texture: WebGLTexture): void {\n    for (let i = 0; i < this._textures.getSize(); i++) {\n      if (this._textures.at(i).id != texture) {\n        continue;\n      }\n\n      this._textures.set(i, null);\n      this._textures.remove(i);\n      break;\n    }\n  }\n\n  /**\n   * 画像の解放\n   *\n   * 指定した名前の画像を解放する。\n   * @param fileName 解放する画像ファイルパス名\n   */\n  public releaseTextureByFilePath(fileName: string): void {\n    for (let i = 0; i < this._textures.getSize(); i++) {\n      if (this._textures.at(i).fileName == fileName) {\n        this._textures.set(i, null);\n        this._textures.remove(i);\n        break;\n      }\n    }\n  }\n\n  _textures: csmVector<TextureInfo>;\n}\n\n/**\n * 画像情報構造体\n */\nexport class TextureInfo {\n  img: HTMLImageElement; // 画像\n  id: WebGLTexture = null; // テクスチャ\n  width = 0; // 横幅\n  height = 0; // 高さ\n  usePremultply: boolean; // Premult処理を有効にするか\n  fileName: string; // ファイル名\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { CubismMatrix44 } from '@framework/math/cubismmatrix44';\nimport { CubismViewMatrix } from '@framework/math/cubismviewmatrix';\n\nimport * as LAppDefine from './lappdefine';\nimport { canvas, gl, LAppDelegate } from './lappdelegate';\nimport { LAppLive2DManager } from './lapplive2dmanager';\nimport { LAppPal } from './lapppal';\nimport { LAppSprite } from './lappsprite';\nimport { TextureInfo } from './lapptexturemanager';\nimport { TouchManager } from './touchmanager';\n\n/**\n * 描画クラス。\n */\nexport class LAppView {\n  /**\n   * コンストラクタ\n   */\n  constructor() {\n    this._programId = null;\n    this._back = null;\n    this._gear = null;\n\n    // タッチ関係のイベント管理\n    this._touchManager = new TouchManager();\n\n    // デバイス座標からスクリーン座標に変換するための\n    this._deviceToScreen = new CubismMatrix44();\n\n    // 画面の表示の拡大縮小や移動の変換を行う行列\n    this._viewMatrix = new CubismViewMatrix();\n  }\n\n  /**\n   * 初期化する。\n   */\n  public initialize(): void {\n    const { width, height } = canvas;\n\n    const ratio: number = width / height;\n    const left: number = -ratio;\n    const right: number = ratio;\n    const bottom: number = LAppDefine.ViewLogicalLeft;\n    const top: number = LAppDefine.ViewLogicalRight;\n\n    this._viewMatrix.setScreenRect(left, right, bottom, top); // デバイスに対応する画面の範囲。 Xの左端、Xの右端、Yの下端、Yの上端\n    this._viewMatrix.scale(LAppDefine.ViewScale, LAppDefine.ViewScale);\n\n    this._deviceToScreen.loadIdentity();\n    if (width > height) {\n      const screenW: number = Math.abs(right - left);\n      this._deviceToScreen.scaleRelative(screenW / width, -screenW / width);\n    } else {\n      const screenH: number = Math.abs(top - bottom);\n      this._deviceToScreen.scaleRelative(screenH / height, -screenH / height);\n    }\n    this._deviceToScreen.translateRelative(-width * 0.5, -height * 0.5);\n\n    // 表示範囲の設定\n    this._viewMatrix.setMaxScale(LAppDefine.ViewMaxScale); // 限界拡張率\n    this._viewMatrix.setMinScale(LAppDefine.ViewMinScale); // 限界縮小率\n\n    // 表示できる最大範囲\n    this._viewMatrix.setMaxScreenRect(\n      LAppDefine.ViewLogicalMaxLeft,\n      LAppDefine.ViewLogicalMaxRight,\n      LAppDefine.ViewLogicalMaxBottom,\n      LAppDefine.ViewLogicalMaxTop\n    );\n  }\n\n  /**\n   * 解放する\n   */\n  public release(): void {\n    this._viewMatrix = null;\n    this._touchManager = null;\n    this._deviceToScreen = null;\n\n    this._gear.release();\n    this._gear = null;\n\n    this._back.release();\n    this._back = null;\n\n    gl.deleteProgram(this._programId);\n    this._programId = null;\n  }\n\n  /**\n   * 描画する。\n   */\n  public render(): void {\n    gl.useProgram(this._programId);\n\n    if (this._back) {\n      this._back.render(this._programId);\n    }\n    if (this._gear) {\n      this._gear.render(this._programId);\n    }\n\n    gl.flush();\n\n    const live2DManager: LAppLive2DManager = LAppLive2DManager.getInstance();\n\n    live2DManager.setViewMatrix(this._viewMatrix);\n\n    live2DManager.onUpdate();\n  }\n\n  /**\n   * 画像の初期化を行う。\n   */\n  public initializeSprite(): void {\n    \n    const width: number = canvas.width;\n    const height: number = canvas.height;\n\n    const textureManager = LAppDelegate.getInstance().getTextureManager();\n    const resourcesPath = LAppDefine.ResourcesPath;\n\n    let imageName = '';\n/** \n    // 背景画像初期化\n    imageName = LAppDefine.BackImageName;\n     \n    // 非同期なのでコールバック関数を作成\n    const initBackGroundTexture = (textureInfo: TextureInfo): void => {\n      const x: number = width * 0.5;\n      const y: number = height * 0.5;\n\n      const fwidth = textureInfo.width * 2.0;\n      const fheight = height * 0.95;\n      this._back = new LAppSprite(x, y, fwidth, fheight, textureInfo.id);\n    };\n\n    textureManager.createTextureFromPngFile(\n      resourcesPath + imageName,\n      false,\n      initBackGroundTexture\n    );\n    \n    // 歯車画像初期化\n    imageName = LAppDefine.GearImageName;\n    const initGearTexture = (textureInfo: TextureInfo): void => {\n      const x = width - textureInfo.width * 0.5;\n      const y = height - textureInfo.height * 0.5;\n      const fwidth = textureInfo.width;\n      const fheight = textureInfo.height;\n      this._gear = new LAppSprite(x, y, fwidth, fheight, textureInfo.id);\n    };\n\n    textureManager.createTextureFromPngFile(\n      resourcesPath + imageName,\n      false,\n      initGearTexture\n    );\n    */\n    \n    // シェーダーを作成\n    if (this._programId == null) {\n      this._programId = LAppDelegate.getInstance().createShader();\n    }\n  }\n\n  /**\n   * タッチされた時に呼ばれる。\n   *\n   * @param pointX スクリーンX座標\n   * @param pointY スクリーンY座標\n   */\n  public onTouchesBegan(pointX: number, pointY: number): void {\n    this._touchManager.touchesBegan(pointX, pointY);\n  }\n\n  /**\n   * タッチしているときにポインタが動いたら呼ばれる。\n   *\n   * @param pointX スクリーンX座標\n   * @param pointY スクリーンY座標\n   */\n  public onTouchesMoved(pointX: number, pointY: number): void {\n    const viewX: number = this.transformViewX(this._touchManager.getX());\n    const viewY: number = this.transformViewY(this._touchManager.getY());\n\n    this._touchManager.touchesMoved(pointX, pointY);\n\n    const live2DManager: LAppLive2DManager = LAppLive2DManager.getInstance();\n    live2DManager.onDrag(viewX, viewY);\n  }\n\n  /**\n   * タッチが終了したら呼ばれる。\n   *\n   * @param pointX スクリーンX座標\n   * @param pointY スクリーンY座標\n   */\n  public onTouchesEnded(pointX: number, pointY: number): void {\n    // タッチ終了\n    const live2DManager: LAppLive2DManager = LAppLive2DManager.getInstance();\n    live2DManager.onDrag(0.0, 0.0);\n\n    {\n      // シングルタップ\n      const x: number = this._deviceToScreen.transformX(\n        this._touchManager.getX()\n      ); // 論理座標変換した座標を取得。\n      const y: number = this._deviceToScreen.transformY(\n        this._touchManager.getY()\n      ); // 論理座標変化した座標を取得。\n\n      if (LAppDefine.DebugTouchLogEnable) {\n        LAppPal.printMessage(`[APP]touchesEnded x: ${x} y: ${y}`);\n      }\n      live2DManager.onTap(x, y);\n\n      // 歯車にタップしたか\n      if (this._gear.isHit(pointX, pointY)) {\n        live2DManager.nextScene();\n      }\n    }\n  }\n\n  /**\n   * X座標をView座標に変換する。\n   *\n   * @param deviceX デバイスX座標\n   */\n  public transformViewX(deviceX: number): number {\n    const screenX: number = this._deviceToScreen.transformX(deviceX); // 論理座標変換した座標を取得。\n    return this._viewMatrix.invertTransformX(screenX); // 拡大、縮小、移動後の値。\n  }\n\n  /**\n   * Y座標をView座標に変換する。\n   *\n   * @param deviceY デバイスY座標\n   */\n  public transformViewY(deviceY: number): number {\n    const screenY: number = this._deviceToScreen.transformY(deviceY); // 論理座標変換した座標を取得。\n    return this._viewMatrix.invertTransformY(screenY);\n  }\n\n  /**\n   * X座標をScreen座標に変換する。\n   * @param deviceX デバイスX座標\n   */\n  public transformScreenX(deviceX: number): number {\n    return this._deviceToScreen.transformX(deviceX);\n  }\n\n  /**\n   * Y座標をScreen座標に変換する。\n   *\n   * @param deviceY デバイスY座標\n   */\n  public transformScreenY(deviceY: number): number {\n    return this._deviceToScreen.transformY(deviceY);\n  }\n\n  _touchManager: TouchManager; // タッチマネージャー\n  _deviceToScreen: CubismMatrix44; // デバイスからスクリーンへの行列\n  _viewMatrix: CubismViewMatrix; // viewMatrix\n  _programId: WebGLProgram; // シェーダID\n  _back: LAppSprite; // 背景画像\n  _gear: LAppSprite; // ギア画像\n  _changeModel: boolean; // モデル切り替えフラグ\n  _isClick: boolean; // クリック中\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { LAppPal } from './lapppal';\n\nexport let s_instance: LAppWavFileHandler = null;\n\nexport class LAppWavFileHandler {\n  /**\n   * クラスのインスタンス（シングルトン）を返す。\n   * インスタンスが生成されていない場合は内部でインスタンスを生成する。\n   *\n   * @return クラスのインスタンス\n   */\n  public static getInstance(): LAppWavFileHandler {\n    if (s_instance == null) {\n      s_instance = new LAppWavFileHandler();\n    }\n\n    return s_instance;\n  }\n\n  /**\n   * クラスのインスタンス（シングルトン）を解放する。\n   */\n  public static releaseInstance(): void {\n    if (s_instance != null) {\n      s_instance = void 0;\n    }\n\n    s_instance = null;\n  }\n\n  public update(deltaTimeSeconds: number) {\n    let goalOffset: number;\n    let rms: number;\n\n    // データロード前/ファイル末尾に達した場合は更新しない\n    if (\n      this._pcmData == null ||\n      this._sampleOffset >= this._wavFileInfo._samplesPerChannel\n    ) {\n      this._lastRms = 0.0;\n      return false;\n    }\n\n    // 経過時間後の状態を保持\n    this._userTimeSeconds += deltaTimeSeconds;\n    goalOffset = Math.floor(\n      this._userTimeSeconds * this._wavFileInfo._samplingRate\n    );\n    if (goalOffset > this._wavFileInfo._samplesPerChannel) {\n      goalOffset = this._wavFileInfo._samplesPerChannel;\n    }\n\n    // RMS計測\n    rms = 0.0;\n    for (\n      let channelCount = 0;\n      channelCount < this._wavFileInfo._numberOfChannels;\n      channelCount++\n    ) {\n      for (\n        let sampleCount = this._sampleOffset;\n        sampleCount < goalOffset;\n        sampleCount++\n      ) {\n        const pcm = this._pcmData[channelCount][sampleCount];\n        rms += pcm * pcm;\n      }\n    }\n    rms = Math.sqrt(\n      rms /\n        (this._wavFileInfo._numberOfChannels *\n          (goalOffset - this._sampleOffset))\n    );\n\n    this._lastRms = rms;\n    this._sampleOffset = goalOffset;\n    return true;\n  }\n\n  public start(filePath: string): void {\n    // サンプル位参照位置を初期化\n    this._sampleOffset = 0;\n    this._userTimeSeconds = 0.0;\n\n    // RMS値をリセット\n    this._lastRms = 0.0;\n\n    if (!this.loadWavFile(filePath)) {\n      return;\n    }\n  }\n\n  public getRms(): number {\n    return this._lastRms;\n  }\n\n  public loadWavFile(filePath: string): boolean {\n    let ret = false;\n\n    if (this._pcmData != null) {\n      this.releasePcmData();\n    }\n\n    // ファイルロード\n    const asyncFileLoad = async () => {\n      return fetch(filePath).then(responce => {\n        return responce.arrayBuffer();\n      });\n    };\n\n    const asyncWavFileManager = (async () => {\n      this._byteReader._fileByte = await asyncFileLoad();\n      this._byteReader._fileDataView = new DataView(this._byteReader._fileByte);\n      this._byteReader._fileSize = this._byteReader._fileByte.byteLength;\n      this._byteReader._readOffset = 0;\n\n      // ファイルロードに失敗しているか、先頭のシグネチャ\"RIFF\"を入れるサイズもない場合は失敗\n      if (\n        this._byteReader._fileByte == null ||\n        this._byteReader._fileSize < 4\n      ) {\n        return false;\n      }\n\n      // ファイル名\n      this._wavFileInfo._fileName = filePath;\n\n      try {\n        // シグネチャ \"RIFF\"\n        if (!this._byteReader.getCheckSignature('RIFF')) {\n          ret = false;\n          throw new Error('Cannot find Signeture \"RIFF\".');\n        }\n        // ファイルサイズ-8（読み飛ばし）\n        this._byteReader.get32LittleEndian();\n        // シグネチャ \"WAVE\"\n        if (!this._byteReader.getCheckSignature('WAVE')) {\n          ret = false;\n          throw new Error('Cannot find Signeture \"WAVE\".');\n        }\n        // シグネチャ \"fmt \"\n        if (!this._byteReader.getCheckSignature('fmt ')) {\n          ret = false;\n          throw new Error('Cannot find Signeture \"fmt\".');\n        }\n        // fmtチャンクサイズ\n        const fmtChunkSize = this._byteReader.get32LittleEndian();\n        // フォーマットIDは1（リニアPCM）以外受け付けない\n        if (this._byteReader.get16LittleEndian() != 1) {\n          ret = false;\n          throw new Error('File is not linear PCM.');\n        }\n        // チャンネル数\n        this._wavFileInfo._numberOfChannels =\n          this._byteReader.get16LittleEndian();\n        // サンプリングレート\n        this._wavFileInfo._samplingRate = this._byteReader.get32LittleEndian();\n        // データ速度[byte/sec]（読み飛ばし）\n        this._byteReader.get32LittleEndian();\n        // ブロックサイズ（読み飛ばし）\n        this._byteReader.get16LittleEndian();\n        // 量子化ビット数\n        this._wavFileInfo._bitsPerSample = this._byteReader.get16LittleEndian();\n        // fmtチャンクの拡張部分の読み飛ばし\n        if (fmtChunkSize > 16) {\n          this._byteReader._readOffset += fmtChunkSize - 16;\n        }\n        // \"data\"チャンクが出現するまで読み飛ばし\n        while (\n          !this._byteReader.getCheckSignature('data') &&\n          this._byteReader._readOffset < this._byteReader._fileSize\n        ) {\n          this._byteReader._readOffset +=\n            this._byteReader.get32LittleEndian() + 4;\n        }\n        // ファイル内に\"data\"チャンクが出現しなかった\n        if (this._byteReader._readOffset >= this._byteReader._fileSize) {\n          ret = false;\n          throw new Error('Cannot find \"data\" Chunk.');\n        }\n        // サンプル数\n        {\n          const dataChunkSize = this._byteReader.get32LittleEndian();\n          this._wavFileInfo._samplesPerChannel =\n            (dataChunkSize * 8) /\n            (this._wavFileInfo._bitsPerSample *\n              this._wavFileInfo._numberOfChannels);\n        }\n        // 領域確保\n        this._pcmData = new Array(this._wavFileInfo._numberOfChannels);\n        for (\n          let channelCount = 0;\n          channelCount < this._wavFileInfo._numberOfChannels;\n          channelCount++\n        ) {\n          this._pcmData[channelCount] = new Float32Array(\n            this._wavFileInfo._samplesPerChannel\n          );\n        }\n        // 波形データ取得\n        for (\n          let sampleCount = 0;\n          sampleCount < this._wavFileInfo._samplesPerChannel;\n          sampleCount++\n        ) {\n          for (\n            let channelCount = 0;\n            channelCount < this._wavFileInfo._numberOfChannels;\n            channelCount++\n          ) {\n            this._pcmData[channelCount][sampleCount] = this.getPcmSample();\n          }\n        }\n\n        ret = true;\n      } catch (e) {\n        console.log(e);\n      }\n    })();\n\n    return ret;\n  }\n\n  public getPcmSample(): number {\n    let pcm32;\n\n    // 32ビット幅に拡張してから-1～1の範囲に丸める\n    switch (this._wavFileInfo._bitsPerSample) {\n      case 8:\n        pcm32 = this._byteReader.get8() - 128;\n        pcm32 <<= 24;\n        break;\n      case 16:\n        pcm32 = this._byteReader.get16LittleEndian() << 16;\n        break;\n      case 24:\n        pcm32 = this._byteReader.get24LittleEndian() << 8;\n        break;\n      default:\n        // 対応していないビット幅\n        pcm32 = 0;\n        break;\n    }\n\n    return pcm32 / 2147483647; //Number.MAX_VALUE;\n  }\n\n  public releasePcmData(): void {\n    for (\n      let channelCount = 0;\n      channelCount < this._wavFileInfo._numberOfChannels;\n      channelCount++\n    ) {\n      delete this._pcmData[channelCount];\n    }\n    delete this._pcmData;\n    this._pcmData = null;\n  }\n\n  constructor() {\n    this._pcmData = null;\n    this._userTimeSeconds = 0.0;\n    this._lastRms = 0.0;\n    this._sampleOffset = 0.0;\n    this._wavFileInfo = new WavFileInfo();\n    this._byteReader = new ByteReader();\n  }\n\n  _pcmData: Array<Float32Array>;\n  _userTimeSeconds: number;\n  _lastRms: number;\n  _sampleOffset: number;\n  _wavFileInfo: WavFileInfo;\n  _byteReader: ByteReader;\n  _loadFiletoBytes = (arrayBuffer: ArrayBuffer, length: number): void => {\n    this._byteReader._fileByte = arrayBuffer;\n    this._byteReader._fileDataView = new DataView(this._byteReader._fileByte);\n    this._byteReader._fileSize = length;\n  };\n}\n\nexport class WavFileInfo {\n  constructor() {\n    this._fileName = '';\n    this._numberOfChannels = 0;\n    this._bitsPerSample = 0;\n    this._samplingRate = 0;\n    this._samplesPerChannel = 0;\n  }\n\n  _fileName: string; ///< ファイル名\n  _numberOfChannels: number; ///< チャンネル数\n  _bitsPerSample: number; ///< サンプルあたりビット数\n  _samplingRate: number; ///< サンプリングレート\n  _samplesPerChannel: number; ///< 1チャンネルあたり総サンプル数\n}\n\nexport class ByteReader {\n  constructor() {\n    this._fileByte = null;\n    this._fileDataView = null;\n    this._fileSize = 0;\n    this._readOffset = 0;\n  }\n\n  /**\n   * @brief 8ビット読み込み\n   * @return Csm::csmUint8 読み取った8ビット値\n   */\n  public get8(): number {\n    const ret = this._fileDataView.getUint8(this._readOffset);\n    this._readOffset++;\n    return ret;\n  }\n\n  /**\n   * @brief 16ビット読み込み（リトルエンディアン）\n   * @return Csm::csmUint16 読み取った16ビット値\n   */\n  public get16LittleEndian(): number {\n    const ret =\n      (this._fileDataView.getUint8(this._readOffset + 1) << 8) |\n      this._fileDataView.getUint8(this._readOffset);\n    this._readOffset += 2;\n    return ret;\n  }\n\n  /**\n   * @brief 24ビット読み込み（リトルエンディアン）\n   * @return Csm::csmUint32 読み取った24ビット値（下位24ビットに設定）\n   */\n  public get24LittleEndian(): number {\n    const ret =\n      (this._fileDataView.getUint8(this._readOffset + 2) << 16) |\n      (this._fileDataView.getUint8(this._readOffset + 1) << 8) |\n      this._fileDataView.getUint8(this._readOffset);\n    this._readOffset += 3;\n    return ret;\n  }\n\n  /**\n   * @brief 32ビット読み込み（リトルエンディアン）\n   * @return Csm::csmUint32 読み取った32ビット値\n   */\n  public get32LittleEndian(): number {\n    const ret =\n      (this._fileDataView.getUint8(this._readOffset + 3) << 24) |\n      (this._fileDataView.getUint8(this._readOffset + 2) << 16) |\n      (this._fileDataView.getUint8(this._readOffset + 1) << 8) |\n      this._fileDataView.getUint8(this._readOffset);\n    this._readOffset += 4;\n    return ret;\n  }\n\n  /**\n   * @brief シグネチャの取得と参照文字列との一致チェック\n   * @param[in] reference 検査対象のシグネチャ文字列\n   * @retval  true    一致している\n   * @retval  false   一致していない\n   */\n  public getCheckSignature(reference: string): boolean {\n    const getSignature: Uint8Array = new Uint8Array(4);\n    const referenceString: Uint8Array = new TextEncoder().encode(reference);\n    if (reference.length != 4) {\n      return false;\n    }\n    for (let signatureOffset = 0; signatureOffset < 4; signatureOffset++) {\n      getSignature[signatureOffset] = this.get8();\n    }\n    return (\n      getSignature[0] == referenceString[0] &&\n      getSignature[1] == referenceString[1] &&\n      getSignature[2] == referenceString[2] &&\n      getSignature[3] == referenceString[3]\n    );\n  }\n\n  _fileByte: ArrayBuffer; ///< ロードしたファイルのバイト列\n  _fileDataView: DataView;\n  _fileSize: number; ///< ファイルサイズ\n  _readOffset: number; ///< ファイル参照位置\n}\n","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nexport class TouchManager {\n  /**\n   * コンストラクタ\n   */\n  constructor() {\n    this._startX = 0.0;\n    this._startY = 0.0;\n    this._lastX = 0.0;\n    this._lastY = 0.0;\n    this._lastX1 = 0.0;\n    this._lastY1 = 0.0;\n    this._lastX2 = 0.0;\n    this._lastY2 = 0.0;\n    this._lastTouchDistance = 0.0;\n    this._deltaX = 0.0;\n    this._deltaY = 0.0;\n    this._scale = 1.0;\n    this._touchSingle = false;\n    this._flipAvailable = false;\n  }\n\n  public getCenterX(): number {\n    return this._lastX;\n  }\n\n  public getCenterY(): number {\n    return this._lastY;\n  }\n\n  public getDeltaX(): number {\n    return this._deltaX;\n  }\n\n  public getDeltaY(): number {\n    return this._deltaY;\n  }\n\n  public getStartX(): number {\n    return this._startX;\n  }\n\n  public getStartY(): number {\n    return this._startY;\n  }\n\n  public getScale(): number {\n    return this._scale;\n  }\n\n  public getX(): number {\n    return this._lastX;\n  }\n\n  public getY(): number {\n    return this._lastY;\n  }\n\n  public getX1(): number {\n    return this._lastX1;\n  }\n\n  public getY1(): number {\n    return this._lastY1;\n  }\n\n  public getX2(): number {\n    return this._lastX2;\n  }\n\n  public getY2(): number {\n    return this._lastY2;\n  }\n\n  public isSingleTouch(): boolean {\n    return this._touchSingle;\n  }\n\n  public isFlickAvailable(): boolean {\n    return this._flipAvailable;\n  }\n\n  public disableFlick(): void {\n    this._flipAvailable = false;\n  }\n\n  /**\n   * タッチ開始時イベント\n   * @param deviceX タッチした画面のxの値\n   * @param deviceY タッチした画面のyの値\n   */\n  public touchesBegan(deviceX: number, deviceY: number): void {\n    this._lastX = deviceX;\n    this._lastY = deviceY;\n    this._startX = deviceX;\n    this._startY = deviceY;\n    this._lastTouchDistance = -1.0;\n    this._flipAvailable = true;\n    this._touchSingle = true;\n  }\n\n  /**\n   * ドラッグ時のイベント\n   * @param deviceX タッチした画面のxの値\n   * @param deviceY タッチした画面のyの値\n   */\n  public touchesMoved(deviceX: number, deviceY: number): void {\n    this._lastX = deviceX;\n    this._lastY = deviceY;\n    this._lastTouchDistance = -1.0;\n    this._touchSingle = true;\n  }\n\n  /**\n   * フリックの距離測定\n   * @return フリック距離\n   */\n  public getFlickDistance(): number {\n    return this.calculateDistance(\n      this._startX,\n      this._startY,\n      this._lastX,\n      this._lastY\n    );\n  }\n\n  /**\n   * 点１から点２への距離を求める\n   *\n   * @param x1 １つ目のタッチした画面のxの値\n   * @param y1 １つ目のタッチした画面のyの値\n   * @param x2 ２つ目のタッチした画面のxの値\n   * @param y2 ２つ目のタッチした画面のyの値\n   */\n  public calculateDistance(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number\n  ): number {\n    return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n  }\n\n  /**\n   * ２つ目の値から、移動量を求める。\n   * 違う方向の場合は移動量０。同じ方向の場合は、絶対値が小さい方の値を参照する。\n   *\n   * @param v1 １つ目の移動量\n   * @param v2 ２つ目の移動量\n   *\n   * @return 小さい方の移動量\n   */\n  public calculateMovingAmount(v1: number, v2: number): number {\n    if (v1 > 0.0 != v2 > 0.0) {\n      return 0.0;\n    }\n\n    const sign: number = v1 > 0.0 ? 1.0 : -1.0;\n    const absoluteValue1 = Math.abs(v1);\n    const absoluteValue2 = Math.abs(v2);\n    return (\n      sign * (absoluteValue1 < absoluteValue2 ? absoluteValue1 : absoluteValue2)\n    );\n  }\n\n  _startY: number; // タッチを開始した時のxの値\n  _startX: number; // タッチを開始した時のyの値\n  _lastX: number; // シングルタッチ時のxの値\n  _lastY: number; // シングルタッチ時のyの値\n  _lastX1: number; // ダブルタッチ時の一つ目のxの値\n  _lastY1: number; // ダブルタッチ時の一つ目のyの値\n  _lastX2: number; // ダブルタッチ時の二つ目のxの値\n  _lastY2: number; // ダブルタッチ時の二つ目のyの値\n  _lastTouchDistance: number; // 2本以上でタッチしたときの指の距離\n  _deltaX: number; // 前回の値から今回の値へのxの移動距離。\n  _deltaY: number; // 前回の値から今回の値へのyの移動距離。\n  _scale: number; // このフレームで掛け合わせる拡大率。拡大操作中以外は1。\n  _touchSingle: boolean; // シングルタッチ時はtrue\n  _flipAvailable: boolean; // フリップが有効かどうか\n}\n","var global =\n  (typeof globalThis !== 'undefined' && globalThis) ||\n  (typeof self !== 'undefined' && self) ||\n  (typeof global !== 'undefined' && global)\n\nvar support = {\n  searchParams: 'URLSearchParams' in global,\n  iterable: 'Symbol' in global && 'iterator' in Symbol,\n  blob:\n    'FileReader' in global &&\n    'Blob' in global &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in global,\n  arrayBuffer: 'ArrayBuffer' in global\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    /*\n      fetch-mock wraps the Response object in an ES6 Proxy to\n      provide useful test harness features such as flush. However, on\n      ES5 browsers without fetch or Proxy support pollyfills must be used;\n      the proxy-pollyfill is unable to proxy an attribute unless it exists\n      on the object before the Proxy is created. This change ensures\n      Response.bodyUsed exists on the instance, while maintaining the\n      semantic of setting Request.bodyUsed in the constructor before\n      _initBody is called.\n    */\n    this.bodyUsed = this.bodyUsed\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this)\n        if (isConsumed) {\n          return isConsumed\n        }\n        if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  if (!(this instanceof Request)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n\n  if (this.method === 'GET' || this.method === 'HEAD') {\n    if (options.cache === 'no-store' || options.cache === 'no-cache') {\n      // Search for a '_' parameter in the query string\n      var reParamSearch = /([?&])_=[^&]*/\n      if (reParamSearch.test(this.url)) {\n        // If it already exists then set the value with the current time\n        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())\n      } else {\n        // Otherwise add a new '_' parameter to the end with the current time\n        var reQueryString = /\\?/\n        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()\n      }\n    }\n  }\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n  // https://github.com/github/fetch/issues/748\n  // https://github.com/zloirock/core-js/issues/751\n  preProcessedHeaders\n    .split('\\r')\n    .map(function(header) {\n      return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n    })\n    .forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!(this instanceof Response)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = options.statusText === undefined ? '' : '' + options.statusText\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = global.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      setTimeout(function() {\n        resolve(new Response(body, options))\n      }, 0)\n    }\n\n    xhr.onerror = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.ontimeout = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.onabort = function() {\n      setTimeout(function() {\n        reject(new DOMException('Aborted', 'AbortError'))\n      }, 0)\n    }\n\n    function fixUrl(url) {\n      try {\n        return url === '' && global.location.href ? global.location.href : url\n      } catch (e) {\n        return url\n      }\n    }\n\n    xhr.open(request.method, fixUrl(request.url), true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr) {\n      if (support.blob) {\n        xhr.responseType = 'blob'\n      } else if (\n        support.arrayBuffer &&\n        request.headers.get('Content-Type') &&\n        request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1\n      ) {\n        xhr.responseType = 'arraybuffer'\n      }\n    }\n\n    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n      Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n        xhr.setRequestHeader(name, normalizeValue(init.headers[name]))\n      })\n    } else {\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n    }\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!global.fetch) {\n  global.fetch = fetch\n  global.Headers = Headers\n  global.Request = Request\n  global.Response = Response\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Copyright(c) Live2D Inc. All rights reserved.\n *\n * Use of this source code is governed by the Live2D Open Software license\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\n */\n\nimport { LAppDelegate } from './lappdelegate';\nimport * as LAppDefine from './lappdefine';\n\n/**\n * ブラウザロード後の処理\n */\nwindow.onload = (): void => {\n  // create the application instance\n  if (LAppDelegate.getInstance().initialize() == false) {\n    return;\n  }\n\n  LAppDelegate.getInstance().run();\n};\n\n/**\n * 終了時の処理\n */\nwindow.onbeforeunload = (): void => LAppDelegate.releaseInstance();\n\n/**\n * Process when changing screen size.\n */\n\n/** \nwindow.onresize = () => {\n  if (LAppDefine.CanvasSize === 'auto') {\n    LAppDelegate.getInstance().onResize();\n  }\n};\n*/\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}